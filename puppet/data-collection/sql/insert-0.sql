INSERT INTO `bugs_fixes` (`system`, `issue_id`, `pull_request_id`, `number`, `title`, `body`, `issue_url`, `pull_request_url`, `created_at`, `closed_at`, `updated_at`, `state`, `labels`, `comments`, `comments_url`, `commits`, `additions`, `deletions`, `changed_files`, `commits_data`, `bug_report_url`, `bug_fix_url`) VALUES
('puppet', 10975, 285497891, 7555, 'Cloud provisioner VMware testing', '', 'https://tickets.puppetlabs.com/browse/PUP-29', 'https://github.com/puppetlabs/puppet/pull/7555', '2013-06-17T17:50:53.000-0700', '2013-06-17T18:00:26.000-0700', '2013-06-17T18:00:26.000-0700', 'Closed', '', 0, '0', 1, 50, 3, 2, '418341ca1cf83314ccd4c308e557cb125635cad7', 'https://tickets.puppetlabs.com/browse/PUP-29', 'https://github.com/puppetlabs/puppet/pull/7555'),
('puppet', 11318, 334947456, 7802, 'Missing files are always treated as changed', 'The implementation of `Puppet::Util::LoadedFile` tracks a file by monitoring the file ctime. If a file is nonexistent and cannot have a ctime, every time the file is checked for changes ctime will be set to the current time. Since this value is constantly changing the file will always be marked as changed.\n\n### Expected behavior\n\nIf a file is initially absent and is still absent when rechecked, it should be unchanged.\n\n### Actual behavior\n\nA file that is absent will be marked as always changed.\n\n- - -\n\n\nNote: as of commit [3a19fff](https://github.com/puppetlabs/puppet/commit/3a19fff) the LoadedFile has been refactored and renamed WatchedFile but this behavior is still present.', 'https://tickets.puppetlabs.com/browse/PUP-66', 'https://github.com/puppetlabs/puppet/pull/7802', '2013-06-24T18:49:23.000-0700', '2013-07-10T14:20:42.000-0700', '2013-07-10T14:20:42.000-0700', 'Closed', 'redmine', 1, '0', 3, 112, 0, 3, '230794600748320d1dfabc1a8ec50e94cb2fa183', 'https://tickets.puppetlabs.com/browse/PUP-66', 'https://github.com/puppetlabs/puppet/pull/7802'),
('puppet', 12274, 13277439, 2415, 'Schedule resources no longer showing as skipped', '', 'https://tickets.puppetlabs.com/browse/PUP-187', 'https://github.com/puppetlabs/puppet/pull/2415', '2013-07-19T14:27:59.000-0700', '2013-08-01T10:49:17.000-0700', '2013-08-01T10:49:17.000-0700', 'Closed', 'regression', 4, '0', 1, 29, 0, 4, 'b61fa207bc2084acdf4935d15d4c0e90d63074b4', 'https://tickets.puppetlabs.com/browse/PUP-187', 'https://github.com/puppetlabs/puppet/pull/2415'),
('puppet', 11361, 765532053, 8800, 'Puppet 2.7 specs are failing on 1.8.5, but marked as success', '', 'https://tickets.puppetlabs.com/browse/PUP-82', 'https://github.com/puppetlabs/puppet/pull/8800', '2013-06-24T22:52:39.000-0700', '2013-09-03T09:07:33.000-0700', '2013-09-03T09:07:33.000-0700', 'Closed', 'code-orange-deferred', 1, '0', 1, 35, 0, 2, '17dacc44dc3e7da14652af0736bed56da5e1b891', 'https://tickets.puppetlabs.com/browse/PUP-82', 'https://github.com/puppetlabs/puppet/pull/8800'),
('puppet', 11335, 691543072, 8701, 'Security fix using safe_yaml caused a drastic performance hit in 2.7.22', '', 'https://tickets.puppetlabs.com/browse/PUP-68', 'https://github.com/puppetlabs/puppet/pull/8701', '2013-06-24T21:35:05.000-0700', '2013-09-03T09:15:04.000-0700', '2013-09-03T09:15:04.000-0700', 'Closed', '', 3, '0', 1, 72, 5, 8, '70426ea1effce8aaa545db911c3f340c09c25f56', 'https://tickets.puppetlabs.com/browse/PUP-68', 'https://github.com/puppetlabs/puppet/pull/8701'),
('puppet', 13764, 23193747, 3225, 'Publish reboot module under puppetlabs namespace', 'The reboot module currently lives in https://github.com/joshcooper/puppetlabs-reboot. We need create a puppetlabs fork, remove the `prompt` parameter, and publish to the forge.', 'https://tickets.puppetlabs.com/browse/PUP-270', 'https://github.com/puppetlabs/puppet/pull/3225', '2013-08-28T11:42:58.000-0700', '2013-09-18T23:46:51.000-0700', '2013-09-18T23:46:51.000-0700', 'Closed', 'windows', 1, '0', 1, 4, 4, 2, 'a55f3e93a584df6687e1f22bd4b8cc6ba3fbc882', 'https://tickets.puppetlabs.com/browse/PUP-270', 'https://github.com/puppetlabs/puppet/pull/3225'),
('puppet', 14960, 29549408, 3624, 'Older agents can"t backup files to 3.3.0 masters', '', 'https://tickets.puppetlabs.com/browse/PUP-402', 'https://github.com/puppetlabs/puppet/pull/3624', '2013-09-19T10:24:00.000-0700', '2013-09-20T13:52:35.000-0700', '2013-09-20T13:52:35.000-0700', 'Resolved', '', 0, '0', 1, 16, 13, 1, 'c300dbac8a3f079f6f4bf6e8b1ebc45d71c0b0bd', 'https://tickets.puppetlabs.com/browse/PUP-402', 'https://github.com/puppetlabs/puppet/pull/3624'),
('puppet', 11662, 42765879, 4174, 'Customer Support: Facter issues on facter lib path on AIX', 'This is a support escalation. See http://projects.puppetlabs.com/issues/21577 for more information. \n\nThis came in from Alex Dryer on Support Goalie.', 'https://tickets.puppetlabs.com/browse/PUP-145', 'https://github.com/puppetlabs/puppet/pull/4174', '2013-07-02T23:37:39.000-0700', '2013-09-30T12:34:16.000-0700', '2013-09-30T12:34:16.000-0700', 'Closed', '', 1, '0', 9, 232, 44, 6, '923a76620e199daf42f3e29348a56223a1d8e7a6', 'https://tickets.puppetlabs.com/browse/PUP-145', 'https://github.com/puppetlabs/puppet/pull/4174'),
('puppet', 11952, 338726615, 7815, 'Generate and use UUID for catalog generation and retrieval', 'In PE-943, [~chris] describes generating using a UUID to help puppetdb (and therefore burgundy) link between the catalog and report. This is a generalized capability that we roadmapped and need in the Puppet ecosystem, so we should work on a generalized implementation rather than having two different things.', 'https://tickets.puppetlabs.com/browse/PUP-153', 'https://github.com/puppetlabs/puppet/pull/7815', '2013-07-10T14:26:40.000-0700', '2013-09-30T12:34:17.000-0700', '2013-09-30T12:34:17.000-0700', 'Resolved', '', 3, '0', 1, 218, 28, 11, 'b6ab1697afd29b6293d133a345a4a51cd258457d', 'https://tickets.puppetlabs.com/browse/PUP-153', 'https://github.com/puppetlabs/puppet/pull/7815'),
('puppet', 12704, 0, 0, 'Puppet Monkey patch "def instance_variables" clashing with SOAP Class...', 'As discussed on Puppet-dev (https://groups.google.com/forum/#!topic/puppet-dev/bU0_X_MOiuo) and Puppet-users (https://groups.google.com/forum/#!searchin/puppet-users/F5/puppet-users/_0d3_yj5xtY/7Kc3K-47RYsJ), a monkey patch applied to Puppet in 1f4e44c26 is breaking Puppet’s ability to use the SOAP ruby class.\n\nSpecific issue is in lib/puppet/util/monkey_patches.rb#L188-L194.\n\nAndy Parker has suggested that it should be possible for this code to be removed, however need to ensure that there are no unexpected adverse results… However until that happens, any module wanting to use SOAP, such as the Puppetlabs-F5 module, will not work beyond v3.0.', 'https://tickets.puppetlabs.com/browse/PUP-205', '', '2013-07-31T21:07:13.000-0700', '2013-09-30T12:34:17.000-0700', '2013-09-30T12:34:17.000-0700', 'Closed', '', 1, '0', 0, 0, 0, 0, 'bcd432407d6e61815e70b829620a2e3a0b35efb1', 'https://tickets.puppetlabs.com/browse/PUP-205', 'https://github.com/puppetlabs/puppet/commit/bcd432407d6e61815e70b829620a2e3a0b35efb1'),
('puppet', 13723, 27735295, 3498, 'Puppet::Settings misusing WatchedFile, causing Daemon to abort if reparsing configs.', 'See redmine issue for details.', 'https://tickets.puppetlabs.com/browse/PUP-269', 'https://github.com/puppetlabs/puppet/pull/3498', '2013-08-27T17:24:12.000-0700', '2013-09-30T12:34:18.000-0700', '2013-09-30T12:34:18.000-0700', 'Resolved', '', 0, '0', 1, 19, 71, 13, 'd9eeea471aaa2cdfe5f3b116d3aeeffa1a8fa6e4', 'https://tickets.puppetlabs.com/browse/PUP-269', 'https://github.com/puppetlabs/puppet/pull/3498'),
('puppet', 11360, 563394374, 8498, 'Fix bad face action regex', 'In lib/puppet/interface/action.rb, we try to validate the action name:\n\n<pre>\n    raise "#{name.inspect} is an invalid action name" unless name.to_s =~ /^[a-z]\w*$/\n</pre>\n\nHowever, this doesn"t protect against multiline matches. Then we define a method using the name:\n\n<pre>\n    file    = __FILE__ + "+eval[wrapper]"\n    line    = __LINE__ + 2 # &lt;== points to the same line as "def" in the wrapper.\n    wrapper = &lt;&lt;WRAPPER\ndef #{@name}(#{decl.join(", ")})\n</pre>\n\nAnd then we `eval` that:\n\n<pre>\n      @face.class_eval do eval wrapper, nil, file, line end\n      # or\n      @face.instance_eval do eval wrapper, nil, file, line end\n</pre>\n\nAt a minimum, we should be applying a regexp of `/\A[a-z]\w*\Z/`. We should also not be using `eval` to define a method. \n', 'https://tickets.puppetlabs.com/browse/PUP-81', 'https://github.com/puppetlabs/puppet/pull/8498', '2013-06-24T22:50:37.000-0700', '2013-10-22T14:53:54.000-0700', '2013-10-22T14:53:54.000-0700', 'Closed', 'code-orange-deferred', 2, '0', 1, 4, 10, 1, '73210132efe54494ecd4ab3d4d39df25d52d87e9', 'https://tickets.puppetlabs.com/browse/PUP-81', 'https://github.com/puppetlabs/puppet/pull/8498'),
('puppet', 16835, 56572793, 4583, 'Rewrite html renderer for rdoc on ruby 1.9', 'We use a subclass of the built-in rdoc renderer from rdoc 1. This renderer was completely rewritten and doesn"t exist in current rdoc. If we want to keep our rendering customization, we"ll have to rewrite this. I think it can be much simpler than the previous version and still be good enough.', 'https://tickets.puppetlabs.com/browse/PUP-569', 'https://github.com/puppetlabs/puppet/pull/4583', '2013-10-16T13:06:42.000-0700', '2013-11-11T16:02:09.000-0800', '2013-11-11T16:02:09.000-0800', 'Closed', 'redmine', 1, '0', 2, 73, 12, 7, '84d00b155c551af390b30daa3f9a37fc1280b016', 'https://tickets.puppetlabs.com/browse/PUP-569', 'https://github.com/puppetlabs/puppet/pull/4583'),
('puppet', 14457, 20920344, 3058, 'Puppet does not manage :vardir owner group', '', 'https://tickets.puppetlabs.com/browse/PUP-319', 'https://github.com/puppetlabs/puppet/pull/3058', '2013-09-11T13:52:29.000-0700', '2013-11-11T16:40:01.000-0800', '2013-11-11T16:40:01.000-0800', 'Closed', '', 2, '0', 1, 76, 0, 1, '0447ea0271966703c246e945a5d9e1d6c6d7e5b0', 'https://tickets.puppetlabs.com/browse/PUP-319', 'https://github.com/puppetlabs/puppet/pull/3058'),
('puppet', 18972, 165263981, 6578, 'Package resource documentation for ensure doesn"t specify default value', '(from a customer) \r\n\r\nI"ve noticed a weird situation in using the `package` resource.\r\nAs stated in http://docs.puppetlabs.com/references/latest/type.html#package-attribute-ensure, the "ensure" attribute can have one of the following values: present/installed, absent, purged, held, and latest. It"s not stated in there what the default value of the attribute is.\r\n\r\nPlease specify clearly in the docs what the default value of that attribute is.\r\n\r\nSidenote:\r\nI was expecting that by setting "ensure => undef" or not setting it at all, puppet would not try to install the package, however it still does.\r\nSo:\r\npackage { "pkgname": }, or package { "pkgname": ensure => undef } would still install the package (I"m actually using a more complicated manifest with some dependencies, but this illustrates the issue).', 'https://tickets.puppetlabs.com/browse/PUP-763', 'https://github.com/puppetlabs/puppet/pull/6578', '2013-11-15T08:28:58.000-0800', '2013-11-15T09:57:34.000-0800', '2013-11-15T09:57:34.000-0800', 'Closed', 'customer;redmine', 1, '0', 1, 129, 14, 2, '4d48014dacf89305b4d273a5e2ae984155a09ca2', 'https://tickets.puppetlabs.com/browse/PUP-763', 'https://github.com/puppetlabs/puppet/pull/6578'),
('puppet', 20739, 670064801, 8635, 'Windows service doesn"t accept extra arguments properly', 'Checking the code responsible of managing the windows service, there is an option to pass extra arguments to the puppet run. \r\n\r\nHowever, when I try to pass additional parameters (like --masterport=XXXX, etc), the options are not properly parsed by the service.rb class.\r\n\r\nAfter taking a look to the code, it appears to be easy to fix, so I"ll post a possible solution for this issue.', 'https://tickets.puppetlabs.com/browse/PUP-982', 'https://github.com/puppetlabs/puppet/pull/8635', '2013-12-10T07:39:09.000-0800', '2013-12-10T07:42:05.000-0800', '2013-12-10T07:42:05.000-0800', 'Closed', 'redmine;windows', 1, '0', 1, 32, 4, 2, 'f33a531d71a960360c519e38e977b37112fc99b3', 'https://tickets.puppetlabs.com/browse/PUP-982', 'https://github.com/puppetlabs/puppet/pull/8635'),
('puppet', 16149, 46578482, 4313, 'Resource titles longer than 1024 corrupt state.yaml under Ruby 1.9.x', 'Ruby 1.9.x switched to the Psych YAML parser which is much stricter than the parser used by 1.8.x. In particular [from the YAML 1.1 spec|http://yaml.org/spec/1.1]:\r\n\r\nbq. to avoid unbound lookahead in YAML processors, simple keys are restricted to a single line and must not span more than 1024 stream characters\r\n\r\nThis means that hash keys in YAML files cannot exceed 1024 characters. Puppet can construct such a hash key when the agent creates `state.yaml` files. Resources are added to this file by [creating a hash key|https://github.com/puppetlabs/puppet/blob/3.2.4/lib/puppet/util/storage.rb#L24-L28] from the resource object. For Resources, this ends up calling the `to_s` method which [does the following|https://github.com/puppetlabs/puppet/blob/3.2.4/lib/puppet/resource.rb#L244-L246]:\r\n\r\n{code}\r\ndef to_s\r\n  "#{type}[#{title}]"\r\nend\r\n{code}\r\n\r\nThis means any resource with a `title` longer than 1024 will spur the creation of an invalid YAML file. For example, the following ssh key resource:\r\n\r\n{code}\r\nssh_authorized_key { "ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff":\r\nensure => present,\r\nuser => "root",\r\ntype => "rsa",\r\nkey => "foo",\r\n}\r\n{code}\r\n\r\nWill result in successful creation of the key in `/root/.ssh/authorized_keys`, but a failure of the master to process a YAML report:\r\n\r\n{code}\r\nError: Could not send report: Error 400 on SERVER: (<unknown>): could not find expected ":" while scanning a simple key at line 2685 column 5\r\n{code}\r\n\r\nFollowed by failed agent runs due to `state.yaml`:\r\n\r\n{code}\r\nError: Could not run Puppet configuration client: (<unknown>): could not find expected ":" while scanning a simple key at line 397 column 3\r\nError: Could not run: can"t convert Puppet::Util::Log into Integer\r\n{code}', 'https://tickets.puppetlabs.com/browse/PUP-508', 'https://github.com/puppetlabs/puppet/pull/4313', '2013-10-02T14:35:11.000-0700', '2013-12-11T07:16:17.000-0800', '2013-12-11T07:16:17.000-0800', 'Closed', '', 2, '0', 1, 1, 1, 1, 'f7aabe4559a5f584ba4acbe9be4cf399148b6477', 'https://tickets.puppetlabs.com/browse/PUP-508', 'https://github.com/puppetlabs/puppet/pull/4313'),
('puppet', 20342, 244518722, 7334, 'Puppet on Windows can fail to run depending on load order ', 'The Puppet::Util::Windows::Security module doesn"t require "ffi" before using it. The gem is required in other places, though so this seems to be dependent on the load order.\r\n\r\n<pre>\r\n$ ssh Administrator@josh-ny1po54a0o.solar.lan cmd.exe /c puppet agent  --test\r\nC:/ruby193/lib/ruby/site_ruby/1.9.1/puppet/util/windows/security.rb:635:in `&lt;module:API>": uninitialized constant Puppet::Util::Windows::Security::API::FFI (NameError)\r\n	from C:/ruby193/lib/ruby/site_ruby/1.9.1/puppet/util/windows/security.rb:634:in `&lt;module:Security>"\r\n	from C:/ruby193/lib/ruby/site_ruby/1.9.1/puppet/util/windows/security.rb:77:in `&lt;top (required)>"\r\n	from C:/ruby193/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:in `require"\r\n	from C:/ruby193/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:in `require"\r\n	from C:/ruby193/lib/ruby/site_ruby/1.9.1/puppet/util/windows.rb:6:in `&lt;module:Windows>"\r\n	from C:/ruby193/lib/ruby/site_ruby/1.9.1/puppet/util/windows.rb:1:in `&lt;top (required)>"\r\n	from C:/ruby193/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:in `require"\r\n	from C:/ruby193/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:in `require"\r\n	from C:/ruby193/lib/ruby/site_ruby/1.9.1/puppet/util/monkey_patches.rb:190:in `&lt;top (required)>"\r\n	from C:/ruby193/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:in `require"\r\n	from C:/ruby193/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:in `require"\r\n	from C:/ruby193/lib/ruby/site_ruby/1.9.1/puppet/util.rb:16:in `&lt;module:Util>"\r\n	from C:/ruby193/lib/ruby/site_ruby/1.9.1/puppet/util.rb:15:in `&lt;module:Puppet>"\r\n	from C:/ruby193/lib/ruby/site_ruby/1.9.1/puppet/util.rb:14:in `&lt;top (required)>"\r\n	from C:/ruby193/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:in `require"\r\n	from C:/ruby193/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:in `require"\r\n	from C:/ruby193/lib/ruby/site_ruby/1.9.1/puppet.rb:8:in `&lt;top (required)>"\r\n	from C:/ruby193/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:in `require"\r\n	from C:/ruby193/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:in `require"\r\n	from C:/ruby193/lib/ruby/site_ruby/1.9.1/puppet/util/command_line.rb:12:in `&lt;top (required)>"\r\n	from C:/ruby193/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:in `require"\r\n	from C:/ruby193/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:in `require"\r\n	from C:/ruby193/bin/puppet:3:in `&lt;main>"\r\n</pre>\r\n\r\nThe fix is simple, add `require "ffi"`', 'https://tickets.puppetlabs.com/browse/PUP-943', 'https://github.com/puppetlabs/puppet/pull/7334', '2013-12-05T14:05:49.000-0800', '2013-12-19T16:52:49.000-0800', '2013-12-19T16:52:49.000-0800', 'Closed', 'redmine;windows', 2, '0', 1, 23, 3, 3, 'd82634c9427e3cc343b06b00677c7c3b72b1c74d', 'https://tickets.puppetlabs.com/browse/PUP-943', 'https://github.com/puppetlabs/puppet/pull/7334'),
('puppet', 19065, 393363292, 8057, '$trusted hash is not immutable; can be modified in DSL and templates', 'https://github.com/nfagerlund/evil-made-manifest/blob/master/trusted_hash.pp\r\n\r\nThe code linked above shows how to mutate the $trusted hash with hashed_node_data set to true -- you can add new keys in the DSL, and can overwrite existing keys in a template. In other words, it behaves exactly like a normal hash. \r\n\r\nPer [~henrik.lindberg] in hipchat this morning, that"s a bug, and the $trusted hash is meant to fail hard with an error when modified. ', 'https://tickets.puppetlabs.com/browse/PUP-773', 'https://github.com/puppetlabs/puppet/pull/8057', '2013-11-18T11:17:44.000-0800', '2013-12-19T16:55:48.000-0800', '2013-12-19T16:55:48.000-0800', 'Closed', '', 2, '0', 1, 67, 3, 3, '796d179ee6011d46f159c5ad9a6ac7593a8a4916', 'https://tickets.puppetlabs.com/browse/PUP-773', 'https://github.com/puppetlabs/puppet/pull/8057'),
('puppet', 18989, 125519094, 5980, 'Rename "hashed_node_data" and "clientcert"', 'Item 1: \r\n\r\nIn the comments to DOC-283, [~henrik.lindberg] said the setting "hashed_node_data" was named because it resulted in node data being stored in a hash. That"s not what the name implies, though: it seems to be stating that certain node data will be run through some kind of cryptographic hash function before being presented to the user. This is confusing. \r\n\r\nInstead, the setting"s name should clearly indicate that it makes Puppet expose special verified data. To make it more memorable and self-explaining, it should also tie back to the name of the hash it exposes ($trusted). \r\n\r\nI suggest renaming the setting to "trusted_node_data" or "enable_trusted_data." The former has the benefit of starting with "t," so a user searching alphabetically through our list of 200+ settings will find it faster. \r\n\r\nItem 2:\r\n\r\nThe name of the existing un-trusted certname variable ($clientcert) was poorly chosen: it muddies the waters with yet another unnecessary name for the certname, it confounds expections (I"ve watched even advanced users mistakenly try to use $certname), and it has a frustrating resemblance to the "hostcert" setting (which is a path to a file on disk). Furthermore, it"s not even accurate when using puppet apply, since a standalone node can"t really be called a "client." \r\n\r\nI"ve hated it forever and this is our one chance to ditch it. We should rename that key in the $trusted hash to "certname." ', 'https://tickets.puppetlabs.com/browse/PUP-765', 'https://github.com/puppetlabs/puppet/pull/5980', '2013-11-15T11:57:07.000-0800', '2013-12-19T16:58:58.000-0800', '2013-12-19T16:58:58.000-0800', 'Closed', '', 4, '0', 1, 0, 2, 1, '6f0e92737e149408882a92732ab9b8c920343e34', 'https://tickets.puppetlabs.com/browse/PUP-765', 'https://github.com/puppetlabs/puppet/pull/5980'),
('puppet', 14997, 109795636, 5699, 'Regression on arrays and puppet resources using the name attribute', '', 'https://tickets.puppetlabs.com/browse/PUP-403', 'https://github.com/puppetlabs/puppet/pull/5699', '2013-09-20T09:08:40.000-0700', '2013-12-19T17:14:02.000-0800', '2013-12-19T17:14:02.000-0800', 'Closed', '', 7, '0', 2, 32, 3, 2, 'c3757f734e9b5ec6979c43c07c671c482590ae66', 'https://tickets.puppetlabs.com/browse/PUP-403', 'https://github.com/puppetlabs/puppet/pull/5699'),
('puppet', 20250, 234225584, 7254, '"Could not find value for $confdir" regression when using $confdir in puppet.conf', 'This is a regression from 3.3.x to 3.4.0-rc1.\n\nWhen puppet.conf contains the following:\n\n{noformat}\n[main]\n    autosign = $confdir/autosign.conf\n{noformat}\n\nAll puppet commands fail as the $confdir can"t be interpolated.\n\n{noformat}\n# puppet --version\n3.3.2\n# puppet apply --configprint autosign\n/etc/puppet/autosign.conf\n# yum upgrade --enablerepo=puppetlabs-devel puppet\n[snip, updated to 3.4.0-rc1]\n# rpm -q puppet\npuppet-3.4.0-0.1rc1.el6.noarch\n# puppet apply --configprint autosign\nError: Could not intialize global default settings: Error converting value for param "autosign": Could not find value for $confdir\n# puppet --version\nError: Could not intialize global default settings: Error converting value for param "autosign": Could not find value for $confdir\n{noformat}', 'https://tickets.puppetlabs.com/browse/PUP-932', 'https://github.com/puppetlabs/puppet/pull/7254', '2013-12-04T14:21:09.000-0800', '2013-12-19T17:17:02.000-0800', '2013-12-19T17:17:02.000-0800', 'Closed', 'redmine', 3, '0', 3, 269, 76, 11, 'bca628dc1cf651e5af2f4770231cfd812dedba22', 'https://tickets.puppetlabs.com/browse/PUP-932', 'https://github.com/puppetlabs/puppet/pull/7254'),
('puppet', 13487, 15990332, 2662, 'Can"t add domain users to the local Administrators group', '', 'https://tickets.puppetlabs.com/browse/PUP-255', 'https://github.com/puppetlabs/puppet/pull/2662', '2013-08-19T17:00:41.000-0700', '2013-12-19T17:24:39.000-0800', '2013-12-19T17:24:39.000-0800', 'Closed', 'windows', 0, '0', 2, 52, 19, 6, 'efde4267a136f496462994a858d645b51a054bf6', 'https://tickets.puppetlabs.com/browse/PUP-255', 'https://github.com/puppetlabs/puppet/pull/2662'),
('puppet', 16843, 57150405, 4599, 'Windows MSI rememberme properties that have a default value don"t behave as expected', 'If you install puppet on windows, the value is persisted in the registry. If you upgrade and don"t specify a new value, the persisted value should be re-applied, but is not. Specifically:\r\n\r\n{noformat}\r\n    <Property Id="PUPPET_MASTER_SERVER" Value="puppet">\r\n    <Property Id="PUPPET_AGENT_ENVIRONMENT" Value="production">\r\n{noformat}\r\n\r\nTo reproduce, install 3.3.1 (or whenever the property was introduced):\r\n\r\n{noformat}\r\nstart /w msiexec /qn /i puppet-3.3.1.msi PUPPET_MASTER_SERVER=myotherserver\r\n{noformat}\r\n\r\nMake sure the value is in the registry and puppet.conf:\r\n\r\n{noformat}\r\nreg query "HKEY_LOCAL_MACHINE\SOFTWARE\Wow6432Node\Puppet Labs\PuppetInstaller" /v RememberedPuppetMasterServer\r\ntype c:\programdata\puppetlabs\puppet\etc\puppet.conf\r\n{noformat}\r\n\r\nUpgrade to the new version without specifying a new value:\r\n\r\n{noformat}\r\nstart /w msiexec /qn /i puppet-latest.msi\r\n{noformat}\r\n\r\npuppet.conf will revert back to the default `puppet` instead of the remembered value `myotherserver`\r\n\r\nThis wasn"t an issue previously, because once a value was written to puppet.conf, it was never changed, even if a new value was specified in the command line.', 'https://tickets.puppetlabs.com/browse/PUP-571', 'https://github.com/puppetlabs/puppet/pull/4599', '2013-10-16T13:49:29.000-0700', '2013-12-19T17:30:20.000-0800', '2013-12-19T17:30:20.000-0800', 'Closed', 'windows', 5, '0', 2, 54, 20, 4, 'e2832318f64a99de5479a86622aeb11b3108ab4f', 'https://tickets.puppetlabs.com/browse/PUP-571', 'https://github.com/puppetlabs/puppet/pull/4599'),
('puppet', 14649, 22753161, 3195, 'facter 1.7.3/puppet 3.3.0 custom facts not available in puppet', 'User that has a custom fact does not have it showing up in a puppet manifest', 'https://tickets.puppetlabs.com/browse/PUP-340', 'https://github.com/puppetlabs/puppet/pull/3195', '2013-09-13T15:49:38.000-0700', '2013-12-19T17:44:32.000-0800', '2013-12-19T17:44:32.000-0800', 'Closed', '', 2, '0', 1, 35, 3, 2, '72d4edbe1a6d0b397228bfe43b81273306001693', 'https://tickets.puppetlabs.com/browse/PUP-340', 'https://github.com/puppetlabs/puppet/pull/3195'),
('puppet', 14456, 74738566, 5047, 'Windows-Vagrant: Publish Shared Vagrant boxes', 'Find a shared location where Vagrant boxes should be placed that is accessible to everyone on the network easily.\n\n`vagrant up` should involve cloning a repo and going to town.\n\nWill go here http://int-resources.ops.puppetlabs.net/vagrant/', 'https://tickets.puppetlabs.com/browse/PUP-318', 'https://github.com/puppetlabs/puppet/pull/5047', '2013-09-11T13:52:05.000-0700', '2013-12-20T09:55:20.000-0800', '2013-12-20T09:55:20.000-0800', 'Closed', '', 7, '0', 1, 17, 4, 3, 'f2190c24f43d8284647c5bc41b25919da41e68df', 'https://tickets.puppetlabs.com/browse/PUP-318', 'https://github.com/puppetlabs/puppet/pull/5047'),
('puppet', 21065, 780407217, 8818, 'Error: Could not intialize global default settings: undefined method `mode=" for #<Puppet::Settings::AutosignSetting:0x7ff361614368>', 'Follow-on from #23349... regression from 3.3.x to 3.4.0-rc2.  This affects all Foreman users, since it"s the default installer configuration (https://github.com/theforeman/puppet-puppet/blob/master/templates/puppet.conf.erb#L21).\r\n\r\nWith this in puppet.conf:\r\n{code}\r\n[main]\r\n    autosign       = $confdir/autosign.conf { mode = 664 }\r\n{code}\r\n\r\n{code}\r\n# puppet --version\r\nError: Could not intialize global default settings: undefined method `mode=" for #&lt;Puppet::Settings::AutosignSetting:0x7f4b4ecff440&gt;\r\n# rpm -q puppet\r\npuppet-3.4.0-0.1rc2.el6.noarch\r\n{code}\r\n\r\nSorry for not including the full puppet.conf entry in the earlier bug report, we could have avoided a round trip.', 'https://tickets.puppetlabs.com/browse/PUP-1015', 'https://github.com/puppetlabs/puppet/pull/8818', '2013-12-12T09:35:08.000-0800', '2014-01-07T10:38:50.000-0800', '2014-01-07T10:38:50.000-0800', 'Closed', 'redmine', 4, '0', 1, 12, 2, 1, '0ba90f74295f59c11a16eb7530cc20b0a4aedb4b', 'https://tickets.puppetlabs.com/browse/PUP-1015', 'https://github.com/puppetlabs/puppet/pull/8818'),
('puppet', 22510, 22047129, 3139, 'enabling future parser breaks puppet - "Do not add methods to model classes directly..."', 'After enabling the future parser, agent runs fail with "Could not parse for environment X: Do not add methods to model classes directly, add them to the ClassModule instead on node foo.bar"\r\n\r\nThis happens even with an empty node definition.\r\n\r\nup-to-date RHEL6.4 on master and agent with puppet 3.3.1 from puppetlabs repo\r\n\r\nThe master is run via apache+passenger.\r\n\r\npuppet.conf on master: \r\n\r\n<pre>\r\n[main]\r\n    dbadapter = mysql\r\n    dbuser = puppet\r\n    dbpassword = myultrasecretpassword\r\n    dbserver = localhost\r\n    dbsocket = /var/lib/mysql/mysql.sock\r\n\r\n[master]\r\n    vardir = /var/lib/puppetmaster\r\n    ssldir = /var/lib/puppetmaster/ssl\r\n    rundir = /var/run/puppet\r\n    autosign = true\r\n    modulepath = /etc/puppet/environments/$environment/modules:/etc/puppet/environments/common/modules\r\n    manifest = /etc/puppet/environments/$environment/site.pp\r\n    hiera_config = /etc/puppet/hiera.yaml\r\n\r\n    reports = log, foreman\r\n\r\n    # set default env for unconfigured nodes\r\n    environment = infrastructure\r\n    storeconfigs = true\r\n    parser = future\r\n</pre>\r\n\r\n\r\npuppet.conf on agent:\r\n\r\n<pre>\r\n[agent]\r\n    server = trantor.vm\r\n    vardir = /var/lib/puppet\r\n    ssldir = $vardir/ssl\r\n\r\n    report = true\r\n    pluginsync = true\r\n\r\n    environment = research\r\n</pre>\r\n\r\nsite.pp:\r\n\r\n<pre>\r\nnode default {\r\n}\r\n</pre>\r\n\r\nHere"s the master trace:\r\n\r\n<pre>\r\nError: Could not parse for environment research: Do not add methods to model classes directly, add them to the ClassModule instead on node anacreon.vm\r\n/usr/lib/ruby/site_ruby/rgen/metamodel_builder.rb:198:in `method_added"\r\n/usr/lib/ruby/gems/1.8/gems/activesupport-2.3.16/lib/active_support/core_ext/module/aliasing.rb:33:in `alias_method"\r\n/usr/lib/ruby/gems/1.8/gems/activesupport-2.3.16/lib/active_support/core_ext/module/aliasing.rb:33:in `alias_method_chain"\r\n/usr/lib/ruby/gems/1.8/gems/activesupport-2.3.16/lib/active_support/dependencies.rb:142:in `included"\r\n/usr/lib/ruby/gems/1.8/gems/activesupport-2.3.16/lib/active_support/dependencies.rb:140:in `class_eval"\r\n/usr/lib/ruby/gems/1.8/gems/activesupport-2.3.16/lib/active_support/dependencies.rb:140:in `included"\r\n/usr/lib/ruby/site_ruby/rgen/metamodel_builder/mm_multiple.rb:15:in `include"\r\n/usr/lib/ruby/site_ruby/rgen/metamodel_builder/mm_multiple.rb:15:in `MMMultiple"\r\n/usr/lib/ruby/site_ruby/rgen/metamodel_builder/mm_multiple.rb:14:in `instance_eval"\r\n/usr/lib/ruby/site_ruby/rgen/metamodel_builder/mm_multiple.rb:14:in `MMMultiple"\r\n/usr/lib/ruby/site_ruby/rgen/metamodel_builder/mm_multiple.rb:12:in `each"\r\n/usr/lib/ruby/site_ruby/rgen/metamodel_builder/mm_multiple.rb:12:in `MMMultiple"\r\n/usr/lib/ruby/site_ruby/rgen/ecore/ecore.rb:20\r\n/usr/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:31:in `gem_original_require"\r\n/usr/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:31:in `require"\r\n/usr/lib/ruby/gems/1.8/gems/activesupport-2.3.16/lib/active_support/dependencies.rb:184:in `require"\r\n/usr/lib/ruby/site_ruby/rgen/transformer.rb:1\r\n/usr/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:31:in `gem_original_require"\r\n/usr/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:31:in `require"\r\n/usr/lib/ruby/gems/1.8/gems/activesupport-2.3.16/lib/active_support/dependencies.rb:184:in `require"\r\n/usr/lib/ruby/site_ruby/rgen/ecore/ruby_to_ecore.rb:1\r\n/usr/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:31:in `gem_original_require"\r\n/usr/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:31:in `require"\r\n/usr/lib/ruby/gems/1.8/gems/activesupport-2.3.16/lib/active_support/dependencies.rb:184:in `require"\r\n/usr/lib/ruby/site_ruby/rgen/ecore/ecore_interface.rb:22:in `ecore"\r\n/usr/lib/ruby/site_ruby/1.8/puppet/pops/containment.rb:28:in `eAllContents"\r\n/usr/lib/ruby/site_ruby/1.8/puppet/pops/containment.rb:20:in `each"\r\n/usr/lib/ruby/site_ruby/1.8/puppet/pops/validation/checker3_1.rb:39:in `validate"\r\n/usr/lib/ruby/site_ruby/1.8/puppet/parser/e_parser_adapter.rb:61:in `validate"\r\n/usr/lib/ruby/site_ruby/1.8/puppet/parser/e_parser_adapter.rb:38:in `parse"\r\n/usr/lib/ruby/site_ruby/1.8/puppet/node/environment.rb:468:in `perform_initial_import"\r\n/usr/lib/ruby/site_ruby/1.8/puppet/node/environment.rb:219:in `known_resource_types"\r\n/usr/lib/ruby/1.8/monitor.rb:242:in `synchronize"\r\n/usr/lib/ruby/site_ruby/1.8/puppet/node/environment.rb:216:in `known_resource_types"\r\n/usr/lib/ruby/site_ruby/1.8/puppet/resource/type_collection_helper.rb:5:in `known_resource_types"\r\n/usr/lib/ruby/site_ruby/1.8/puppet/parser/compiler.rb:465:in `initvars"\r\n/usr/lib/ruby/site_ruby/1.8/puppet/parser/compiler.rb:202:in `initialize"\r\n/usr/lib/ruby/site_ruby/1.8/puppet/parser/compiler.rb:29:in `new"\r\n/usr/lib/ruby/site_ruby/1.8/puppet/parser/compiler.rb:29:in `compile"\r\n/usr/lib/ruby/site_ruby/1.8/puppet/indirector/catalog/compiler.rb:88:in `compile"\r\n/usr/lib/ruby/site_ruby/1.8/puppet/util/profiler/none.rb:6:in `profile"\r\n/usr/lib/ruby/site_ruby/1.8/puppet/util/profiler.rb:26:in `profile"\r\n/usr/lib/ruby/site_ruby/1.8/puppet/indirector/catalog/compiler.rb:86:in `compile"\r\n/usr/lib/ruby/site_ruby/1.8/puppet/util.rb:182:in `benchmark"\r\n/usr/lib/ruby/1.8/benchmark.rb:308:in `realtime"\r\n/usr/lib/ruby/site_ruby/1.8/puppet/util.rb:181:in `benchmark"\r\n/usr/lib/ruby/site_ruby/1.8/puppet/indirector/catalog/compiler.rb:85:in `compile"\r\n/usr/lib/ruby/site_ruby/1.8/puppet/indirector/catalog/compiler.rb:45:in `find"\r\n/usr/lib/ruby/site_ruby/1.8/puppet/indirector/indirection.rb:197:in `find"\r\n/usr/lib/ruby/site_ruby/1.8/puppet/network/http/handler.rb:140:in `do_find"\r\n/usr/lib/ruby/site_ruby/1.8/puppet/network/http/handler.rb:97:in `send"\r\n/usr/lib/ruby/site_ruby/1.8/puppet/network/http/handler.rb:97:in `process"\r\n/usr/lib/ruby/site_ruby/1.8/puppet/util/profiler/none.rb:6:in `profile"\r\n/usr/lib/ruby/site_ruby/1.8/puppet/util/profiler.rb:26:in `profile"\r\n/usr/lib/ruby/site_ruby/1.8/puppet/network/http/handler.rb:91:in `process"\r\n/usr/lib/ruby/site_ruby/1.8/puppet/network/http/webrick/rest.rb:31:in `service"\r\n/usr/lib/ruby/1.8/webrick/httpserver.rb:104:in `service"\r\n/usr/lib/ruby/1.8/webrick/httpserver.rb:65:in `run"\r\n/usr/lib/ruby/site_ruby/1.8/puppet/network/http/webrick.rb:35:in `listen"\r\n/usr/lib/ruby/1.8/webrick/server.rb:173:in `call"\r\n/usr/lib/ruby/1.8/webrick/server.rb:173:in `start_thread"\r\n/usr/lib/ruby/1.8/webrick/server.rb:162:in `start"\r\n/usr/lib/ruby/1.8/webrick/server.rb:162:in `start_thread"\r\n/usr/lib/ruby/1.8/webrick/server.rb:95:in `start"\r\n/usr/lib/ruby/1.8/webrick/server.rb:92:in `each"\r\n/usr/lib/ruby/1.8/webrick/server.rb:92:in `start"\r\n/usr/lib/ruby/1.8/webrick/server.rb:23:in `start"\r\n/usr/lib/ruby/1.8/webrick/server.rb:82:in `start"\r\n/usr/lib/ruby/site_ruby/1.8/puppet/network/http/webrick.rb:32:in `listen"\r\n/usr/lib/ruby/site_ruby/1.8/puppet/network/http/webrick.rb:31:in `initialize"\r\n/usr/lib/ruby/site_ruby/1.8/puppet/network/http/webrick.rb:31:in `new"\r\n/usr/lib/ruby/site_ruby/1.8/puppet/network/http/webrick.rb:31:in `listen"\r\n/usr/lib/ruby/site_ruby/1.8/puppet/network/http/webrick.rb:28:in `synchronize"\r\n/usr/lib/ruby/site_ruby/1.8/puppet/network/http/webrick.rb:28:in `listen"\r\n/usr/lib/ruby/site_ruby/1.8/puppet/network/server.rb:27:in `start"\r\n/usr/lib/ruby/site_ruby/1.8/puppet/daemon.rb:139:in `start"\r\n/usr/lib/ruby/site_ruby/1.8/puppet/application/master.rb:289:in `start_webrick_master"\r\n/usr/lib/ruby/site_ruby/1.8/puppet/application/master.rb:205:in `main"\r\n/usr/lib/ruby/site_ruby/1.8/puppet/application/master.rb:165:in `run_command"\r\n/usr/lib/ruby/site_ruby/1.8/puppet/application.rb:364:in `run"\r\n/usr/lib/ruby/site_ruby/1.8/puppet/application.rb:457:in `plugin_hook"\r\n/usr/lib/ruby/site_ruby/1.8/puppet/application.rb:364:in `run"\r\n/usr/lib/ruby/site_ruby/1.8/puppet/util.rb:511:in `exit_on_fail"\r\n/usr/lib/ruby/site_ruby/1.8/puppet/application.rb:364:in `run"\r\n/usr/lib/ruby/site_ruby/1.8/puppet/util/command_line.rb:132:in `run"\r\n/usr/lib/ruby/site_ruby/1.8/puppet/util/command_line.rb:86:in `execute"\r\n/usr/bin/puppet:4\r\nError: Could not parse for environment research: Do not add methods to model classes directly, add them to the ClassModule instead on node anacreon.vm\r\nError: Could not parse for environment research: Do not add methods to model classes directly, add them to the ClassModule instead on node anacreon.vm\r\n/usr/lib/ruby/site_ruby/rgen/metamodel_builder.rb:198:in `method_added"\r\n/usr/lib/ruby/gems/1.8/gems/activesupport-2.3.16/lib/active_support/core_ext/module/aliasing.rb:33:in `alias_method"\r\n/usr/lib/ruby/gems/1.8/gems/activesupport-2.3.16/lib/active_support/core_ext/module/aliasing.rb:33:in `alias_method_chain"\r\n/usr/lib/ruby/gems/1.8/gems/activesupport-2.3.16/lib/active_support/dependencies.rb:142:in `included"\r\n/usr/lib/ruby/gems/1.8/gems/activesupport-2.3.16/lib/active_support/dependencies.rb:140:in `class_eval"\r\n/usr/lib/ruby/gems/1.8/gems/activesupport-2.3.16/lib/active_support/dependencies.rb:140:in `included"\r\n/usr/lib/ruby/site_ruby/rgen/metamodel_builder/mm_multiple.rb:15:in `include"\r\n/usr/lib/ruby/site_ruby/rgen/metamodel_builder/mm_multiple.rb:15:in `MMMultiple"\r\n/usr/lib/ruby/site_ruby/rgen/metamodel_builder/mm_multiple.rb:14:in `instance_eval"\r\n/usr/lib/ruby/site_ruby/rgen/metamodel_builder/mm_multiple.rb:14:in `MMMultiple"\r\n/usr/lib/ruby/site_ruby/rgen/metamodel_builder/mm_multiple.rb:12:in `each"\r\n/usr/lib/ruby/site_ruby/rgen/metamodel_builder/mm_multiple.rb:12:in `MMMultiple"\r\n/usr/lib/ruby/site_ruby/rgen/ecore/ecore.rb:20\r\n/usr/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:31:in `gem_original_require"\r\n/usr/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:31:in `require"\r\n/usr/lib/ruby/gems/1.8/gems/activesupport-2.3.16/lib/active_support/dependencies.rb:184:in `require"\r\n/usr/lib/ruby/site_ruby/rgen/transformer.rb:1\r\n/usr/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:31:in `gem_original_require"\r\n/usr/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:31:in `require"\r\n/usr/lib/ruby/gems/1.8/gems/activesupport-2.3.16/lib/active_support/dependencies.rb:184:in `require"\r\n/usr/lib/ruby/site_ruby/rgen/ecore/ruby_to_ecore.rb:1\r\n/usr/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:31:in `gem_original_require"\r\n/usr/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:31:in `require"\r\n/usr/lib/ruby/gems/1.8/gems/activesupport-2.3.16/lib/active_support/dependencies.rb:184:in `require"\r\n/usr/lib/ruby/site_ruby/rgen/ecore/ecore_interface.rb:22:in `ecore"\r\n/usr/lib/ruby/site_ruby/1.8/puppet/pops/containment.rb:28:in `eAllContents"\r\n/usr/lib/ruby/site_ruby/1.8/puppet/pops/containment.rb:20:in `each"\r\n/usr/lib/ruby/site_ruby/1.8/puppet/pops/validation/checker3_1.rb:39:in `validate"\r\n/usr/lib/ruby/site_ruby/1.8/puppet/parser/e_parser_adapter.rb:61:in `validate"\r\n/usr/lib/ruby/site_ruby/1.8/puppet/parser/e_parser_adapter.rb:38:in `parse"\r\n/usr/lib/ruby/site_ruby/1.8/puppet/node/environment.rb:468:in `perform_initial_import"\r\n/usr/lib/ruby/site_ruby/1.8/puppet/node/environment.rb:219:in `known_resource_types"\r\n/usr/lib/ruby/1.8/monitor.rb:242:in `synchronize"\r\n/usr/lib/ruby/site_ruby/1.8/puppet/node/environment.rb:216:in `known_resource_types"\r\n/usr/lib/ruby/site_ruby/1.8/puppet/resource/type_collection_helper.rb:5:in `known_resource_types"\r\n/usr/lib/ruby/site_ruby/1.8/puppet/parser/compiler.rb:465:in `initvars"\r\n/usr/lib/ruby/site_ruby/1.8/puppet/parser/compiler.rb:202:in `initialize"\r\n/usr/lib/ruby/site_ruby/1.8/puppet/parser/compiler.rb:29:in `new"\r\n/usr/lib/ruby/site_ruby/1.8/puppet/parser/compiler.rb:29:in `compile"\r\n/usr/lib/ruby/site_ruby/1.8/puppet/indirector/catalog/compiler.rb:88:in `compile"\r\n/usr/lib/ruby/site_ruby/1.8/puppet/util/profiler/none.rb:6:in `profile"\r\n/usr/lib/ruby/site_ruby/1.8/puppet/util/profiler.rb:26:in `profile"\r\n/usr/lib/ruby/site_ruby/1.8/puppet/indirector/catalog/compiler.rb:86:in `compile"\r\n/usr/lib/ruby/site_ruby/1.8/puppet/util.rb:182:in `benchmark"\r\n/usr/lib/ruby/1.8/benchmark.rb:308:in `realtime"\r\n/usr/lib/ruby/site_ruby/1.8/puppet/util.rb:181:in `benchmark"\r\n/usr/lib/ruby/site_ruby/1.8/puppet/indirector/catalog/compiler.rb:85:in `compile"\r\n/usr/lib/ruby/site_ruby/1.8/puppet/indirector/catalog/compiler.rb:45:in `find"\r\n/usr/lib/ruby/site_ruby/1.8/puppet/indirector/indirection.rb:197:in `find"\r\n/usr/lib/ruby/site_ruby/1.8/puppet/network/http/handler.rb:140:in `do_find"\r\n/usr/lib/ruby/site_ruby/1.8/puppet/network/http/handler.rb:97:in `send"\r\n/usr/lib/ruby/site_ruby/1.8/puppet/network/http/handler.rb:97:in `process"\r\n/usr/lib/ruby/site_ruby/1.8/puppet/util/profiler/none.rb:6:in `profile"\r\n/usr/lib/ruby/site_ruby/1.8/puppet/util/profiler.rb:26:in `profile"\r\n/usr/lib/ruby/site_ruby/1.8/puppet/network/http/handler.rb:91:in `process"\r\n/usr/lib/ruby/site_ruby/1.8/puppet/network/http/webrick/rest.rb:31:in `service"\r\n/usr/lib/ruby/1.8/webrick/httpserver.rb:104:in `service"\r\n/usr/lib/ruby/1.8/webrick/httpserver.rb:65:in `run"\r\n/usr/lib/ruby/site_ruby/1.8/puppet/network/http/webrick.rb:35:in `listen"\r\n/usr/lib/ruby/1.8/webrick/server.rb:173:in `call"\r\n/usr/lib/ruby/1.8/webrick/server.rb:173:in `start_thread"\r\n/usr/lib/ruby/1.8/webrick/server.rb:162:in `start"\r\n/usr/lib/ruby/1.8/webrick/server.rb:162:in `start_thread"\r\n/usr/lib/ruby/1.8/webrick/server.rb:95:in `start"\r\n/usr/lib/ruby/1.8/webrick/server.rb:92:in `each"\r\n/usr/lib/ruby/1.8/webrick/server.rb:92:in `start"\r\n/usr/lib/ruby/1.8/webrick/server.rb:23:in `start"\r\n/usr/lib/ruby/1.8/webrick/server.rb:82:in `start"\r\n/usr/lib/ruby/site_ruby/1.8/puppet/network/http/webrick.rb:32:in `listen"\r\n/usr/lib/ruby/site_ruby/1.8/puppet/network/http/webrick.rb:31:in `initialize"\r\n/usr/lib/ruby/site_ruby/1.8/puppet/network/http/webrick.rb:31:in `new"\r\n/usr/lib/ruby/site_ruby/1.8/puppet/network/http/webrick.rb:31:in `listen"\r\n/usr/lib/ruby/site_ruby/1.8/puppet/network/http/webrick.rb:28:in `synchronize"\r\n/usr/lib/ruby/site_ruby/1.8/puppet/network/http/webrick.rb:28:in `listen"\r\n/usr/lib/ruby/site_ruby/1.8/puppet/network/server.rb:27:in `start"\r\n/usr/lib/ruby/site_ruby/1.8/puppet/daemon.rb:139:in `start"\r\n/usr/lib/ruby/site_ruby/1.8/puppet/application/master.rb:289:in `start_webrick_master"\r\n/usr/lib/ruby/site_ruby/1.8/puppet/application/master.rb:205:in `main"\r\n/usr/lib/ruby/site_ruby/1.8/puppet/application/master.rb:165:in `run_command"\r\n/usr/lib/ruby/site_ruby/1.8/puppet/application.rb:364:in `run"\r\n/usr/lib/ruby/site_ruby/1.8/puppet/application.rb:457:in `plugin_hook"\r\n/usr/lib/ruby/site_ruby/1.8/puppet/application.rb:364:in `run"\r\n/usr/lib/ruby/site_ruby/1.8/puppet/util.rb:511:in `exit_on_fail"\r\n/usr/lib/ruby/site_ruby/1.8/puppet/application.rb:364:in `run"\r\n/usr/lib/ruby/site_ruby/1.8/puppet/util/command_line.rb:132:in `run"\r\n/usr/lib/ruby/site_ruby/1.8/puppet/util/command_line.rb:86:in `execute"\r\n/usr/bin/puppet:4\r\n</pre>\r\n', 'https://tickets.puppetlabs.com/browse/PUP-1235', 'https://github.com/puppetlabs/puppet/pull/3139', '2013-12-24T08:03:39.000-0800', '2014-01-11T13:27:44.000-0800', '2014-01-11T13:27:44.000-0800', 'Closed', 'redmine', 2, '0', 1, 61, 1, 4, '', 'https://tickets.puppetlabs.com/browse/PUP-1235', 'https://github.com/puppetlabs/puppet/pull/3139'),
('puppet', 20924, 303726755, 7651, 'Class namespace declaration appears to be dynamically scoped', 'In the example below, the class declaration test generates an error\r\n{noformat}\r\n    class role::test {\r\n      class { "test": }\r\n      #include test\r\n    }\r\n    Duplicate declaration: Class[Role::Test] is already declared; cannot redeclare at /etc/puppetlabs/puppet/modules/role/manifests/test.pp:2\r\n{noformat}\r\nas it appears to be attempting to redeclare itself due to dynamic namespacing in the {{class \{ "test": \}}} declaration.\r\n\r\nthe {{include test}} line also doesn"t do the "right thing" because it declares the {{role::test}} class, however {{include ::test}} does the right thing \r\n\r\nThe workaround is to declare {{class \{ "::test": \}}} (or {{include ::test}}) , however I wouldn"t expect class declaration lookup to be dynamic as a default - I can see that dynamic lookup would cause this to happen, but  wonder if this behaviour should be reviewed.', 'https://tickets.puppetlabs.com/browse/PUP-993', 'https://github.com/puppetlabs/puppet/pull/7651', '2013-12-11T13:29:07.000-0800', '2014-01-11T14:32:30.000-0800', '2014-01-11T14:32:30.000-0800', 'Closed', 'redmine', 1, '0', 4, 27, 49, 3, 'b571b41b0ac7902d380fb8c719962821f4043a11', 'https://tickets.puppetlabs.com/browse/PUP-993', 'https://github.com/puppetlabs/puppet/pull/7651'),
('puppet', 21367, 523402586, 8443, 'Windows puppet service should log to the eventlog', 'The windows service code (daemon.rb) logs to a file, since that was implemented prior to eventlog support. Now that we have the latter, the daemon code should use it, e.g. \r\n\r\n{quote}\r\nrequire "win32/eventlog"\r\neventlog = Win32::EventLog.open("Application")\r\neventlog.report_event(\r\n  :source      => "Puppet",\r\n  :event_type  => Win32::EventLog::INFO, # or WARN, ERROR\r\n  :event_id    => 0x01, # or 0x02, 0x03\r\n  :data        => "the message"\r\n)\r\neventlog.close\r\n{quote}\r\n\r\n', 'https://tickets.puppetlabs.com/browse/PUP-1049', 'https://github.com/puppetlabs/puppet/pull/8443', '2013-12-16T04:59:36.000-0800', '2014-02-13T16:12:41.000-0800', '2014-02-13T16:12:41.000-0800', 'Resolved', 'redmine;windows', 0, '0', 2, 12, 0, 1, '8a47b424547db89ce9570117500facbb1925cca5', 'https://tickets.puppetlabs.com/browse/PUP-1049', 'https://github.com/puppetlabs/puppet/pull/8443'),
('puppet', 11658, 11519735, 2263, 'Accessing the Puppet::Node::Environment `known_resource_types` instance method on multiple environments forces a regeneration of `known_resource_types`.', 'The relationship between Puppet::Node::Environment instances and Puppet::Resource::TypeCollection is an n:n relationship, as every environment can have a unique list of known types. However there is only one instance of the TypeCollection present at any given time, which is stored as a thread local variable. Furthermore Puppet can only be run as a single thread, so this means that known_resource_types is effectively global.\n\nEvery time the environment changes the current known_resource_types is discarded and must be regenerated. In the worst case this triggers #21561; in the best case this forces Puppet to hit the filesystem and reread all manifests an environment. If a master has a number of active environments this can be very resource intensive.\n\nIt seems reasonable to make the known_resource_types method an instance variable so that if environments are switched this doesn’t force a reload.\n\nThis is a copy of https://projects.puppetlabs.com/issues/21563', 'https://tickets.puppetlabs.com/browse/PUP-143', 'https://github.com/puppetlabs/puppet/pull/2263', '2013-07-02T19:26:32.000-0700', '2014-02-14T19:11:48.000-0800', '2014-02-14T19:11:48.000-0800', 'Resolved', '', 1, '0', 4, 152, 28, 12, '5a5f0d33e6f171b05ddab956054743fceae12550', 'https://tickets.puppetlabs.com/browse/PUP-143', 'https://github.com/puppetlabs/puppet/pull/2263'),
('puppet', 18145, 121445005, 5891, 'Puppert Certificate Signing Allows Invalid Option', 'h1. Description\r\n\r\nIf a puppet user wants to sign all requested certificates from agent nodes and accidentally enters an invalid option "--al" the certificate signing will still successfully complete.\r\n\r\nh2. Attachments\r\n\r\nNone.\r\n\r\nh2. Repro Steps\r\n\r\n# On an agent send a certificate request to the master.\r\n# On master execute the following command:\r\n\r\n    puppet cert sign --al\r\n\r\nh2. Expect\r\n\r\nPuppet should fail and report an error that the "--al" option is invalid.\r\n\r\nh2. Actual\r\n\r\nPuppet interprets the invalid "\-\-al" as "\-\-all" and successfully signs all certificate requests.\r\n\r\n{panel}\r\n{color:red}\r\n[root@centos6 ~]# puppet cert sign --al\r\n{color}\r\nNotice: Signed certificate request for w2k8r2.vm\r\nNotice: Removing file Puppet::SSL::CertificateRequest w2k8r2.vm at "/etc/puppetlabs/puppet/ssl/ca/requests/w2k8r2.vm.pem"\r\n{panel}\r\n', 'https://tickets.puppetlabs.com/browse/PUP-651', 'https://github.com/puppetlabs/puppet/pull/5891', '2013-11-04T10:17:21.000-0800', '2014-02-14T22:08:52.000-0800', '2014-02-14T22:08:52.000-0800', 'Closed', '', 1, '0', 1, 50, 8, 5, '82d456e993e4ad25eba4f4ea2d98d10255b5b452', 'https://tickets.puppetlabs.com/browse/PUP-651', 'https://github.com/puppetlabs/puppet/pull/5891'),
('puppet', 25676, 122310994, 5909, 'puppet node doesn"t retrieve the environment params', 'Hi,\r\n\r\nAccording to http://docs.puppetlabs.com/guides/environment.html, I have defined a variable environment in my puppet dashboard.\r\n{code}\r\n# /usr/bin/env PUPPET_DASHBOARD_URL=http://localhost:3000 /usr/share/puppet-dashboard/bin/external_node mynode\r\n---\r\nname: mynode\r\nparameters:\r\n...\r\n  environment: beta\r\n...\r\n{code}\r\nI have configure my master : \r\n{code}\r\n[main]\r\n  ...\r\n    modulepath = $confdir/environments/$environment/modules:$confdir/modules\r\n\r\n[master]\r\n  ...\r\n\r\n[production]\r\n modulepath = $confdir/modules\r\n{code}\r\n\r\nI have installed my module in the right env : \r\n{code}\r\n puppet module list --environment beta\r\n/etc/puppet/environments/beta/modules\r\n└── mymodule (v1.7.7)\r\n/etc/puppet/modules\r\n├── mymodule  (v1.7.6)\r\n{code}\r\n\r\nBut when I update my node it use the production environnement.\r\n{code}puppet agent --test --noop{code}\r\n\r\nAll works with\r\n{code}puppet agent --test --noop --environment beta{code}\r\n\r\nBut in this case, the dashboard settings is useless.\r\n\r\nAm I missing something ?\r\n\r\nBoth master and agent are running on 3.4.2.\r\n\r\nRegards,', 'https://tickets.puppetlabs.com/browse/PUP-1600', 'https://github.com/puppetlabs/puppet/pull/5909', '2014-02-06T08:28:12.000-0800', '2014-02-19T17:42:02.000-0800', '2014-02-19T17:42:02.000-0800', 'Closed', '', 1, '0', 2, 9, 2, 3, '7bb08e13285c448e2c1b20dc49a38ab03f0ce354', 'https://tickets.puppetlabs.com/browse/PUP-1600', 'https://github.com/puppetlabs/puppet/pull/5909'),
('puppet', 23348, 11975767, 2305, 'Windows agents experience intermittent SSL_connect failures in acceptance testing', 'Breaking this out as a separate ticket related to QA-678.\r\nDuring Windows acceptance testing on master, certificate requests non-deterministically fail due with SSL_connect failures:\r\n{code}\r\n#<RuntimeError: PuppetAcceptance::DSL::Helpers.with_puppet_running_on failed (check backtrace for location) because: Host "oqr39kv18vwtk49" exited with 1 running:\r\n env RUBYLIB="`cygpath -w /opt/puppet-git-repos/hiera/lib`;`cygpath -w /opt/puppet-git-repos/hiera-puppet/lib`;${RUBYLIB}" PATH="/opt/puppet-git-repos/hiera/bin:${PATH}" cmd.exe /c puppet agent --test --server d0d3tnhbac8i81f  \r\nLast 10 lines of output were:\r\n	Exiting; failed to retrieve certificate and waitforcert is disabled\r\n	Error: Could not request certificate: SSL_connect SYSCALL returned=5 errno=0 state=SSLv2/v3 read server hello A\r\n{code}\r\nJanuary 2014 failures of this sort include:\r\n* https://jenkins.puppetlabs.com/job/Puppet-Acceptance-Windows-Per-Commit-master/label=acc-coord,platform=win2008r2/54/console\r\n* https://jenkins.puppetlabs.com/job/Puppet-Acceptance-Windows-master-vcloud-and-github/label=acc-coord,platform=win2008r2/183/console\r\n* https://jenkins.puppetlabs.com/job/Puppet%20Module%20-%20Reboot%20Acceptance/config=windows-2012-x86_64.cfg,label=acc-coord/21/console)\r\n* https://jenkins.puppetlabs.com/job/Puppet-Acceptance-Windows-Per-Commit-master/label=acc-coord,platform=win2008r2/42/console\r\n* https://jenkins.puppetlabs.com/job/Puppet-Acceptance-Windows-Per-Commit-stable/20/label=acc-coord,platform=win2008r2/consoleText\r\nOnly seeing this on Windows 2008 or Windows 2012, so I suspect a test or code problem rather than infrastructure.', 'https://tickets.puppetlabs.com/browse/PUP-1411', 'https://github.com/puppetlabs/puppet/pull/2305', '2014-01-09T09:27:21.000-0800', '2014-02-20T11:04:21.000-0800', '2014-02-20T11:04:21.000-0800', 'Closed', 'ssl;windows', 18, '0', 2, 12, 1, 2, 'd2c555385524b31888085f429184fa6d00c69bb3', 'https://tickets.puppetlabs.com/browse/PUP-1411', 'https://github.com/puppetlabs/puppet/pull/2305'),
('puppet', 13366, 15445600, 2612, 'puppet runonce --environment parameter fails silently if bad environment name supplied', '\n       mco puppet runonce --environment abcd\n\nwith a nonexistent environment "abcd" at the commandline produces no error message. ', 'https://tickets.puppetlabs.com/browse/PUP-243', 'https://github.com/puppetlabs/puppet/pull/2612', '2013-08-14T16:24:31.000-0700', '2014-02-27T14:46:42.000-0800', '2014-02-27T14:46:42.000-0800', 'Closed', '', 1, '0', 1, 15, 17, 3, 'dffeadf0463e43262c42157a41e6e92815fdd59b', 'https://tickets.puppetlabs.com/browse/PUP-243', 'https://github.com/puppetlabs/puppet/pull/2612'),
('puppet', 10962, 649664288, 8607, 'Add support for Dynamic Environments to ARM-8', 'This adds some of the missing parts; dependencies, variables and dynamic environments.\n\nAn examples document / user stories is also added.\n\nThis is still W.I.P as there are things missing from the ARM text that is used in the examples.\n\nThere is also a tentative list of goals, non-goals.\n\nhttps://github.com/puppetlabs/armatures/pull/56', 'https://tickets.puppetlabs.com/browse/PUP-21', 'https://github.com/puppetlabs/puppet/pull/8607', '2013-06-17T17:35:23.000-0700', '2014-02-27T15:59:14.000-0800', '2014-02-27T15:59:14.000-0800', 'Closed', '', 1, '0', 1, 1, 0, 1, 'f73142ee2531911271310e9d2281b181d560df84', 'https://tickets.puppetlabs.com/browse/PUP-21', 'https://github.com/puppetlabs/puppet/pull/8607'),
('puppet', 13799, 60318988, 4699, 'Variables outside of class definition in module does not produce error when running puppet apply', '{noformat}\r\n$var1 = "een"\r\n\r\nclass elvis {\r\n  $var1 = "one"\r\n  $var2 = "two"\r\n  $var3 = "three"\r\n\r\n  file {"/tmp/ffffff":\r\n    ensure  => file,\r\n    content => "${::var1} ${var2}\n",\r\n  }\r\n\r\n}\r\n{noformat}\r\n\r\nthe content is: " two". Since this is not a recommended place to declare a variable we should ideally generate a warning when a user is trying to do this.', 'https://tickets.puppetlabs.com/browse/PUP-280', 'https://github.com/puppetlabs/puppet/pull/4699', '2013-08-28T15:37:37.000-0700', '2014-03-12T10:22:16.000-0700', '2014-03-12T10:22:16.000-0700', 'Closed', '', 0, '0', 1, 112, 16, 2, '9f6d97a1f03fc54fa4c0ce43efb41a5983e0b37d', 'https://tickets.puppetlabs.com/browse/PUP-280', 'https://github.com/puppetlabs/puppet/pull/4699'),
('puppet', 23496, 11435683, 2249, 'appdmg prematurely filters for sources ending in .dmg', 'h2. Problem\r\nThe following package resource:\r\n{noformat}\r\npackage { "Toggl":\r\n  provider => "appdmg",\r\n  source   => "https://www.toggl.com/api/v8/installer?app=td&platform=darwin&channel=stable"\r\n}\r\n{noformat} \r\n\r\nFails with:\r\n{noformat}\r\nError: Could not set "present" on ensure: private method `fail" called for Puppet::Type::Package::ProviderAppdmg:Class at [manifest line]\r\n{noformat}\r\n\r\nh2. Root Cause\r\nIn {{lib/puppet/provider/package/appdmg.rb}} the {{installpkgdmg}} method starts out by validating that the source ends with {{.dmg}}:\r\n{noformat}\r\n  def self.installpkgdmg(source, name)\r\n    unless source =~ /\.dmg$/i\r\n      self.fail "Mac OS X PKG DMG"s must specify a source string ending in .dmg"\r\n    end\r\n    # ... proceeds with downloading the source\r\n{noformat}\r\n\r\nIn the example above [Toggl has a download URL|http://support.toggl.com/toggl-on-my-desktop/#download] which is an abstraction to redirect to the latest version:\r\n{noformat}\r\nhttps://www.toggl.com/api/v8/installer?app=td&platform=darwin&channel=stable\r\n{noformat}\r\n\r\nRedirects to the latest version, which is currently:\r\n{noformat}\r\nhttps://55aa37393ef0d1f9fb76-e65c36a55026053efe5868c3826f43f1.ssl.cf1.rackcdn.com/TogglDesktop_2013-10-17-13-05-57.dmg\r\n{noformat}\r\n\r\nIncidentally the download is curled to whatever "name" is, and "name" is what is ultimately mounted (and this will mount without the .dmg extension). With the validation commented out:\r\n{noformat}\r\nDebug: Executing "/usr/bin/curl -o /tmp/d20140112-38340-1k8oyhr/Toggl -C - -k -L -s --url https://www.toggl.com/api/v8/installer?app=td&platform=darwin&channel=stable"\r\nDebug: Success: curl transfered [Toggl]\r\nDebug: Executing "/usr/bin/hdiutil mount -plist -nobrowse -readonly -mountrandom /tmp /tmp/d20140112-38340-1k8oyhr/Toggl"\r\nDebug: Executing "/usr/bin/ditto --rsrc /private/tmp/dmg.fJGJa8/TogglDesktop.app /Applications/TogglDesktop.app"\r\nDebug: Executing "/usr/bin/hdiutil eject /private/tmp/dmg.fJGJa8"\r\nNotice: /Stage[main]/Toggl/Package[Toggl]/ensure: created\r\n{noformat}\r\n\r\nThis issue was discovered in 3.3.1, but appdmg.rb hasn"t changed significantly since then (as of 3.4.2).\r\n\r\nI will submit a PR with the fix.', 'https://tickets.puppetlabs.com/browse/PUP-1421', 'https://github.com/puppetlabs/puppet/pull/2249', '2014-01-12T08:03:05.000-0800', '2014-03-17T10:53:35.000-0700', '2014-03-17T10:53:35.000-0700', 'Closed', '', 2, '0', 1, 0, 3, 1, '14e257d6525ff1111b91ab5c18ac9a1d5d67d011', 'https://tickets.puppetlabs.com/browse/PUP-1421', 'https://github.com/puppetlabs/puppet/pull/2249'),
('puppet', 24306, 11784280, 2290, 'Windows colors.rb may be subject to Ruby corruption bug with wide strings', 'The use of Ruby"s native .encode method may lead to corrupted strings that aren"t properly null terminated.  If these strings are passed to Win32 API calls this may cause errors / lead to unexpected results / cause further corruption issues.\r\n\r\nThe corruption issues were discovered and fixed in PUP-1389 which has landed in both stable (post 3.4.2) and master (targeted at 3.5.0).\r\n\r\nHowever, not all use cases of .encode("UTF-16LE`) have been replaced that might additionally trigger this corruption.\r\n\r\nSince this can lead to crashy behavior, the calls made in colors.rb should be updated accordingly.', 'https://tickets.puppetlabs.com/browse/PUP-1494', 'https://github.com/puppetlabs/puppet/pull/2290', '2014-01-22T15:44:29.000-0800', '2014-03-17T10:53:36.000-0700', '2014-03-17T10:53:36.000-0700', 'Closed', '', 2, '0', 2, 18, 12, 2, 'ce904cf8e1590e9e9940f6509e8ab3000f8e7d53', 'https://tickets.puppetlabs.com/browse/PUP-1494', 'https://github.com/puppetlabs/puppet/pull/2290'),
('puppet', 21570, 790175912, 8827, 'When applying the settings catalog, a failed transaction may not properly surface information about the event that caused it to fail', 'The code for this has already been written -- this ticket is simply for tracking it as it moves to Ready for CI.\r\n\r\n[~andy] and [~ethan] paired up and fixed this as it came up during PUP-266\r\n\r\nFrom the commit msg:\r\n\r\n - Previously when the `settings` catalog was built, it was possible\r\n   for a `transaction` to fail, but not generate any useful failure\r\n   information in `report.log` -- resulting in a message to the user of\r\n   "Got 0 failure(s) while initializing:"\r\n - Furthermore, the `any_failed?` check against a `transaction` checks\r\n   against the `resource_statuses` of the `transaction`, but the code\r\n   to surface the error was looking in the `report.log`, which was a\r\n   source of confusion\r\n - This commit examines `event` objects inside of `resource_statuses`\r\n   for those with a `status` of `failure`, and uses them to report off\r\n   of instead - resulting in clear error messages\r\n- Additionally, some minor corresponding doc changes were made', 'https://tickets.puppetlabs.com/browse/PUP-1136', 'https://github.com/puppetlabs/puppet/pull/8827', '2013-12-17T07:06:12.000-0800', '2014-03-17T10:53:38.000-0700', '2014-03-17T10:53:38.000-0700', 'Closed', '', 1, '0', 1, 8, 1, 2, '', 'https://tickets.puppetlabs.com/browse/PUP-1136', 'https://github.com/puppetlabs/puppet/pull/8827'),
('puppet', 23097, 11359390, 2237, 'CA generates subjectKeyIdentifier from issuer cert instead of cert itself', 'This regressed in commit 94345ebac6d79a890efc5f49e136c4f76ddda3ef', 'https://tickets.puppetlabs.com/browse/PUP-1387', 'https://github.com/puppetlabs/puppet/pull/2237', '2014-01-07T08:08:19.000-0800', '2014-03-17T10:53:38.000-0700', '2014-03-17T10:53:38.000-0700', 'Closed', 'ssl', 3, '0', 1, 12, 5, 2, 'd45930c9d648fd15ce6c1c0d458c5c6a77cc95e7', 'https://tickets.puppetlabs.com/browse/PUP-1387', 'https://github.com/puppetlabs/puppet/pull/2237'),
('puppet', 23956, 11617599, 2269, 'Ensure services that were previously enabled get enabled after systemd service unit name change', 'If you"ve got puppet versions before 3.4 installed on an OS that uses systemd and have puppetagent.service enabled, it won"t be enabled any longer after upgrading the 3.4. Systemd doesn"t support enabling a symlinked file despite supporting symlinks for other actions [1] so we need to handle the process of service name transition manually in %preun and %postun.\r\n\r\n1. https://bugzilla.redhat.com/show_bug.cgi?id=955379', 'https://tickets.puppetlabs.com/browse/PUP-1463', 'https://github.com/puppetlabs/puppet/pull/2269', '2014-01-17T03:42:36.000-0800', '2014-03-17T10:53:40.000-0700', '2014-03-17T10:53:40.000-0700', 'Closed', '', 2, '0', 1, 25, 0, 1, '78b54c77de7bed5f4065976f2de0417da8925670', 'https://tickets.puppetlabs.com/browse/PUP-1463', 'https://github.com/puppetlabs/puppet/pull/2269'),
('puppet', 22648, 11871491, 2301, 'PR: Windows Puppet Agent Service gracefully terminates after succesfully being put into a Paused state', 'If you successfully pause the Windows Puppet Agent Server, then after a period of time the Puppet Agent service will gracefully stop.  This does not appear to be appropriate behaviour.  The service should remain in a paused state until a Continue or Stop message is sent to the service.\r\n\r\nIt looks like it"s to do with the following lines;\r\n\r\n    while running? do\r\n      return if state != RUNNING\r\n\r\nAccording to ruby doco [1] running? is defined as the service is in a RUNNING, PAUSED or IDLE state, but the following line terminates the main loop if the service is not in the running state.\r\nIt seems that the "return if state != RUNNING" line is not really required\r\n\r\n[1] http://rubydoc.info/gems/win32-service/0.8.2/frames', 'https://tickets.puppetlabs.com/browse/PUP-1278', 'https://github.com/puppetlabs/puppet/pull/2301', '2013-12-30T10:26:03.000-0800', '2014-03-17T10:53:40.000-0700', '2014-03-17T10:53:40.000-0700', 'Closed', 'redmine;windows', 3, '0', 1, 6, 4, 1, '2cfc3231b3ac4e14fa7093f641fc01de4368e260', 'https://tickets.puppetlabs.com/browse/PUP-1278', 'https://github.com/puppetlabs/puppet/pull/2301'),
('puppet', 26156, 12446043, 2349, 'PR - Puppet cert list behavior is suboptimal', 'In our production environment we have >80000 certificates. Issuing {{puppet cert list}} on a large volume of signed certificates "hangs" even though viewing certs does not require traversing the signed repo.\r\n\r\n{{puppet cert list}} should only scan all the signed certs when necessary (signed or all options).', 'https://tickets.puppetlabs.com/browse/PUP-1665', 'https://github.com/puppetlabs/puppet/pull/2349', '2014-02-11T17:50:05.000-0800', '2014-03-17T10:53:44.000-0700', '2014-03-17T10:53:44.000-0700', 'Closed', '', 5, '0', 1, 15, 7, 3, 'be1e39d83cb5ba13d86637dd71e6a59269a71804', 'https://tickets.puppetlabs.com/browse/PUP-1665', 'https://github.com/puppetlabs/puppet/pull/2349'),
('puppet', 22642, 13038793, 2398, 'Windows agent only runs when --onetime is specified', 'In 2.7.x, you could run the windows agent as `puppet agent` or `puppet agent --no-onetime` and the agent would periodically retrieve and apply catalogs.\r\n\r\nIn 3.0.2, in commit 4d1a2f83d9 (#17361), the agent was modified to fork when not doing a onetime run. But this breaks Windows, because fork is not implemented. This was not detected earlier because the windows service always runs the agent with `--onetime`. There are also no acceptance tests around this behavior.', 'https://tickets.puppetlabs.com/browse/PUP-1275', 'https://github.com/puppetlabs/puppet/pull/2398', '2013-12-30T10:18:04.000-0800', '2014-03-17T10:53:44.000-0700', '2014-03-17T10:53:44.000-0700', 'Closed', 'redmine;windows', 3, '0', 1, 13, 2, 2, 'e117af8332264adcfbac2c39346f3fc96b8e8d8d', 'https://tickets.puppetlabs.com/browse/PUP-1275', 'https://github.com/puppetlabs/puppet/pull/2398'),
('puppet', 26875, 12822060, 2382, 'Puppet::Node::Environment.current should reroute with deprecation warning', 'PUP-1118 in commit ecb317b removed Puppet::Node::Environment.current, which I"ve seen used in two places:\r\n\r\n* kafo\r\n* fancy template headers (e.g. https://github.com/theforeman/puppet-puppet/blob/master/templates/_header.erb)\r\n\r\nI"m worried that there might be other users of this, so would suggest it"s rerouted to the `Puppet.lookup(:current_environment)` call and prints a deprecation warning to this ticket.', 'https://tickets.puppetlabs.com/browse/PUP-1735', 'https://github.com/puppetlabs/puppet/pull/2382', '2014-02-19T11:05:29.000-0800', '2014-03-17T10:53:47.000-0700', '2014-03-17T10:53:47.000-0700', 'Closed', '', 2, '0', 1, 22, 0, 2, 'b5b96cf8fc5286882077966f6e6448f2ae7ed6d9', 'https://tickets.puppetlabs.com/browse/PUP-1735', 'https://github.com/puppetlabs/puppet/pull/2382'),
('puppet', 27845, 13288834, 2417, 'Puppet device results in SSL stack too deep error', 'h1. Background\r\n\r\nChris Spence and myself are working on a new module to manage F5 load balancers (version 11.5 IOS) as numerous clients have been asking for Puppet Labs to update this module.\r\nWe will be handing over this work to the Module Team when they have time to continue the work, as Chris and I have limited time to spend on the development.\r\n\r\nh1. Situation\r\n\r\n(test is the name of our F5 device)\r\nThis module, along with the current version of the F5 module, use the "puppet device" application to manage interaction with the network devices.\r\nWe have done our development so far on PE 3.1.1 and have proven that we can manage VLANs, node, pool and virtual servers.\r\nLast night I upgraded my PE3.1.1 to PE3.2 and discovered that when I attempted to run {{puppet device -deviceconf=/etc/puppetlabs/puppet/device.conf test -debug}} that I was presented with a {{Error: Could not request certificate: stack level too deep}} message which proceeded many {{Debug: Using cached certificate for ca}} messages. I had run this command from the Puppet Master server as I was using this as the "smart proxy" to communicate with the F5 Load Balancer LTM. The puppet run also printed out the following warning:\r\n{noformat}\r\nWarning: Puppet.settings.set_value is deprecated. Use Puppet[]= instead.\r\n(at /opt/puppet/lib/ruby/site_ruby/1.9.1/puppet/application/device.rb:197:in `ensure in block in main")\r\nWarning: Puppet.settings.set_value is deprecated. Use Puppet[]= instead.\r\n(at /opt/puppet/lib/ruby/site_ruby/1.9.1/puppet/application/device.rb:198:in `ensure in block in main")\r\nWarning: Puppet.settings.set_value is deprecated. Use Puppet[]= instead.\r\n(at /opt/puppet/lib/ruby/site_ruby/1.9.1/puppet/application/device.rb:199:in `ensure in block in main")\r\n{noformat}\r\n\r\nI had an agent that was still at PE3.1.1 so I attempted to {{puppet device}} on that machine and was successful. I performed a puppet run before this to ensure the types and providers were the same on both machines. I then updated this node to PE3.2 and experienced the same issue as described above with the same errors.\r\nI did note after upgrading that when performing the {{puppet device}} command that a new SSL key was generate for the smart proxy and it attempted to store is within the device SSL directory. This failed due to another issue which I believe Gary Larizza has already reported:\r\n{noformat}\r\nError: Could not request certificate: Could not write /var/opt/lib/pe-puppet/devices/test/ssl/private_keys/agent2.local.pem to privatekeydir: Permission denied - /var/opt/lib/pe-puppet/devices/test/ssl/private_keys/agent2.local.pem\r\n{noformat}\r\nThis is caused by the ownership and permissions on the /var/opt/lib/pe-puppet/devices directory being "root" and "0750". Changing this to be owned by pe-puppet corrects this issue.\r\nEven with the above in place we still experience the issue. The following is a listing of the /var/opt/lib/pe-puppet/devices/test/ssl directory:\r\n{noformat}\r\n[root@agent2 ssl]# ls -lR\r\n.:\r\ntotal 24\r\ndrwxr-xr-x. 2 pe-puppet pe-puppet 4096 Feb 11 13:32 certificate_requests\r\ndrwxr-xr-x. 2 pe-puppet pe-puppet 4096 Mar 2 22:34 certs\r\n-rw-r--r--. 1 pe-puppet pe-puppet 967 Mar 2 22:34 crl.pem\r\ndrwxr-x---. 2 pe-puppet pe-puppet 4096 Feb 11 13:32 private\r\ndrwxr-x---. 2 pe-puppet pe-puppet 4096 Mar 3 01:20 private_keys\r\ndrwxr-xr-x. 2 pe-puppet pe-puppet 4096 Mar 3 01:20 public_keys\r\n\r\n./certificate_requests:\r\ntotal 0\r\n\r\n./certs:\r\ntotal 8\r\n-rw-r--r--. 1 pe-puppet pe-puppet 1976 Mar 2 22:34 ca.pem\r\n-rw-r--r--. 1 pe-puppet pe-puppet 1944 Mar 2 22:34 test.pem\r\n\r\n./private:\r\ntotal 0\r\n\r\n./private_keys:\r\ntotal 8\r\n-rw-r-----. 1 pe-puppet pe-puppet 3247 Mar 3 01:20 agent2.local.pem\r\n-rw-------. 1 pe-puppet pe-puppet 3243 Mar 2 22:34 test.pem\r\n\r\n./public_keys:\r\ntotal 4\r\n-rw-r-----. 1 pe-puppet pe-puppet 800 Mar 3 01:20 agent2.local.pem\r\n{noformat}\r\nI uninstalled PE fully from the master and reinstalled from scratch, resulting in the same errors.\r\nI have tested the current F5 module, the new F5 module and the Cisco device and they all have the same issue.\r\n', 'https://tickets.puppetlabs.com/browse/PUP-1839', 'https://github.com/puppetlabs/puppet/pull/2417', '2014-03-03T15:28:50.000-0800', '2014-03-17T10:53:47.000-0700', '2014-03-17T10:53:47.000-0700', 'Closed', '', 3, '0', 3, 74, 74, 6, '5455b53530bd4d45ff56c72a70373d105722f1fe', 'https://tickets.puppetlabs.com/browse/PUP-1839', 'https://github.com/puppetlabs/puppet/pull/2417'),
('puppet', 18932, 127992259, 6025, 'Remove ca_days from --genconfig output', 'puppet master --gencofig gives me (for ca_ttl):\r\n\r\n    # The default TTL for new certificates. If this setting is set, ca_days is ignored.\r\n    # This setting can be a time interval in seconds (30 or 30s), minutes (30m), hours (6h), days (2d), or years (5y).\r\n    # The default value is "5y".\r\n    ca_ttl = 157680000\r\n\r\nSince ca_days is no longer a setting, it should not be mentioned here.', 'https://tickets.puppetlabs.com/browse/PUP-759', 'https://github.com/puppetlabs/puppet/pull/6025', '2013-11-14T14:34:08.000-0800', '2014-03-17T10:53:51.000-0700', '2014-03-17T10:53:51.000-0700', 'Closed', 'redmine', 3, '0', 1, 6, 3, 3, '6c4539cc02297a382e5a4564c837444242fc88ac', 'https://tickets.puppetlabs.com/browse/PUP-759', 'https://github.com/puppetlabs/puppet/pull/6025'),
('puppet', 24082, 11761427, 2287, 'msgpack serialization of TagSet broken', '', 'https://tickets.puppetlabs.com/browse/PUP-1484', 'https://github.com/puppetlabs/puppet/pull/2287', '2014-01-21T10:50:02.000-0800', '2014-03-17T10:53:51.000-0700', '2014-03-17T10:53:51.000-0700', 'Closed', '', 3, '0', 1, 32, 2, 2, '446f39e73a66bdaaab79681fdea32a5e704d03b0', 'https://tickets.puppetlabs.com/browse/PUP-1484', 'https://github.com/puppetlabs/puppet/pull/2287'),
('puppet', 26271, 12491341, 2350, 'Windows stat doesn"t expose the correct mode', 'When trying to read the mode of a file in Windows, there are two separate code paths that might be used - Puppet::FileSystem.stat in our file system abstraction, and the more direct Puppet::Util::Windows::Security.get_mode.  For example\r\n\r\n{code}\r\nPuppet::FileSystem.stat("c:/inetpub").mode\r\n{code}\r\n\r\n{code}\r\nPuppet::Util::Windows::Security.get_mode("c:/inetpub")\r\n{code}\r\n\r\nAs part of discovery with PUP-1327, it was discovered that these two values are not aligning, and the lower-level get_mode call has the correct intended values.\r\n\r\n{panel}\r\nirb(main):008:0> (Puppet::FileSystem.stat("c:/target.txt").mode & 0777).to_s(8)\r\n=> "644"\r\nirb(main):009:0> (Puppet::Util::Windows::Security.get_mode("c:/target.txt") & 0777).to_s(8)\r\n=> "700"\r\n...\r\nirb(main):018:0> sd = Puppet::Util::Windows::Security.get_security_descriptor("c:/target.txt")\r\n=> BUILTIN\Administrators\r\nWIN-QP47VOHA2P4\None\r\n  BUILTIN\Administrators:                       0x1f01ff\r\n  NT AUTHORITY\SYSTEM:(I)                       0x1f01ff\r\n  BUILTIN\Administrators:(I)                    0x1f01ff\r\n  BUILTIN\Users:(I)                             0x1200a9\r\nirb(main):019:0> puts sd.inspect\r\nBUILTIN\Administrators\r\nWIN-QP47VOHA2P4\None\r\n  BUILTIN\Administrators:                       0x1f01ff\r\n  NT AUTHORITY\SYSTEM:(I)                       0x1f01ff\r\n  BUILTIN\Administrators:(I)                    0x1f01ff\r\n  BUILTIN\Users:(I)                             0x1200a9\r\n=> nil\r\n{panel}\r\n\r\nFurther details here:\r\nhttps://gist.github.com/joshcooper/8961050', 'https://tickets.puppetlabs.com/browse/PUP-1681', 'https://github.com/puppetlabs/puppet/pull/2350', '2014-02-12T16:11:28.000-0800', '2014-03-17T10:53:52.000-0700', '2014-03-17T10:53:52.000-0700', 'Closed', '', 3, '0', 1, 51, 9, 9, '857291ed0c64119dd13b44934ecab4d11b5f1e60', 'https://tickets.puppetlabs.com/browse/PUP-1681', 'https://github.com/puppetlabs/puppet/pull/2350'),
('puppet', 26705, 12612079, 2363, 'Yumrepo doesn"t permit HTTPS URLs', 'Since PUP-789, the yumrepo type doesn"t permit HTTPS URLs in yumrepo definitions.  These are valid for base URLs, mirror lists etc and are used particularly by Fedora.\r\n\r\n{noformat}\r\n$ bin/puppet resource yumrepo test baseurl=https://example.com\r\nError: Could not run: Parameter baseurl failed on Yumrepo[test]: Must be a valid URL\r\nWrapped exception:\r\nMust be a valid URL\r\n{noformat}', 'https://tickets.puppetlabs.com/browse/PUP-1722', 'https://github.com/puppetlabs/puppet/pull/2363', '2014-02-17T05:14:31.000-0800', '2014-03-17T10:53:54.000-0700', '2014-03-17T10:53:54.000-0700', 'Closed', '', 1, '0', 1, 19, 6, 2, '654438aec19fb490701234af1af74fbba4882589', 'https://tickets.puppetlabs.com/browse/PUP-1722', 'https://github.com/puppetlabs/puppet/pull/2363'),
('puppet', 28727, 13844544, 2461, 'Error when manifest is a directory but not the same as manifestdir', 'In 3.5.0 we introduced a feature whereby the manifest setting was allowed to be a directory. However, if the manifest is set to a directory that is not the {{manifestdir}} directory, then the settings catalog tries to create a file resource to manage the directory as a file. This results in a failed settings catalog application and the master cannot start.\r\n\r\n{noformat}\r\n...\r\nDebug: /File[/etc/puppet/fileserver.conf]: Autorequiring File[/etc/puppet]\r\nDebug: /File[/var/lib/puppet/rrd]: Autorequiring File[/var/lib/puppet]\r\nDebug: /File[/var/lib/puppet/facts.d]: Autorequiring File[/var/lib/puppet]\r\nNotice: /File[/etc/puppet/manifests]: Not removing directory; use "force" to override\r\nNotice: /File[/etc/puppet/manifests]: Not removing directory; use "force" to override\r\nError: Could not set "file" on ensure: Is a directory - /etc/puppet/manifests\r\nError: Could not set "file" on ensure: Is a directory - /etc/puppet/manifests\r\nWrapped exception:\r\nIs a directory - /etc/puppet/manifests\r\nError: /File[/etc/puppet/manifests]/ensure: change from directory to file failed: Could not set "file" on ensure: Is a directory - /etc/puppet/manifests\r\nDebug: Finishing transaction 10953320\r\nError: Could not prepare for execution: Got 1 failure(s) while initializing: File[/etc/puppet/manifests]: change from directory to file failed: Could not set "file" on ensure: Is a directory - /etc/puppet/manifests\r\n[root@p5trqudb6uz5f70 puppet]#\r\n{noformat}\r\n\r\nIn the above example relevant portion of the puppet.conf is:\r\n{noformat}\r\n[master]\r\n    manifestdir=/tmp\r\n    manifest = /etc/puppet/manifests\r\n{noformat}\r\n', 'https://tickets.puppetlabs.com/browse/PUP-1944', 'https://github.com/puppetlabs/puppet/pull/2461', '2014-03-13T18:10:43.000-0700', '2014-03-25T10:21:48.000-0700', '2014-03-25T10:21:48.000-0700', 'Closed', '', 4, '0', 1, 39, 2, 3, '01724758e1845cb23ffb0e2dec80dd0c7e386d40', 'https://tickets.puppetlabs.com/browse/PUP-1944', 'https://github.com/puppetlabs/puppet/pull/2461'),
('puppet', 29172, 13863437, 2464, 'Dynamic environments not working with manifestdir setting', 'Subsequent to http://projects.puppetlabs.com/issues/23373 being merged in, if you have a dynmaic manifestdir setting, such as:\r\n\r\nmanifestdir=$confdir/environments/$environment/manifests\r\n\r\nAnd your $confdir/environments does not have a $confdir/environments/manifests and is not writeable by puppet"s user, then starting master will fail:\r\n\r\n{code}\r\nError: Could not prepare for execution: Got 1 failure(s) while initializing: File[/home/jpartlow/test/\r\nmaster/pe3195/environments/manifests]: change from absent to directory failed: Could not set "director\r\ny" on ensure: Permission denied - /home/jpartlow/test/master/pe3195/environments/manifests\r\n/home/jpartlow/work/puppet/lib/puppet/settings.rb:943:in `block in use"\r\n/home/jpartlow/work/puppet/lib/puppet/resource/catalog.rb:176:in `apply"\r\n/home/jpartlow/work/puppet/lib/puppet/settings.rb:933:in `use"\r\n/home/jpartlow/work/puppet/lib/puppet/application/master.rb:260:in `setup"\r\n/home/jpartlow/work/puppet/lib/puppet/application.rb:370:in `block (3 levels) in run"\r\n/home/jpartlow/work/puppet/lib/puppet/application.rb:479:in `plugin_hook"\r\n/home/jpartlow/work/puppet/lib/puppet/application.rb:370:in `block (2 levels) in run"\r\n/home/jpartlow/work/puppet/lib/puppet/util.rb:479:in `exit_on_fail"\r\n/home/jpartlow/work/puppet/lib/puppet/application.rb:370:in `block in run"\r\n/home/jpartlow/work/puppet/lib/puppet/context.rb:51:in `override"\r\n/home/jpartlow/work/puppet/lib/puppet.rb:224:in `override"\r\n/home/jpartlow/work/puppet/lib/puppet/application.rb:362:in `run"\r\n/home/jpartlow/work/puppet/lib/puppet/util/command_line.rb:137:in `run"\r\n/home/jpartlow/work/puppet/lib/puppet/util/command_line.rb:91:in `execute"\r\n/home/jpartlow/work/puppet/bin/puppet:4:in `<top (required)>"\r\n/home/jpartlow/work/puppet/.bundle/gems/ruby/1.9.1/bin/puppet:23:in `load"\r\n/home/jpartlow/work/puppet/.bundle/gems/ruby/1.9.1/bin/puppet:23:in `<main>"\r\n{code}', 'https://tickets.puppetlabs.com/browse/PUP-2009', 'https://github.com/puppetlabs/puppet/pull/2464', '2014-03-19T14:36:19.000-0700', '2014-03-25T10:21:49.000-0700', '2014-03-25T10:21:49.000-0700', 'Closed', '', 5, '0', 1, 130, 0, 1, 'e56d2df073e52c8fb778bd56ca943af92e3570f3', 'https://tickets.puppetlabs.com/browse/PUP-2009', 'https://github.com/puppetlabs/puppet/pull/2464'),
('puppet', 22900, 11430091, 2245, 'improve error message when File[undef] occurs', 'If you create a File resource from a variable that is not defined, the error message doesn"t mention the position in the manifest nor the class name that the problematic resource occurs in. This makes it difficult to find out which File resource is broken.\r\n\r\n    $ echo "file { $foo: ensure => present }" | puppet apply\r\n    Error: Failed to apply catalog: Parameter path failed on File[undef]: File paths must be fully qualified, not "undef"\r\n', 'https://tickets.puppetlabs.com/browse/PUP-1349', 'https://github.com/puppetlabs/puppet/pull/2245', '2014-01-03T01:28:24.000-0800', '2014-03-26T12:36:03.000-0700', '2014-03-26T12:36:03.000-0700', 'Closed', 'redmine', 3, '0', 1, 16, 1, 2, '', 'https://tickets.puppetlabs.com/browse/PUP-1349', 'https://github.com/puppetlabs/puppet/pull/2245'),
('puppet', 21431, 730451587, 8761, 'puppetdlock file can be empty', 'There seems to be something wrong with the way the $statedir/puppetdlock file is created.  Under normal circumstances, when puppetd is running, the file contains the PID of the running puppetd process.  For example:\r\n\r\n{noformat}\r\n$ cat /var/puppet/state/puppetdlock\r\n26898 [no newline at end of file]\r\n{noformat}\r\n\r\nIf puppetd crashes or is killed, then the file may be empty:\r\n\r\n{noformat}\r\n$ cat /var/puppet/state/puppetdlock\r\n[empty]\r\n$ ls -l /var/puppet/state/puppetdlock\r\n-rw-r--r--   1 root     root           0 Oct 28 14:32 /var/pupp/state/puppetdlock\r\n{noformat}\r\n\r\nThis causes future puppetd runs to fail with "notice: Run of Puppet configuration client already in progress; skipping".\r\n\r\nI suspect that the problem is that the lock file is created in such a way that a crash between creating the file and writing to the file leaves the file empty.  A safe technique is to write to a temporary file and then rename the temporary file, so that the actual lock file either does not exist, or exists with correct contents, but never exists with partial contents.\r\n\r\nAlso, the code that complains about "client already in progress" could be smarter; it should read the PID from the lock file and verify that the process is actually running.\r\n\r\nIf you need sample code, then see NetBSD"s shlock(1) utility (http://cvsweb.netbsd.org/bsdweb.cgi/usr.bin/shlock/), which is derived from the code that was in HoneyDanBer UUCP.', 'https://tickets.puppetlabs.com/browse/PUP-1092', 'https://github.com/puppetlabs/puppet/pull/8761', '2013-12-16T11:24:08.000-0800', '2014-04-17T12:11:29.000-0700', '2014-04-17T12:11:29.000-0700', 'Closed', 'redmine', 1, '0', 2, 35, 3, 2, '4afb5f0d32fed100f24dd83d181347564794f71e', 'https://tickets.puppetlabs.com/browse/PUP-1092', 'https://github.com/puppetlabs/puppet/pull/8761'),
('puppet', 24499, 12535521, 2354, 'ensure => absent on user resource with forcelocal => true does not work as expected.', 'Given:\r\n{code}\r\nuser { "foo":\r\n  ensure => absent,\r\n  forcelocal => true,\r\n}\r\n{code}\r\nThe {{luserdel}} command should be run just like {{ensure => present}} uses {{luseradd}}. It appears the plumbing to do so is there but {{cmd[:localdelete]}} is never defined. Additionally, there are no references to {{luserdel}} which would be required to do the local user delete.\r\n\r\nhttps://github.com/puppetlabs/puppet/blob/master/lib/puppet/provider/user/useradd.rb#L190', 'https://tickets.puppetlabs.com/browse/PUP-1510', 'https://github.com/puppetlabs/puppet/pull/2354', '2014-01-24T08:30:19.000-0800', '2014-04-21T15:11:46.000-0700', '2014-04-21T15:11:46.000-0700', 'Closed', '', 3, '0', 1, 8, 5, 2, 'c1a17ff8015a15ef72c8579a8a418232b362ba6c', 'https://tickets.puppetlabs.com/browse/PUP-1510', 'https://github.com/puppetlabs/puppet/pull/2354'),
('puppet', 31007, 0, 0, '"import" is silently ignored using the future parser', 'The "import" statement, when used like below, is silently ignored if you are using the future parser.\r\n\r\n{noformat}\r\nimport "nodes"\r\n{noformat}\r\n\r\nPUP-490 says:\r\n\r\n{quote}\r\ni.e. future parser/evaluator will not issue deprecation, and will instead interpret import as if it is a function call (leading to unknown function error since there is no such function).\r\n{quote}\r\n\r\nBut that error message is only produced if you add parenthesis:\r\n\r\n{noformat}\r\nimport("nodes")\r\n{noformat}\r\n\r\nThe original form is silently ignored, with no diagnostics.  (Combined with PUP-2158 this made it a bit hard to track down why nothing happened when I had changed stuff in my manifests.)\r\n\r\nThe import statement should produce some kind of diagnostics when you are using the future parser.', 'https://tickets.puppetlabs.com/browse/PUP-2159', '', '2014-04-04T06:09:51.000-0700', '2014-04-24T09:03:48.000-0700', '2014-04-24T09:03:48.000-0700', 'Closed', '', 2, '0', 0, 0, 0, 0, 'ee42315ed55a2ee534768ec45083e2c4ebf82d59', 'https://tickets.puppetlabs.com/browse/PUP-2159', 'https://github.com/puppetlabs/puppet/commit/ee42315ed55a2ee534768ec45083e2c4ebf82d59'),
('puppet', 24025, 11655725, 2277, 'mk_resource_methods getters can"t deal with false', 'I was writing a type and associated provider and noticed that during a {{puppet resource type}} if a property is set to {{false}} it suddenly didn"t show up in the output. \r\n\r\n{code}\r\n  def self.mk_resource_methods\r\n    [resource_type.validproperties, resource_type.parameters].flatten.each do |attr|\r\n      attr = attr.intern\r\n      next if attr == :name\r\n      define_method(attr) do\r\n        @property_hash[attr] || :absent\r\n      end\r\n\r\n      define_method(attr.to_s + "=") do |val|\r\n        @property_hash[attr] = val\r\n      end\r\n    end\r\n  end\r\n{code}\r\n\r\nWhen {{@protery_hash[attr]}} returns the value {{false}}, because a property is set to {{false}} it now becomes absent because we end up with {{false || :absent}}', 'https://tickets.puppetlabs.com/browse/PUP-1470', 'https://github.com/puppetlabs/puppet/pull/2277', '2014-01-19T03:27:01.000-0800', '2014-04-27T07:02:14.000-0700', '2014-04-27T07:02:14.000-0700', 'Closed', '', 5, '0', 1, 5, 1, 1, 'a690fefdfd00f65e8f26654e49207553e6ce66f1', 'https://tickets.puppetlabs.com/browse/PUP-1470', 'https://github.com/puppetlabs/puppet/pull/2277'),
('puppet', 23431, 852631450, 8878, 'Mount resource error silently skipped at times when running as daemon', 'I have a host where puppet is running as daemon, refreshing every 30 minutes as per default, and a custom class is applied.\r\n\r\nThe class contains:\r\n\r\n# A "file" resource to ensure a directory is created.\r\n# A "package" resource to ensure the nfs-utils RPM is installed.\r\n# A "mount" resource to mount a NFS share into the directory created in 1 and add the related line to /etc/fstab. This resource requires resources 1 and 2.\r\n# A "yumrepo" resource which creates and enables a local yum repository whose files are located in the mounted share. This requires resource 3.\r\n\r\nThe host has a preexisting problem in its fstab file: there is one custom line which starts with leading spaces, which appears to be a somewhat invalid syntax (cannot find official docs about this, though).\r\n\r\nDue to this problem in fstab, any manual puppet run e.g. "puppet agent --test" fails when applying the mount resource and flushing the fstab file, which is ok ("Could not evaluate: Field "device" is required").\r\n\r\nThe real problem happens with periodic automated runs: a first run correctly stops at the mount resource, but the second run terminates with no errors even though it cannot successfully mount the share, and what"s worse, it even applies the yumrepo resource, thus ignoring the "require" parameter.\r\n\r\nA third run stops again on mount, while a fourth behaves like the second one, and so on. Puppet alternates endlessly between the two behaviours.\r\n\r\nThis is of course very confusing, and also leaves the machine in a broken state, with a configured repository which actually doesn"t work.\r\n\r\nI attach the log obtained with "--debug --verbose --logdest /var/log/puppet/debug.log". It contains output from two subsequent runs: the first stops at the mount error, while the second one skips it and applies the yumrepo.', 'https://tickets.puppetlabs.com/browse/PUP-1415', 'https://github.com/puppetlabs/puppet/pull/8878', '2014-01-10T07:10:35.000-0800', '2014-05-06T04:55:13.000-0700', '2014-05-06T04:55:13.000-0700', 'Closed', '', 3, '0', 1, 1, 3, 1, '2fa7b3efcb86048fc5d594a5d750700d07bf5cac', 'https://tickets.puppetlabs.com/browse/PUP-1415', 'https://github.com/puppetlabs/puppet/pull/8878'),
('puppet', 27052, 12814246, 2378, 'Puppet module tool does not work on Solaris', 'The Puppet module tool currently doesn"t work on Solaris 10 in the absence of specially installed GNU utilities (specifically, gtar is required). The current state is effectively "workaround required".\r\n\r\nSolaris 10 is a PE supported platform, and the module tool should work out of the box to enable local testing and module installation.\r\n\r\nHow the Puppet module tool currently fails on Solaris 10 is displayed below.\r\n\r\n{noformat}\r\n/opt/puppet/bin/puppet module install seteam/opencsw --module_repository=http://forgeapi.puppetlabs.com\r\nNotice: Preparing to install into /etc/puppetlabs/puppet/modules ...\r\nNotice: Downloading from http://forgeapi.puppetlabs.com ...\r\nError: Could not extract contents of module archive: Execution of "tar xzf /var/opt/lib/pe-puppet/puppet-module/cache/seteam-opencsw20140221-10168-3p88ey --no-same-owner -C /var/opt/lib/pe-puppet/puppet-module/cache/tmp-unpacker20140221-10168-1nlhuor" returned 1: tar: z: unknown function modifier\r\nUsage: tar {c|r|t|u|x}[BDeEFhilmnopPqTvw@[0-7]][bfk][X...] [blocksize] [tarfile] [size] [exclude-file...] {file | -I include-file | -C directory file}...\r\n\r\nError: Try "puppet help module install" for usage\r\n{noformat}', 'https://tickets.puppetlabs.com/browse/PUP-1749', 'https://github.com/puppetlabs/puppet/pull/2378', '2014-02-21T14:44:07.000-0800', '2014-05-06T11:35:36.000-0700', '2014-05-06T11:35:36.000-0700', 'Closed', '', 6, '0', 3, 9, 51, 6, '522565976db3f23553cbeff06b85a8c53ae39916', 'https://tickets.puppetlabs.com/browse/PUP-1749', 'https://github.com/puppetlabs/puppet/pull/2378'),
('puppet', 28770, 13586764, 2434, 'use of "attr" causes deprecation warning', 'This line of code ...\r\n\r\nhttps://github.com/puppetlabs/puppet/blob/0061737bdbd1a70748c09328980fffe2bc843e41/lib/puppet/status.rb#L7\r\n\r\n... causes deprecation warning on newer versions of ruby, including JRuby.  The preferred way to write that is just {{attr_accessor}}.  See PE-3054 for more info.', 'https://tickets.puppetlabs.com/browse/PUP-1954', 'https://github.com/puppetlabs/puppet/pull/2434', '2014-03-14T13:49:39.000-0700', '2014-05-06T11:35:37.000-0700', '2014-05-06T11:35:37.000-0700', 'Closed', '', 1, '0', 1, 1, 1, 1, '3faca7e4260e58de789006581e4892a6176b6be1', 'https://tickets.puppetlabs.com/browse/PUP-1954', 'https://github.com/puppetlabs/puppet/pull/2434'),
('puppet', 31577, 0, 0, 'yumrepo can no longer manage repositories in yum.conf', 'In Puppet <= 3.4.3, repositories in /etc/yum.conf could be created and managed like repositories in any other repository location. This was removed in 3.5.0. The impact of this is that if none if the default directories for yum repository configurations are available, the yumrepo type will not be able to create new repositories even though they can be placed in /etc/yum.conf. In addition repositories specified in /etc/yum.conf will be ignored.', 'https://tickets.puppetlabs.com/browse/PUP-2218', '', '2014-04-11T10:45:53.000-0700', '2014-05-06T11:35:37.000-0700', '2014-05-06T11:35:37.000-0700', 'Closed', '', 3, '0', 0, 0, 0, 0, 'cd4e69f5dafac33740b6c1d711451f8da169cae3', 'https://tickets.puppetlabs.com/browse/PUP-2218', 'https://github.com/puppetlabs/puppet/commit/cd4e69f5dafac33740b6c1d711451f8da169cae3'),
('puppet', 22783, 14022720, 2475, '"puppet resource service" fails on Ubuntu ', 'I was following the puppet introduction at http://docs.puppetlabs.com/learning/ral.html using Ubuntu 13.10 Saucy Salamander. When I tried to run "sudo puppet resource service" I get the error:\r\n\r\nError: Could not run: Execution of "/sbin/status startpar-bridge" returned 1: status: Unknown parameter: JOB\r\n\r\nI"m using Puppet v3.4.1 from the Puppet repo, not the Ubuntu repos.\r\n\r\nI got similar results but with different services in the error message when I tried with Ubuntu 13.04 and 12.04.\r\n\r\nOn 13.04 (Raring Ringtail) using Puppet v3.4.1 from the Puppet repo I get\r\n\r\nError: Could not run: Execution of "/sbin/status idmapd-mounting" returned 1: status: Unknown parameter: MOUNTPOINT\r\n\r\nOn 12.04 (Precise Pangolin, LTS) using Puppet 3.1.1 that comes preinstalled on the Vagrant box at http://puppet-vagrant-boxes.puppetlabs.com/ubuntu-server-12042-x64-vbox4210.box I get\r\n\r\nError: Could not run: Execution of "/sbin/status portmap-wait" returned 1: status: Unknown parameter: WAITER\r\n\r\nIt seems to be the same root cause as http://projects.puppetlabs.com/issues/21478, which was "fixed" by https://github.com/puppetlabs/puppet/pull/1731, which looks like a bandaid for one particular instance of the problem rather than addressing the root cause. I don"t know much about Upstart so I"m afraid I have no idea what exactly the real problem is or how to address it.', 'https://tickets.puppetlabs.com/browse/PUP-1332', 'https://github.com/puppetlabs/puppet/pull/2475', '2014-01-01T17:48:53.000-0800', '2014-05-06T11:35:40.000-0700', '2014-05-06T11:35:40.000-0700', 'Closed', '', 2, '0', 1, 4, 1, 2, '9d06e7a472bf527a02a2901d2e0aeeac61d0ac0a', 'https://tickets.puppetlabs.com/browse/PUP-1332', 'https://github.com/puppetlabs/puppet/pull/2475'),
('puppet', 25581, 12768188, 2373, 'Puppet excessively stats the filesystem when looking for defined types ', '[~masterzen] and I realized that when puppet tries to resolve a defined type, it always tries to first find the defined type within all the plugin directories as it tries to first load it as a resource type and then as a defined type.\r\n\r\nWe should be able to avoid a lot of stats on the filesystem by simply changing the lookup order.\r\n\r\n[~masterzen] has some ideas for a patch.', 'https://tickets.puppetlabs.com/browse/PUP-1592', 'https://github.com/puppetlabs/puppet/pull/2373', '2014-02-05T12:51:40.000-0800', '2014-05-09T09:04:52.000-0700', '2014-05-09T09:04:52.000-0700', 'Closed', '', 17, '0', 1, 5, 0, 1, 'e0240fe431812638b3ab3b002673cda01694510a', 'https://tickets.puppetlabs.com/browse/PUP-1592', 'https://github.com/puppetlabs/puppet/pull/2373'),
('puppet', 35346, 15861954, 2648, 'PMT will not install puppetlabs/openstack 4.0.0', 'Attempting to install {{puppetlabs/openstack --version 4.0.0}} fails under the 3.6.0 release candidate, but succeeds under Puppet 3.5.0.  There is no good reason why this should fail.', 'https://tickets.puppetlabs.com/browse/PUP-2562', 'https://github.com/puppetlabs/puppet/pull/2648', '2014-05-13T11:47:34.000-0700', '2014-05-14T13:01:06.000-0700', '2014-05-14T13:01:06.000-0700', 'Closed', '', 4, '0', 1, 0, 1, 1, 'c9066767a7ff0d1e5bc83254c251ef3f38789981', 'https://tickets.puppetlabs.com/browse/PUP-2562', 'https://github.com/puppetlabs/puppet/pull/2648'),
('puppet', 35337, 15853334, 2645, 'PMT may deadlock when packing or unpacking large tarballs', 'Due to changes that were pulled into the 3.6.0 release candidate, some large  tarballs may cause the IO pipeline to fill up prematurely, which blocks all subsequent writes.  Since reads are waiting for writes to finish, this causes module installation and upgrades to hang.', 'https://tickets.puppetlabs.com/browse/PUP-2561', 'https://github.com/puppetlabs/puppet/pull/2645', '2014-05-13T11:37:23.000-0700', '2014-05-14T13:48:17.000-0700', '2014-05-14T13:48:17.000-0700', 'Closed', '', 4, '0', 2, 20, 33, 4, '02ba25fbb9410f884f0409e7fd51318cb8ebd363', 'https://tickets.puppetlabs.com/browse/PUP-2561', 'https://github.com/puppetlabs/puppet/pull/2645'),
('puppet', 34333, 0, 0, 'Deleting a certificate does not work with the API', 'Removing a certificate no longer works through the API.\r\n\r\n{code}\r\n[root@puppet1 ~]# puppet cert list dc1\r\n+ "dc1" (SHA256) 06:98:A3:40:F3:D4:7B:57:81:10:D3:DB:2A:C0:55:06:C1:98:8C:34:63:F2:ED:32:75:AA:DA:BE:78:6B:75:7D\r\n{code}\r\n\r\nauth.conf:\r\nhttps://gist.github.com/ghoneycutt/1ee2bf2ed5c82c47d807#file-auth-conf-L116-L119\r\n\r\ncurl command issued from CA:\r\n{code}\r\nPUPPETCA=puppet\r\ncurl -k -X DELETE -H "Accept :pson" https://${PUPPETCA}:8140/production/certificate_status/dc1\r\n{code}\r\n\r\nError:\r\n{code}Server Error: undefined method `each" for nil:NilClass{code}\r\n\r\nI get the same error running under passenger or with webrick (puppet master --nodaemonize -v)', 'https://tickets.puppetlabs.com/browse/PUP-2483', '', '2014-05-06T07:54:10.000-0700', '2014-05-14T16:57:47.000-0700', '2014-05-14T16:57:47.000-0700', 'Closed', 'API', 2, '0', 0, 0, 0, 0, 'c69941360526235f5cc7a0bd687842eb50d5f2e2', 'https://tickets.puppetlabs.com/browse/PUP-2483', 'https://github.com/puppetlabs/puppet/commit/c69941360526235f5cc7a0bd687842eb50d5f2e2'),
('puppet', 34727, 0, 0, 'Delete a clients certificate with HTTP API no longer working', 'When deploying openvz images, we use a init-script to delete puppets ssl directory on the client and then run curl to deletes the clients certificate from the puppet server:\r\n{code}\r\ncurl -k -X DELETE -H "Accept: pson" "https://puppet.example.com:8140/production/certificate_status/client.examle.com"\r\n{code}\r\n\r\nAfter upgrading to puppet 3.5.1 this stopped working, I have read that I need to revoke the certificate first and that works:\r\n{code}\r\ncurl -k -X PUT -H "Content-Type: text/pson" --data "{"desired_state":"revoked"}" https://puppet.example.com:8140/production/certificate_status/client.example.com\r\n{code}\r\n\r\nI have verified that the certificate gets revoked on the server:\r\n{code}\r\n[root@puppet ~]# puppet cert list client.example.com\r\n- "client.example.com" (SHA256) A9:FD:2D:C3:E4:7C:84:12:9C:D0:B2:4C:F2:81:AB:A0:BE:9C:A4:40:A7:8E:4A:6A:D8:E0:A4:D7:10:A9:4B:E2 (certificate revoked)\r\n{code}\r\nAfter this, the documentation says that I should run the DELETE command described above but that fails (using | sed for readability):\r\n{code}\r\ncurl -k -X DELETE -H "Accept: pson" https://puppet.example.com:8140/production/certificate_status/client.example.com | sed "s/,/\n/g"\r\n{"issue_kind":"RUNTIME_ERROR"\r\n"message":"Server Error: undefined method `each" for nil:NilClass"\r\n"stacktrace":["/usr/lib/ruby/site_ruby/1.8/puppet/network/http/route.rb:72:in `process""\r\n"/usr/lib/ruby/site_ruby/1.8/puppet/network/http/handler.rb:63:in `process""\r\n"/usr/lib/ruby/site_ruby/1.8/puppet/util/profiler/none.rb:6:in `profile""\r\n"/usr/lib/ruby/site_ruby/1.8/puppet/util/profiler.rb:43:in `profile""\r\n"/usr/lib/ruby/site_ruby/1.8/puppet/network/http/handler.rb:61:in `process""\r\n"/usr/lib/ruby/site_ruby/1.8/puppet/network/http/webrick/rest.rb:31:in `service""\r\n"/usr/lib/ruby/1.8/webrick/httpserver.rb:104:in `service""\r\n"/usr/lib/ruby/1.8/webrick/httpserver.rb:65:in `run""\r\n"/usr/lib/ruby/site_ruby/1.8/puppet/network/http/webrick.rb:36:in `listen""\r\n"/usr/lib/ruby/1.8/webrick/server.rb:173:in `call""\r\n"/usr/lib/ruby/1.8/webrick/server.rb:173:in `start_thread""\r\n"/usr/lib/ruby/1.8/webrick/server.rb:162:in `start""\r\n"/usr/lib/ruby/1.8/webrick/server.rb:162:in `start_thread""\r\n"/usr/lib/ruby/1.8/webrick/server.rb:95:in `start""\r\n"/usr/lib/ruby/1.8/webrick/server.rb:92:in `each""\r\n"/usr/lib/ruby/1.8/webrick/server.rb:92:in `start""\r\n"/usr/lib/ruby/1.8/webrick/server.rb:23:in `start""\r\n"/usr/lib/ruby/1.8/webrick/server.rb:82:in `start""\r\n"/usr/lib/ruby/site_ruby/1.8/puppet/network/http/webrick.rb:30:in `listen""\r\n"/usr/lib/ruby/site_ruby/1.8/puppet/network/http/webrick.rb:29:in `initialize""\r\n"/usr/lib/ruby/site_ruby/1.8/puppet/network/http/webrick.rb:29:in `new""\r\n"/usr/lib/ruby/site_ruby/1.8/puppet/network/http/webrick.rb:29:in `listen""\r\n"/usr/lib/ruby/site_ruby/1.8/puppet/network/server.rb:27:in `start""\r\n"/usr/lib/ruby/site_ruby/1.8/puppet/daemon.rb:139:in `start""\r\n"/usr/lib/ruby/site_ruby/1.8/puppet/application/master.rb:284:in `start_webrick_master""\r\n"/usr/lib/ruby/site_ruby/1.8/puppet/application/master.rb:200:in `main""\r\n"/usr/lib/ruby/site_ruby/1.8/puppet/application/master.rb:160:in `run_command""\r\n"/usr/lib/ruby/site_ruby/1.8/puppet/application.rb:372:in `run""\r\n"/usr/lib/ruby/site_ruby/1.8/puppet/application.rb:479:in `plugin_hook""\r\n"/usr/lib/ruby/site_ruby/1.8/puppet/application.rb:372:in `run""\r\n"/usr/lib/ruby/site_ruby/1.8/puppet/util.rb:479:in `exit_on_fail""\r\n"/usr/lib/ruby/site_ruby/1.8/puppet/application.rb:372:in `run""\r\n"/usr/lib/ruby/site_ruby/1.8/puppet/context.rb:51:in `override""\r\n"/usr/lib/ruby/site_ruby/1.8/puppet.rb:233:in `override""\r\n"/usr/lib/ruby/site_ruby/1.8/puppet/application.rb:362:in `run""\r\n"/usr/lib/ruby/site_ruby/1.8/puppet/util/command_line.rb:137:in `run""\r\n"/usr/lib/ruby/site_ruby/1.8/puppet/util/command_line.rb:91:in `execute""\r\n"/usr/bin/puppet:4"]}\r\n{code}\r\n\r\nRunning the puppet master in debug:\r\n{code}\r\n[root@puppet ~]# puppet master --no-daemonize --debug --verbose\r\n[...]\r\nNotice: Starting Puppet master version 3.5.1\r\n[...]\r\nDebug: Routes Registered:\r\nDebug: Route /^\/v2\.0/\r\nDebug: Route /.*/\r\nDebug: Evaluating match for Route /^\/v2\.0/\r\nDebug: Did not match path ("/production/certificate_status/client.example.com")\r\nDebug: Evaluating match for Route /.*/\r\nError: Server Error: undefined method `each" for nil:NilClass\r\n{code}\r\n\r\n', 'https://tickets.puppetlabs.com/browse/PUP-2516', '', '2014-05-07T23:37:56.000-0700', '2014-05-14T22:09:20.000-0700', '2014-05-14T22:09:20.000-0700', 'Closed', '', 6, '0', 0, 0, 0, 0, 'c69941360526235f5cc7a0bd687842eb50d5f2e2', 'https://tickets.puppetlabs.com/browse/PUP-2516', 'https://github.com/puppetlabs/puppet/commit/c69941360526235f5cc7a0bd687842eb50d5f2e2'),
('puppet', 29210, 13803993, 2456, 'have test repos pushed to hosts during acceptance testing ', 'Currently, in install_utils.rb, repos are pulled directly from the individual test hosts.  This does not work for hosts that live outside our internal network and are unable to reach builds.puppetlabs.lan.  \r\n\r\nBy changing around the logic so that the puppet master node pulls the repos and then pushes them to the test hosts we can test packaged builds in the cloud.', 'https://tickets.puppetlabs.com/browse/PUP-2010', 'https://github.com/puppetlabs/puppet/pull/2456', '2014-03-19T16:19:33.000-0700', '2014-05-15T15:34:48.000-0700', '2014-05-15T15:34:48.000-0700', 'Closed', '', 6, '0', 1, 132, 13, 3, 'd57c6017213326877c3c07129f1f058af67ce17d', 'https://tickets.puppetlabs.com/browse/PUP-2010', 'https://github.com/puppetlabs/puppet/pull/2456'),
('puppet', 34512, 15626774, 2626, 'Failed compilation does not populate environment, transaction_uuid in report', 'Seems that the transaction_uuid and environment is not populated in a report submission from the agent when the catalog fails to compile. Looking at various other patches around this it looks like at least the environment was intended to appear here but the existing code doesn"t achieve this.\r\n\r\ntransaction_uuid on the other hand I believe was just never added to the correct places for this to ever work.\r\n\r\nThis has surfaced because of PDB-16, we"re trying to pass on the status of a failed run in a report but currently we make "environment" mandatory. Obviously one temporary solution for PDB is to make this optional.\r\n\r\nMy current fix is something like this: https://gist.github.com/kbarber/515440b085a627ff573a. Let me see if I can put this into a patch.', 'https://tickets.puppetlabs.com/browse/PUP-2508', 'https://github.com/puppetlabs/puppet/pull/2626', '2014-05-07T07:02:33.000-0700', '2014-05-22T16:07:01.000-0700', '2014-05-22T16:07:01.000-0700', 'Closed', '', 6, '0', 1, 36, 10, 2, '94c1331870b9f80dd0b264b2617a08b982a0f118', 'https://tickets.puppetlabs.com/browse/PUP-2508', 'https://github.com/puppetlabs/puppet/pull/2626'),
('puppet', 33259, 15679182, 2628, 'Add extra info to property"s return', 'When working with boolean types in providers it happens too often that the values being passed around aren"t what we think they are leading the developer down a twisty road of despair while trying to figure out why his methods aren"t working.', 'https://tickets.puppetlabs.com/browse/PUP-2369', 'https://github.com/puppetlabs/puppet/pull/2628', '2014-04-27T02:04:32.000-0700', '2014-06-05T13:48:19.000-0700', '2014-06-05T13:48:19.000-0700', 'Closed', '', 6, '0', 1, 4, 4, 2, '9223145a9a3ed7c173783ce85fdbf3554c5e20e3', 'https://tickets.puppetlabs.com/browse/PUP-2369', 'https://github.com/puppetlabs/puppet/pull/2628'),
('puppet', 36956, 16317027, 2697, 'purging ssh_authorized_key fails because of missing user value', 'Given the file _/tmp/keytest_ with content\r\n{noformat}\r\nssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQCpIyCCUkkW4CancW11RlGGmcHyIFtwsgIMQGAdBe3WCc+W9MtZDFEFi3XdHQnSRpbsUuiKhiUIKQfuTWXueWIPxtG+Ujde7Ch5MYPbRZ9MDzSYz2MU8/Ir/y7vNLZBadAR131Ok35qL12TMI0Hpzu2o9Y5ZMaf0uoApZAlotJgSsmFAJyq3rdIeIIpdEvTa3C8Yk9ng1p9Dv3nHdx/SpomFIO7rIKIp/vnxplDMBzU7c3akmbI5G3adcRVbZaxiBgJ4X5OKancyq25jqQtduQmgmDOsyr9+DbhcuUafmHpk/lLQ9c8VgvyqbJBaJ7N45NlBGkaZy/frdSeJ+HSEXTr foreman-122dc11d6-bd1e-43e7-a00d-f8e2d0af54ea\r\nssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQC81jWIxrZpzL+IFE9S4yJNMrANeOJke0CbFmk8pBz4rI8RZ+1JBZdD5aZnO15nLVYZlQq1D8BLHy3F02EhfmQBINHUPA373SUedEUPqByQBOslp11sK/u0Op0X7hhW902hOFRszb9VODJifWnkB2bj4FDED6zQf8cIeTIO15CyYxPPeT/EBZ9G4RJsAItXf2ktwWaO94FGcnNYMUzvpsJCMwI4XY8ArqQBsRSrGnauhBD3e1MuqnLF4ujOqLYBwfZ5gw5VSar5i/oSsGswgwjKxmuO0hfTxDVROoIn24AHSTm38lF34djEWIASELEWxDjnFDamawfU2Dpm2MK90Jk/ doug\r\n{noformat}\r\nthe following invocation should remove the _foreman_ key\r\n{code}\r\npuppet apply -e "user { "foo": purge_ssh_keys => "/tmp/keytest", }"\r\n{code}\r\nbut it fails with\r\n{noformat}\r\nNotice: /Stage[main]/Main/Ssh_authorized_key[foreman-122dc11d6-bd1e-43e7-a00d-f8e2d0af54ea]/ensure: removed\r\nError: /Stage[main]/Main/Ssh_authorized_key[foreman-122dc11d6-bd1e-43e7-a00d-f8e2d0af54ea]: Could not evaluate: Cannot write SSH authorized keys without user\r\n{noformat}', 'https://tickets.puppetlabs.com/browse/PUP-2660', 'https://github.com/puppetlabs/puppet/pull/2697', '2014-05-25T12:20:56.000-0700', '2014-06-10T11:35:46.000-0700', '2014-06-10T11:35:46.000-0700', 'Closed', '', 4, '0', 1, 9, 1, 2, 'd6d98001fe224eb68adc065588f34aa673607ea5', 'https://tickets.puppetlabs.com/browse/PUP-2660', 'https://github.com/puppetlabs/puppet/pull/2697'),
('puppet', 36713, 16509104, 2707, 'user purge_ssh_keys not purged', 'I"m using Puppet 3.6.0 on Ubuntu 12.04 and I"m trying to purge unmanaged ssh authorized keys.\r\n\r\nI"ve added this code to my manifest:\r\n\r\n{code}\r\nuser { "ubuntu": \r\n  purge_ssh_keys => true, \r\n  home => "/home/ubuntu", \r\n}\r\n{code}\r\n\r\nHowever, no keys are purged. I do see the following lines in the agent debug output:\r\n\r\n{noformat}\r\nDebug: /Stage[main]/Role::Search/Ssh_authorized_key[key2purge1]: Nothing to manage: no ensure and the resource doesn"t exist\r\nDebug: /Stage[main]/Role::Search/Ssh_authorized_key[key2purge2]: Nothing to manage: no ensure and the resource doesn"t exist\r\n{noformat}\r\n\r\nThose are the two keys that I expect would be purged. It appears that puppet has correctly identified the keys to purge, and created resources for them, but did not ensure => absent.', 'https://tickets.puppetlabs.com/browse/PUP-2635', 'https://github.com/puppetlabs/puppet/pull/2707', '2014-05-22T08:01:05.000-0700', '2014-06-10T13:27:54.000-0700', '2014-06-10T13:27:54.000-0700', 'Closed', '', 18, '0', 2, 39, 8, 3, 'fa1f1ad199e55def1ee08667895e6cdd790232bb', 'https://tickets.puppetlabs.com/browse/PUP-2635', 'https://github.com/puppetlabs/puppet/pull/2707'),
('puppet', 28247, 0, 0, 'PR (2420) Puppet remote fileserver facility for file resources.', 'As of current release, due to the use of source_or_content.full_path, the hostname is stripped from attempts to handle file_content calls in type/file.rb. Because of this, it correctly calls file_metadata from the proper server, but then calls the puppetmaster instead of the remote fileserver for content retrieval, which fails.\r\n\r\nThis resolution might still be a bit naive, but it mitigates the issue pretty neatly.', 'https://tickets.puppetlabs.com/browse/PUP-1892', '', '2014-03-07T13:25:49.000-0800', '2014-06-11T17:08:47.000-0700', '2014-06-11T17:08:47.000-0700', 'Closed', '', 5, '0', 0, 0, 0, 0, '89b8ac1237033f87a2dba809e791966e9843dea3', 'https://tickets.puppetlabs.com/browse/PUP-1892', 'https://github.com/puppetlabs/puppet/commit/89b8ac1237033f87a2dba809e791966e9843dea3'),
('puppet', 25223, 0, 0, 'Error reporting within augeas provider fails', 'If the augeas provider fails to store a change to a file it"s error reporting is broken due to the refactoring that happened in https://github.com/puppetlabs/puppet/commit/000b8fef6a33e5c9f56c0801523de15a0e5bc30b\r\n\r\n{noformat}\r\n# cat foo.pp \r\naugeas{"enable_shorewall":\r\n  context => "/files/etc/sysconfig/shorewall",\r\n  changes => "set startup 1",\r\n  lens    => "Shellvars.lns",\r\n  incl    => "/etc/sysconfig/shorewall",\r\n}\r\n# lsattr /etc/sysconfig/shorewall\r\n----i--------e- /etc/sysconfig/shorewall\r\n# puppet apply --debug --trace foo.pp \r\nNotice: Compiled catalog for foo in environment production in 0.10 seconds\r\nDebug: Creating default schedules\r\nDebug: Puppet::Type::User::ProviderDirectoryservice: file /usr/bin/dsimport does not exist\r\nDebug: Puppet::Type::User::ProviderPw: file pw does not exist\r\nDebug: Puppet::Type::User::ProviderLdap: true value when expecting false\r\nDebug: Puppet::Type::User::ProviderUser_role_add: file roleadd does not exist\r\nDebug: Using settings: adding file resource "privatekeydir": "File[/var/lib/puppet/ssl/private_keys]{:ensure=>:directory, :loglevel=>:debug, :links=>:follow, :owner=>"puppet", :mode=>"750", :path=>"/var/lib/puppet/ssl/private_keys", :backup=>false}"\r\nDebug: Using settings: adding file resource "plugindest": "File[/var/lib/puppet/lib]{:ensure=>:directory, :loglevel=>:debug, :links=>:follow, :path=>"/var/lib/puppet/lib", :backup=>false}"\r\nDebug: Using settings: adding file resource "lastrunreport": "File[/var/lib/puppet/state/last_run_report.yaml]{:ensure=>:file, :loglevel=>:debug, :links=>:follow, :mode=>"640", :path=>"/var/lib/puppet/state/last_run_report.yaml", :backup=>false}"\r\nDebug: Using settings: adding file resource "clientbucketdir": "File[/var/lib/puppet/clientbucket]{:ensure=>:directory, :loglevel=>:debug, :links=>:follow, :mode=>"750", :path=>"/var/lib/puppet/clientbucket", :backup=>false}"\r\nDebug: Using settings: adding file resource "pluginfactdest": "File[/var/lib/puppet/facts.d]{:ensure=>:directory, :loglevel=>:debug, :links=>:follow, :path=>"/var/lib/puppet/facts.d", :backup=>false}"\r\nDebug: Using settings: adding file resource "graphdir": "File[/var/lib/puppet/state/graphs]{:ensure=>:directory, :loglevel=>:debug, :links=>:follow, :path=>"/var/lib/puppet/state/graphs", :backup=>false}"\r\nDebug: Using settings: adding file resource "ssldir": "File[/var/lib/puppet/ssl]{:ensure=>:directory, :loglevel=>:debug, :links=>:follow, :owner=>"puppet", :mode=>"771", :path=>"/var/lib/puppet/ssl", :backup=>false}"\r\nDebug: Using settings: adding file resource "statefile": "File[/var/lib/puppet/state/state.yaml]{:ensure=>:file, :loglevel=>:debug, :links=>:follow, :mode=>"660", :path=>"/var/lib/puppet/state/state.yaml", :backup=>false}"\r\nDebug: Using settings: adding file resource "statedir": "File[/var/lib/puppet/state]{:ensure=>:directory, :loglevel=>:debug, :links=>:follow, :mode=>"1755", :path=>"/var/lib/puppet/state", :backup=>false}"\r\nDebug: Using settings: adding file resource "confdir": "File[/etc/puppet]{:ensure=>:directory, :loglevel=>:debug, :links=>:follow, :path=>"/etc/puppet", :backup=>false}"\r\nDebug: Using settings: adding file resource "requestdir": "File[/var/lib/puppet/ssl/certificate_requests]{:ensure=>:directory, :loglevel=>:debug, :links=>:follow, :owner=>"puppet", :path=>"/var/lib/puppet/ssl/certificate_requests", :backup=>false}"\r\nDebug: Using settings: adding file resource "client_datadir": "File[/var/lib/puppet/client_data]{:ensure=>:directory, :loglevel=>:debug, :links=>:follow, :mode=>"750", :path=>"/var/lib/puppet/client_data", :backup=>false}"\r\nDebug: Using settings: adding file resource "lastrunfile": "File[/var/lib/puppet/state/last_run_summary.yaml]{:ensure=>:file, :loglevel=>:debug, :links=>:follow, :mode=>"644", :path=>"/var/lib/puppet/state/last_run_summary.yaml", :backup=>false}"\r\nDebug: Using settings: adding file resource "privatedir": "File[/var/lib/puppet/ssl/private]{:ensure=>:directory, :loglevel=>:debug, :links=>:follow, :owner=>"puppet", :mode=>"750", :path=>"/var/lib/puppet/ssl/private", :backup=>false}"\r\nDebug: Puppet::Type::Group::ProviderDirectoryservice: file /usr/bin/dscl does not exist\r\nDebug: Puppet::Type::Group::ProviderPw: file pw does not exist\r\nDebug: Puppet::Type::Group::ProviderLdap: true value when expecting false\r\nDebug: Using settings: adding file resource "rundir": "File[/var/run/puppet]{:ensure=>:directory, :group=>"puppet", :loglevel=>:debug, :links=>:follow, :owner=>"puppet", :mode=>"755", :path=>"/var/run/puppet", :backup=>false}"\r\nDebug: Using settings: adding file resource "certdir": "File[/var/lib/puppet/ssl/certs]{:ensure=>:directory, :loglevel=>:debug, :links=>:follow, :owner=>"puppet", :path=>"/var/lib/puppet/ssl/certs", :backup=>false}"\r\nDebug: Using settings: adding file resource "logdir": "File[/var/log/puppet]{:ensure=>:directory, :group=>"puppet", :loglevel=>:debug, :links=>:follow, :owner=>"puppet", :mode=>"750", :path=>"/var/log/puppet", :backup=>false}"\r\nDebug: Using settings: adding file resource "publickeydir": "File[/var/lib/puppet/ssl/public_keys]{:ensure=>:directory, :loglevel=>:debug, :links=>:follow, :owner=>"puppet", :path=>"/var/lib/puppet/ssl/public_keys", :backup=>false}"\r\nDebug: Using settings: adding file resource "clientyamldir": "File[/var/lib/puppet/client_yaml]{:ensure=>:directory, :loglevel=>:debug, :links=>:follow, :mode=>"750", :path=>"/var/lib/puppet/client_yaml", :backup=>false}"\r\nDebug: Using settings: adding file resource "vardir": "File[/var/lib/puppet]{:ensure=>:directory, :group=>"puppet", :loglevel=>:debug, :links=>:follow, :owner=>"puppet", :path=>"/var/lib/puppet", :backup=>false}"\r\nDebug: /File[/var/lib/puppet/ssl/private_keys]/seluser: Found seluser default "system_u" for /var/lib/puppet/ssl/private_keys\r\nDebug: /File[/var/lib/puppet/ssl/private_keys]/selrole: Found selrole default "object_r" for /var/lib/puppet/ssl/private_keys\r\nDebug: /File[/var/lib/puppet/ssl/private_keys]/seltype: Found seltype default "puppet_var_lib_t" for /var/lib/puppet/ssl/private_keys\r\nDebug: /File[/var/lib/puppet/ssl/private_keys]/selrange: Found selrange default "s0" for /var/lib/puppet/ssl/private_keys\r\nDebug: /File[/var/lib/puppet/lib]/seluser: Found seluser default "system_u" for /var/lib/puppet/lib\r\nDebug: /File[/var/lib/puppet/lib]/selrole: Found selrole default "object_r" for /var/lib/puppet/lib\r\nDebug: /File[/var/lib/puppet/lib]/seltype: Found seltype default "puppet_var_lib_t" for /var/lib/puppet/lib\r\nDebug: /File[/var/lib/puppet/lib]/selrange: Found selrange default "s0" for /var/lib/puppet/lib\r\nDebug: /File[/var/lib/puppet/state/last_run_report.yaml]/seluser: Found seluser default "system_u" for /var/lib/puppet/state/last_run_report.yaml\r\nDebug: /File[/var/lib/puppet/state/last_run_report.yaml]/selrole: Found selrole default "object_r" for /var/lib/puppet/state/last_run_report.yaml\r\nDebug: /File[/var/lib/puppet/state/last_run_report.yaml]/seltype: Found seltype default "puppet_var_lib_t" for /var/lib/puppet/state/last_run_report.yaml\r\nDebug: /File[/var/lib/puppet/state/last_run_report.yaml]/selrange: Found selrange default "s0" for /var/lib/puppet/state/last_run_report.yaml\r\nDebug: /File[/var/lib/puppet/clientbucket]/seluser: Found seluser default "system_u" for /var/lib/puppet/clientbucket\r\nDebug: /File[/var/lib/puppet/clientbucket]/selrole: Found selrole default "object_r" for /var/lib/puppet/clientbucket\r\nDebug: /File[/var/lib/puppet/clientbucket]/seltype: Found seltype default "puppet_var_lib_t" for /var/lib/puppet/clientbucket\r\nDebug: /File[/var/lib/puppet/clientbucket]/selrange: Found selrange default "s0" for /var/lib/puppet/clientbucket\r\nDebug: /File[/var/lib/puppet/facts.d]/seluser: Found seluser default "system_u" for /var/lib/puppet/facts.d\r\nDebug: /File[/var/lib/puppet/facts.d]/selrole: Found selrole default "object_r" for /var/lib/puppet/facts.d\r\nDebug: /File[/var/lib/puppet/facts.d]/seltype: Found seltype default "puppet_var_lib_t" for /var/lib/puppet/facts.d\r\nDebug: /File[/var/lib/puppet/facts.d]/selrange: Found selrange default "s0" for /var/lib/puppet/facts.d\r\nDebug: /File[/var/lib/puppet/state/graphs]/seluser: Found seluser default "system_u" for /var/lib/puppet/state/graphs\r\nDebug: /File[/var/lib/puppet/state/graphs]/selrole: Found selrole default "object_r" for /var/lib/puppet/state/graphs\r\nDebug: /File[/var/lib/puppet/state/graphs]/seltype: Found seltype default "puppet_var_lib_t" for /var/lib/puppet/state/graphs\r\nDebug: /File[/var/lib/puppet/state/graphs]/selrange: Found selrange default "s0" for /var/lib/puppet/state/graphs\r\nDebug: /File[/var/lib/puppet/ssl]/seluser: Found seluser default "system_u" for /var/lib/puppet/ssl\r\nDebug: /File[/var/lib/puppet/ssl]/selrole: Found selrole default "object_r" for /var/lib/puppet/ssl\r\nDebug: /File[/var/lib/puppet/ssl]/seltype: Found seltype default "puppet_var_lib_t" for /var/lib/puppet/ssl\r\nDebug: /File[/var/lib/puppet/ssl]/selrange: Found selrange default "s0" for /var/lib/puppet/ssl\r\nDebug: /File[/var/lib/puppet/state/state.yaml]/seluser: Found seluser default "system_u" for /var/lib/puppet/state/state.yaml\r\nDebug: /File[/var/lib/puppet/state/state.yaml]/selrole: Found selrole default "object_r" for /var/lib/puppet/state/state.yaml\r\nDebug: /File[/var/lib/puppet/state/state.yaml]/seltype: Found seltype default "puppet_var_lib_t" for /var/lib/puppet/state/state.yaml\r\nDebug: /File[/var/lib/puppet/state/state.yaml]/selrange: Found selrange default "s0" for /var/lib/puppet/state/state.yaml\r\nDebug: /File[/var/lib/puppet/state]/seluser: Found seluser default "system_u" for /var/lib/puppet/state\r\nDebug: /File[/var/lib/puppet/state]/selrole: Found selrole default "object_r" for /var/lib/puppet/state\r\nDebug: /File[/var/lib/puppet/state]/seltype: Found seltype default "puppet_var_lib_t" for /var/lib/puppet/state\r\nDebug: /File[/var/lib/puppet/state]/selrange: Found selrange default "s0" for /var/lib/puppet/state\r\nDebug: /File[/etc/puppet]/seluser: Found seluser default "system_u" for /etc/puppet\r\nDebug: /File[/etc/puppet]/selrole: Found selrole default "object_r" for /etc/puppet\r\nDebug: /File[/etc/puppet]/seltype: Found seltype default "puppet_etc_t" for /etc/puppet\r\nDebug: /File[/etc/puppet]/selrange: Found selrange default "s0" for /etc/puppet\r\nDebug: /File[/var/lib/puppet/ssl/certificate_requests]/seluser: Found seluser default "system_u" for /var/lib/puppet/ssl/certificate_requests\r\nDebug: /File[/var/lib/puppet/ssl/certificate_requests]/selrole: Found selrole default "object_r" for /var/lib/puppet/ssl/certificate_requests\r\nDebug: /File[/var/lib/puppet/ssl/certificate_requests]/seltype: Found seltype default "puppet_var_lib_t" for /var/lib/puppet/ssl/certificate_requests\r\nDebug: /File[/var/lib/puppet/ssl/certificate_requests]/selrange: Found selrange default "s0" for /var/lib/puppet/ssl/certificate_requests\r\nDebug: /File[/var/lib/puppet/client_data]/seluser: Found seluser default "system_u" for /var/lib/puppet/client_data\r\nDebug: /File[/var/lib/puppet/client_data]/selrole: Found selrole default "object_r" for /var/lib/puppet/client_data\r\nDebug: /File[/var/lib/puppet/client_data]/seltype: Found seltype default "puppet_var_lib_t" for /var/lib/puppet/client_data\r\nDebug: /File[/var/lib/puppet/client_data]/selrange: Found selrange default "s0" for /var/lib/puppet/client_data\r\nDebug: /File[/var/lib/puppet/state/last_run_summary.yaml]/seluser: Found seluser default "system_u" for /var/lib/puppet/state/last_run_summary.yaml\r\nDebug: /File[/var/lib/puppet/state/last_run_summary.yaml]/selrole: Found selrole default "object_r" for /var/lib/puppet/state/last_run_summary.yaml\r\nDebug: /File[/var/lib/puppet/state/last_run_summary.yaml]/seltype: Found seltype default "puppet_var_lib_t" for /var/lib/puppet/state/last_run_summary.yaml\r\nDebug: /File[/var/lib/puppet/state/last_run_summary.yaml]/selrange: Found selrange default "s0" for /var/lib/puppet/state/last_run_summary.yaml\r\nDebug: /File[/var/lib/puppet/ssl/private]/seluser: Found seluser default "system_u" for /var/lib/puppet/ssl/private\r\nDebug: /File[/var/lib/puppet/ssl/private]/selrole: Found selrole default "object_r" for /var/lib/puppet/ssl/private\r\nDebug: /File[/var/lib/puppet/ssl/private]/seltype: Found seltype default "puppet_var_lib_t" for /var/lib/puppet/ssl/private\r\nDebug: /File[/var/lib/puppet/ssl/private]/selrange: Found selrange default "s0" for /var/lib/puppet/ssl/private\r\nDebug: /File[/var/run/puppet]/seluser: Found seluser default "system_u" for /var/run/puppet\r\nDebug: /File[/var/run/puppet]/selrole: Found selrole default "object_r" for /var/run/puppet\r\nDebug: /File[/var/run/puppet]/seltype: Found seltype default "puppet_var_run_t" for /var/run/puppet\r\nDebug: /File[/var/run/puppet]/selrange: Found selrange default "s0" for /var/run/puppet\r\nDebug: /File[/var/lib/puppet/ssl/certs]/seluser: Found seluser default "system_u" for /var/lib/puppet/ssl/certs\r\nDebug: /File[/var/lib/puppet/ssl/certs]/selrole: Found selrole default "object_r" for /var/lib/puppet/ssl/certs\r\nDebug: /File[/var/lib/puppet/ssl/certs]/seltype: Found seltype default "puppet_var_lib_t" for /var/lib/puppet/ssl/certs\r\nDebug: /File[/var/lib/puppet/ssl/certs]/selrange: Found selrange default "s0" for /var/lib/puppet/ssl/certs\r\nDebug: /File[/var/log/puppet]/seluser: Found seluser default "system_u" for /var/log/puppet\r\nDebug: /File[/var/log/puppet]/selrole: Found selrole default "object_r" for /var/log/puppet\r\nDebug: /File[/var/log/puppet]/seltype: Found seltype default "puppet_log_t" for /var/log/puppet\r\nDebug: /File[/var/log/puppet]/selrange: Found selrange default "s0" for /var/log/puppet\r\nDebug: /File[/var/lib/puppet/ssl/public_keys]/seluser: Found seluser default "system_u" for /var/lib/puppet/ssl/public_keys\r\nDebug: /File[/var/lib/puppet/ssl/public_keys]/selrole: Found selrole default "object_r" for /var/lib/puppet/ssl/public_keys\r\nDebug: /File[/var/lib/puppet/ssl/public_keys]/seltype: Found seltype default "puppet_var_lib_t" for /var/lib/puppet/ssl/public_keys\r\nDebug: /File[/var/lib/puppet/ssl/public_keys]/selrange: Found selrange default "s0" for /var/lib/puppet/ssl/public_keys\r\nDebug: /File[/var/lib/puppet/client_yaml]/seluser: Found seluser default "system_u" for /var/lib/puppet/client_yaml\r\nDebug: /File[/var/lib/puppet/client_yaml]/selrole: Found selrole default "object_r" for /var/lib/puppet/client_yaml\r\nDebug: /File[/var/lib/puppet/client_yaml]/seltype: Found seltype default "puppet_var_lib_t" for /var/lib/puppet/client_yaml\r\nDebug: /File[/var/lib/puppet/client_yaml]/selrange: Found selrange default "s0" for /var/lib/puppet/client_yaml\r\nDebug: /File[/var/lib/puppet]/seluser: Found seluser default "system_u" for /var/lib/puppet\r\nDebug: /File[/var/lib/puppet]/selrole: Found selrole default "object_r" for /var/lib/puppet\r\nDebug: /File[/var/lib/puppet]/seltype: Found seltype default "puppet_var_lib_t" for /var/lib/puppet\r\nDebug: /File[/var/lib/puppet]/selrange: Found selrange default "s0" for /var/lib/puppet\r\nDebug: /File[/var/lib/puppet/facts.d]: Autorequiring File[/var/lib/puppet]\r\nDebug: /File[/var/lib/puppet/ssl/private_keys]: Autorequiring File[/var/lib/puppet/ssl]\r\nDebug: /File[/var/lib/puppet/ssl/public_keys]: Autorequiring File[/var/lib/puppet/ssl]\r\nDebug: /File[/var/lib/puppet/ssl/certificate_requests]: Autorequiring File[/var/lib/puppet/ssl]\r\nDebug: /File[/var/lib/puppet/ssl/certs]: Autorequiring File[/var/lib/puppet/ssl]\r\nDebug: /File[/var/lib/puppet/state/last_run_report.yaml]: Autorequiring File[/var/lib/puppet/state]\r\nDebug: /File[/var/lib/puppet/state/graphs]: Autorequiring File[/var/lib/puppet/state]\r\nDebug: /File[/var/lib/puppet/client_yaml]: Autorequiring File[/var/lib/puppet]\r\nDebug: /File[/var/lib/puppet/state]: Autorequiring File[/var/lib/puppet]\r\nDebug: /File[/var/lib/puppet/ssl]: Autorequiring File[/var/lib/puppet]\r\nDebug: /File[/var/lib/puppet/lib]: Autorequiring File[/var/lib/puppet]\r\nDebug: /File[/var/lib/puppet/ssl/private]: Autorequiring File[/var/lib/puppet/ssl]\r\nDebug: /File[/var/lib/puppet/state/last_run_summary.yaml]: Autorequiring File[/var/lib/puppet/state]\r\nDebug: /File[/var/lib/puppet/client_data]: Autorequiring File[/var/lib/puppet]\r\nDebug: /File[/var/lib/puppet/state/state.yaml]: Autorequiring File[/var/lib/puppet/state]\r\nDebug: /File[/var/lib/puppet/clientbucket]: Autorequiring File[/var/lib/puppet]\r\nDebug: /File[/var/lib/puppet/state/last_run_report.yaml]/seluser: seluser changed "unconfined_u" to "system_u"\r\nDebug: /File[/var/lib/puppet/state/state.yaml]/seluser: seluser changed "unconfined_u" to "system_u"\r\nDebug: /File[/var/lib/puppet/state/last_run_summary.yaml]/seluser: seluser changed "unconfined_u" to "system_u"\r\nDebug: Finishing transaction 70304989357000\r\nDebug: Loaded state in 0.05 seconds\r\nDebug: Loaded state in 0.06 seconds\r\nInfo: Applying configuration version "1391346399"\r\nDebug: Augeas[enable_shorewall](provider=augeas): Opening augeas with root /, lens path , flags 64\r\nDebug: Augeas[enable_shorewall](provider=augeas): Augeas version 1.0.0 is installed\r\nDebug: Augeas[enable_shorewall](provider=augeas): Will attempt to save and only run if files changed\r\nDebug: Augeas[enable_shorewall](provider=augeas): sending command "set" with params ["/files/etc/sysconfig/shorewall/startup", "1"]\r\nDebug: Augeas[enable_shorewall](provider=augeas): Files changed, should execute\r\nDebug: Augeas[enable_shorewall](provider=augeas): sending command "set" with params ["/files/etc/sysconfig/shorewall/startup", "1"]\r\nDebug: Augeas[enable_shorewall](provider=augeas): Closed the augeas connection\r\nError: undefined local variable or method `success" for #<Puppet::Type::Augeas::ProviderAugeas:0x7fe24e60e8d8>\r\n/usr/lib/ruby/site_ruby/1.8/puppet/provider/augeas/augeas.rb:430:in `execute_changes"\r\n/usr/lib/ruby/site_ruby/1.8/puppet/type/augeas.rb:184:in `sync"\r\n/usr/lib/ruby/site_ruby/1.8/puppet/transaction/resource_harness.rb:193:in `sync"\r\n/usr/lib/ruby/site_ruby/1.8/puppet/transaction/resource_harness.rb:130:in `sync_if_needed"\r\n/usr/lib/ruby/site_ruby/1.8/puppet/transaction/resource_harness.rb:82:in `perform_changes"\r\n/usr/lib/ruby/site_ruby/1.8/puppet/transaction/resource_harness.rb:81:in `each"\r\n/usr/lib/ruby/site_ruby/1.8/puppet/transaction/resource_harness.rb:81:in `perform_changes"\r\n/usr/lib/ruby/site_ruby/1.8/puppet/transaction/resource_harness.rb:18:in `evaluate"\r\n/usr/lib/ruby/site_ruby/1.8/puppet/transaction.rb:174:in `apply"\r\n/usr/lib/ruby/site_ruby/1.8/puppet/transaction.rb:187:in `eval_resource"\r\n/usr/lib/ruby/site_ruby/1.8/puppet/transaction.rb:117:in `call"\r\n/usr/lib/ruby/site_ruby/1.8/puppet/transaction.rb:117:in `evaluate"\r\n/usr/lib/ruby/site_ruby/1.8/puppet/util.rb:327:in `thinmark"\r\n/usr/lib/ruby/1.8/benchmark.rb:308:in `realtime"\r\n/usr/lib/ruby/site_ruby/1.8/puppet/util.rb:326:in `thinmark"\r\n/usr/lib/ruby/site_ruby/1.8/puppet/transaction.rb:117:in `evaluate"\r\n/usr/lib/ruby/site_ruby/1.8/puppet/graph/relationship_graph.rb:118:in `traverse"\r\n/usr/lib/ruby/site_ruby/1.8/puppet/transaction.rb:108:in `evaluate"\r\n/usr/lib/ruby/site_ruby/1.8/puppet/resource/catalog.rb:164:in `apply"\r\n/usr/lib/ruby/site_ruby/1.8/puppet/util/log.rb:149:in `with_destination"\r\n/usr/lib/ruby/site_ruby/1.8/puppet/transaction/report.rb:108:in `as_logging_destination"\r\n/usr/lib/ruby/site_ruby/1.8/puppet/resource/catalog.rb:163:in `apply"\r\n/usr/lib/ruby/site_ruby/1.8/puppet/configurer.rb:125:in `apply_catalog"\r\n/usr/lib/ruby/site_ruby/1.8/puppet/util.rb:161:in `benchmark"\r\n/usr/lib/ruby/1.8/benchmark.rb:308:in `realtime"\r\n/usr/lib/ruby/site_ruby/1.8/puppet/util.rb:160:in `benchmark"\r\n/usr/lib/ruby/site_ruby/1.8/puppet/configurer.rb:124:in `apply_catalog"\r\n/usr/lib/ruby/site_ruby/1.8/puppet/configurer.rb:192:in `run"\r\n/usr/lib/ruby/site_ruby/1.8/puppet/application/apply.rb:268:in `apply_catalog"\r\n/usr/lib/ruby/site_ruby/1.8/puppet/application/apply.rb:218:in `main"\r\n/usr/lib/ruby/site_ruby/1.8/puppet/application/apply.rb:146:in `run_command"\r\n/usr/lib/ruby/site_ruby/1.8/puppet/application.rb:364:in `run"\r\n/usr/lib/ruby/site_ruby/1.8/puppet/application.rb:470:in `plugin_hook"\r\n/usr/lib/ruby/site_ruby/1.8/puppet/application.rb:364:in `run"\r\n/usr/lib/ruby/site_ruby/1.8/puppet/util.rb:478:in `exit_on_fail"\r\n/usr/lib/ruby/site_ruby/1.8/puppet/application.rb:364:in `run"\r\n/usr/lib/ruby/site_ruby/1.8/puppet/util/command_line.rb:137:in `run"\r\n/usr/lib/ruby/site_ruby/1.8/puppet/util/command_line.rb:91:in `execute"\r\n/usr/bin/puppet:4\r\nError: /Stage[main]/Main/Augeas[enable_shorewall]/returns: change from need_to_run to 0 failed: undefined local variable or method `success" for #<Puppet::Type::Augeas::ProviderAugeas:0x7fe24e60e8d8>\r\nDebug: Finishing transaction 70304966438380\r\nDebug: Storing state\r\nDebug: Stored state in 0.35 seconds\r\nNotice: Finished catalog run in 1.50 seconds\r\nDebug: Using settings: adding file resource "rrddir": "File[/var/lib/puppet/rrd]{:ensure=>:directory, :group=>"puppet", :loglevel=>:debug, :links=>:follow, :owner=>"puppet", :mode=>"750", :path=>"/var/lib/puppet/rrd", :backup=>false}"\r\nDebug: /File[/var/lib/puppet/rrd]/seluser: Found seluser default "system_u" for /var/lib/puppet/rrd\r\nDebug: /File[/var/lib/puppet/rrd]/selrole: Found selrole default "object_r" for /var/lib/puppet/rrd\r\nDebug: /File[/var/lib/puppet/rrd]/seltype: Found seltype default "puppet_var_lib_t" for /var/lib/puppet/rrd\r\nDebug: /File[/var/lib/puppet/rrd]/selrange: Found selrange default "s0" for /var/lib/puppet/rrd\r\nDebug: Finishing transaction 70304966207300\r\nDebug: Received report to process from foo\r\nDebug: Processing report from foo with processor Puppet::Reports::Store\r\n{noformat}\r\n\r\nThis is on CentOS 6 using latest packages of puppetlabs:\r\n\r\n{noformat}\r\n# rpm -qi puppet ruby-augeas augeas-libs\r\nName        : puppet                       Relocations: (not relocatable)\r\nVersion     : 3.4.2                             Vendor: Puppet Labs\r\nRelease     : 1.el6                         Build Date: Mon 06 Jan 2014 11:41:42 PM CET\r\nInstall Date: Fri 24 Jan 2014 11:27:46 AM CET      Build Host: rpm-builder-3\r\nGroup       : System Environment/Base       Source RPM: puppet-3.4.2-1.el6.src.rpm\r\nSize        : 3796646                          License: ASL 2.0\r\nSignature   : RSA/10, Tue 07 Jan 2014 01:28:53 AM CET, Key ID 1054b7a24bd6ec30\r\nURL         : http://puppetlabs.com\r\nSummary     : A network tool for managing many disparate systems\r\nDescription :\r\nPuppet lets you centrally manage every important aspect of your system using a\r\ncross-platform specification language that manages all the separate elements\r\nnormally aggregated in different files, like users, cron jobs, and hosts,\r\nalong with obviously discrete elements like packages, services, and files.\r\nName        : ruby-augeas                  Relocations: (not relocatable)\r\nVersion     : 0.4.1                             Vendor: Fedora Project\r\nRelease     : 1.el6                         Build Date: Tue 14 Feb 2012 01:43:04 AM CET\r\nInstall Date: Thu 19 Dec 2013 11:58:30 PM CET      Build Host: x86-17.phx2.fedoraproject.org\r\nGroup       : Development/Languages         Source RPM: ruby-augeas-0.4.1-1.el6.src.rpm\r\nSize        : 45845                            License: LGPLv2+\r\nSignature   : RSA/8, Tue 14 Feb 2012 05:45:43 PM CET, Key ID 3b49df2a0608b895\r\nPackager    : Fedora Project\r\nURL         : http://augeas.net\r\nSummary     : Ruby bindings for Augeas\r\nDescription :\r\nRuby bindings for augeas.\r\nName        : augeas-libs                  Relocations: (not relocatable)\r\nVersion     : 1.0.0                             Vendor: CentOS\r\nRelease     : 5.el6_5.1                     Build Date: Mon 20 Jan 2014 06:41:25 PM CET\r\nInstall Date: Fri 24 Jan 2014 11:27:48 AM CET      Build Host: c6b10.bsys.dev.centos.org\r\nGroup       : System Environment/Libraries   Source RPM: augeas-1.0.0-5.el6_5.1.src.rpm\r\nSize        : 957408                           License: LGPLv2+\r\nSignature   : RSA/SHA1, Mon 20 Jan 2014 06:58:04 PM CET, Key ID 0946fca2c105b9de\r\nPackager    : CentOS BuildSystem <http://bugs.centos.org>\r\nURL         : http://augeas.net/\r\nSummary     : Libraries for augeas\r\nDescription :\r\nThe libraries for augeas.\r\n{noformat}', 'https://tickets.puppetlabs.com/browse/PUP-1568', '', '2014-02-02T05:13:23.000-0800', '2014-06-17T10:38:05.000-0700', '2014-06-17T10:38:05.000-0700', 'Closed', 'augeas;puppet', 6, '0', 0, 0, 0, 0, '658f1237c1596a6f735b7b707130fc0897a1a113', 'https://tickets.puppetlabs.com/browse/PUP-1568', 'https://github.com/puppetlabs/puppet/commit/658f1237c1596a6f735b7b707130fc0897a1a113'),
('puppet', 39565, 17363282, 2783, '"puppetca" needs feature to remove (/revoke) a pending certificate signing request', 'It is not possible to remove a pending certificate signing request with "puppetca --revoke $fqdn":\r\n\r\n<pre>\r\n[root@X puppet]# puppetca --list\r\nrhel32bit.x.local\r\n[root@X puppet]# puppetca --revoke rhel32bit.x.local\r\nrhel32bit.x.local\r\nnotice: Revoked certificate with serial # Inventory of signed certificates\r\n\r\nerr: Could not call revoke: Cannot convert into OpenSSL::BN\r\n</pre>\r\n\r\nYou have to remove the certificate signing request manually. "puppetca" should (IMO) do this.', 'https://tickets.puppetlabs.com/browse/PUP-2801', 'https://github.com/puppetlabs/puppet/pull/2783', '2014-06-18T05:02:24.000-0700', '2014-06-19T14:14:06.000-0700', '2014-06-19T14:14:06.000-0700', 'Closed', 'customer;redmine', 4, '0', 1, 7, 0, 1, 'f69239a3a9b6694ae236e5a8305797b0b1d30c45', 'https://tickets.puppetlabs.com/browse/PUP-2801', 'https://github.com/puppetlabs/puppet/pull/2783'),
('puppet', 32563, 0, 0, 'windows install_options =>  command with spaces is quoted & fails', ' "Puppet  will automatically quote any option that contains spaces."\r\n\r\nAdding a quote becuase of the space between /adminfile and the path, which causes the installer to fail\r\n\r\n install_options => ["/passive", "/adminfile \\server1\IDEinstall\AdminDeployment.xml","/norestart"],\r\n\r\nthe windows error says "cmdline: "/passive "/adminfile \\   the quote should not be there.\r\n\r\nhttp://msdn.microsoft.com/en-us/library/ee225237.aspx ', 'https://tickets.puppetlabs.com/browse/PUP-2637', '', '2014-04-22T08:38:51.000-0700', '2014-07-28T05:09:55.000-0700', '2014-07-28T05:09:55.000-0700', 'Closed', 'windows', 6, '0', 0, 0, 0, 0, 'e182038bd4db7adb36f15431e2d42c035ef3e334', 'https://tickets.puppetlabs.com/browse/PUP-2637', 'https://github.com/puppetlabs/puppet/commit/e182038bd4db7adb36f15431e2d42c035ef3e334'),
('puppet', 22586, 11192169, 2211, 'Default file mode is now 0600 instead of 0644', 'As of Puppet 3.4.1 and 2.7.24, the default file mode when no mode is explicitly specified on a file resource has changed from 0644 to 0600.  It appears from the commits (https://github.com/puppetlabs/puppet/commit/65909fbe and 691fbbeaa) that this was not the intention.\r\n\r\n{noformat}\r\n# rpm -q puppet\r\npuppet-3.4.0-1.el6.noarch\r\n# puppet apply -e "file { "/tmp/a": content => "foo" }"\r\nNotice: Compiled catalog for foreman.example.com in environment production in 0.04 seconds\r\nNotice: /Stage[main]/Main/File[/tmp/a]/ensure: defined content as "{md5}acbd18db4cc2f85cedef654fccc4a4d8"\r\nNotice: Finished catalog run in 0.07 seconds\r\n# ll /tmp/a\r\n-rw-r--r-- 1 root root 3 Dec 27 12:01 /tmp/a\r\n\r\n# rpm -q puppet\r\npuppet-3.4.1-1.el6.noarch\r\n# puppet apply -e "file { "/tmp/a": content => "foo" }"\r\nNotice: Compiled catalog for foreman.example.com in environment production in 0.04 seconds\r\nNotice: /Stage[main]/Main/File[/tmp/a]/ensure: defined content as "{md5}acbd18db4cc2f85cedef654fccc4a4d8"\r\nNotice: Finished catalog run in 0.08 seconds\r\n# ll /tmp/a\r\n-rw------- 1 root root 3 Dec 27 11:58 /tmp/a\r\n{noformat}', 'https://tickets.puppetlabs.com/browse/PUP-1255', 'https://github.com/puppetlabs/puppet/pull/2211', '2013-12-27T04:05:18.000-0800', '2014-07-28T05:10:15.000-0700', '2014-07-28T05:10:15.000-0700', 'Closed', '', 11, '0', 1, 4, 0, 1, '55cc322469464a16f9044e6fce6220e4ffd73ea2', 'https://tickets.puppetlabs.com/browse/PUP-1255', 'https://github.com/puppetlabs/puppet/pull/2211'),
('puppet', 10951, 423023895, 8172, '(19727) Duplicate file resource detection/path validation weirdness with multiple slashes in paths', 'Puppet is not predictable when multiple slashes are at the front of a file path. Specifically, the File resource does not discriminate between `//foo` and `/foo` and treats them as two different resources. ', 'https://tickets.puppetlabs.com/browse/PUP-12', 'https://github.com/puppetlabs/puppet/pull/8172', '2013-06-17T17:23:42.000-0700', '2014-07-28T09:53:27.000-0700', '2014-07-28T09:53:27.000-0700', 'Resolved', 'redmine', 1, '0', 4, 457, 74, 10, 'fff10ad9b27cb532139f178378b1469641a83506', 'https://tickets.puppetlabs.com/browse/PUP-12', 'https://github.com/puppetlabs/puppet/pull/8172'),
('puppet', 14109, 173313289, 6713, 'ParsedFile providers do not clear failed flush operations from their queues', 'Providers based on ParsedFile batch up write operations for the files they manage and place them in a queue. At the end of resource processing, the provider class iterates through the queue and flushes each batch of writes to disk.\n\nThe problem is: if one batch of operations fails to flush an exception is raised which causes the program to jump over the code that clears out the queue. This results in failing jobs stuck at the front of the queue which causes all successive resources to fail. Even worse, successive resources fail with the error message of the failed resource which makes it appear that Puppet is attempting to write every ParsedFile resource to a single file. This is very confusing.', 'https://tickets.puppetlabs.com/browse/PUP-288', 'https://github.com/puppetlabs/puppet/pull/6713', '2013-09-04T09:05:08.000-0700', '2014-07-28T09:53:30.000-0700', '2014-07-28T09:53:30.000-0700', 'Resolved', '', 2, '0', 1, 6, 4, 1, '4ccac8deb454ba378b66e164e40dc8f572a84f92', 'https://tickets.puppetlabs.com/browse/PUP-288', 'https://github.com/puppetlabs/puppet/pull/6713'),
('puppet', 14614, 25466437, 3375, 'Apt package ensure absent/purged causes warnings on 3.3.0', 'Redmine #22529', 'https://tickets.puppetlabs.com/browse/PUP-337', 'https://github.com/puppetlabs/puppet/pull/3375', '2013-09-13T09:52:39.000-0700', '2014-07-28T09:53:37.000-0700', '2014-07-28T09:53:37.000-0700', 'Resolved', '', 3, '0', 6, 131, 0, 2, '6afbf3375df4c151c2ec8fa9f96ccc2a8ae7e781', 'https://tickets.puppetlabs.com/browse/PUP-337', 'https://github.com/puppetlabs/puppet/pull/3375'),
('puppet', 35786, 15959934, 2657, 'Enable TLSv1.2 in apache vhost config', 'Our apache vhost configuration is used when building passenger packages on debian. It was added in [d85d73c|https://github.com/puppetlabs/puppet/commit/d85d73c570a60891607d2ce5b42dba4617f4ca6c] and hasn"t been updated since. Thanks goes to [~azet] for bringing this to our attention in PUP-2177.\r\n\r\nHowever, we"ve run into a problem creating a single ciphersuite string that works correctly in openssl versions 0.9.7m <= version < 1.0.0a, and versions >= 1.0.0a. See discussion at https://github.com/puppetlabs/puppet/pull/2494 and http://marc.info/?l=openssl-dev&m=139993778731161&w=2\r\n\r\nWe would like to merge a subset of the changes proposed in PUP-2177 for immediate release in 3.6.1. Specifically, adding support for TLSv1.2, removing AECDH, and other insecure algorithms, e.g DES, MD5.\r\n\r\nOnce the compatibility issues described in PR 2494 are resolved, we"ll bring in those changes, which optimize for even greater security, such as PFS.', 'https://tickets.puppetlabs.com/browse/PUP-2582', 'https://github.com/puppetlabs/puppet/pull/2657', '2014-05-15T15:25:13.000-0700', '2014-07-28T09:57:23.000-0700', '2014-07-28T09:57:23.000-0700', 'Closed', '', 5, '0', 1, 4, 2, 1, '05af20b70b5ad5ee0079f6661aa8fa163935b608', 'https://tickets.puppetlabs.com/browse/PUP-2582', 'https://github.com/puppetlabs/puppet/pull/2657'),
('puppet', 11303, 783926189, 8824, 'Runinterval setting broken on Windows with ruby 1.9', 'See https://projects.puppetlabs.com/issues/21043', 'https://tickets.puppetlabs.com/browse/PUP-58', 'https://github.com/puppetlabs/puppet/pull/8824', '2013-06-24T17:29:01.000-0700', '2014-09-04T10:29:43.000-0700', '2014-09-04T10:29:43.000-0700', 'Resolved', '', 2, '0', 2, 8, 2, 2, 'e4cd322de39476faf4f33722bb87e2441453249d', 'https://tickets.puppetlabs.com/browse/PUP-58', 'https://github.com/puppetlabs/puppet/pull/8824'),
('puppet', 37819, 16635472, 2727, 'Audit of mtime/ctime for files on ext4 reports spurious changes (only ruby 1.9+)', '{noformat}\r\n[root@master323-centos ~]# puppet --version\r\n3.4.3 (Puppet Enterprise 3.2.3)\r\n[root@master323-centos ~]# /opt/puppet/bin/ruby --version\r\nruby 1.9.3p484 (2013-11-22 revision 43786) [x86_64-linux]\r\n[root@master323-centos ~]# mkdir /tmp/test/\r\n[root@master323-centos ~]# puppet apply -e "file { "/tmp/test/watch_me": ensure => directory, audit => [ "mtime", "ctime" ] }"\r\nNotice: Compiled catalog for master323-centos in environment production in 0.17 seconds\r\nNotice: /Stage[main]/Main/File[/tmp/test/watch_me]/ensure: created\r\nNotice: Finished catalog run in 0.33 seconds\r\n[root@master323-centos ~]# puppet apply -e "file { "/tmp/test/watch_me": ensure => directory, audit => [ "mtime", "ctime" ] }"\r\nNotice: Compiled catalog for master323-centos in environment production in 0.18 seconds\r\nNotice: /Stage[main]/Main/File[/tmp/test/watch_me]/mtime: audit change: previously recorded value absent has been changed to 2014-05-29 18:38:33 +0000\r\nNotice: /Stage[main]/Main/File[/tmp/test/watch_me]/ctime: audit change: previously recorded value absent has been changed to 2014-05-29 18:38:33 +0000\r\nNotice: Finished catalog run in 0.31 seconds\r\n[root@master323-centos ~]# puppet apply -e "file { "/tmp/test/watch_me": ensure => directory, audit => [ "mtime", "ctime" ] }"\r\nNotice: Compiled catalog for master323-centos in environment production in 0.16 seconds\r\nNotice: /Stage[main]/Main/File[/tmp/test/watch_me]/mtime: audit change: previously recorded value 2014-05-29 18:38:33 +0000 has been changed to 2014-05-29 18:38:33 +0000\r\nNotice: /Stage[main]/Main/File[/tmp/test/watch_me]/ctime: audit change: previously recorded value 2014-05-29 18:38:33 +0000 has been changed to 2014-05-29 18:38:33 +0000\r\nNotice: Finished catalog run in 0.34 seconds\r\n[root@master323-centos ~]# puppet apply -e "file { "/tmp/test/watch_me": ensure => directory, audit => [ "mtime", "ctime" ] }"\r\nNotice: Compiled catalog for master323-centos in environment production in 0.19 seconds\r\nNotice: /Stage[main]/Main/File[/tmp/test/watch_me]/mtime: audit change: previously recorded value 2014-05-29 18:38:33 +0000 has been changed to 2014-05-29 18:38:33 +0000\r\nNotice: /Stage[main]/Main/File[/tmp/test/watch_me]/ctime: audit change: previously recorded value 2014-05-29 18:38:33 +0000 has been changed to 2014-05-29 18:38:33 +0000\r\nNotice: Finished catalog run in 0.32 seconds\r\n{noformat}\r\n', 'https://tickets.puppetlabs.com/browse/PUP-2710', 'https://github.com/puppetlabs/puppet/pull/2727', '2014-06-02T08:49:22.000-0700', '2014-09-04T13:29:13.000-0700', '2014-09-04T13:29:13.000-0700', 'Closed', '', 6, '0', 1, 80, 3, 2, 'ec910598c2c6953079d3683063ae730c4cebd854', 'https://tickets.puppetlabs.com/browse/PUP-2710', 'https://github.com/puppetlabs/puppet/pull/2727'),
('puppet', 35605, 16634045, 2726, 'Mac OS X version comparison fails spuriously', 'Hypothetical future versions of Mac OS X, after Mavericks (OS X 10.9) would probably be numbered "10.10.x", causing macosx_productversion_major to return 10.10. This would cause Puppet not to run on this operatingsystem, because although most of the version checks in {{lib/puppet/provider/nameservice/directoryservice.rb}} use the safe Puppet::Util::Package.versioncmp method, the one which determines whether Puppet can run at all ({{fail_if_wrong_version}}) does a naïve string comparison which triggers an amusing Ruby WAT:\r\n\r\n{code}\r\nirb(main):001:0> "10.10" > "10.5"\r\n=> false\r\nirb(main):002:0> "10.9" > "10.5"\r\n=> true\r\n{code}\r\n\r\nPure speculation might lead one to conclude that this check should use the same versioncmp helper that the rest of the directoryservice methods use.', 'https://tickets.puppetlabs.com/browse/PUP-2577', 'https://github.com/puppetlabs/puppet/pull/2726', '2014-05-14T19:39:56.000-0700', '2014-09-04T13:29:15.000-0700', '2014-09-04T13:29:15.000-0700', 'Closed', '', 1, '0', 1, 11, 1, 2, '8e52b3e4defaae1b578fcffe0d69930538dd97e0', 'https://tickets.puppetlabs.com/browse/PUP-2577', 'https://github.com/puppetlabs/puppet/pull/2726'),
('puppet', 32323, 14927790, 2553, 'ArgumentErrors in file_server config parser are swallowed by raising the error wrong', 'Within the parser for the file_serving config, multiple ArgumentErrors are raised with the wrong amount of arguments, raising a different ArgumentError.\r\n\r\nLike: Yo dawg, I heard you like ArgumentErrors so I put an ArgumentError in your ArgumentError.\r\n\r\nPR coming.', 'https://tickets.puppetlabs.com/browse/PUP-2303', 'https://github.com/puppetlabs/puppet/pull/2553', '2014-04-18T11:09:57.000-0700', '2014-09-04T13:29:16.000-0700', '2014-09-04T13:29:16.000-0700', 'Closed', '', 2, '0', 1, 3, 3, 1, '0c67391354deded3df5235146302788b0023d9a6', 'https://tickets.puppetlabs.com/browse/PUP-2303', 'https://github.com/puppetlabs/puppet/pull/2553'),
('puppet', 34406, 16610657, 2719, 'Error when evaluating #type in Puppet::Error message interpolation for Puppet::Resource::Ral', 'The bug is triggered when the Puppet::Error string is interpolated. The #type method is called recursively and fails with an ArgumentError: wrong number of arguments (0 for 1).\r\n\r\n{code:none}\r\n  def type( request )\r\n    Puppet::Type.type(type_name(request)) or raise Puppet::Error, "Could not find type #{type}"\r\n  end\r\n{code}\r\nbq. https://github.com/puppetlabs/puppet/blob/master/lib/puppet/indirector/resource/ral.rb#L62', 'https://tickets.puppetlabs.com/browse/PUP-2506', 'https://github.com/puppetlabs/puppet/pull/2719', '2014-05-06T13:26:43.000-0700', '2014-09-04T13:29:18.000-0700', '2014-09-04T13:29:18.000-0700', 'Closed', '', 3, '0', 1, 6, 1, 2, 'dc12d2a25d4e64ab76280baed96ef7866d376b9b', 'https://tickets.puppetlabs.com/browse/PUP-2506', 'https://github.com/puppetlabs/puppet/pull/2719'),
('puppet', 29852, 15907964, 2652, 'unless_uid on user is completely broken wrt ranges', 'A PR was merged in PUP-1447 that adds an unless_uid option. However, the implementation is completely broken:\r\n\r\nThis works:\r\n{noformat}\r\n  resources { "user":\r\n    purge              => true,\r\n    unless_system_user => true,\r\n    unless_uid         => 20000,\r\n  }\r\n{noformat}\r\n\r\nBroken:\r\n{noformat}\r\n  resources { "user":\r\n    purge              => true,\r\n    unless_system_user => true,\r\n    unless_uid         => 20000..39999,\r\n  }\r\nError: Could not retrieve catalog from remote server: Error 400 on SERVER: Syntax error at "."; expected "}\r\n{noformat}\r\n\r\nBroken:\r\n{noformat}\r\n  resources { "user":\r\n    purge              => true,\r\n    unless_system_user => true,\r\n    unless_uid         => [20000..29999, 30000..39999],\r\n  }\r\nError: Could not retrieve catalog from remote server: Error 400 on SERVER: Syntax error at "."; expected "]"\r\n{noformat}\r\n\r\nBroken:\r\n{noformat}\r\n  resources { "user":\r\n    purge              => true,\r\n    unless_system_user => true,\r\n    unless_uid         => ["20000..29999", "30000..39999"],\r\n  }\r\nError: /Stage[main]/Users::Resources/Resources[user]: Failed to generate additional resources using "generate": can"t convert Fixnum into String\r\n{noformat}', 'https://tickets.puppetlabs.com/browse/PUP-2031', 'https://github.com/puppetlabs/puppet/pull/2652', '2014-03-25T02:13:24.000-0700', '2014-09-04T13:29:25.000-0700', '2014-09-04T13:29:25.000-0700', 'Closed', '', 33, '0', 1, 32, 62, 2, '52a6e6b143cf74a023d6e977d46d58a213b8b9fc', 'https://tickets.puppetlabs.com/browse/PUP-2031', 'https://github.com/puppetlabs/puppet/pull/2652'),
('puppet', 40767, 17805114, 2824, 'Read UID_MIN from /etc/login.defs (if available) instead of hardcoding minimum.', '', 'https://tickets.puppetlabs.com/browse/PUP-2866', 'https://github.com/puppetlabs/puppet/pull/2824', '2014-06-30T12:44:47.000-0700', '2014-09-04T13:29:25.000-0700', '2014-09-04T13:29:25.000-0700', 'Closed', '', 4, '0', 1, 78, 34, 2, '485c0bf2f6414ae1f597bfe6f41215480c5e5e26', 'https://tickets.puppetlabs.com/browse/PUP-2866', 'https://github.com/puppetlabs/puppet/pull/2824'),
('puppet', 40056, 17488738, 2793, 'Description of disable_warnings setting is incomplete', 'The description currently reads:\r\n\r\n{quote}\r\nA list of warning types to disable. Currently the only warning type that can be disabled are deprecations, but more warning types may be added later.\r\n{quote}\r\n\r\nThis needs a clearly labeled list of keywords; right now, the user has to guess. It could also use some context about why you would want to do this. ', 'https://tickets.puppetlabs.com/browse/PUP-2822', 'https://github.com/puppetlabs/puppet/pull/2793', '2014-06-23T10:39:44.000-0700', '2014-09-04T13:29:30.000-0700', '2014-09-04T13:29:30.000-0700', 'Closed', '', 2, '0', 1, 10, 2, 1, '06457685caaf24285f5ff0de6a4c61248752daee', 'https://tickets.puppetlabs.com/browse/PUP-2822', 'https://github.com/puppetlabs/puppet/pull/2793'),
('puppet', 13338, 14904579, 2549, 'User provider password_max_age attribute is flawed under Solaris', 'A user reported this, and did an excellent write up of the issue and a possible fix, so I"m just going to paste that: \r\n\r\nThe password_max_age logic is flawed on Solaris.  At first, it seems to work:\r\n\r\n{noformat}\r\n# tail -1 /etc/passwd\r\nfoobar:x:911:911::/home/foobar:/bin/sh\r\n\r\n# tail -1 /etc/shadow\r\nfoobar:GI2XGzW0DitJk:15931::182:28:::\r\n{noformat}\r\n\r\nExcerpt from Puppet manifest:\r\n\r\n{code}\r\nuser { "foobar":\r\n  uid => 911,\r\n  gid => 911,\r\n  password_max_age => -1,  <<<<<<<<<<\r\n  ensure => present,\r\n}\r\n{code}\r\n\r\n{noformat}\r\n# /opt/puppet/bin/puppet agent --test\r\n...\r\nnotice: /Stage[main]/Site::Common/User[foobar]/password_max_age: password_max_age changed "182" to "-1"\r\n\r\nroot@its-au-psnpdevap4:/export/home/e05593 # tail -1 /etc/shadow\r\nfoobar:GI2XGzW0DitJk:15931::::::\r\n{noformat}\r\n\r\nSo far so good ... password expiration was removed properly and subsequent puppet runs are quiet.  The problem occurs after a failed login attempt:\r\n\r\n{noformat}\r\nroot@its-au-psnpdevap4:/export/home/e05593 # tail -1 /etc/shadow\r\nfoobar:GI2XGzW0DitJk:15931::::::1\r\n{noformat}\r\n\r\nNotice the last field is now {{1}} indicating 1 failed login.  Puppet will now wrongly claim that password expiration is enabled ... and all subsequent Puppet runs attempt to remove it: \r\n{noformat}\r\n# /opt/puppet/bin/puppet agent --test\r\n...\r\nnotice: /Stage[main]/Site::Common/User[foobar]/password_max_age: password_max_age changed "" to "-1"\r\n{noformat}\r\n\r\nThe logic error is in {{user_role_add.rb}}.  The following patch seems to fix the problem:\r\n{noformat}\r\n--- /opt/puppet/lib/ruby/site_ruby/1.8/puppet/provider/user/user_role_add.rb   2013-06-08 07:47:48.000000000 +1000\r\n+++ user_role_add.rb    2013-08-14 16:55:46.347435848 +1000\r\n@@ -174,7 +174,7 @@\r\n\r\n   def password_max_age\r\n     return :absent unless shadow_entry\r\n-    shadow_entry[4] || -1\r\n+    (shadow_entry[4].nil? || shadow_entry[4].empty?) ? -1 : shadow_entry[4]\r\n   end\r\n\r\n   # Read in /etc/shadow, find the line for our used and rewrite it with the\r\n{noformat}\r\n\r\nPersonally, I find it confusing to have nil array elements, because shadow should always have 9 fields.  I would probably have populated @shadow_entry as follows:\r\n{noformat}\r\n--- /opt/puppet/lib/ruby/site_ruby/1.8/puppet/provider/user/user_role_add.rb   2013-06-08 07:47:48.000000000 +1000\r\n+++ user_role_add.rb    2013-08-14 17:01:14.141392541 +1000\r\n@@ -160,7 +160,7 @@\r\n     return @shadow_entry if defined? @shadow_entry\r\n     @shadow_entry = File.readlines(target_file_path).\r\n       reject { |r| r =~ /^[^\w]/ }.\r\n-      collect { |l| l.chomp.split(":") }.\r\n+      collect { |l| l.chomp.split(":", -1) }.\r\n       find { |user, _| user == @resource[:name] }\r\n   end\r\n{noformat}\r\n\r\nNote that the original logic error would have been obvious if this approach had been used.  It would also render {{.nil?}} checks unnecessary ... assuming an array length sanity check after the file is read.', 'https://tickets.puppetlabs.com/browse/PUP-229', 'https://github.com/puppetlabs/puppet/pull/2549', '2013-08-14T15:13:26.000-0700', '2014-09-04T13:29:33.000-0700', '2014-09-04T13:29:33.000-0700', 'Closed', 'puppet', 3, '0', 2, 85, 0, 5, '997917def10d36360213f71f05961943a9f4d74c', 'https://tickets.puppetlabs.com/browse/PUP-229', 'https://github.com/puppetlabs/puppet/pull/2549'),
('puppet', 29228, 13784872, 2455, 'Make gem provider match on a single gem name', '*Old Way*\r\n\r\nGem provider would continuously upgrade bundler because it would match on {{0.1.0}} not {{1.5.3}}.\r\n\r\n{{gem list --remote bundler$}}\r\n\r\nREMOTE GEMS\r\nappbundler (0.1.0)\r\nasset_bundler (0.2.0)\r\nassetbundler (0.0.0)\r\natd-asset_bundler (0.0.3)\r\nbowline-bundler (0.0.4)\r\nbundler (1.5.3)\r\ncapistrano-bundler (1.1.2)\r\ncapistrano-ext-rvm-bundler (0.0.2)\r\nctags-bundler (0.0.1)\r\ngem_bundler (0.2)\r\nguard-bundler (2.0.0)\r\nguard-ctags-bundler (1.0.2)\r\nhello_world_bundler (0.1.2)\r\nhoe-bundler (1.2.0)\r\njbundler (0.5.5)\r\nmoneypools-bundler (0.8.1)\r\nmotion-bundler (0.2.1)\r\nmpapis-bundler (1.0.21.1)\r\nofxbundler (0.2.8)\r\nperitor-bundler (0.7.0)\r\nquick-bundler (0.0.3)\r\nrails-assets-bundler (0.0.1)\r\nrubygems-bundler (1.4.2)\r\nrubysl-bundler (2.0.0)\r\nsmart_bundler (0.0.1)\r\ntvd-bundler (0.0.8)\r\nunbundler (0.0.2)\r\nvagrant-bundler (0.1.1)\r\nvagrant-plugin-bundler (0.1.1)\r\nvim-bundler (0.3.0)\r\nweb_resource_bundler (0.0.23)\r\nwidget_bundler (0.0.10)\r\n\r\n*Proposed New Way*\r\n\r\nReturns only the specific gem.\r\n\r\n{{gem list --remote ^bundler$}}\r\n\r\nREMOTE GEMS\r\nbundler (1.5.3)', 'https://tickets.puppetlabs.com/browse/PUP-2014', 'https://github.com/puppetlabs/puppet/pull/2455', '2014-03-20T04:58:18.000-0700', '2014-09-04T13:29:34.000-0700', '2014-09-04T13:29:34.000-0700', 'Closed', '', 0, '0', 1, 1, 1, 1, '913658327eb1673e1ed9844b6b3bff235f978160', 'https://tickets.puppetlabs.com/browse/PUP-2014', 'https://github.com/puppetlabs/puppet/pull/2455'),
('puppet', 40380, 17608932, 2808, 'Limit platforms on which Gemfile tries to install ruby-prof', 'The ruby-prof gem is not applicable on all platforms (e.g., jruby).  However, the Gemfile attempts to install it unconditionally.', 'https://tickets.puppetlabs.com/browse/PUP-2842', 'https://github.com/puppetlabs/puppet/pull/2808', '2014-06-25T11:49:18.000-0700', '2014-09-04T13:29:35.000-0700', '2014-09-04T13:29:35.000-0700', 'Closed', '', 1, '0', 1, 7, 5, 1, 'e49beffc5adeada18fcc4ae0d7ec68e2f35f30f5', 'https://tickets.puppetlabs.com/browse/PUP-2842', 'https://github.com/puppetlabs/puppet/pull/2808'),
('puppet', 33483, 19342767, 2939, 'Deprecate `recurse => inf` for file type', 'This was an old synonym for `recurse => true`, but it only makes sense in a world where you can also set integer values for `recurse` instead of using `recurselimit`... which you can"t do, anymore. ', 'https://tickets.puppetlabs.com/browse/PUP-2379', 'https://github.com/puppetlabs/puppet/pull/2939', '2014-04-28T14:32:03.000-0700', '2014-09-04T13:29:35.000-0700', '2014-09-04T13:29:35.000-0700', 'Closed', '', 3, '0', 1, 1, 1, 1, '733d7bf5d4a7cf747da573816f9fcab8a5636599', 'https://tickets.puppetlabs.com/browse/PUP-2379', 'https://github.com/puppetlabs/puppet/pull/2939'),
('puppet', 43434, 19297636, 2934, 'install_options are not passed to yum when listing packages', 'According to reports in PUP-1060, the enablerepo and disablerepo options are no longer working. At least one of the reports points out that the {{install_options}} is not longer passed to the yum command that lists packages.  This results in packages not being found in enabled repos.\r\n\r\n', 'https://tickets.puppetlabs.com/browse/PUP-2971', 'https://github.com/puppetlabs/puppet/pull/2934', '2014-07-24T09:51:36.000-0700', '2014-09-04T13:29:36.000-0700', '2014-09-04T13:29:36.000-0700', 'Closed', '', 4, '0', 1, 2, 1, 2, 'd35f408ff8a42a0062ff4c41fedc8a517aca9581', 'https://tickets.puppetlabs.com/browse/PUP-2971', 'https://github.com/puppetlabs/puppet/pull/2934'),
('puppet', 39177, 17370015, 2784, '"puppet module generate" create not compatible metadata.json with forge', 'When one generate module by puppet it automaticlly adds version_range instead of version_requirement which is required to publish module\r\n\r\n{code}\r\n"dependencies": [\r\n{ "name": "puppetlabs-stdlib", "version_range": ">= 1.0.0" }\r\n\r\n]\r\n{code}', 'https://tickets.puppetlabs.com/browse/PUP-2781', 'https://github.com/puppetlabs/puppet/pull/2784', '2014-06-14T12:34:48.000-0700', '2014-09-04T13:29:38.000-0700', '2014-09-04T13:29:38.000-0700', 'Closed', '', 6, '0', 1, 2, 2, 1, 'f7581fbce06a4d90e99102c06046187452e0632d', 'https://tickets.puppetlabs.com/browse/PUP-2781', 'https://github.com/puppetlabs/puppet/pull/2784'),
('puppet', 30221, 17020798, 2759, 'puppet module generate can"t copy template files without parsing/renaming them', 'When creating a new module with "puppet module generate", any files\r\nin the skeleton dir named "*.erb" are parsed as Ruby erb templates and\r\nrenamed, removing the file extension. This is a pain if you want to\r\ninclude template files in your skeleton directory.', 'https://tickets.puppetlabs.com/browse/PUP-2079', 'https://github.com/puppetlabs/puppet/pull/2759', '2014-03-27T08:55:15.000-0700', '2014-09-04T13:29:43.000-0700', '2014-09-04T13:29:43.000-0700', 'Closed', '', 8, '0', 1, 18, 10, 1, '9202651f547c96e1a766d04c00a7691a3d383754', 'https://tickets.puppetlabs.com/browse/PUP-2079', 'https://github.com/puppetlabs/puppet/pull/2759'),
('puppet', 37383, 16439309, 2701, 'Real-world module skeletons still use the "description" metadata property', 'As per https://github.com/garethr/puppet-module-skeleton/issues/13\r\n\r\nChanges to the way modules are generated in Puppet 3.6 mean that where users could previously rely on the presence of certain absent properties, they no longer can.  The most prevalent example of this is the {{description}} property – including a template in your module skeleton which depends on that property causes template expansion to be aborted mid-run.', 'https://tickets.puppetlabs.com/browse/PUP-2691', 'https://github.com/puppetlabs/puppet/pull/2701', '2014-05-28T09:54:10.000-0700', '2014-09-04T13:29:47.000-0700', '2014-09-04T13:29:47.000-0700', 'Closed', '', 3, '0', 1, 21, 0, 2, 'd9eeea471aaa2cdfe5f3b116d3aeeffa1a8fa6e4', 'https://tickets.puppetlabs.com/browse/PUP-2691', 'https://github.com/puppetlabs/puppet/pull/2701'),
('puppet', 38608, 19861096, 2980, 'Puppet 3.6.1 issue with Forge API v3', 'Getting this error on RHEL5 and RHEL6 when trying to install ghoneycutt/puppet. Broken on 3.6.0 and 3.6.1 but downgrading to 3.5.1 fixed the issue.\r\n\r\n[root@sbox09 ~]# puppet module install ghoneycutt/puppet --verbose --debug\r\nNotice: Preparing to install into /etc/puppet/modules ...\r\nNotice: Downloading from https://forgeapi.puppetlabs.com ...\r\nDebug: HTTP GET https://forgeapi.puppetlabs.com/v3/releases?module=ghoneycutt-puppet\r\nDebug: Error in ghoneycutt-puppet@2.1.2 parsing dependency puppetlabs-stdlib (Unparsable version range: ">= 3.2.x"); using empty range.\r\nDebug: HTTP GET https://forgeapi.puppetlabs.com/v3/releases?module=puppetlabs-apache\r\nDebug: HTTP GET https://forgeapi.puppetlabs.com/v3/releases?module=puppetlabs-firewall\r\nDebug: HTTP GET https://forgeapi.puppetlabs.com/v3/releases?module=puppetlabs-stdlib\r\nDebug: HTTP GET https://forgeapi.puppetlabs.com/v3/releases?module=puppetlabs-stdlib&limit=20&offset=20\r\nDebug: HTTP GET https://forgeapi.puppetlabs.com/v3/releases?module=ripienaar-concat\r\nDebug: HTTP GET https://forgeapi.puppetlabs.com/v3/releases?module=puppetlabs-concat\r\nDebug: HTTP GET https://forgeapi.puppetlabs.com/v3/releases?module=leinaddm-htpasswd\r\nDebug: HTTP GET https://forgeapi.puppetlabs.com/v3/releases?module=puppetlabs-mysql\r\nDebug: HTTP GET https://forgeapi.puppetlabs.com/v3/releases?module=puppetlabs-mysql&limit=20&offset=20\r\nDebug: HTTP GET https://forgeapi.puppetlabs.com/v3/releases?module=bodepd-create_resources\r\nDebug: HTTP GET https://forgeapi.puppetlabs.com/v3/releases?module=puppetlabs-passenger\r\nDebug: HTTP GET https://forgeapi.puppetlabs.com/v3/releases?module=puppetlabs-gcc\r\nDebug: HTTP GET https://forgeapi.puppetlabs.com/v3/releases?module=puppetlabs-ruby\r\nDebug: HTTP GET https://forgeapi.puppetlabs.com/v3/releases?module=ghoneycutt-generic\r\nDebug: HTTP GET https://forgeapi.puppetlabs.com/v3/releases?module=ghoneycutt-backup\r\nDebug: HTTP GET https://forgeapi.puppetlabs.com/v3/releases?module=ghoneycutt-logwatch\r\nDebug: HTTP GET https://forgeapi.puppetlabs.com/v3/releases?module=ghoneycutt-certs\r\nDebug: HTTP GET https://forgeapi.puppetlabs.com/v3/releases?module=ghoneycutt-hosts\r\nDebug: HTTP GET https://forgeapi.puppetlabs.com/v3/releases?module=ghoneycutt-generic>= 1.0.0\r\nError: bad URI(is not URI?): /v3/releases?module=ghoneycutt-generic>= 1.0.0\r\nError: Try "puppet help module install" for usage', 'https://tickets.puppetlabs.com/browse/PUP-2745', 'https://github.com/puppetlabs/puppet/pull/2980', '2014-06-09T19:20:43.000-0700', '2014-09-05T11:59:21.000-0700', '2014-09-05T11:59:21.000-0700', 'Resolved', 'forge-api;module', 10, '0', 1, 27, 2, 2, 'cd729d9561e12b39259ec49d8b9406e83f308592', 'https://tickets.puppetlabs.com/browse/PUP-2745', 'https://github.com/puppetlabs/puppet/pull/2980'),
('puppet', 18726, 108524398, 5670, 'Could not autoload puppet /util /instrumentation /listeners /log', '', 'https://tickets.puppetlabs.com/browse/PUP-724', 'https://github.com/puppetlabs/puppet/pull/5670', '2013-11-12T12:07:40.000-0800', '2014-09-15T12:00:43.000-0700', '2014-09-15T12:00:43.000-0700', 'Closed', '', 40, '0', 2, 47, 11, 3, '1004eaea5cd5fcadcd94709c5a4d314e3f297cef', 'https://tickets.puppetlabs.com/browse/PUP-724', 'https://github.com/puppetlabs/puppet/pull/5670'),
('puppet', 49605, 20993301, 3066, 'helpful_error_message_when_hostname_not_match_server_certificate test does not tolerate variable DNS alt name order', 'The `helpful_error_message_when_hostname_not_match_server_certificate.rb` test evaluates the DNS alt names which appear in the Subject Alternative Name extension from the Puppet master"s server certificate.  The order in which these appear in the certificate does not translate directly to the order in which these may be received at the OpenSSL layer and outputted into the agent log.  If the order in which these were inserted into the certificate at signing time were to change, the test would break.  The test should be altered to tolerate a variable order for the enumeration of the DNS alt names.', 'https://tickets.puppetlabs.com/browse/PUP-3157', 'https://github.com/puppetlabs/puppet/pull/3066', '2014-08-28T17:47:17.000-0700', '2014-09-15T15:48:58.000-0700', '2014-09-15T15:48:58.000-0700', 'Closed', '', 2, '0', 1, 32, 5, 1, '6db627fd6b6af5a259954b956fdfd56fc0962d79', 'https://tickets.puppetlabs.com/browse/PUP-3157', 'https://github.com/puppetlabs/puppet/pull/3066'),
('puppet', 49935, 20648721, 3042, 'Intermittent failure for node/check_woy_cache_works testcase', 'While running tests against `puppet-server` we have encountered intermittent failures on this test case that we have not been able to reproduce outside of CI. \r\n\r\nThis bug is primarily about isolating this testcase from other tests by pointing it to a temporary yamldir to avoid node yaml files being tainted by previously run tests and to prevent subsequent tests from overwriting the node yaml file created by this test.', 'https://tickets.puppetlabs.com/browse/PUP-3175', 'https://github.com/puppetlabs/puppet/pull/3042', '2014-09-02T17:00:56.000-0700', '2014-09-15T15:48:59.000-0700', '2014-09-15T15:48:59.000-0700', 'Closed', '', 2, '0', 1, 10, 2, 1, 'b8329b801fd5cec21482e9611d81e93b5d822ddd', 'https://tickets.puppetlabs.com/browse/PUP-3175', 'https://github.com/puppetlabs/puppet/pull/3042'),
('puppet', 50391, 21040224, 3072, 'Symlinks to missing targets cause a File Not Found error instead of a warning', 'When trying to warn about symlinks in a module that is being unpacked for any reason, we use Pathname.realpath, which gives a File Not Found error when the target of the symlink doesn"t exist.', 'https://tickets.puppetlabs.com/browse/PUP-3191', 'https://github.com/puppetlabs/puppet/pull/3072', '2014-09-05T14:09:51.000-0700', '2014-09-15T15:49:00.000-0700', '2014-09-15T15:49:00.000-0700', 'Closed', '', 4, '0', 1, 1, 1, 1, 'e76f2effc167baa666bbb4e3992ea99d8cdd22d1', 'https://tickets.puppetlabs.com/browse/PUP-3191', 'https://github.com/puppetlabs/puppet/pull/3072'),
('puppet', 50500, 20986413, 3063, 'Windows service provider references a non-existent class', 'MCollective has a dependency on a windows gem that we had to change as part of the FFI work. The issue was posted here:\r\n\r\nhttp://ask.puppetlabs.com/question/13630/mcollective-windows-service-no-longer-working/?answer=13637\r\n\r\nOur docs describe the change in question: https://docs.puppetlabs.com/puppet/latest/reference/deprecated_windows_api.html#updated-gems-and-moved-constants', 'https://tickets.puppetlabs.com/browse/PUP-3222', 'https://github.com/puppetlabs/puppet/pull/3063', '2014-09-08T10:50:39.000-0700', '2014-09-17T12:53:36.000-0700', '2014-09-17T12:53:36.000-0700', 'Closed', '', 21, '0', 1, 101, 5, 3, 'c752a9ceea7841e54d3e04a35f3057f9f4182721', 'https://tickets.puppetlabs.com/browse/PUP-3222', 'https://github.com/puppetlabs/puppet/pull/3063'),
('puppet', 30584, 0, 0, 'Puppet client does not update and does consult the crl during authentication', 'In my tests puppet client never updates it’s /var/lib/puppet/ssl/crl.pem from the master when it changes.\r\n\r\nThough the CRL is initially downloaded from a CA and ‘cached’ that cache is never cleared causing multi-master setups to run with an increasingly outdated CRL.\r\n\r\nI think this bug is dangerous especially because the separate CA thing is new and people don’t realize, nor is it documented, that this is the current behavior.\r\n', 'https://tickets.puppetlabs.com/browse/PUP-2103', '', '2014-03-31T11:04:14.000-0700', '2014-09-29T10:20:25.000-0700', '2014-09-29T10:20:25.000-0700', 'Closed', '', 8, '0', 0, 0, 0, 0, '76d485ddba97efffdb7af0fcc7bfe2ec519906a5', 'https://tickets.puppetlabs.com/browse/PUP-2103', 'https://github.com/puppetlabs/puppet/commit/76d485ddba97efffdb7af0fcc7bfe2ec519906a5'),
('puppet', 42566, 18550609, 2883, 'yum provider should use osfamily instead of operatingsystem fact', 'The yum provider for the package type uses the operatingsystem fact to specify the defaultfor and should be using the osfamily fact so that we do not have to duplicate effort listing all the RedHat derivatives in both places.', 'https://tickets.puppetlabs.com/browse/PUP-2944', 'https://github.com/puppetlabs/puppet/pull/2883', '2014-07-16T16:59:25.000-0700', '2014-10-01T09:58:26.000-0700', '2014-10-01T09:58:26.000-0700', 'Closed', 'redmine', 4, '0', 1, 1, 1, 1, 'b4053aaded70a14a8ad7bb50947aef1790923f27', 'https://tickets.puppetlabs.com/browse/PUP-2944', 'https://github.com/puppetlabs/puppet/pull/2883'),
('puppet', 21350, 384328535, 8023, 'The function API has "interesting" type conversions', 'The type of parameters passed to functions is just weird:\r\nfoo(1) - String "1"\r\nfoo(1+1) - String "2"\r\nfoo($processorcount) - Numeric\r\nfoo(1*1) - Numeric 1\r\nfoo(1.0) - String "1.0"\r\nfoo(1.0+1) - Numeric 2.0\r\nfoo(1.0*1) - Numeric 1.0\r\nfoo("1"+"1") - String "2"\r\nfoo(undef) - String ""\r\n', 'https://tickets.puppetlabs.com/browse/PUP-1032', 'https://github.com/puppetlabs/puppet/pull/8023', '2013-12-16T02:59:19.000-0800', '2014-10-09T16:54:44.000-0700', '2014-10-09T16:54:44.000-0700', 'Closed', 'redmine', 3, '0', 1, 106, 0, 2, '8feb8baca243a76b8d9ed283497d71a0622c24e9', 'https://tickets.puppetlabs.com/browse/PUP-1032', 'https://github.com/puppetlabs/puppet/pull/8023'),
('puppet', 19781, 211924571, 7031, 'Deprecate parent parameter for type', 'Puppet types can define a `parent` type, though this doesn"t actually work. For example, <https://github.com/puppetlabs/puppet/pull/2092>', 'https://tickets.puppetlabs.com/browse/PUP-899', 'https://github.com/puppetlabs/puppet/pull/7031', '2013-11-27T09:36:04.000-0800', '2014-10-16T08:51:13.000-0700', '2014-10-16T08:51:13.000-0700', 'Closed', 'redmine', 1, '0', 7, 25, 1823, 28, '35b23fe5ead507d47bba6265f7575cba08028052', 'https://tickets.puppetlabs.com/browse/PUP-899', 'https://github.com/puppetlabs/puppet/pull/7031'),
('puppet', 51211, 21529585, 3109, 'Update PMT tests for directory environment support', 'Most of the PMT acceptance tests use the `host["distmoduledir"]` variable which is not meaningful if the install is using directory environments.\r\n\r\nThe acceptance suite needs to be updated to introspect the module path rather than use `host["distmoduledir"]`.', 'https://tickets.puppetlabs.com/browse/PUP-3248', 'https://github.com/puppetlabs/puppet/pull/3109', '2014-09-15T10:43:30.000-0700', '2014-10-22T13:04:34.000-0700', '2014-10-22T13:04:34.000-0700', 'Closed', '', 4, '0', 2, 290, 228, 33, '012662728269875470b3ee56325bebe0ad841bd4', 'https://tickets.puppetlabs.com/browse/PUP-3248', 'https://github.com/puppetlabs/puppet/pull/3109'),
('puppet', 52317, 21819158, 3122, 'Puppet user provider failing to reset puppet uid on Fedora19 due to usermod bug', 'This failure is showing up in the following acceptance test: acceptance/tests/config/puppet_manages_own_configuration_in_robust_manner.rb, but only on Fedora19.  This test removes the puppet user/group and then confirms that the --mkusers flag allows the puppet master to recreate them.  Before doing this, it records the current user/group state, and then in the final teardown step, reapplies the origina user/group state.\r\n\r\nThe failure began showing up after a fix to this test in [1d3fc272|https://github.com/puppetlabs/puppet/commit/1d3fc2724c65c6fce455bc35a87b24b6c361205a] began halting the test if the final puppet apply to reset the puppet user/group failed.  It is likely that this was always failing, but we only began to see it with this change.\r\n\r\nhttps://jenkins.puppetlabs.com/job/Puppet-Package-Acceptance-stable/label=beaker,platform=fedora19/61/\r\n\r\nI"ve attached a detailed log of the point of failure, but don"t know why it"s failing.\r\n\r\n*UPDATE:* \r\n\r\nAfter further investigation, this issue was found to be caused by a bug in the {{usermod}} command on Fedora 19. The bug does not appear to be present on Fedora 20. Since Fedora 19 is approaching end of life, we"ve decided not to fix this issue and just confine the acceptance test not to run on Fedora 19. The following output illustrates the bug which is causing the issue:\r\n\r\nFedora 20:\r\n{noformat}[root@bd4849uiz04imoa ~]# usermod -u 1000 test\r\n[root@bd4849uiz04imoa ~]# cat /etc/passwd\r\ntest:x:1000:1000::/home/test:/bin/bash\r\n[root@bd4849uiz04imoa ~]# ls -l /home/\r\ndrwxr-xr-x. 3 test test 4096 Sep 25 13:27 test\r\n[root@bd4849uiz04imoa ~]# ls -l /var/spool/mail/\r\n-rw-rw----. 1 test mail 0 Sep 25 13:20 test\r\n[root@bd4849uiz04imoa ~]# usermod -u 53 test\r\n[root@bd4849uiz04imoa ~]# ls -l /home/\r\ndrwxr-xr-x. 3 test test 4096 Sep 25 13:27 test\r\n[root@bd4849uiz04imoa ~]# ls -l /var/spool/mail/\r\n-rw-rw----. 1 test mail 0 Sep 25 13:20 test\r\n{noformat}\r\n\r\nFedora 19:\r\n{noformat}[root@nykbnzgen65yxtt ~]# usermod -u 1000 test\r\n[root@nykbnzgen65yxtt ~]# cat /etc/passwd\r\ntest:x:1000:1000::/home/test:/bin/bash\r\n[root@nykbnzgen65yxtt ~]# ls -l /home/\r\ndrwxr-xr-x. 3 test test 4096 Sep 25 13:27 test\r\n[root@nykbnzgen65yxtt ~]# ls -l /var/spool/mail/\r\n-rw-rw----. 1 test mail 0 Sep 25 13:20 test\r\n[root@nykbnzgen65yxtt ~]# usermod -u 53 test\r\nusermod: Failed to change ownership of the home directory\r\n[root@nykbnzgen65yxtt ~]# ls -l /var/spool/mail/\r\n-rw-rw----. 1 test mail 0 Sep 25 13:20 test\r\n[root@nykbnzgen65yxtt ~]# ls -l /home/\r\ndrwxr-xr-x. 3 1000 test 4096 Sep 25 13:27 test\r\n{noformat}\r\n', 'https://tickets.puppetlabs.com/browse/PUP-3339', 'https://github.com/puppetlabs/puppet/pull/3122', '2014-09-24T11:47:38.000-0700', '2014-10-22T13:04:37.000-0700', '2014-10-22T13:04:37.000-0700', 'Closed', '', 3, '0', 1, 2, 0, 1, 'd1acd12e526a5224eb457e508203882131ff597b', 'https://tickets.puppetlabs.com/browse/PUP-3339', 'https://github.com/puppetlabs/puppet/pull/3122'),
('puppet', 21403, 15498403, 2616, 'puppetd doesn"t always cleanup lockfile properly', 'ok I had the patch #2661 now running for some weeks and I had nearly no problems anymore. However from time to time (maybe once,twice a week) a random client doesn"t remove its lockfile (@/var/lib/puppet/state/puppetdlock@), hence future runs fail. I assume this might still happen due to a uncatched exception (as in #2261), however the problem is a) hard or nearly impossible to reproduce and b) it occurs really by random. The only thing I can see in the logs:\r\n\r\n{noformat}\r\nNov 30 19:27:41 foobar puppetd[26228]: Finished catalog run in 98.79 seconds\r\nNov 30 20:00:02 foobar puppetd[3000]: Could not retrieve catalog from remote server: Error 502 on SERVER: <html>^M <head><title>502 Bad Gateway</title></head>^M <body bgcolor="white">^M <center><h1>502 Bad Gateway</h1></center>^M <hr><center>nginx/0.6.39</center>^M </body>^M </html>^M\r\nNov 30 20:00:03 foobar puppetd[3000]: Using cached catalog\r\nNov 30 20:00:03 foobar puppetd[3000]: Could not retrieve catalog; skipping run\r\nNov 30 20:00:04 foobar puppetd[12169]: Run of Puppet configuration client already in progress; skipping\r\nNov 30 20:30:04 foobar puppetd[21230]: Run of Puppet configuration client already in progress; skipping\r\n{noformat}\r\n\r\nas I run puppetd by cron twice an hour with --splay I assume that the run between 19:30 and 20:00 got delayed till 20:00. At this time (20:00) a puppetmaster restart happens and due to that the 502 occured. This was the run of pid 3000, the next run (pid 12169) failed, this could either be as pid 3000 was still running or because there was already no puppetd anymore running and the lock file haven"t been removed. However every future run failed as well as the lockfile wasn"t removed.\r\n\r\nSo somehow puppet doesn"t remove lockfiles properly under certain conditions.\r\n\r\nPS: If you think it"s better to reopen the old bugreport, close this one and duplicate and re-open #2261', 'https://tickets.puppetlabs.com/browse/PUP-1070', 'https://github.com/puppetlabs/puppet/pull/2616', '2013-12-16T10:39:48.000-0800', '2014-10-31T06:59:46.000-0700', '2014-10-31T06:59:46.000-0700', 'Closed', 'customer;redmine', 17, '0', 3, 25, 6, 3, 'c7c482225611e0894eb8f323380207d5030106a9', 'https://tickets.puppetlabs.com/browse/PUP-1070', 'https://github.com/puppetlabs/puppet/pull/2616'),
('puppet', 45870, 19169525, 2928, 'User type shell parameter no longer functions properly in PE 3.3 (Puppet 3.6.2) in Solaris 10', 'h4.Summary\r\nhttps://github.com/puppetlabs/puppet/commit/73b0c2b0f59db920a14d4d0951b1f1c40d603cb4. Seems to have broken the shell parameter for the user type in Solaris.\r\n\r\nOne is now unable to specify a user"s shell after the user has been created. This currently affects all users utilizing Puppet 3.6.2. \r\n\r\nh4.Test Code:\r\n{code}\r\nuser { "jay":\r\n  ensure => present,\r\n  managehome => true,\r\n  shell => "/bin/sh",\r\n}\r\n{code}\r\n\r\nh4.Expected behavior\r\n\r\nUpon first run with /bin/bash:\r\n\r\n{code}\r\nInfo: Applying configuration version "1406730137"\r\nNotice: /Stage[main]/Main/Node[pe-33-agent-solaris.puppetdebug.vlan]/User[jay]/ensure: created\r\nNotice: Finished catalog run in 2.10 seconds\r\n{code}\r\n\r\nVerifying it"s /bin/bash:\r\n{code}\r\n# cat /etc/passwd | grep jay\r\njay:x:102:1::/home/jay:/bin/bash\r\n{code}\r\n\r\nRun after changing the shell to /bin/sh:\r\n{code}\r\nInfo: Applying configuration version "1406730348"\r\nNotice: /Stage[main]/Main/Node[pe-33-agent-solaris.puppetdebug.vlan]/User[jay]/shell: shell changed "/bin/bash" to "/bin/sh"\r\nNotice: Finished catalog run in 3.12 seconds\r\n{code}\r\n\r\nVerifying it"s /bin/sh:\r\n{code}\r\n# cat /etc/passwd | grep jay\r\njay:x:102:1::/home/jay:/bin/sh\r\n{code}\r\n\r\nh4. Current behavior(PE 3.3/Puppet 3.6.2):\r\nUpon changing the shell once more, no changes are made.\r\n', 'https://tickets.puppetlabs.com/browse/PUP-2991', 'https://github.com/puppetlabs/puppet/pull/2928', '2014-07-30T08:32:13.000-0700', '2014-11-03T13:11:14.000-0800', '2014-11-03T13:11:14.000-0800', 'Resolved', 'customer;solaris', 4, '0', 1, 33, 0, 1, '7cd8161bc4ae6b50631b8a0c8b67a7a46325b40c', 'https://tickets.puppetlabs.com/browse/PUP-2991', 'https://github.com/puppetlabs/puppet/pull/2928'),
('puppet', 41560, 19182128, 2930, 'Prevent symlinks in packages with PMT build', 'FROM PE-3115 "Symlinks in packages are hard to install and generally not useful for end users. PMT should fail to build packages with symlinks and inform the user why. PF-460 will make it easier for authors to use symlinks in testing/automation settings without packaging them"', 'https://tickets.puppetlabs.com/browse/PUP-2912', 'https://github.com/puppetlabs/puppet/pull/2930', '2014-07-08T14:17:50.000-0700', '2014-11-03T13:13:52.000-0800', '2014-11-03T13:13:52.000-0800', 'Resolved', '', 2, '0', 1, 10, 6, 4, '40fa2323d28f53cbe425be899d6f53fff7cd1786', 'https://tickets.puppetlabs.com/browse/PUP-2912', 'https://github.com/puppetlabs/puppet/pull/2930'),
('puppet', 23608, 11764095, 2288, 'puppet resource does not handle yum repo files with white space', 'When running:\r\n{quote}\r\npuppet resource yumrepo epel\r\n{quote}\r\npuppet reports\r\n{color:red}\r\nError: Could not run: Invalid value " 1". Valid values are absent. Valid values match /^(0|1)$/.\r\n{color}\r\n\r\nThis is because a Yum repository file contains white space between the equals and the 0 or the 1 for enabled or disabled. Like this\r\n{quote}\r\n[rhel-6-server-sam-source-rpms]\r\n...\r\nenabled = 0\r\n{quote}\r\n\r\nThis particular repository file is installed via the RedHat subscription manager rpm\r\n{quote}\r\n$ rpm -qf /etc/yum.repos.d/redhat.repo\r\nsubscription-manager-1.9.11-1.el6.x86_64\r\n{quote}\r\n\r\nThis same error occurs when processing the _gpgcheck_ and _sslverify_ keys as well. Although the _sslverify_ is looking for _True_ and _False_ whereas Redhat is using _0_ and _1_\r\n\r\nThe attached modification to the validation regex in the yumrepo.rb resouce file allows puppet to handle these yum repo files.\r\n', 'https://tickets.puppetlabs.com/browse/PUP-1438', 'https://github.com/puppetlabs/puppet/pull/2288', '2014-01-14T09:58:52.000-0800', '2014-11-03T13:22:22.000-0800', '2014-11-03T13:22:22.000-0800', 'Resolved', '', 3, '0', 1, 11, 9, 2, '', 'https://tickets.puppetlabs.com/browse/PUP-1438', 'https://github.com/puppetlabs/puppet/pull/2288'),
('puppet', 14277, 19327598, 2938, '--no-zlib flag doesn"t prevent zlib from being required in Puppet', 'Using a ruby without zlib support compiled in, the --no-zlib flag should prevent zlib from being used. It does not accomplish this.\n\n<pre>[root@el4-64 puppet-enterprise-3.1.0-rc0-53-g3f89475-el-4-x86_64]# puppet --no-zlib --version --trace --debug\n/opt/puppet/lib/ruby/1.9.1/rubygems/custom_require.rb:36:in `require": cannot load such file -- zlib (LoadError)\n	from /opt/puppet/lib/ruby/1.9.1/rubygems/custom_require.rb:36:in `require"\n	from /opt/puppet/lib/ruby/site_ruby/1.9.1/puppet/forge/repository.rb:2:in `<top (required)>"\n	from /opt/puppet/lib/ruby/1.9.1/rubygems/custom_require.rb:36:in `require"\n	from /opt/puppet/lib/ruby/1.9.1/rubygems/custom_require.rb:36:in `require"\n	from /opt/puppet/lib/ruby/site_ruby/1.9.1/puppet/forge.rb:6:in `<top (required)>"\n	from /opt/puppet/lib/ruby/1.9.1/rubygems/custom_require.rb:36:in `require"\n	from /opt/puppet/lib/ruby/1.9.1/rubygems/custom_require.rb:36:in `require"\n	from /opt/puppet/lib/ruby/site_ruby/1.9.1/puppet/module_tool.rb:148:in `<top (required)>"\n	from /opt/puppet/lib/ruby/1.9.1/rubygems/custom_require.rb:36:in `require"\n	from /opt/puppet/lib/ruby/1.9.1/rubygems/custom_require.rb:36:in `require"\n	from /opt/puppet/lib/ruby/site_ruby/1.9.1/puppet/module_tool/applications.rb:1:in `<top (required)>"\n	from /opt/puppet/lib/ruby/1.9.1/rubygems/custom_require.rb:36:in `require"\n	from /opt/puppet/lib/ruby/1.9.1/rubygems/custom_require.rb:36:in `require"\n	from /opt/puppet/lib/ruby/site_ruby/1.9.1/puppet/module.rb:3:in `<top (required)>"\n	from /opt/puppet/lib/ruby/1.9.1/rubygems/custom_require.rb:36:in `require"\n	from /opt/puppet/lib/ruby/1.9.1/rubygems/custom_require.rb:36:in `require"\n	from /opt/puppet/lib/ruby/site_ruby/1.9.1/puppet/parser/files.rb:1:in `<top (required)>"\n	from /opt/puppet/lib/ruby/1.9.1/rubygems/custom_require.rb:36:in `require"\n	from /opt/puppet/lib/ruby/1.9.1/rubygems/custom_require.rb:36:in `require"\n	from /opt/puppet/lib/ruby/site_ruby/1.9.1/puppet/parser/templatewrapper.rb:1:in `<top (required)>"\n	from /opt/puppet/lib/ruby/1.9.1/rubygems/custom_require.rb:36:in `require"\n	from /opt/puppet/lib/ruby/1.9.1/rubygems/custom_require.rb:36:in `require"\n	from /opt/puppet/lib/ruby/site_ruby/1.9.1/puppet/parser/scope.rb:6:in `<top (required)>"\n	from /opt/puppet/lib/ruby/1.9.1/rubygems/custom_require.rb:36:in `require"\n	from /opt/puppet/lib/ruby/1.9.1/rubygems/custom_require.rb:36:in `require"\n	from /opt/puppet/lib/ruby/site_ruby/1.9.1/puppet/parser/methods.rb:2:in `<top (required)>"\n	from /opt/puppet/lib/ruby/1.9.1/rubygems/custom_require.rb:36:in `require"\n	from /opt/puppet/lib/ruby/1.9.1/rubygems/custom_require.rb:36:in `require"\n	from /opt/puppet/lib/ruby/site_ruby/1.9.1/puppet/parser/ast/method_call.rb:2:in `<top (required)>"\n	from /opt/puppet/lib/ruby/1.9.1/rubygems/custom_require.rb:36:in `require"\n	from /opt/puppet/lib/ruby/1.9.1/rubygems/custom_require.rb:36:in `require"\n	from /opt/puppet/lib/ruby/site_ruby/1.9.1/puppet/parser/ast.rb:116:in `<top (required)>"\n	from /opt/puppet/lib/ruby/1.9.1/rubygems/custom_require.rb:36:in `require"\n	from /opt/puppet/lib/ruby/1.9.1/rubygems/custom_require.rb:36:in `require"\n	from /opt/puppet/lib/ruby/site_ruby/1.9.1/puppet/parser/parser.rb:11:in `<top (required)>"\n	from /opt/puppet/lib/ruby/1.9.1/rubygems/custom_require.rb:36:in `require"\n	from /opt/puppet/lib/ruby/1.9.1/rubygems/custom_require.rb:36:in `require"\n	from /opt/puppet/lib/ruby/site_ruby/1.9.1/puppet/parser.rb:4:in `<top (required)>"\n	from /opt/puppet/lib/ruby/1.9.1/rubygems/custom_require.rb:36:in `require"\n	from /opt/puppet/lib/ruby/1.9.1/rubygems/custom_require.rb:36:in `require"\n	from /opt/puppet/lib/ruby/site_ruby/1.9.1/puppet.rb:176:in `<top (required)>"\n	from /opt/puppet/lib/ruby/1.9.1/rubygems/custom_require.rb:36:in `require"\n	from /opt/puppet/lib/ruby/1.9.1/rubygems/custom_require.rb:36:in `require"\n	from /opt/puppet/lib/ruby/site_ruby/1.9.1/puppet/util/command_line.rb:12:in `<top (required)>"\n	from /opt/puppet/lib/ruby/1.9.1/rubygems/custom_require.rb:36:in `require"\n	from /opt/puppet/lib/ruby/1.9.1/rubygems/custom_require.rb:36:in `require"\n	from /usr/local/bin/puppet:3:in `<main>"</pre>', 'https://tickets.puppetlabs.com/browse/PUP-294', 'https://github.com/puppetlabs/puppet/pull/2938', '2013-09-09T10:26:12.000-0700', '2014-11-03T13:27:48.000-0800', '2014-11-03T13:27:48.000-0800', 'Resolved', '', 4, '0', 1, 51, 1, 3, 'b4053aaded70a14a8ad7bb50947aef1790923f27', 'https://tickets.puppetlabs.com/browse/PUP-294', 'https://github.com/puppetlabs/puppet/pull/2938'),
('puppet', 12242, 16867126, 2750, '(#21252) Fix problems with false/nil args and returns in lambda', 'https://github.com/puppetlabs/puppet/pull/1710', 'https://tickets.puppetlabs.com/browse/PUP-185', 'https://github.com/puppetlabs/puppet/pull/2750', '2013-07-18T11:05:55.000-0700', '2014-11-03T13:33:20.000-0800', '2014-11-03T13:33:20.000-0800', 'Resolved', '', 3, '0', 1, 11, 1, 2, '59f915e4c854180f7161a4483f66e3c6224ab5bb', 'https://tickets.puppetlabs.com/browse/PUP-185', 'https://github.com/puppetlabs/puppet/pull/2750'),
('puppet', 12241, 13183080, 2410, '(#21470) Change validation of "storeconfigs" to reflect runtime state.', 'https://github.com/puppetlabs/puppet/pull/1738', 'https://tickets.puppetlabs.com/browse/PUP-184', 'https://github.com/puppetlabs/puppet/pull/2410', '2013-07-18T11:03:32.000-0700', '2014-11-03T13:33:59.000-0800', '2014-11-03T13:33:59.000-0800', 'Resolved', '', 1, '0', 1, 3, 2, 2, '93102e58553f9a30df7e30ffd63486ca3da161b2', 'https://tickets.puppetlabs.com/browse/PUP-184', 'https://github.com/puppetlabs/puppet/pull/2410'),
('puppet', 11655, 852631450, 8878, 'File monitoring treats absent files as always changed.', 'The implementation of Puppet::Util::LoadedFile tracks a file by monitoring the file ctime. If a file is nonexistent and cannot have a ctime, every time the file is checked for changes ctime will be set to the current time. Since this value is constantly changing the file will always be marked as changed.\n\nExpected behavior\n\nIf a file is initially absent and is still absent when rechecked, it should be unchanged.\n\nActual behavior\n\nA file that is absent will be marked as always changed.\n\nNote: as of commit 3a19fff52c15266a3171b9bcf93bc1db1788c3b8 the LoadedFile has been refactored and renamed WatchedFile but this behavior is still present.\n\nThis is a copy of https://projects.puppetlabs.com/issues/21307', 'https://tickets.puppetlabs.com/browse/PUP-141', 'https://github.com/puppetlabs/puppet/pull/8878', '2013-07-02T19:20:10.000-0700', '2014-11-03T13:40:36.000-0800', '2014-11-03T13:40:36.000-0800', 'Resolved', '', 1, '0', 1, 1, 3, 1, 'd2c555385524b31888085f429184fa6d00c69bb3', 'https://tickets.puppetlabs.com/browse/PUP-141', 'https://github.com/puppetlabs/puppet/pull/8878'),
('puppet', 46456, 19357427, 2941, 'PMT download treats error responses as modules', 'If a module download from forge fails the PMT treats the response as though it were a module and displays a checksum error instead of the error response from forge. \r\n\r\n{noformat}\r\nclavelin:~ adreyer$ puppet module install --module_repository=http://forgeapi.dev puppetlabs-apache --modulepath=/tmp/mods\r\nNotice: Preparing to install into /tmp/mods ...\r\nNotice: Downloading from http://forgeapi.dev ...\r\nError: Downloaded release for puppetlabs-apache did not match expected checksum\r\nError: Try "puppet help module install" for usage{noformat}\r\n\r\nSince users may run into this with authorization it"s important that PMT shows clear error messages.\r\n', 'https://tickets.puppetlabs.com/browse/PUP-3009', 'https://github.com/puppetlabs/puppet/pull/2941', '2014-08-04T16:19:16.000-0700', '2014-11-05T11:49:13.000-0800', '2014-11-05T11:49:13.000-0800', 'Closed', 'PMT', 1, '0', 1, 25, 19, 5, 'ed498d1314c8b24d6ae1c2d76a316fbe140f8a24', 'https://tickets.puppetlabs.com/browse/PUP-3009', 'https://github.com/puppetlabs/puppet/pull/2941'),
('puppet', 14149, 29530367, 3623, 'Mount type `atboot` property validation is too restrictive in 3.3.0rcX', 'The mount type previously did not validate the `atboot` property, but a recent change makes it only accept yes or no, but not true or false.', 'https://tickets.puppetlabs.com/browse/PUP-292', 'https://github.com/puppetlabs/puppet/pull/3623', '2013-09-04T14:07:58.000-0700', '2014-11-06T01:50:53.000-0800', '2014-11-06T01:50:53.000-0800', 'Resolved', '', 3, '0', 1, 27, 21, 3, '56460c8413043274339d9dba105e605cd4128f8c', 'https://tickets.puppetlabs.com/browse/PUP-292', 'https://github.com/puppetlabs/puppet/pull/3623'),
('puppet', 33740, 15615938, 2622, 'Installation problem for puppetmaster-puppet 3.5.1 on Ubuntu 13.10', 'While doing smoke testing for PuppetDB (which requires the installation of Puppet), I found this weird issue: https://gist.github.com/kbarber/1661a6ff53cc7639bf6a\r\n\r\nIt seems there is something up with the puppetmaster-passenger installation, its returning an error about the site missing. Not sure what is going on here, the package works fine on Debian 7.0.\r\n\r\nI had to install apache2 up front, before it was only installing apache2-bin for whatever reason, and it couldn"t even create the sites-enabled link.\r\n\r\nI could be completely wrong here, wouldn"t mind a second site of eyes on this.', 'https://tickets.puppetlabs.com/browse/PUP-2395', 'https://github.com/puppetlabs/puppet/pull/2622', '2014-04-30T08:10:19.000-0700', '2014-11-07T07:07:45.000-0800', '2014-11-07T07:07:45.000-0800', 'Closed', '', 6, '0', 5, 128, 54, 3, 'd4551d43754b618fae6b9d7ac4cb49ac793f191f', 'https://tickets.puppetlabs.com/browse/PUP-2395', 'https://github.com/puppetlabs/puppet/pull/2622'),
('puppet', 16834, 50740711, 4450, 'Make rdoc parsing work on 1.9', 'If we ignore our custom html renderer for rdoc it shouldn"t be too hard to get parsing working and then rdoc can use the default html renderer.', 'https://tickets.puppetlabs.com/browse/PUP-568', 'https://github.com/puppetlabs/puppet/pull/4450', '2013-10-16T13:04:47.000-0700', '2014-11-07T07:07:45.000-0800', '2014-11-07T07:07:45.000-0800', 'Closed', 'redmine', 1, '0', 1, 23, 3, 3, '7e176bfb3adf53d234d893f8481f576e3a2e6a0b', 'https://tickets.puppetlabs.com/browse/PUP-568', 'https://github.com/puppetlabs/puppet/pull/4450'),
('puppet', 31015, 14392697, 2503, 'yumrepo gpgkey and baseurl with multiple URLs broken in 3.5.0', 'My yumrepo configuration has been working for months. After the update last night to 3.5.0 all my Scientific/Centos hosts are broken and fail to complete their puppet run. It seems they don"t like the multiple options for gpgkeys. If I only include one, then it works (and then I hit another reported bug about the proxy). I am still researching what changed but haven"t found anything that jumps out at me yet that is related to gpgkeys.\r\n\r\nMy yumrepo config:\r\n\r\n{code}\r\nyumrepo { "SL6":\r\n                descr => "Scientific Linux $release - ${::architecture}",\r\n                baseurl => "http://${reponetwork}/scientificlinux/$release/${::architecture}/os/",\r\n                enabled => 1,\r\n                enablegroups => 1,\r\n                gpgcheck => 1,\r\n                priority => 1,\r\n                gpgkey => "file:///etc/pki/rpm-gpg/RPM-GPG-KEY-sl file:///etc/pki/rpm-gpg/RPM-GPG-KEY-sl$release file:///etc/pki/rpm-gpg/RPM-GPG-KEY-cern",\r\n                proxy => "_none_",\r\n        }\r\n{code}\r\n\r\nThe error:\r\n\r\n{code}\r\nError: Failed to apply catalog: Parameter gpgkey failed on Yumrepo[SL6]: Validate method failed for class gpgkey: bad URI(is not URI?): file:///etc/pki/rpm-gpg/RPM-GPG-KEY-sl file:///etc/pki/rpm-gpg/RPM-GPG-KEY-sl6 file:///etc/pki/rpm-gpg/RPM-GPG-KEY-cern at /etc/puppet/modules/repos/manifests/scientific.pp:19\r\nWrapped exception:\r\nValidate method failed for class gpgkey: bad URI(is not URI?): file:///etc/pki/rpm-gpg/RPM-GPG-KEY-sl file:///etc/pki/rpm-gpg/RPM-GPG-KEY-sl6 file:///etc/pki/rpm-gpg/RPM-GPG-KEY-cern\r\n{code}\r\n\r\nAny help would be greatly appreciated.', 'https://tickets.puppetlabs.com/browse/PUP-2162', 'https://github.com/puppetlabs/puppet/pull/2503', '2014-04-04T08:55:04.000-0700', '2014-11-07T07:07:46.000-0800', '2014-11-07T07:07:46.000-0800', 'Closed', 'yumrepo', 7, '0', 1, 17, 4, 2, '5e25ccd1694886f21d4d0b9b3b18aca184178f06', 'https://tickets.puppetlabs.com/browse/PUP-2162', 'https://github.com/puppetlabs/puppet/pull/2503'),
('puppet', 31249, 0, 0, 'Setting yumrepo string properties to absent assigns the literal "absent" string in Puppet 3.5.0.', 'In Puppet <= 3.4.3 yumrepo properties could be removed by setting them to absent. In Puppet 3.5.0 this behavior was removed, and if "property => absent" is specified then the literal string "absent" is used. This behavior needs to be restored for 3.5.1.', 'https://tickets.puppetlabs.com/browse/PUP-2181', '', '2014-04-08T10:28:22.000-0700', '2014-11-07T07:07:46.000-0800', '2014-11-07T07:07:46.000-0800', 'Closed', 'yumrepo', 3, '0', 0, 0, 0, 0, '1243e192078aa41fa1e3828b535a293277d3eb90', 'https://tickets.puppetlabs.com/browse/PUP-2181', 'https://github.com/puppetlabs/puppet/commit/1243e192078aa41fa1e3828b535a293277d3eb90'),
('puppet', 21399, 693400752, 8703, 'Puppet master can"t submit reports to an HTTP server using basic auth', 'If you turn on HTTP basic auth in Puppet Dashboard"s vhost config, Puppet is unable to communicate with it. Setting a `reporturl` of (for example) <http://puppet:puppet@localhost:3000/reports> will not cause puppet to authenticate itself to Dashboard. \r\n\r\nThe ENC script doesn"t work either; see issue #5126. The approach in Matt and my patch in comment 7 could probably be dropped into lib/reports/http.rb.', 'https://tickets.puppetlabs.com/browse/PUP-1068', 'https://github.com/puppetlabs/puppet/pull/8703', '2013-12-16T10:33:36.000-0800', '2014-11-07T07:07:48.000-0800', '2014-11-07T07:07:48.000-0800', 'Closed', 'redmine', 2, '0', 1, 2, 5310, 90, '747076f00ce7c6b3b86acf2823be9c6536a821d4', 'https://tickets.puppetlabs.com/browse/PUP-1068', 'https://github.com/puppetlabs/puppet/pull/8703'),
('puppet', 32149, 14870246, 2545, 'Insufficient tests on yumrepo"s => absent', 'When you set => absent on a yumrepo property, the result is a string in ruby. However, it happens that we expect only a symbol there.', 'https://tickets.puppetlabs.com/browse/PUP-2292', 'https://github.com/puppetlabs/puppet/pull/2545', '2014-04-17T03:33:42.000-0700', '2014-11-07T07:07:51.000-0800', '2014-11-07T07:07:51.000-0800', 'Closed', 'test', 6, '0', 2, 3, 0, 1, '', 'https://tickets.puppetlabs.com/browse/PUP-2292', 'https://github.com/puppetlabs/puppet/pull/2545'),
('puppet', 30968, 14391180, 2502, 'yumrepo removable URL properties cannot be set to "absent" in Puppet 3.5.0.', 'I am on CentOS 6.5 using open-source Puppet 3.5.0. We were previously using Puppet 3.4.3.\r\n\r\nWe are using the epel module from the forge, which specifies a value of "absent" for all of the yumrepos it manages by default. This does not work in Puppet 3.5.0, causing this error:\r\n\r\n{noformat}\r\nError: Parameter proxy failed on Yumrepo[epel-testing]: Must be a valid URL at /tmp/vagrant-puppet-1/modules-0/epel/manifests/init.pp:57\r\nWrapped exception:\r\nMust be a valid URL\r\n{noformat}\r\n\r\nI have a feeling that this may affect a lot of users.', 'https://tickets.puppetlabs.com/browse/PUP-2150', 'https://github.com/puppetlabs/puppet/pull/2502', '2014-04-03T14:36:32.000-0700', '2014-11-07T07:07:52.000-0800', '2014-11-07T07:07:52.000-0800', 'Closed', '', 29, '0', 1, 57, 21, 4, '0cd26a6050ba34d74bf14bbf0bf5e5ebb841345c', 'https://tickets.puppetlabs.com/browse/PUP-2150', 'https://github.com/puppetlabs/puppet/pull/2502'),
('puppet', 30007, 14024714, 2476, 'rpm provider broken for architecture specifications in 3.5.0-RC2 due to whatprovides functionality change', 'Prior to the change to add whatprovides in PUP-897 at [1], you could specify packages like "glibc.i686" or "glibc.x86_64". That no longer works.', 'https://tickets.puppetlabs.com/browse/PUP-2039', 'https://github.com/puppetlabs/puppet/pull/2476', '2014-03-26T00:38:41.000-0700', '2014-11-07T07:07:53.000-0800', '2014-11-07T07:07:53.000-0800', 'Closed', '', 6, '0', 1, 39, 12, 3, '62e9e43143fd7cdad142acf6f55bd21be5115fd0', 'https://tickets.puppetlabs.com/browse/PUP-2039', 'https://github.com/puppetlabs/puppet/pull/2476'),
('puppet', 35794, 16637380, 2728, 'mode attribute of file type doesn"t behave like chmod when given X', '{code}\r\nfile { "/tmp/permtest": ensure => "present", mode => "0600" }\r\n{code}\r\nbehaves as expected creating file "/permtest" with given permissions\r\nchanging to\r\n{code}\r\nfile { "/tmp/permtest": ensure => "present", mode => "g+rX" }\r\n{code}\r\ndoesn"t behave as expected.  Changes permissions from 0600 to 0650.\r\nThe permissions should be "0640" since /permtest is a file not a directory\r\nand no executable bits are set.', 'https://tickets.puppetlabs.com/browse/PUP-2583', 'https://github.com/puppetlabs/puppet/pull/2728', '2014-05-15T16:53:26.000-0700', '2014-11-07T07:07:55.000-0800', '2014-11-07T07:07:55.000-0800', 'Closed', '', 5, '0', 1, 1, 1, 1, 'ac2622e8c19ef6af7f7671a9b4df5f80fc6b8b44', 'https://tickets.puppetlabs.com/browse/PUP-2583', 'https://github.com/puppetlabs/puppet/pull/2728'),
('puppet', 41092, 18911111, 2913, 'PMT upgrade command returns an error when trying to upgrade a module with only one release', 'When you use the "puppet module upgrade" command to upgrade a module that has only one published release, it reports that there are no releases available for that module instead of telling you that you already have the latest version.\r\n\r\n{code}\r\n$ bin/puppet module install ghoneycutt/sysklogd\r\nNotice: Preparing to install into /Users/jesse/sandbox/puppet/modules ...\r\nNotice: Downloading from https://forgeapi.puppetlabs.com ...\r\nNotice: Installing -- do not interrupt ...\r\n/Users/jesse/sandbox/puppet/modules\r\n└── ghoneycutt-sysklogd (v1.0.0)\r\n\r\n$ bin/puppet module upgrade ghoneycutt/sysklogd\r\nNotice: Preparing to upgrade "ghoneycutt-sysklogd" ...\r\nNotice: Found "ghoneycutt-sysklogd" (v1.0.0) in /Users/jesse/sandbox/puppet/modules ...\r\nNotice: Downloading from https://forgeapi.puppetlabs.com ...\r\nError: Could not upgrade "ghoneycutt-sysklogd" (v1.0.0 -> latest)\r\n  No releases are available from https://forgeapi.puppetlabs.com\r\n    Does "ghoneycutt-sysklogd" have at least one published release?\r\n{code}\r\n\r\n(See also: https://groups.google.com/forum/#!msg/puppet-users/9_iiPGyP9ls/-t7LRUdg1T4J)', 'https://tickets.puppetlabs.com/browse/PUP-2882', 'https://github.com/puppetlabs/puppet/pull/2913', '2014-07-02T13:19:58.000-0700', '2014-11-07T07:07:56.000-0800', '2014-11-07T07:07:56.000-0800', 'Closed', '', 11, '0', 1, 5, 0, 1, '71e60c12aadf6faac11c0733bbbd5621daa8b8ac', 'https://tickets.puppetlabs.com/browse/PUP-2882', 'https://github.com/puppetlabs/puppet/pull/2913'),
('puppet', 21392, 676538758, 8657, 'Puppet master fails with "stack level too deep" error when storeconfigs = true with rails stack 3.1.0', 'Out of nowhere, a known-working Puppet stack build script started to fail. The tell-tale error is "stack level too deep" which from other historical bug reports always seems related to Ruby directly. After many hours of digging around, I checked for updated gem versions on the system. There was an update to rails 3.1.0 (and activerecord, etc.) which apparently is breaking the Puppet master when working with storeconfigs = true. Disabling storeconfigs immediately works as expected again.\r\n\r\nWhen reverting from rails and friends 3.1.0 to 3.0.10, Puppet again works as expected.\r\n\r\nI don"t have any insight into where exactly this is all failing, only the version which is causing the issue and the condition to emulate it.\r\n\r\nThis was only tested again Puppet 2.7.3 using the gem install with both webrick and Apache+Passenger.\r\n\r\nAttached is a debug output.', 'https://tickets.puppetlabs.com/browse/PUP-1064', 'https://github.com/puppetlabs/puppet/pull/8657', '2013-12-16T10:24:41.000-0800', '2014-11-07T07:07:57.000-0800', '2014-11-07T07:07:57.000-0800', 'Closed', 'customer;redmine', 4, '0', 1, 33, 0, 3, '284bbfcdc9de9f40e54ecc01907f8cda156999e6', 'https://tickets.puppetlabs.com/browse/PUP-1064', 'https://github.com/puppetlabs/puppet/pull/8657'),
('puppet', 21369, 426629247, 8184, 'gem package provider is confused by platform components in version strings', 'Using: \r\n\r\n    package{"facter":\r\n      ensure          => latest,\r\n      provider        => "gem",\r\n      source          => "http://puppet:8808",\r\n    }\r\n\r\nProduces:\r\n\r\n\r\n    notice: /Stage[main]/Common_puppet::Hpux/Package[facter]/ensure: ensure changed "1.6.17" to "1.6.17 ruby"\r\n\r\nThis happens on every puppet run. \r\n', 'https://tickets.puppetlabs.com/browse/PUP-1051', 'https://github.com/puppetlabs/puppet/pull/8184', '2013-12-16T05:15:32.000-0800', '2014-11-07T07:07:58.000-0800', '2014-11-07T07:07:58.000-0800', 'Closed', 'redmine', 3, '0', 1, 20, 2, 3, 'b08f57071401fe50be7d35a5e460434ea7b4dee2', 'https://tickets.puppetlabs.com/browse/PUP-1051', 'https://github.com/puppetlabs/puppet/pull/8184'),
('puppet', 31242, 0, 0, 'yumrepo "descr" property doesn"t map to the "name" INI property', 'In Puppet <= 3.4.3, the yumrepo "descr" property was mapped to the "name" INI property. This is necessary because the "name" parameter is the namevar, and it acts as a mostly arbitrary resource title. This name doesn"t map to the "name" INI property, so the "descr" field was mapped to it.\r\n\r\nIn Puppet 3.5.0 this mapping was removed, so the "descr" property" would be mapped to a "descr" INI key. This behavior is incorrect, and using yum after creating a repo with the yumrepo provider has output like this:\r\n\r\n{code}\r\nRepository "local-base" is missing name in configuration, using id\r\nRepository "local-centosplus" is missing name in configuration, using id\r\nRepository "local-extras" is missing name in configuration, using id\r\nRepository "local-updates" is missing name in configuration, using id\r\n{code}\r\n\r\n3.4.3 mapping implementation:\r\n\r\n"#inikey" default implementation:\r\n{code}\r\n    def inikey\r\n      name.to_s\r\n    end\r\n{code}\r\n\r\nIniProperty DSL:\r\n\r\n{code}\r\n    # Set the key associated with this property to KEY, instead\r\n    # of using the property"s NAME\r\n    def self.inikey(key)\r\n      # Override the inikey instance method\r\n      # Is there a way to do this without resorting to strings ?\r\n      # Using a block fails because the block can"t access\r\n      # the variable "key" in the outer scope\r\n      self.class_eval("def inikey ; \"#{key.to_s}\" ; end")\r\n    end\r\n{code}\r\n\r\n"#sync" and "#retrieve" using "inikey":\r\n\r\n{code}\r\n    def sync\r\n      if safe_insync?(retrieve)\r\n        result = nil\r\n      else\r\n        result = set(self.should)\r\n        if should == :absent\r\n          resource.section[inikey] = nil\r\n        else\r\n          resource.section[inikey] = should\r\n        end\r\n      end\r\n      result\r\n    end\r\n\r\n    def retrieve\r\n      resource.section[inikey]\r\n    end\r\n{code}\r\n\r\n"descr" property inikey invocation:\r\n\r\n{code}\r\n    newproperty(:descr, :parent => Puppet::IniProperty) do\r\n      desc "A human-readable description of the repository.\r\n        This corresponds to the name parameter in `yum.conf(5)`.\r\n        #{ABSENT_DOC}"\r\n      newvalue(:absent) { self.should = :absent }\r\n      newvalue(/.*/) { }\r\n      inikey "name"\r\n    end\r\n{code}', 'https://tickets.puppetlabs.com/browse/PUP-2178', '', '2014-04-08T10:10:21.000-0700', '2014-11-07T07:08:02.000-0800', '2014-11-07T07:08:02.000-0800', 'Closed', '', 3, '0', 0, 0, 0, 0, 'a64014ca53bd6f046386d4922a6212f4df340920', 'https://tickets.puppetlabs.com/browse/PUP-2178', 'https://github.com/puppetlabs/puppet/commit/a64014ca53bd6f046386d4922a6212f4df340920'),
('puppet', 31244, 0, 0, 'Ensuring absent on a yumrepo removes all repos in the same file', 'Puppet 3.5.0 made yumrepos ensurable, but implemented this by removing the associated file with the yumrepo. If two yumrepos were defined in the same file, "ensure => absent", the entire file would be removed which would delete any other yumrepo instances in the file.\r\n\r\nWhen removing a yumrepo, we should only remove the associated file if no other yumrepos/INI sections are defined in that file. If there are other sections we should remove the section in question and modify nothing else.', 'https://tickets.puppetlabs.com/browse/PUP-2179', '', '2014-04-08T10:15:05.000-0700', '2014-11-07T07:08:02.000-0800', '2014-11-07T07:08:02.000-0800', 'Closed', '', 4, '0', 0, 0, 0, 0, 'e848299f4f720c64d1040e3eb0f3b54270b55904', 'https://tickets.puppetlabs.com/browse/PUP-2179', 'https://github.com/puppetlabs/puppet/commit/e848299f4f720c64d1040e3eb0f3b54270b55904'),
('puppet', 18813, 163861677, 6551, 'Guard against duplicate Windows root certs ', 'On Windows, openssl"s set_default_paths does nothing, so we preload OpenSSL::X509::Store with X509 certs extracted from the Root trust store. It appears the store can contain duplicate certificates, causing our call to OpenSSL::X509::Store#add_cert to fail with "cert already in hash table" <https://groups.google.com/d/topic/puppet-users/t-KLARupllw/discussion> We should be more defensive when adding a cert, so that a single failure to add a cert doesn"t prevent puppet from running.', 'https://tickets.puppetlabs.com/browse/PUP-734', 'https://github.com/puppetlabs/puppet/pull/6551', '2013-11-13T09:53:20.000-0800', '2014-11-07T07:08:02.000-0800', '2014-11-07T07:08:02.000-0800', 'Closed', 'redmine;windows', 2, '0', 1, 22, 1, 2, 'f87e42fe7aca84d58f0dc4259ad2aa5ff49be644', 'https://tickets.puppetlabs.com/browse/PUP-734', 'https://github.com/puppetlabs/puppet/pull/6551'),
('puppet', 32148, 14867910, 2543, 'yumrepo priority can not be sent to absent', 'yumrepo{\r\n"foo":\r\npriority => absent,\r\n}\r\n\r\n$ puppet apply test.pp \r\nNotice: Compiled catalog for dev050 in environment production in 0.10 seconds\r\nError: Parameter priority failed on Yumrepo[foo]: Must be within range 1-99 at /root/test.pp:4\r\nWrapped exception:\r\nMust be within range 1-99: absent\r\n', 'https://tickets.puppetlabs.com/browse/PUP-2291', 'https://github.com/puppetlabs/puppet/pull/2543', '2014-04-17T03:07:44.000-0700', '2014-11-07T07:08:03.000-0800', '2014-11-07T07:08:03.000-0800', 'Closed', '', 4, '0', 1, 2, 1, 1, '997917def10d36360213f71f05961943a9f4d74c', 'https://tickets.puppetlabs.com/browse/PUP-2291', 'https://github.com/puppetlabs/puppet/pull/2543'),
('puppet', 21214, 687706302, 8689, 'FreeBSD: Puppet triggers loading of ZFS module', 'When puppet starts the puppet ZFS provider issues the zfs command. On FreeBSD this automatically loads the ZFS kernel module. Even when ZFS is not used on that host. The provider should first check if ZFS is enabled or not. If it"s not enabled it shouldn"t execute any zpool or zfs commands as those will trigger the automatic load of the kernel module. ', 'https://tickets.puppetlabs.com/browse/PUP-1030', 'https://github.com/puppetlabs/puppet/pull/8689', '2013-12-16T01:48:30.000-0800', '2014-11-11T15:04:04.000-0800', '2014-11-11T15:04:04.000-0800', 'Closed', 'redmine', 4, '0', 1, 23, 0, 2, '3d88db931a8d95162fc2f969c65850e41fac16aa', 'https://tickets.puppetlabs.com/browse/PUP-1030', 'https://github.com/puppetlabs/puppet/pull/8689'),
('puppet', 31096, 14422051, 2506, 'systemd Service provider does not list services with systemd 212', 'In systemd version 212, [a change|https://github.com/systemd/systemd/commit/90c3f79dc74229134818e78cb97d315e28ee93b5] was introduced to the default output format of `systemctl list-units`. It now includes a "legend" column on the left with characters to indicate if some services have failed.\r\n\r\nThis behavior can be suppressed with the {{--no-legend}} switch, but that is not backwards compatible with versions prior to 212.\r\n\r\nThe effect of this change for puppet is that {{puppet resource service}} lists no services at all.\r\n\r\nInstead, I"d propose a patch, which removes the leading "{{^}}" anchor from the regular expression, so that it should work with the old and new output format. I"ll be submitting such a patch shortly.', 'https://tickets.puppetlabs.com/browse/PUP-2168', 'https://github.com/puppetlabs/puppet/pull/2506', '2014-04-05T23:15:58.000-0700', '2014-11-13T13:33:57.000-0800', '2014-11-13T13:33:57.000-0800', 'Closed', '', 2, '0', 1, 1, 1, 1, '', 'https://tickets.puppetlabs.com/browse/PUP-2168', 'https://github.com/puppetlabs/puppet/pull/2506'),
('puppet', 56004, 0, 0, 'Directory environment settings cannot receive their value in setting on_define/on_initialize hooks.', 'Settings have hooks which allow arbitrary blocks to do something with the passed setting value at certain lifecycle times: define, initialize, write.  There was code which during initialization would attempt to provide settings that were in the current environment with their values in that environment.  This does not work for directory environment settings, since at this stage of initialization, we do not have environment loaders set up yet and cannot query the environment.conf, and in fact this caused PUP-3500.\r\n\r\nIn Puppet 4, we will only have the manifest, modulepath, config_version, environment_timeout settings in environment.conf.  Currently none of these have hooks defined in lib/puppet/defaults.rb, so the problem is academic.\r\n\r\nBut if we wanted to add hooks to any of these settings, or just ensure that they have parity with other non-environment settings, we would need to address the bootstrapping issue, perhaps registering them to be handled after global initialization.\r\n\r\nI"m not advocating that this has to happen; I just wanted to capture the problem while it was still fresh in my mind.', 'https://tickets.puppetlabs.com/browse/PUP-3507', '', '2014-10-22T20:50:09.000-0700', '2014-11-18T09:47:05.000-0800', '2014-11-18T09:47:05.000-0800', 'Closed', '', 1, '0', 0, 0, 0, 0, 'e134843b44d6d2a9ba3d661f34e5c971b6600120', 'https://tickets.puppetlabs.com/browse/PUP-3507', 'https://github.com/puppetlabs/puppet/commit/e134843b44d6d2a9ba3d661f34e5c971b6600120'),
('puppet', 36840, 0, 0, '3.6.1 issues "warning" message for deprecation', 'Message is issued from agent runs at the warning level for a deprecation message.\r\n\r\nWarning: The package type"s allow_virtual parameter will be changing its default value from false to true in a future release. If you do not want to allow virtual packages, please explicitly set allow_virtual to false. (at /usr/lib/ruby/site_ruby/1.8/puppet/type.rb:816:in `set_default")\r\n', 'https://tickets.puppetlabs.com/browse/PUP-2650', '', '2014-05-23T02:57:45.000-0700', '2014-11-23T16:26:43.000-0800', '2014-11-23T16:26:43.000-0800', 'Closed', '', 28, '0', 0, 0, 0, 0, 'cc3c10f667b1754be34b4d884abef552086f8c85', 'https://tickets.puppetlabs.com/browse/PUP-2650', 'https://github.com/puppetlabs/puppet/commit/cc3c10f667b1754be34b4d884abef552086f8c85'),
('puppet', 42372, 18687153, 2897, 'PMT appears to change metadata.json after generating checksums.json', '', 'https://tickets.puppetlabs.com/browse/PUP-2936', 'https://github.com/puppetlabs/puppet/pull/2897', '2014-07-15T13:43:30.000-0700', '2014-12-30T17:15:04.000-0800', '2014-12-30T17:15:04.000-0800', 'Resolved', '', 2, '0', 2, 41, 15, 2, '40b778b930e1cece8c1a563ea1f35f17dd2ad023', 'https://tickets.puppetlabs.com/browse/PUP-2936', 'https://github.com/puppetlabs/puppet/pull/2897'),
('puppet', 38741, 17860692, 2827, 'Module tool fails to install new modules if some existing modules version is not Major.Minor.Patch format', 'Since Puppet 3.6.0 the module tool is unable to install new modules if an already existing modules version does not conform to the MAJOR.MINOR.PATCH format.\r\n\r\nI believe this behaviour was introduced with the dependency resolver ( https://github.com/puppetlabs/puppet/commit/6fa68b54ac621d60dbf1b062f8dd66b186d1a87f )\r\n\r\nHow to reproduce problem:\r\n* Place a module that does *not* conform with the X.Y.Z version format in your module folder (e.g. https://github.com/mrintegrity/puppet-pound ). To simulate this with another module just edit the metadata.json accordingly.\r\n* Try to install another module\r\n{code}\r\n% grep version modules/pound/metadata.json \r\n  "version": "0.1",\r\n% puppet module --modulepath /some/path/to/your/puppet/modules install --version=2.0.1 --ignore-dependencies saz/rsyslog\r\nNotice: Preparing to install into /some/path/to/your/puppet/modules ...\r\nError: Version numbers MUST begin with three dot-separated numbers\r\nError: Try "puppet help module install" for usage\r\n%\r\n{code}\r\n\r\n\r\nWhat I would expect:\r\n* Only check the version of modules the new module depends on\r\n* Make it a warning instead of an error to avoid breaking existing setups\r\n* Output which modules version does not conform the the correct format (to avoid thinking the module being installed is at fault)\r\n', 'https://tickets.puppetlabs.com/browse/PUP-2752', 'https://github.com/puppetlabs/puppet/pull/2827', '2014-06-11T01:20:37.000-0700', '2015-01-15T11:29:08.000-0800', '2015-01-15T11:29:08.000-0800', 'Closed', 'moduletool;pmt', 9, '0', 1, 55, 1, 2, '71b4268186fa35bac4ec26cc3197a635937b2d42', 'https://tickets.puppetlabs.com/browse/PUP-2752', 'https://github.com/puppetlabs/puppet/pull/2827'),
('puppet', 26537, 12890882, 2386, 'Faces help sometimes blows up when descriptions are absent', 'Right now, {{puppet man config}} will explode, because there"s no description for the --section option. This isn"t the intended behavior; it should devolve gracefully to the summary if the description is missing. We"re naïvely doing gsub on a value that might be nil. ', 'https://tickets.puppetlabs.com/browse/PUP-1707', 'https://github.com/puppetlabs/puppet/pull/2386', '2014-02-14T12:01:15.000-0800', '2015-01-20T16:17:08.000-0800', '2015-01-20T16:17:08.000-0800', 'Closed', '', 4, '0', 1, 5, 0, 5, '24c8fa2455958276eb3240e2fff3fb9d5826df0d', 'https://tickets.puppetlabs.com/browse/PUP-1707', 'https://github.com/puppetlabs/puppet/pull/2386'),
('puppet', 10529, 916746043, 8905, 'Cloud Provisioner FOSS install scripts were not updated to reflect Puppet 3.2 dependency', 'Recently the apt repository layout was changed in Puppet FOSS, requiring a different configuration from users.\r\n\r\nThe open source AWS Cloud Provisioner (and, flowing from that, the VMWare cloud provisioner) scripts to install Puppet were not updated to match, so are currently broken.\r\n\r\nThe failure, on Debian, is that it reports refusing to install the `puppet-common` package, but this is likely rooted in missing the dependency gem for the new parser:\r\n\r\n<pre>\r\nSome packages could not be installed. This may mean that you have\r\nrequested an impossible situation or if you are using the unstable\r\ndistribution that some required packages have not yet been created\r\nor been moved out of Incoming.\r\nThe following information may help to resolve the situation:\r\n\r\nThe following packages have unmet dependencies:\r\n puppet : Depends: puppet-common (= 3.2.1-1puppetlabs1) but it is not going to be installed\r\nE: Unable to correct problems, you have held broken packages.\r\n</pre>\r\n\r\nThis is on a clean, untouched by Puppet Ubuntu 12.04 VM.', 'https://tickets.puppetlabs.com/browse/PUP-1', 'https://github.com/puppetlabs/puppet/pull/8905', '2013-05-28T19:20:05.000-0700', '2015-01-22T15:06:44.000-0800', '2015-01-22T15:06:44.000-0800', 'Resolved', '', 10, '0', 2, 199, 8, 3, 'c35ae4ffa447c4370fb4620e7a10f2c322cc6593', 'https://tickets.puppetlabs.com/browse/PUP-1', 'https://github.com/puppetlabs/puppet/pull/8905'),
('puppet', 10566, 649664288, 8607, 'Agent-only install takes a super long time, and may hang until the cert is signed', 'When going through some sample installs w/Brian Cain today, we noticed that when we were doing agent-only installs, we"d eventually get to a line of output that said something like "setting up agent..." and it would appear to hang indefinitely.  (I left one open for at least 15 minutes.)\r\n\r\nEventually I guessed that maybe it had to do with a cert request, so I went to the console and approved the cert.  Something like 5 minutes later the installer woke up and finished everything up.', 'https://tickets.puppetlabs.com/browse/PUP-2', 'https://github.com/puppetlabs/puppet/pull/8607', '2013-05-31T00:18:46.000-0700', '2015-01-22T15:09:57.000-0800', '2015-01-22T15:09:57.000-0800', 'Resolved', '', 13, '0', 1, 1, 0, 1, 'f73142ee2531911271310e9d2281b181d560df84', 'https://tickets.puppetlabs.com/browse/PUP-2', 'https://github.com/puppetlabs/puppet/pull/8607'),
('puppet', 10945, 915396920, 8904, 'Debug failing spec on windows', '', 'https://tickets.puppetlabs.com/browse/PUP-7', 'https://github.com/puppetlabs/puppet/pull/8904', '2013-06-17T17:09:35.000-0700', '2015-01-22T15:12:51.000-0800', '2015-01-22T15:12:51.000-0800', 'Resolved', '', 2, '0', 2, 53, 40, 6, '6b5b08bd1b3f555519704f192b1c3198b99d5ecd', 'https://tickets.puppetlabs.com/browse/PUP-7', 'https://github.com/puppetlabs/puppet/pull/8904'),
('puppet', 11304, 325963596, 7775, 'Agree on VMware User Stories', 'Jeff will be working with the VMware core team in Palo Alto to come to a final agreement on the user stories to be implemented for the vcloud director integration.  The demo of this integration is slated for VMworld the week of August 24th and the shipping date is slated for Q4 of 2013.', 'https://tickets.puppetlabs.com/browse/PUP-59', 'https://github.com/puppetlabs/puppet/pull/7775', '2013-06-24T17:31:29.000-0700', '2015-01-22T15:20:10.000-0800', '2015-01-22T15:20:10.000-0800', 'Resolved', 'vmware', 2, '0', 2, 21, 1, 2, 'c94c83c53890ea0cd6d4349d20614560116c3db0', 'https://tickets.puppetlabs.com/browse/PUP-59', 'https://github.com/puppetlabs/puppet/pull/7775'),
('puppet', 11301, 56572793, 4583, 'Update RGen to 0.6.5', 'RGen released 0.6.5 which contains a bugfix for the #to_str on empty array issue.\r\n\r\nWhat else is there to do except updating the gemspec?', 'https://tickets.puppetlabs.com/browse/PUP-56', 'https://github.com/puppetlabs/puppet/pull/4583', '2013-06-24T17:27:57.000-0700', '2015-01-22T15:20:55.000-0800', '2015-01-22T15:20:55.000-0800', 'Resolved', '', 8, '0', 2, 73, 12, 7, '4ebcf3072ae87072c3e20f1bad1b66a4db773201', 'https://tickets.puppetlabs.com/browse/PUP-56', 'https://github.com/puppetlabs/puppet/pull/4583'),
('puppet', 11218, 33085218, 3807, 'Puppet daemon may sleep for 100 years after receiving USR1 on 64 bit systems', 'http://projects.puppetlabs.com/issues/21320\r\n\r\nquote:\r\n\r\nDue to a bug in Ruby 1.9.3 and earlier, an interrupted select call may be restarted with an invalid value (near 2**32). (Ruby always tries to restart interrupted select calls, unlike the normal behavior of the system call.)\r\n\r\nThis is fixed in 2.0.0 https://github.com/ruby/ruby/commit/b10c3136b0163536a679b10fecbc2992f3b5fa64.\r\n\r\nSince the puppet scheduler uses select to sleep, sending a signal to trigger a run (usually with mcollective) can trigger this bug.\r\n\r\nThis is the same issue as PE-779 but requires a different fix as we cannot patch ruby.', 'https://tickets.puppetlabs.com/browse/PUP-43', 'https://github.com/puppetlabs/puppet/pull/3807', '2013-06-19T19:23:17.000-0700', '2015-01-22T15:38:33.000-0800', '2015-01-22T15:38:33.000-0800', 'Resolved', '', 2, '0', 1, 13, 0, 2, 'e5211fdee9d73424af8ac72dca7826d28384b8b1', 'https://tickets.puppetlabs.com/browse/PUP-43', 'https://github.com/puppetlabs/puppet/pull/3807'),
('puppet', 16290, 74534902, 5038, ' `name` attribute is not always included in a Puppet::Transaction::Event', 'If a whole resource fails - i.e. there is a resource failure that is not specific to a property - the failure event (Puppet::Transaction::Event) will not have a `name` attribute. In PE 3.1.0 release candidates this was causing reports to fail to upload (because we introduced report sanitizing which checked for the `name` attribute and failed if it was not present).\r\n\r\n This can be reproduced by changing the owner or group of an existing file resource to an owner/group that does not exist.\r\n\r\nOur docs (http://docs.puppetlabs.com/puppet/3/reference/format_report.html#puppettransactionevent-1) say that `name` will be absent in inspect reports, but this is not an inspect report. The docs should be updated, but the fact that `name` is absent completely, rather than empty or nil, seems like a bug.\r\n', 'https://tickets.puppetlabs.com/browse/PUP-526', 'https://github.com/puppetlabs/puppet/pull/5038', '2013-10-04T17:37:00.000-0700', '2015-01-23T10:50:15.000-0800', '2015-01-23T10:50:15.000-0800', 'Closed', '3.0;PE;PE_3.1;PuppetCore;Reference_Manual', 6, '0', 3, 94, 21, 4, '5e5a7c8a357b2cffa684ae67e98b7dfd252a55a9', 'https://tickets.puppetlabs.com/browse/PUP-526', 'https://github.com/puppetlabs/puppet/pull/5038'),
('puppet', 23802, 11869818, 2299, '[Windows] Copying file resources from non-NTFS volumes causes Invalid DACL errors', 'This was originally reported with vagrant-windows, but could have an effect anytime you would copy from a fileshare that is not Windows specific.\r\n\r\n{noformat}\r\nError: /Stage[main]/Main/File[c:/Bob/jenkins-slave/jenkins-slave.exe]: Could not evaluate: \r\nInvalid DACL:  The access control list (ACL) structure is invalid. Could not retrieve file \r\nmetadata for puppet:///modules/jenkins/jenkins-slave.exe: \r\nInvalid DACL:  The access control list (ACL) structure is invalid.\r\nC:/Program Files (x86)/Puppet Labs/Puppet/puppet/lib/puppet/util/errors.rb:97:in `fail"\r\nC:/Program Files (x86)/Puppet Labs/Puppet/puppet/lib/puppet/type/file/source.rb:178:in `rescue in block in metadata"\r\nC:/Program Files (x86)/Puppet Labs/Puppet/puppet/lib/puppet/type/file/source.rb:171:in `block in metadata"\r\nC:/Program Files (x86)/Puppet Labs/Puppet/puppet/lib/puppet/type/file/source.rb:170:in `each"\r\nC:/Program Files (x86)/Puppet Labs/Puppet/puppet/lib/puppet/type/file/source.rb:170:in `metadata"\r\nC:/Program Files (x86)/Puppet Labs/Puppet/puppet/lib/puppet/type/file/source.rb:111:in `copy_source_values"\r\nC:/Program Files (x86)/Puppet Labs/Puppet/puppet/lib/puppet/type/file.rb:633:in `retrieve"\r\nC:/Program Files (x86)/Puppet Labs/Puppet/puppet/lib/puppet/type.rb:1063:in `retrieve_resource"\r\nC:/Program Files (x86)/Puppet Labs/Puppet/puppet/lib/puppet/transaction/resource_harness.rb:223:in `from_resource"\r\nC:/Program Files (x86)/Puppet Labs/Puppet/puppet/lib/puppet/transaction/resource_harness.rb:17:in `evaluate"\r\n{noformat}', 'https://tickets.puppetlabs.com/browse/PUP-1450', 'https://github.com/puppetlabs/puppet/pull/2299', '2014-01-15T13:12:25.000-0800', '2015-01-23T11:34:54.000-0800', '2015-01-23T11:34:54.000-0800', 'Closed', '3.5.0;windows', 13, '0', 2, 171, 26, 8, '923a76620e199daf42f3e29348a56223a1d8e7a6', 'https://tickets.puppetlabs.com/browse/PUP-1450', 'https://github.com/puppetlabs/puppet/pull/2299'),
('puppet', 65054, 27961913, 3516, 'warning: duplicated key at line 466 ignored: :queue_type', 'The setting {{queue_type}} appears twice in 3x. Simply remove one of them. Targeting this at 3.7.5 (planned to be released in orchestration with Puppet 4.0.0).', 'https://tickets.puppetlabs.com/browse/PUP-3902', 'https://github.com/puppetlabs/puppet/pull/3516', '2015-01-22T23:09:41.000-0800', '2015-01-27T10:17:43.000-0800', '2015-01-27T10:17:43.000-0800', 'Closed', '', 2, '0', 1, 0, 4, 1, '', 'https://tickets.puppetlabs.com/browse/PUP-3902', 'https://github.com/puppetlabs/puppet/pull/3516'),
('puppet', 61109, 27810587, 3505, 'Catalogs are transformed to resources outside of node environments', 'The master prepares a catalog for transmission to an agent by transforming it using the {{to_resource}} method. This call occurs [outside|https://github.com/puppetlabs/puppet/blob/3.7.3/lib/puppet/parser/compiler.rb#L34] of the [context containing the agent"s environment|https://github.com/puppetlabs/puppet/blob/3.7.3/lib/puppet/parser/compiler.rb#L117]. This means that any resource operations involving the environment will use the master"s "default" environmant (almost always {{production}} unless set otherwise in {{puppet.conf}}).\r\n\r\nThe resolution to PUP-1381, released in 3.7.0, contains one such operation that involves the environment: a deprecation check. This check will force the default environment to load and can cause runs in other environments to fail if the default environment has any issues.\r\n\r\nh2. Reproduction Case\r\n\r\n*Setup*\r\n\r\n{code}\r\n# puppet.conf\r\n[main]\r\nenvironmentpath = /etc/puppet/environments\r\n\r\n[agent]\r\nenvironment = debug\r\n{code}\r\n\r\n{code:bash}\r\n# Create invalid site.pp for production. Will fail to parse.\r\necho "import "/tmp/bogus/*.pp"" > environments/production/manifests/site.pp\r\n\r\n# Create valid site.pp for debug environment.\r\necho -e "node default{\nnotify{"hello, world":}\n}" > environments/debug/manifests/site.pp\r\n{code}\r\n\r\nStart master and run {{puppet agent -t}}, the first run will fail with a message concerining the {{site.pp}} file in production. The second run will succeed due to environment caching.\r\n\r\n{code}\r\n# puppet master --no-daemonize --logdest=/dev/null &\r\n[1] 25147\r\n\r\n# puppet agent -t --server=$(hostname -f)\r\nInfo: Retrieving pluginfacts\r\nInfo: Retrieving plugin\r\nInfo: Loading facts\r\nError: Could not retrieve catalog from remote server: Error 400 on SERVER: Could not\r\nparse for environment production: No file(s) found for import of "/tmp/bogus/*.pp"\r\nat /etc/puppet/environments/production/manifests/site.pp:2 on node poss-head-master.\r\npuppetdebug.vlan\r\nWarning: Not using cache on failed catalog\r\nError: Could not retrieve catalog; skipping run\r\n\r\n# puppet agent -t --server=$(hostname -f)\r\nInfo: Retrieving pluginfacts\r\nInfo: Retrieving plugin\r\nInfo: Loading facts\r\nInfo: Caching catalog for poss-head-master.puppetdebug.vlan\r\nInfo: Applying configuration version "1418179472"\r\nNotice: hello, world\r\nNotice: /Stage[main]/Main/Node[default]/Notify[hello, world]/message: defined "messa\r\nge" as "hello, world"\r\nNotice: Finished catalog run in 0.03 seconds\r\n{code}\r\n\r\nIn both cases, the catalog is compiled within the {{debug}} environment, but the error referencing {{production}} makes it hard to be sure of that without enabling and parsing a bunch of debug output.', 'https://tickets.puppetlabs.com/browse/PUP-3755', 'https://github.com/puppetlabs/puppet/pull/3505', '2014-12-09T18:56:20.000-0800', '2015-01-27T16:20:20.000-0800', '2015-01-27T16:20:20.000-0800', 'Closed', 'support', 19, '0', 1, 12, 1, 1, '0be9c1adaec3b0d3450f202b89f205cfb8d10090', 'https://tickets.puppetlabs.com/browse/PUP-3755', 'https://github.com/puppetlabs/puppet/pull/3505'),
('puppet', 59788, 25047769, 3344, 'Issue with empty export resources expression in the Puppet future parser', 'This issue was found via this test: https://github.com/puppetlabs/puppetdb/blob/stable/puppet/spec/unit/indirector/catalog/puppetdb_spec.rb#L359 against the puppet master branch.', 'https://tickets.puppetlabs.com/browse/PUP-3701', 'https://github.com/puppetlabs/puppet/pull/3344', '2014-11-25T14:44:49.000-0800', '2015-01-27T16:20:20.000-0800', '2015-01-27T16:20:20.000-0800', 'Closed', 'future-parser', 5, '0', 1, 3, 3, 1, '482bf06f7a6946cfefa6ab5faf0e25810ab2d134', 'https://tickets.puppetlabs.com/browse/PUP-3701', 'https://github.com/puppetlabs/puppet/pull/3344'),
('puppet', 58859, 25312560, 3361, 'The parameter order on the hash type is inconsistent', 'The order of parameters on the Hash type is [key_type, value_type, size_from, size_to], and you can optionally leave out the later parameters. But if you only specify one parameter it changes to [value_type] instead of [key_type].\r\n\r\nThis is for convenience, but seems like an unnecessary inconsistency to me that was surprising when using it.', 'https://tickets.puppetlabs.com/browse/PUP-3680', 'https://github.com/puppetlabs/puppet/pull/3361', '2014-11-18T06:14:42.000-0800', '2015-01-27T16:20:22.000-0800', '2015-01-27T16:20:22.000-0800', 'Closed', '', 6, '0', 1, 14, 22, 5, 'dc5d6300dfa2192882eda13a77539a542a3c1b2c', 'https://tickets.puppetlabs.com/browse/PUP-3680', 'https://github.com/puppetlabs/puppet/pull/3361'),
('puppet', 59146, 24744195, 3325, 'RHEL6 with ruby 1.8.7 and webrick sometimes does not handle HTTP keepalive correctly.', 'We periodically see errors in CI when a 3.7.x agent tries to retrieve a catalog or send a report to a 3.7.x master running rhel6, system ruby 1.8.7, with openssl 1.0.1e-fips, and webrick.\r\n\r\nOn the master:\r\n\r\n{noformat}\r\n[root@cdsfnhdbz8rf9c7 ~]# facter os\r\n{"family"=>"RedHat", "release"=>{"minor"=>"5", "major"=>"6", "full"=>"6.5"}, "name"=>"RedHat"}\r\n[root@cdsfnhdbz8rf9c7 ~]# ruby --version\r\nruby 1.8.7 (2011-06-30 patchlevel 352) [x86_64-linux]\r\n[root@cdsfnhdbz8rf9c7 ~]# openssl version\r\nOpenSSL 1.0.1e-fips 11 Feb 2013\r\n{noformat}\r\n\r\nAgent:\r\n\r\n{noformat}\r\n[root@o086qm75dfopvie ~]# facter os\r\n{"release"=>{"minor"=>"5", "full"=>"6.5", "major"=>"6"}, "family"=>"RedHat", "name"=>"RedHat"}\r\n[root@o086qm75dfopvie ~]# ruby --version\r\nruby 1.8.7 (2011-06-30 patchlevel 352) [i386-linux]\r\n[root@o086qm75dfopvie ~]# openssl version\r\nOpenSSL 1.0.1e-fips 11 Feb 2013\r\n{noformat}\r\n\r\nWhile this example uses master x86_64 and agent i386, we see the same results when both agent and master are from the same x86_64 template.\r\n\r\nIn master"s {{/var/log/messages}}:\r\n\r\n{noformat}\r\nNov 19 13:12:02 fchk0bt9fu7iooo puppet-master[8753]: Compiled catalog for specified_node_name in environment production in 0.04 seconds\r\nNov 19 13:12:03 fchk0bt9fu7iooo puppet-master[8753]: Server Error: SSL_read:: internal error\r\n{noformat}\r\n\r\nIn master"s {{/var/log/puppet/masterhttp.log}}:\r\n\r\n{noformat}\r\n2014-11-19 13:12:02] - -> /production/node/specified_node_name?transaction_uuid=a4182d00-7548-40c6-b6dd-314c7f4284cd&fail_on_404=true\r\n[2014-11-19 13:12:02] 10.32.122.19 - - [19/Nov/2014:13:12:02 PST] "GET /production/file_metadatas/pluginfacts?ignore=.svn&ignore=CVS&ignore=.git&recurse=true&links=manage&checksum_t\r\nype=md5 HTTP/1.1" 200 283\r\n[2014-11-19 13:12:02] - -> /production/file_metadatas/pluginfacts?ignore=.svn&ignore=CVS&ignore=.git&recurse=true&links=manage&checksum_type=md5\r\n[2014-11-19 13:12:02] 10.32.122.19 - - [19/Nov/2014:13:12:02 PST] "GET /production/file_metadatas/plugins?ignore=.svn&ignore=CVS&ignore=.git&recurse=true&links=manage&checksum_type=\r\nmd5 HTTP/1.1" 200 283\r\n[2014-11-19 13:12:02] - -> /production/file_metadatas/plugins?ignore=.svn&ignore=CVS&ignore=.git&recurse=true&links=manage&checksum_type=md5\r\n[2014-11-19 13:12:02] 10.32.122.19 - - [19/Nov/2014:13:12:02 PST] "POST /production/catalog/specified_node_name HTTP/1.1" 200 1136\r\n[2014-11-19 13:12:02] - -> /production/catalog/specified_node_name\r\n[2014-11-19 13:12:03] 10.32.122.19 - - [19/Nov/2014:13:12:03 PST] "PUT /production/report/specified_node_name HTTP/1.1" 500 2988\r\n[2014-11-19 13:12:03] - -> /production/report/specified_node_name\r\n[2014-11-19 13:12:03] INFO  going to shutdown ...\r\n{noformat}\r\n\r\nAnd the agent reports:\r\n\r\n{noformat}\r\no086qm75dfopvie.delivery.puppetlabs.net (agent) 13:12:21$  env PATH="/usr/bin:/opt/puppet-git-repos/hiera/bin:${PATH}" RUBYLIB="/opt/puppet-git-repos/hiera/lib:/opt/puppet-git-repos/hiera-puppet/lib:${RUBYLIB}" puppet agent  --no-daemonize --verbose --onetime --node_name_fact kernel --server cdsfnhdbz8rf9c7.delivery.puppetlabs.net\r\n...\r\nError: Could not send report: Error 500 on SERVER: {"stacktrace":["/usr/lib/ruby/1.8/openssl/buffering.rb:36:in `sysread"","/usr/lib/ruby/1.8/openssl/buffering.rb:36:in `fill_rbuff"","/usr/lib/ruby/1.8/openssl/buffering.rb:68:in `read"","/usr/lib/ruby/1.8/webrick/httprequest.rb:328:in `__send__"","/usr/lib/ruby/1.8/webrick/httprequest.rb:328:in `_read_data"","/usr/lib/ruby/1.8/timeout.rb:67:in `timeout"","/usr/lib/ruby/1.8/timeout.rb:101:in `timeout"","/usr/lib/ruby/1.8/webrick/httprequest.rb:327:in `_read_data"","/usr/lib/ruby/1.8/webrick/httprequest.rb:342:in `read_data"","/usr/lib/ruby/1.8/webrick/httprequest.rb:280:in `read_body"","/usr/lib/ruby/1.8/webrick/httprequest.rb:126:in `body"","/usr/lib/ruby/site_ruby/1.8/puppet/network/http/webrick/rest.rb:58:in `body"","/usr/lib/ruby/site_ruby/1.8/puppet/network/http/handler.rb:55:in `process"","/usr/lib/ruby/site_ruby/1.8/puppet/network/http/webrick/rest.rb:37:in `service"","/usr/lib/ruby/site_ruby/1.8/puppet/network/http/webrick/rest.rb:36:in `synchronize"","/usr/lib/ruby/site_ruby/1.8/puppet/network/http/webrick/rest.rb:36:in `service"","/usr/lib/ruby/1.8/webrick/httpserver.rb:104:in `service"","/usr/lib/ruby/1.8/webrick/httpserver.rb:65:in `run"","/usr/lib/ruby/site_ruby/1.8/puppet/network/http/webrick.rb:33:in `listen"","/usr/lib/ruby/1.8/webrick/server.rb:173:in `call"","/usr/lib/ruby/1.8/webrick/server.rb:173:in `start_thread"","/usr/lib/ruby/1.8/webrick/server.rb:162:in `start"","/usr/lib/ruby/1.8/webrick/server.rb:162:in `start_thread"","/usr/lib/ruby/1.8/webrick/server.rb:95:in `start"","/usr/lib/ruby/1.8/webrick/server.rb:92:in `each"","/usr/lib/ruby/1.8/webrick/server.rb:92:in `start"","/usr/lib/ruby/1.8/webrick/server.rb:23:in `start"","/usr/lib/ruby/1.8/webrick/server.rb:82:in `start"","/usr/lib/ruby/site_ruby/1.8/puppet/network/http/webrick.rb:27:in `listen"","/usr/lib/ruby/site_ruby/1.8/puppet/network/http/webrick.rb:26:in `initialize"","/usr/lib/ruby/site_ruby/1.8/puppet/network/http/webrick.rb:26:in `new"","/usr/lib/ruby/site_ruby/1.8/puppet/network/http/webrick.rb:26:in `listen"","/usr/lib/ruby/site_ruby/1.8/puppet/network/server.rb:27:in `start"","/usr/lib/ruby/site_ruby/1.8/puppet/daemon.rb:139:in `start"","/usr/lib/ruby/site_ruby/1.8/puppet/application/master.rb:286:in `start_webrick_master"","/usr/lib/ruby/site_ruby/1.8/puppet/application/master.rb:199:in `main"","/usr/lib/ruby/site_ruby/1.8/puppet/application/master.rb:160:in `run_command"","/usr/lib/ruby/site_ruby/1.8/puppet/application.rb:381:in `run"","/usr/lib/ruby/site_ruby/1.8/puppet/application.rb:507:in `plugin_hook"","/usr/lib/ruby/site_ruby/1.8/puppet/application.rb:381:in `run"","/usr/lib/ruby/site_ruby/1.8/puppet/util.rb:488:in `exit_on_fail"","/usr/lib/ruby/site_ruby/1.8/puppet/application.rb:381:in `run"","/usr/lib/ruby/site_ruby/1.8/puppet/util/command_line.rb:146:in `run"","/usr/lib/ruby/site_ruby/1.8/puppet/util/command_line.rb:92:in `execute"","/usr/bin/puppet:8"],"message":"Server Error: SSL_read:: internal error","issue_kind":"RUNTIME_ERROR"}\r\n{noformat}\r\n\r\nThe failure is originating in ruby"s native code that calls into openssl, note the double colons in {{"Server Error: SSL_read:: internal error"}}. This comes from \r\nhttps://github.com/ruby/ruby/blob/v1_8_7_352/ext/openssl/ossl_ssl.c#L1047 which expects that an openssl specific error message will be formated, e.g. {{SSL_read: <openssl message>: internal error}}\r\n\r\nThe failures do not occur if we:\r\n\r\n# Disable keepalive on the agent, by setting {{http_keepalive_timeout=0}}\r\n# Use rhel6 with 193\r\n# Use rhel6 with passenger\r\n# Use rhel7 (with system ruby 193)', 'https://tickets.puppetlabs.com/browse/PUP-3682', 'https://github.com/puppetlabs/puppet/pull/3325', '2014-11-19T13:29:45.000-0800', '2015-01-27T16:20:23.000-0800', '2015-01-27T16:20:23.000-0800', 'Closed', '', 3, '0', 1, 22, 0, 2, '8461eb4870c4e3dbe823ede29134abad207b7249', 'https://tickets.puppetlabs.com/browse/PUP-3682', 'https://github.com/puppetlabs/puppet/pull/3325'),
('puppet', 58426, 27354671, 3473, 'future parser collector override with Resource reference does not work', 'With the rewrite of collectors in 3.7.4 a regression was introduced that causes a collector override to fail if the value of an attribute is a Resource type.\r\n{code}\r\nNotify <| ... |> {\r\n  require => Notify[something]\r\n}\r\n{code}\r\n\r\nThis is caused because the 3x logic requires that resources are actual instances of Resource, and not instance of the PResourceType.\r\n\r\nThis unfortunately means that we must add transformation of the result of the attribute value expressions - it now directly returns the 4x result of evaluation.', 'https://tickets.puppetlabs.com/browse/PUP-3665', 'https://github.com/puppetlabs/puppet/pull/3473', '2014-11-12T12:02:05.000-0800', '2015-01-27T18:17:24.000-0800', '2015-01-27T18:17:24.000-0800', 'Closed', '', 14, '0', 2, 51, 7, 4, '29414dd149939fca58bc23992bf39c3d01c4ffde', 'https://tickets.puppetlabs.com/browse/PUP-3665', 'https://github.com/puppetlabs/puppet/pull/3473'),
('puppet', 12014, 12396375, 2345, 'puppet resource_type search raises an error when a module has no manifests dir', '    [root@puppet-pe3 puppet-enterprise-3.0.0-el-5-i386]# puppet resource_type search "*" --render-as=json\n    Error: Could not call "search" on "resource_type": No such file or directory', 'https://tickets.puppetlabs.com/browse/PUP-161', 'https://github.com/puppetlabs/puppet/pull/2345', '2013-07-11T11:52:05.000-0700', '2015-01-29T15:01:26.000-0800', '2015-01-29T15:01:26.000-0800', 'Resolved', '', 1, '0', 13, 729, 47, 11, '36ec72dea68f44aea405722d9dc3650d9b534158', 'https://tickets.puppetlabs.com/browse/PUP-161', 'https://github.com/puppetlabs/puppet/pull/2345'),
('puppet', 13838, 17326902, 2781, 'Release a new registry module', 'There are fixes in master that haven"t been released on the forge.', 'https://tickets.puppetlabs.com/browse/PUP-279', 'https://github.com/puppetlabs/puppet/pull/2781', '2013-08-29T09:06:37.000-0700', '2015-01-30T05:43:58.000-0800', '2015-01-30T05:43:58.000-0800', 'Resolved', 'windows', 4, '0', 1, 1, 13, 2, 'd87faf13c39ca6c51a4283e0317e11dfb3dfe856', 'https://tickets.puppetlabs.com/browse/PUP-279', 'https://github.com/puppetlabs/puppet/pull/2781'),
('puppet', 12216, 16073599, 2670, 'Client-enabled profiling does not work under Passenger', '', 'https://tickets.puppetlabs.com/browse/PUP-177', 'https://github.com/puppetlabs/puppet/pull/2670', '2013-07-17T12:25:31.000-0700', '2015-02-05T15:43:12.000-0800', '2015-02-05T15:43:12.000-0800', 'Resolved', '', 2, '0', 1, 155, 249, 3, '0e794fe5c45088e50fbbe20f52062cd6c00d7b6a', 'https://tickets.puppetlabs.com/browse/PUP-177', 'https://github.com/puppetlabs/puppet/pull/2670'),
('puppet', 14517, 25396847, 3373, 'CLONE - Can"t `bundle install` on harbard (solaris 10 spec box attached to jenkins.puppetlabs.com)', 'Whats up Harbard?\r\n\r\n\r\nThe FOSS team has been auditing their jobs and making them all run the same commands:\r\n<pre>\r\nbundle install\r\nbundle exec rake spec\r\n</pre>\r\n\r\nBut that breaks on harbard with:\r\n<pre>\r\n[Facter Solaris (master)@2] $ /bin/sh -xe /var/tmp/hudson1563790466863799723.sh\r\n+ bundle install \r\nFetching gem metadata from https://rubygems.org/.........\r\nFetching gem metadata from https://rubygems.org/.\r\nFetching source index from https://rubygems.org/\r\nResolving dependencies...\r\nsudo: no tty present and no askpass program specified\r\nsudo: pam_authenticate: Conversation failure\r\n\r\nGem::Exception: Cannot load gem at [/opt/csw/lib/ruby/gems/1.8/cache/rake-10.1.0.gem] in /export/home/jenkins/workspace/Facter Solaris (master)@2\r\nAn error occurred while installing rake (10.1.0), and Bundler cannot continue.\r\nMake sure that `gem install rake -v "10.1.0"` succeeds before bundling.\r\nBuild step "Execute shell" marked build as failure\r\n</pre>\r\n\r\nWhile just running:\r\n<pre>\r\nrake spec\r\n</pre>\r\n\r\nworks just fine.....\r\n\r\n\r\nWe want them to use the same script everywhere, and so we need to be able to let them run the same script everywhere, unfortunately I don"t know why bundler on Solaris doesn"t work like other bunders...', 'https://tickets.puppetlabs.com/browse/PUP-333', 'https://github.com/puppetlabs/puppet/pull/3373', '2013-09-12T11:39:41.000-0700', '2015-02-12T15:36:59.000-0800', '2015-02-12T15:36:59.000-0800', 'Resolved', '', 3, '0', 1, 10, 4, 3, 'd1acd12e526a5224eb457e508203882131ff597b', 'https://tickets.puppetlabs.com/browse/PUP-333', 'https://github.com/puppetlabs/puppet/pull/3373'),
('puppet', 49585, 20476103, 3031, 'Improve spec tests around pe puppet version', 'Several spec tests started to fail when run in CI because of poor isolation with the host environment.\r\n\r\n{code}\r\nFailures:\r\n\r\n  1) Puppet#version should be valid semver\r\n     Failure/Error: SemVer.should be_valid Puppet.version\r\n       expected valid?("3.6.2 (Puppet Enterprise 3.3.0)") to return true, got nil\r\n     # ./spec/unit/puppet_spec.rb:12:in `block (3 levels) in <top (required)>"\r\n\r\n  2) Puppet::Util::CommandLine#execute should print the version and exit if --version is given\r\n     Failure/Error: expect do\r\n       expected /^3.6.2 (Puppet Enterprise 3.3.0)$/ to be printed; got:\r\n       3.6.2 (Puppet Enterprise 3.3.0)\r\n     # ./spec/unit/util/command_line_spec.rb:71:in `block (4 levels) in <top (required)>"\r\n\r\n  3) Puppet::Util::CommandLine#execute should print the version and exit if -V is given\r\n     Failure/Error: expect do\r\n       expected /^3.6.2 (Puppet Enterprise 3.3.0)$/ to be printed; got:\r\n       3.6.2 (Puppet Enterprise 3.3.0)\r\n     # ./spec/unit/util/command_line_spec.rb:71:in `block (4 levels) in <top (required)>"\r\n\r\n  4) Puppet::Util::CommandLine when dealing with puppet commands when the subcommand is not implemented and an external implementation cannot be found should abort and display --version information\r\n     Failure/Error: expect {\r\n       expected /^3.6.2 (Puppet Enterprise 3.3.0)$/ to be printed; got:\r\n       Error: Unknown Puppet subcommand "whatever"\r\n       3.6.2 (Puppet Enterprise 3.3.0)\r\n     # ./spec/unit/util/command_line_spec.rb:126:in `block (6 levels) in <top (required)>"\r\n\r\n  5) Puppet::Util::CommandLine when dealing with puppet commands when the subcommand is not implemented and an external implementation cannot be found should abort and display -V information\r\n     Failure/Error: expect {\r\n       expected /^3.6.2 (Puppet Enterprise 3.3.0)$/ to be printed; got:\r\n       Error: Unknown Puppet subcommand "whatever"\r\n       3.6.2 (Puppet Enterprise 3.3.0)\r\n     # ./spec/unit/util/command_line_spec.rb:126:in `block (6 levels) in <top (required)>"\r\n{code}', 'https://tickets.puppetlabs.com/browse/PUP-3155', 'https://github.com/puppetlabs/puppet/pull/3031', '2014-08-28T16:10:24.000-0700', '2015-02-12T16:25:53.000-0800', '2015-02-12T16:25:53.000-0800', 'Closed', '', 2, '0', 1, 2, 2, 1, '1722e76bb385091c1a983d05a4532f203c766fe4', 'https://tickets.puppetlabs.com/browse/PUP-3155', 'https://github.com/puppetlabs/puppet/pull/3031'),
('puppet', 69892, 30330395, 3666, 'Internal error from TypeCalculator when function called with incorrect args', 'The following expression sends bogus arguments to the lookup function. The result is an unexpected internal error from the TypeCalculator:\r\n{code}\r\npuppet apply --parser future --execute "lookup(1, 2)"\r\nError: Evaluation Error: Error while evaluating a Function Call, Visitor Error: the configured receiver (Puppet::Pops::Types::TypeCalculator) can"t handle instance of: Fixnum at line 1:1 on node\r\n{code}\r\nThe problem is only reproducible on stable. The code on master reports a correct error.', 'https://tickets.puppetlabs.com/browse/PUP-4064', 'https://github.com/puppetlabs/puppet/pull/3666', '2015-03-02T14:32:27.000-0800', '2015-03-26T13:42:53.000-0700', '2015-03-26T13:42:53.000-0700', 'Closed', '', 4, '0', 1, 5, 1, 2, 'eca4dd1b94e9ae8892d3a4007a11c494b3bfb8fa', 'https://tickets.puppetlabs.com/browse/PUP-4064', 'https://github.com/puppetlabs/puppet/pull/3666'),
('puppet', 68005, 29320181, 3613, 'Inferred type of empty hash not assignable to Hash<String,String>', 'An empty hash is correctly considered an instance of *Hash\[String,String\]* but its inferred type *Hash\[Undef,Undef,0,0\]* is not assignable. This is not correct. The inferred type of an empty hash must be assignable to any Hash type that accepts zero entries.', 'https://tickets.puppetlabs.com/browse/PUP-4008', 'https://github.com/puppetlabs/puppet/pull/3613', '2015-02-13T05:40:52.000-0800', '2015-03-26T13:42:53.000-0700', '2015-03-26T13:42:53.000-0700', 'Closed', '', 2, '0', 1, 19, 2, 3, '51c600784de01da8011691842b6f9582b5552490', 'https://tickets.puppetlabs.com/browse/PUP-4008', 'https://github.com/puppetlabs/puppet/pull/3613'),
('puppet', 66330, 28434209, 3549, 'Injected parameter results in omission of block parameter', 'An InternalFunction declared with the following dispatch:\r\n{noformat}\r\nPuppet::Functions.create_function("test", Puppet::Functions::InternalFunction) do\r\n      dispatch :test do\r\n        scope_param\r\n        param "Integer", "x"\r\n        required_block_param\r\n      end\r\n      def test(scope, x, block)\r\n        nil\r\n      end\r\n    end\r\n{noformat}\r\nwill always fail with _"wrong number of arguments (2 for 3)"_ when called. The probable cause is that the block parameter is never added to the weaving array. The resulting array after weaving thus contains the scope and the parameter, not the block.', 'https://tickets.puppetlabs.com/browse/PUP-3936', 'https://github.com/puppetlabs/puppet/pull/3549', '2015-02-01T09:16:08.000-0800', '2015-03-26T13:42:54.000-0700', '2015-03-26T13:42:54.000-0700', 'Closed', '', 6, '0', 1, 27, 0, 2, '416754359bcf9e9def7518d26ab0e8e7e66c4b3f', 'https://tickets.puppetlabs.com/browse/PUP-3936', 'https://github.com/puppetlabs/puppet/pull/3549'),
('puppet', 67206, 28989555, 3592, 'Change how block is passed to avoid confusion with missing optional parameters', 'A puppet function created using optional parameters followed by a block, that then gets called without providing a value for those optional parameters, will cause the weaving logic to create an arguments array that is too short, leaving the block that is supposed to be last, at the wrong position (it"s simply passed on at the position it"s placed in by the caller).\r\n\r\nThe fact that a block isn"t really a block but a normal parameter in Ruby makes the optional parameter paradigm inconsistent in the dispatch declaration. It can only work without the block since in order to put the block last, a value must be present for each parameter in the invocation. This in turn means that using normal ruby syntax to set parameter default values will fail (passing {{nil}} overrides such a default setting).\r\n\r\nOn solution would be to provide a parameter default value in the dispatch configuration as an optional third argument to _param_ and require that the ruby method that the dispatch is targeting never has any optional parameters (the method _arity_ must never be negative). The default value would be optional in itself and default to {{nil}}. When given, it must of course comply with the parameter _type_ (which is another reason to put it there instead of in the ruby method declaration, defaults declare there doesn"t have this requirement).', 'https://tickets.puppetlabs.com/browse/PUP-3978', 'https://github.com/puppetlabs/puppet/pull/3592', '2015-02-07T15:31:40.000-0800', '2015-03-26T13:42:54.000-0700', '2015-03-26T13:42:54.000-0700', 'Closed', '', 21, '0', 3, 322, 169, 22, '07db7cf6d0d9fde8257462745a352096e847ab13', 'https://tickets.puppetlabs.com/browse/PUP-3978', 'https://github.com/puppetlabs/puppet/pull/3592'),
('puppet', 69955, 30495578, 3678, 'defined() function returns wrong value for global variable check', 'The defined function cannot handle global references\r\n\r\nLooking up a variable through a fully qualified name fails:\r\n* {{if defined("$::lsbdistcodename")}} -> false\r\n* {{if defined("$lsbdistcodename")}} -> true\r\n\r\nThis is because the logic in scope exists? is different than the logic for lookup_qualified_variable.\r\n\r\nSetting this higher than normal since a defined of {{$foo}} is different than a defined of {{$::foo}}.\r\n\r\nThis was reported first in PUP-4066\r\n\r\nFixing this requires caution to not introduce regressions.', 'https://tickets.puppetlabs.com/browse/PUP-4072', 'https://github.com/puppetlabs/puppet/pull/3678', '2015-03-03T06:33:54.000-0800', '2015-03-26T13:42:54.000-0700', '2015-03-26T13:42:54.000-0700', 'Closed', '', 13, '0', 2, 27, 2, 2, 'e1f672549951b1ce6a5e218838209f2cf1fb9a96', 'https://tickets.puppetlabs.com/browse/PUP-4072', 'https://github.com/puppetlabs/puppet/pull/3678'),
('puppet', 69648, 30331111, 3667, 'create_resources() error messages are less useful in 3.x then they were in 2.x', 'When {{create_resources()}} function causes puppet logic to be evaluated, certain errors are not displayed with the puppet context (file/line) that they appear in.\r\nThis can be observed with this simple sample:\r\n{code}\r\nclass breaking {\r\n  $x = "foo" + "bar"\r\n}\r\n$classes = { "breaking" => {} }\r\ncreate_resources("class", $classes)\r\n{code}\r\n\r\nThe result on Puppet 3.7.4 (with current parser) is:\r\n{code}\r\nError: left operand of + is not a number at /Users/henrik/git/puppet/foo.pp:5 on node ...\r\n{code}\r\nThe result with Puppet 3.7.4 (with future parser) and puppet 4.0.0 is:\r\n{code}\r\nError: Evaluation Error: The value "foo" cannot be converted to Numeric. at /Users/henrik/git/puppet/foo.pp:2:8 on node ...\r\n{code}\r\n\r\nThus, the problem is at least fixed in newer versions.\r\n\r\nORIGINAL REPORT\r\n----\r\nIn PE 2.8 (Puppet 2.7.x) this function will show the file/line number detail of the Puppet DSL code where the exception occurred. \r\n\r\nIn PE 3.x(including PE 3.7 / Puppet 3.7) it shows the file/line number of the Puppet DSL where the create_resources() function was invoked - which is not helpful.', 'https://tickets.puppetlabs.com/browse/PUP-4054', 'https://github.com/puppetlabs/puppet/pull/3667', '2015-02-27T07:20:05.000-0800', '2015-03-26T13:42:54.000-0700', '2015-03-26T13:42:54.000-0700', 'Closed', 'customer;support', 10, '0', 1, 3, 11, 2, 'f3a808e9025ec0c3f2b1789372fb53fd5b403827', 'https://tickets.puppetlabs.com/browse/PUP-4054', 'https://github.com/puppetlabs/puppet/pull/3667'),
('puppet', 67640, 29131283, 3595, 'Struct with optional values is not assignable from Hash where key is missing', 'The specification of the Struct type declares that "Struct supports Optional values - this means that a matching hash may either have undef bound to a key, or that the key is missing.". A hash without a matching key for such an optional value is however not considered assignable.', 'https://tickets.puppetlabs.com/browse/PUP-4000', 'https://github.com/puppetlabs/puppet/pull/3595', '2015-02-11T07:39:37.000-0800', '2015-03-26T13:42:55.000-0700', '2015-03-26T13:42:55.000-0700', 'Closed', '', 10, '0', 2, 79, 12, 2, '52db5e25cf60a2f6bbcecc9b50faf765e581054d', 'https://tickets.puppetlabs.com/browse/PUP-4000', 'https://github.com/puppetlabs/puppet/pull/3595'),
('puppet', 70205, 30661074, 3690, 'File and line numbers often missing from errors', 'I"ve noticed that some classes of error don"t include the name and line number of the .pp file where they occurred. I haven"t been paying attention to whether it"s a particular type of error, but in this example it"s failure from a stdlib function.\r\n\r\nLet me know if you want me to do any further debugging.\r\n\r\n{noformat}\r\n2015-03-04 13:35:32,131 DEBUG [puppet-server] Puppet importing "/etc/puppet/environments/SYSAD2994/modules/elasticsearch/manifests/service.pp" in environment SYSAD2994\r\n2015-03-04 13:35:32,143 DEBUG [puppet-server] Puppet Automatically imported elasticsearch::service from elasticsearch/service into SYSAD2994\r\n2015-03-04 13:35:32,219 ERROR [puppet-server] Puppet pick(): must receive at least one non empty value on node disri.lnx.warwick.ac.uk\r\n/usr/share/ruby/vendor_ruby/puppet/util/errors.rb:104:in `fail"\r\n/etc/puppet/environments/SYSAD2994/modules/stdlib/lib/puppet/parser/functions/pick.rb:24:in `real_function_pick"\r\n/usr/share/ruby/vendor_ruby/puppet/parser/functions.rb:164:in `function_pick"\r\n/usr/share/ruby/vendor_ruby/puppet/util/profiler/around_profiler.rb:58:in `profile"\r\n/usr/share/ruby/vendor_ruby/puppet/util/profiler.rb:51:in `profile"\r\n/usr/share/ruby/vendor_ruby/puppet/parser/functions.rb:157:in `function_pick"\r\n/usr/share/ruby/vendor_ruby/puppet/pops/evaluator/runtime3_support.rb:248:in `call_function"\r\n/usr/share/ruby/vendor_ruby/puppet/pops/evaluator/evaluator_impl.rb:771:in `eval_CallNamedFunctionExpression"\r\n/usr/share/ruby/vendor_ruby/puppet/pops/visitor.rb:64:in `visit_this_1"\r\n/usr/share/ruby/vendor_ruby/puppet/pops/evaluator/evaluator_impl.rb:77:in `evaluate"\r\n/usr/share/ruby/vendor_ruby/puppet/pops/evaluator/evaluator_impl.rb:722:in `eval_AttributeOperation"\r\n/usr/share/ruby/vendor_ruby/puppet/pops/visitor.rb:64:in `visit_this_1"\r\n/usr/share/ruby/vendor_ruby/puppet/pops/evaluator/evaluator_impl.rb:77:in `evaluate"\r\n/usr/share/ruby/vendor_ruby/puppet/pops/evaluator/evaluator_impl.rb:689:in `eval_ResourceExpression"\r\norg/jruby/RubyArray.java:1613:in `each"\r\norg/jruby/RubyEnumerable.java:865:in `inject"\r\n/usr/share/ruby/vendor_ruby/puppet/pops/evaluator/evaluator_impl.rb:688:in `eval_ResourceExpression"\r\norg/jruby/RubyArray.java:2412:in `map"\r\n/usr/share/ruby/vendor_ruby/puppet/pops/evaluator/evaluator_impl.rb:649:in `eval_ResourceExpression"\r\n/usr/share/ruby/vendor_ruby/puppet/pops/visitor.rb:64:in `visit_this_1"\r\n...\r\nringutils.clj:75:in `invoke"\r\nringutils.clj:81:in `invoke"\r\ncore.clj:112:in `invoke"\r\ncore.clj:2443:in `invoke"\r\ncore.clj:112:in `doInvoke"\r\nmaster_service.clj:28:in `invoke"\r\ncore.clj:176:in `invoke"\r\ncore.clj:45:in `invoke"\r\njetty9_core.clj:317:in `invoke"\r\n{noformat}', 'https://tickets.puppetlabs.com/browse/PUP-4086', 'https://github.com/puppetlabs/puppet/pull/3690', '2015-03-04T05:42:38.000-0800', '2015-03-26T13:42:56.000-0700', '2015-03-26T13:42:56.000-0700', 'Closed', '', 16, '0', 2, 46, 7, 4, 'a0308b73a19845199901f826a51f1269073a14a0', 'https://tickets.puppetlabs.com/browse/PUP-4086', 'https://github.com/puppetlabs/puppet/pull/3690'),
('puppet', 70055, 30496709, 3681, 'Remove the "allow_virtual" warning in the 3.x series', 'n Puppet 4, the package type"s allow_virtual setting will be true by\r\ndefault. In commit 3f6d7ca, this change was made and the deprecation\r\nwarning for allow_virtual was removed in master. However, many have\r\nfound the deprecation warning to be disruptive in the 3.x series, so\r\nthis commit removes it. We will deprecate in docs instead.', 'https://tickets.puppetlabs.com/browse/PUP-4076', 'https://github.com/puppetlabs/puppet/pull/3681', '2015-03-03T14:59:09.000-0800', '2015-03-26T13:42:57.000-0700', '2015-03-26T13:42:57.000-0700', 'Closed', '', 5, '0', 1, 2, 25, 2, 'ed2ffd081923bf0e179c388a647af5f518878f1c', 'https://tickets.puppetlabs.com/browse/PUP-4076', 'https://github.com/puppetlabs/puppet/pull/3681'),
('puppet', 67538, 29136984, 3596, 'continued shorthand interpolation of numeric variable fails (future parser)', 'When attempting to interpolate like this:\r\n{code}\r\nnotice "${0[foo]}"\r\n{code}\r\n\r\nThe error message is \r\n{code}\r\nIllegal expression. A Variable is unacceptable as name in a Variable\r\n{code}\r\nIt should have been \r\n{code}\r\nOperator "[]" is not applicable to a Nil Object.\r\n{code}\r\n\r\n(Which BTW should be fixed to say "undef" instead of Nil Object).\r\n\r\nThe cause of the problem is that the shorthand notation misunderstands a numeric variable (it understands a variable name just fine even if it is undefined).', 'https://tickets.puppetlabs.com/browse/PUP-3998', 'https://github.com/puppetlabs/puppet/pull/3596', '2015-02-10T14:20:34.000-0800', '2015-03-26T13:42:57.000-0700', '2015-03-26T13:42:57.000-0700', 'Closed', '', 5, '0', 1, 26, 4, 3, 'cf3b180cc7b9d065c953d0e80cf645aeb8ff7b8c', 'https://tickets.puppetlabs.com/browse/PUP-3998', 'https://github.com/puppetlabs/puppet/pull/3596'),
('puppet', 66324, 28419106, 3546, 'Environment used before set in Resource.initialize when this needs access to its type', 'UPDATED\r\n----\r\nThis was a bug, an internal problem that occurred because the actual code path that triggered the problem had never been considered prior to the changes that made this problem surface.\r\n\r\nORIGINAL\r\n----\r\nI"m not able to do a clean run of the puppet specs when using stable or the tagged 3.7.4 commit. If I revert back to the commit just before this one: [0be9c1a|https://github.com/puppetlabs/puppet/commit/0be9c1adaec3b0d3450f202b89f205cfb8d10090] (fix for PUP-3755), then everything works OK. \r\n\r\nThere"s nothing wrong with the commit but it provokes the real problem which is that the Resource initializer method calls on {{resource_type}} which in turn needs the {{current_environment}} at a point where the environment has not been set. Thus, it falls back to the _**root**_ environment rather than using the environment from the catalog that created it and the resource type is not found.\r\n\r\nI have no good explanation to why this test passed everywhere before 3.7.4 was released. I"m not able to get a green 3.7.4 or stable build on any of my machines.\r\n\r\nThe spec that fails is this one:\r\n{noformat}\r\n  1) Pure ruby manifests should allow defines\r\n     Failure/Error: catalog.resource("Bar[instance]").should_not be_nil\r\n     Puppet::Error:\r\n       Could not parse for environment *root*: No file(s) found for import of "foo" at line 2\r\n     # ./lib/puppet/parser/parser_support.rb:175:in `rescue in parse"\r\n     # ./lib/puppet/parser/parser_support.rb:166:in `parse"\r\n     # ./lib/puppet/node/environment.rb:545:in `perform_initial_import"\r\n     # ./lib/puppet/node/environment.rb:276:in `known_resource_types"\r\n     # ./lib/puppet/resource.rb:276:in `resource_type"\r\n     # ./lib/puppet/resource.rb:242:in `initialize"\r\n     # ./lib/puppet/resource/catalog.rb:305:in `new"\r\n     # ./lib/puppet/resource/catalog.rb:305:in `resource"\r\n     # ./spec/integration/parser/ruby_manifest_spec.rb:39:in `block (2 levels) in <top (required)>"\r\n{noformat}\r\n', 'https://tickets.puppetlabs.com/browse/PUP-3934', 'https://github.com/puppetlabs/puppet/pull/3546', '2015-01-31T10:27:13.000-0800', '2015-03-26T15:48:05.000-0700', '2015-03-26T15:48:05.000-0700', 'Closed', '', 7, '0', 1, 4, 2, 2, '50d131be739634bde85bbae75d908dd9be43c023', 'https://tickets.puppetlabs.com/browse/PUP-3934', 'https://github.com/puppetlabs/puppet/pull/3546'),
('puppet', 66480, 28549761, 3561, 'Type validation fails when validating hashes using a struct type.', 'When using the following type:\r\n{noformat}\r\nStruct[{"mode"=>String, "path"=>Array[String]}]\r\n{noformat}\r\nit should be legal to pass the following hash\r\n{noformat}\r\n{ "mode" => "read", "path" => ["foo", "fee"] }\r\n{noformat}\r\nbut this fails because the inferred type of the hash is:\r\n{noformat}\r\nHash[Variant[String, String], Variant[String, Tuple[String, String]]]\r\n{noformat}\r\nwhich is considered incompatible, and correctly so.\r\n\r\nThe solution is probably to let infer_set reduce the type of _each pair_ in the hash rather than attempting to combine the reduced type of _all keys_ with the reduced type of _all values_. The pair semantics must be retained during reduction in order to guarantee that the result is assignable to a struct. ', 'https://tickets.puppetlabs.com/browse/PUP-3947', 'https://github.com/puppetlabs/puppet/pull/3561', '2015-02-03T01:56:45.000-0800', '2015-03-26T15:58:14.000-0700', '2015-03-26T15:58:14.000-0700', 'Closed', '', 15, '0', 2, 78, 13, 2, '3d90821cbac52813cd25bd1ac4f352207f9a065c', 'https://tickets.puppetlabs.com/browse/PUP-3947', 'https://github.com/puppetlabs/puppet/pull/3561'),
('puppet', 67340, 28964068, 3588, 'Change Closure.call to not take scope', 'In Puppet 4.0.0 the Closure.call method does not longer take scope as a parameter (it was unused). This change should have also been made to stable as the API should be the same for 3.7.x with future parser and Puppet 4.0.0.\r\n\r\nThis ticket is about backporting the change from PUP-3274 to stable.', 'https://tickets.puppetlabs.com/browse/PUP-3987', 'https://github.com/puppetlabs/puppet/pull/3588', '2015-02-09T16:47:10.000-0800', '2015-03-26T15:58:59.000-0700', '2015-03-26T15:58:59.000-0700', 'Closed', '', 4, '0', 1, 28, 28, 13, '', 'https://tickets.puppetlabs.com/browse/PUP-3987', 'https://github.com/puppetlabs/puppet/pull/3588'),
('puppet', 67373, 29021044, 3593, 'scanf only implemented for future parser', 'The scanf function is only implemted or the future parser, but not the classic one. This leads to the possibility of non-backwards compatible code using this function.\r\n\r\nAs the implementation is trivial, I"d suggest adding the function to the classic parser.\r\n\r\nAlternatively, the function could be extracted into the stdlib module, where consumers can take a versioned dependency.', 'https://tickets.puppetlabs.com/browse/PUP-3991', 'https://github.com/puppetlabs/puppet/pull/3593', '2015-02-10T07:21:03.000-0800', '2015-03-27T11:22:01.000-0700', '2015-03-27T11:22:01.000-0700', 'Closed', '', 12, '0', 1, 50, 11, 2, 'b292359eb2eccf4cfe187f6e00dbb989e887268c', 'https://tickets.puppetlabs.com/browse/PUP-3991', 'https://github.com/puppetlabs/puppet/pull/3593'),
('puppet', 70717, 30999601, 3707, 'Future parser error when interpolating name segment starting with underscore', 'Variables starting with underscore are still supposed to be valid with the future parser, but interpolation of them doesn"t work if they"re accessed using their qualified variable name.\r\n\r\neg\r\n{code}\r\n$ cat leading_underscore.pp\r\nclass bar ($foo) {\r\n  $_foo = $foo\r\n  notify {"Name of resource ${bar::_foo}":\r\n    message => "something witty here"\r\n  }\r\n}\r\nclass {"bar":\r\n  foo => "one",\r\n}\r\n$  puppet apply --parser=future leading_underscore.pp\r\nError: Could not parse for environment production: Illegal fully qualified name in file /home/alex/github/test/leading_underscore.pp at line 3:36 on node alex-virtualbox.example.com\r\nError: Could not parse for environment production: Illegal fully qualified name in file /home/alex/github/test/leading_underscore.pp at line 3:36 on node alex-virtualbox.example.com\r\n{code}\r\n\r\nI discussed this on IRC and [~richard] came up with the following example that probably demonstrates the issue more clearly than mine.\r\n{code}\r\n$ cat leading_underscore.pp\r\nclass bar {\r\n  $_foo = "one"\r\n}\r\n\r\ninclude bar\r\nnotice("${bar::_foo}")\r\n\r\n$ puppet apply --parser=future leading_underscore.pp\r\nError: Could not parse for environment production: Illegal fully qualified name in file /Users/richardc/src/leading_underscore.pp at line 10:18 on node socks.local\r\nError: Could not parse for environment production: Illegal fully qualified name in file /Users/richardc/src/leading_underscore.pp at line 10:18 on node socks.local\r\n\r\n$ cat leading_underscoreworking.pp\r\nclass bar {\r\n  $_foo = "one"\r\n}\r\n\r\ninclude bar\r\nnotice($bar::_foo)\r\n\r\n$ puppet apply --parser=future leading_underscoreworking.pp\r\nNotice: Scope(Class[main]): one\r\nNotice: Compiled catalog for socks.local in environment production in 0.51 seconds\r\nNotice: Finished catalog run in 0.03 seconds\r\n{code}\r\n\r\nThanks,\r\nAlex\r\n\r\nrisk assessment: medium (FR only for now)\r\nprobability: low (variables starting with underscores)\r\nseverity: medium (work arounds exist)\r\ntest layer: unit (https://github.com/puppetlabs/puppet/blob/dda2430457cd06c3381f02163dc9c15925b4bff7/spec/unit/pops/parser/lexer2_spec.rb#L230-L236)', 'https://tickets.puppetlabs.com/browse/PUP-4133', 'https://github.com/puppetlabs/puppet/pull/3707', '2015-03-09T05:43:19.000-0700', '2015-04-07T11:43:40.000-0700', '2015-04-07T11:43:40.000-0700', 'Closed', '', 8, '0', 2, 777, 765, 4, '52f887f7634086b860ddc3a1eef44fa00089352e', 'https://tickets.puppetlabs.com/browse/PUP-4133', 'https://github.com/puppetlabs/puppet/pull/3707'),
('puppet', 71641, 31214811, 3718, 'Puppet 4 lexer fails to parse multiple heredocs on the same line', 'Parsing this manifest:\r\n\r\n{code}\r\nnotice({ @(foo) => @(bar) })\r\nhello\r\n-foo\r\nworld\r\n-bar\r\n{code}\r\n\r\nResults in:\r\n{code}\r\n$ puppet apply foo.pp\r\nError: Could not parse for environment production: undefined local variable or method `lexing_context" for #<Puppet::Pops::Parser::Lexer2:0x007faadd1551a0> on node peterhu-osx\r\n{code}\r\n\r\nExpected results:\r\n{code}\r\n$ puppet apply foo.pp\r\nNotice: Scope(Class[main]): {hello => world}\r\nNotice: Compiled catalog for peterhu-osx in environment production in 1.18 seconds\r\nNotice: Applied catalog in 0.08 seconds\r\n{code}\r\n\r\nQA risk assessment: medium (FR only for now)\r\nprobability: low (multiple heredocs on same line)\r\nseverity: medium (workarounds exist)\r\ntest layer: unit (https://github.com/puppetlabs/puppet/blob/26ad83f62e1ff1d1df51591f1c2c9b555484d3e0/spec/unit/pops/parser/parse_heredoc_spec.rb#L117-L136)', 'https://tickets.puppetlabs.com/browse/PUP-4205', 'https://github.com/puppetlabs/puppet/pull/3718', '2015-03-14T02:04:30.000-0700', '2015-04-08T09:47:17.000-0700', '2015-04-08T09:47:17.000-0700', 'Closed', '', 4, '0', 1, 22, 1, 2, '26ad83f62e1ff1d1df51591f1c2c9b555484d3e0', 'https://tickets.puppetlabs.com/browse/PUP-4205', 'https://github.com/puppetlabs/puppet/pull/3718'),
('puppet', 65999, 28248353, 3538, 'Puppet 4 lexer misinterprets multiple "/" tokens as a regex following a variable.', 'Expected the following code to notice "2":\r\n\r\n{code}\r\n$foo = 2\r\nnotice ($foo / 1 / 1)\r\n{code}\r\n\r\nBut instead received this (quite cryptic) error:\r\n\r\n{code}\r\n$ puppet apply foo.pp\r\nError: Could not parse for environment production: Syntax error at "(?-mix: 1 )" at foo.pp:2:14 on node foo\r\n{code}\r\n\r\nIt looks like the lexer isn"t handling variables in {{regexp_acceptable?}}.\r\n\r\nRelated: should it also do the same for bare words (it handles names already)?\r\n\r\nWorkaround by forcing the next token following the variable to be something other than "/":\r\n{code}\r\n$foo = 2\r\nnotice (($foo) / 1 / 1)\r\n{code}', 'https://tickets.puppetlabs.com/browse/PUP-3923', 'https://github.com/puppetlabs/puppet/pull/3538', '2015-01-28T16:37:54.000-0800', '2015-04-08T09:47:18.000-0700', '2015-04-08T09:47:18.000-0700', 'Closed', '', 5, '0', 1, 3, 1, 2, '0427bc7f9d97cebba5da5bc03cc5705cd6f67ce8', 'https://tickets.puppetlabs.com/browse/PUP-3923', 'https://github.com/puppetlabs/puppet/pull/3538'),
('puppet', 67244, 28949117, 3587, 'Missing PMT Acceptance Test for Building Module with a Modulefile', 'The PUP-3254 ticket removes support for Modulefile support in the PMT and will warn the user if one is provided. There is currently no acceptance test that verifies that a  user will receive a warning message if a Modulefile is present during module building.', 'https://tickets.puppetlabs.com/browse/PUP-3981', 'https://github.com/puppetlabs/puppet/pull/3587', '2015-02-09T10:03:43.000-0800', '2015-04-08T09:47:18.000-0700', '2015-04-08T09:47:18.000-0700', 'Closed', '', 2, '0', 1, 49, 0, 1, '7b3257e7bb6132ebd0b5368e1023534c04b7a205', 'https://tickets.puppetlabs.com/browse/PUP-3981', 'https://github.com/puppetlabs/puppet/pull/3587'),
('puppet', 21625, 914538439, 8903, 'Race condition in Puppet::Util::Lockfile', 'Puppet::Util::Lockfile does not exclude other processes from acquiring a lock between the time it checks if the lock file exists and when it writes to the lock file.  This allows for a race condition, and two puppet processes started simultaneously are likely to acquire the same lock.\r\n\r\nThis has been witnessed in the wild where I work because we may have multiple request that trigger puppet runs on certain nodes.  Here"s an example:\r\n{code}\r\nDec 11 05:41:46 ded-4 puppet-agent[20075]: Retrieving plugin\r\nDec 11 05:41:46 ded-4 puppet-agent[20076]: Retrieving plugin\r\nDec 11 05:41:46 ded-4 puppet-agent[20076]: Loading facts in /var/lib/puppet/lib/facter/installed_gems.rb\r\nDec 11 05:41:46 ded-4 puppet-agent[20075]: Loading facts in /var/lib/puppet/lib/facter/installed_gems.rb\r\nDec 11 05:41:46 ded-4 puppet-agent[20076]: Loading facts in /var/lib/puppet/facts/ah_custom_facts.rb\r\nDec 11 05:41:46 ded-4 puppet-agent[20075]: Loading facts in /var/lib/puppet/facts/ah_custom_facts.rb\r\nDec 11 05:42:01 ded-4 puppet-agent[20075]: Caching catalog for ded-4.jk-ah-trunk-lucid-458-1.hosting.acquia.com\r\nDec 11 05:42:02 ded-4 puppet-agent[20076]: Caching catalog for ded-4.jk-ah-trunk-lucid-458-1.hosting.acquia.com\r\nDec 11 05:42:06 ded-4 puppet-agent[20075]: Applying configuration version "1386735465"\r\nDec 11 05:42:07 ded-4 puppet-agent[20076]: Applying configuration version "1386739763"\r\n{code}\r\n\r\nNote that these two puppet runs are applying different configurations - this left the node in an undefined state.', 'https://tickets.puppetlabs.com/browse/PUP-1150', 'https://github.com/puppetlabs/puppet/pull/8903', '2013-12-17T12:13:22.000-0800', '2015-04-08T09:47:18.000-0700', '2015-04-08T09:47:18.000-0700', 'Closed', 'puppet-agent', 7, '0', 1, 63, 3, 4, '488bcc2ac58c948361948ff43202b67d5428b8bb', 'https://tickets.puppetlabs.com/browse/PUP-1150', 'https://github.com/puppetlabs/puppet/pull/8903'),
('puppet', 20251, 254796158, 7400, 'Update CONTRIBUTING.md to talk about acceptable kinds of changes', '[~adrien] wrote some more specific guidance for community contributors which clarifies the kinds of changes that should go into core vs modules vs don"t even do it ... This should get pulled into the CONTRIBUTING.md to increase its visibility.', 'https://tickets.puppetlabs.com/browse/PUP-933', 'https://github.com/puppetlabs/puppet/pull/7400', '2013-12-04T14:36:28.000-0800', '2015-04-09T10:41:06.000-0700', '2015-04-09T10:41:06.000-0700', 'Closed', '', 3, '0', 4, 246, 29, 5, '303e6128fbc439d967b614a0ddd8bfef6ede5857', 'https://tickets.puppetlabs.com/browse/PUP-933', 'https://github.com/puppetlabs/puppet/pull/7400'),
('puppet', 70714, 30836830, 3697, 'Pass merge strategy to Hiera using Indirector::Request options', 'The new lookup function must to pass the _merge_ argument in the options map of the {{Indirector::Request}} object.  The argument must be converted into an argument recognized by Hiera (i.e. :unique becomes :array) before propagating it to the {{Hiera::lookup()}} method.\r\n', 'https://tickets.puppetlabs.com/browse/PUP-4132', 'https://github.com/puppetlabs/puppet/pull/3697', '2015-03-09T03:51:03.000-0700', '2015-04-09T10:41:08.000-0700', '2015-04-09T10:41:08.000-0700', 'Closed', '', 3, '0', 1, 66, 5, 4, 'ebf4a2e221e7ad7c634e190945b88d02ba044e29', 'https://tickets.puppetlabs.com/browse/PUP-4132', 'https://github.com/puppetlabs/puppet/pull/3697'),
('puppet', 56963, 23735676, 3266, 'Puppet fails to install correct package when "ensure => $version" is set', 'On OpenBSD some packages have multiple versions available, such as Python 2.7 and 3.3, or openldap-server 2.3 and 2.4.\r\n\r\nWith a resource such as:\r\n\r\n```\r\npackage { "openldap-server":\r\n  ensure => "2.4"\r\n}\r\n```\r\n\r\nPuppet would end up installing the first valid version it saw on a mirror (2.3, and not 2.4), which is generally the correct approach, unless a user specifically sets the version to install with `ensure`.', 'https://tickets.puppetlabs.com/browse/PUP-3604', 'https://github.com/puppetlabs/puppet/pull/3266', '2014-11-02T12:04:41.000-0800', '2015-04-09T10:41:10.000-0700', '2015-04-09T10:41:10.000-0700', 'Closed', '', 3, '0', 1, 60, 12, 2, 'a85e6635d608a280a1766d21da8d5d114b04034e', 'https://tickets.puppetlabs.com/browse/PUP-3604', 'https://github.com/puppetlabs/puppet/pull/3266'),
('puppet', 69739, 30214673, 3662, 'Acceptance tests should not rely on the puppetpath beaker option', 'Several acceptance tests rely on {{puppetpath}} for both code and configuration related paths. Historically that setting was the same as {{puppetconfdir}}, but with the code/config split, it no longer makes sense.\r\n\r\nThe acceptance tests should be updated to:\r\n\r\n# Use beaker"s {{host.puppet\["setting"\]}} methods so the test doesn"t depend on hard-coded beaker default\r\n# Query for {{codedir}} or {{confdir}} as appropriate.\r\n# Take into account the agent vs master application, e.g. {{host.puppet("master")\["confdir"\]}}', 'https://tickets.puppetlabs.com/browse/PUP-4057', 'https://github.com/puppetlabs/puppet/pull/3662', '2015-02-27T15:54:59.000-0800', '2015-04-09T10:41:10.000-0700', '2015-04-09T10:41:10.000-0700', 'Closed', 'AIO', 3, '0', 1, 91, 89, 16, '8c388537647eaa12af84893e7e51fb5628dcf0b3', 'https://tickets.puppetlabs.com/browse/PUP-4057', 'https://github.com/puppetlabs/puppet/pull/3662'),
('puppet', 69480, 32174951, 3763, 'hiera_include broken', 'Using hiera_include() with puppet-agent as of version 0.3.2.29.g49f7b1b-1.el7 cannot be used due to two problems:\r\n\r\n* a missing requirement on hiera/puppet_function\r\n* a 4x function loaded from puppet cannot call another functions because there is no "private loader"\r\n\r\nThe second problem is reproduced by this manifest:\r\n{code}\r\nclass foo {\r\n  notice yay\r\n}\r\nhiera_include(classes, [foo])\r\n{code}\r\n\r\nWhich reports the error:\r\n{code}\r\nError: Evaluation Error: Error while evaluating a Function Call, Function hiera_include(): cannot call function "include" - no loader specified at /Users/henrik/git/puppet/foo.pp:4:1\r\n{code}\r\n\r\nORIGINAL REPORT\r\n----\r\nThe following error is produced for the missing requirement.\r\n{code}\r\n[root@puppet4 manifests]# /opt/puppetlabs/puppet/bin/puppet apply default.pp -t\r\nInfo: Loading facts\r\nInfo: Loading facts\r\nInfo: Loading facts\r\nInfo: Loading facts\r\nError: Evaluation Error: Error while evaluating a Function Call, uninitialized constant Hiera::PuppetFunction at /etc/puppetlabs/puppet/manifests/default.pp:17:1 on node puppet4.vm.super-visions.com\r\nError: Evaluation Error: Error while evaluating a Function Call, uninitialized constant Hiera::PuppetFunction at /etc/puppetlabs/puppet/manifests/default.pp:17:1 on node puppet4.vm.super-visions.com\r\n{code}\r\n\r\ndefault.pp\r\n{code}\r\nhiera_include("classes", [] )\r\n{code}\r\n\r\nhiera.yaml\r\n{code}\r\n---\r\n:backends:\r\n  - yaml\r\n:hierarchy:\r\n  - defaults\r\n  - "%{clientcert}"\r\n  - "%{environment}"\r\n  - global\r\n\r\n:yaml:\r\n# datadir is empty here, so hiera uses its defaults:\r\n# - /etc/puppetlabs/code/hieradata on *nix\r\n# - %CommonAppData%\PuppetLabs\hiera\var on Windows\r\n# When specifying a datadir, make sure the directory exists.\r\n  :datadir: /etc/puppetlabs/hieradata\r\n{code}\r\n\r\n/etc/puppetlabs/hieradata is empty, same result with a global.yaml file tested and working on puppet-agent-0.3.2.22.g8642ba7-1.el7 (and before).\r\npuppet.conf is empty\r\n\r\nMore testing shows the following:\r\nWhen adding any/all of the following lines "before" the hiera_include() in the .pp file the error changes.\r\n{code}\r\n$a = hiera("a","a")\r\n$b = hiera_hash("b",{})\r\n$c = hiera_array("c",[])\r\n{code}\r\n\r\nWith the patch from https://github.com/puppetlabs/puppet/pull/3655 applied the error changes to:\r\n{code}\r\n[root@puppet4 ~]# puppet apply /etc/puppetlabs/puppet/manifests/default.pp -t\r\nInfo: Loading facts\r\nInfo: Loading facts\r\nInfo: Loading facts\r\nInfo: Loading facts\r\nError: Evaluation Error: Error while evaluating a Function Call, Function hiera_include(): cannot call function "include" - no loader specified at /etc/puppetlabs/puppet/manifests/default.pp:23:1 on node puppet4.vm.super-visions.com\r\nError: Evaluation Error: Error while evaluating a Function Call, Function hiera_include(): cannot call function "include" - no loader specified at /etc/puppetlabs/puppet/manifests/default.pp:23:1 on node puppet4.vm.super-visions.com\r\n{code}\r\n', 'https://tickets.puppetlabs.com/browse/PUP-4046', 'https://github.com/puppetlabs/puppet/pull/3763', '2015-02-26T03:58:19.000-0800', '2015-04-09T10:41:11.000-0700', '2015-04-09T10:41:11.000-0700', 'Closed', '', 17, '0', 1, 9, 2, 3, '706cec5a34e209c37431314839ed96bb360587d8', 'https://tickets.puppetlabs.com/browse/PUP-4046', 'https://github.com/puppetlabs/puppet/pull/3763'),
('puppet', 48870, 20182383, 3003, '(PR 3003) Pacman provider does not work on manjaro linux', 'When applying a manifest on a manjaro linux machine you obtain this error:\r\nError: /Package[dnsmasq]: Provider pacman is not functional on this host\r\n\r\nIf someone fixes it before I do, I believe the issue is the line\r\nconfine     :operatingsystem => :archlinux\r\nin pacman.rb\r\nThe output from facter on my machine is:\r\noperatingsystem => Linux\r\noperatingsystemrelease => 3.12.26-1-MANJARO\r\nhence the problem!', 'https://tickets.puppetlabs.com/browse/PUP-3128', 'https://github.com/puppetlabs/puppet/pull/3003', '2014-08-22T07:07:06.000-0700', '2015-04-09T10:41:14.000-0700', '2015-04-09T10:41:14.000-0700', 'Closed', '', 3, '0', 1, 2, 2, 1, 'c4e4ac1d9ca08e4cd31a55e87b3c916859921848', 'https://tickets.puppetlabs.com/browse/PUP-3128', 'https://github.com/puppetlabs/puppet/pull/3003'),
('puppet', 67695, 0, 0, 'Packaging should create default module directories for puppet', 'Puppet packaging should create the default modules directories (beaker refers to these as sitemoduledir and distmoduledir). In the new layout, I believe these should be /etc/puppetlabs/code/modules and /opt/puppetlabs/puppet/modules.', 'https://tickets.puppetlabs.com/browse/PUP-4001', '', '2015-02-11T10:39:33.000-0800', '2015-04-09T10:41:18.000-0700', '2015-04-09T10:41:18.000-0700', 'Closed', 'AIO', 5, '0', 0, 0, 0, 0, 'b6ae9293284a672f013905e639ed12bb8c02bee6', 'https://tickets.puppetlabs.com/browse/PUP-4001', 'https://github.com/puppetlabs/puppet/commit/b6ae9293284a672f013905e639ed12bb8c02bee6'),
('puppet', 70038, 30496142, 3679, 'Remove master settings from puppet.conf', 'Remove the master section and all related settings from the puppet.conf that puppet-agent installs. But don"t delete the file, as it still needs to be installed by puppet-agent.\r\n\r\nSERVER-409 and SERVER-410 make these {{[master]}} section settings no longer necessary.', 'https://tickets.puppetlabs.com/browse/PUP-4074', 'https://github.com/puppetlabs/puppet/pull/3679', '2015-03-03T14:18:21.000-0800', '2015-04-09T10:41:19.000-0700', '2015-04-09T10:41:19.000-0700', 'Closed', 'AIO', 2, '0', 1, 6, 9, 1, '5d6ca652529a05caa34eb25541cb4b21beb6e30d', 'https://tickets.puppetlabs.com/browse/PUP-4074', 'https://github.com/puppetlabs/puppet/pull/3679'),
('puppet', 51914, 0, 0, 'Remove deprecated methods from Puppet::Provider', '', 'https://tickets.puppetlabs.com/browse/PUP-3311', '', '2014-09-18T16:35:22.000-0700', '2015-04-09T10:41:21.000-0700', '2015-04-09T10:41:21.000-0700', 'Closed', '', 0, '0', 0, 0, 0, 0, 'ccbfedcc778f0461a60e5ee818ce1a51bc58c4e0', 'https://tickets.puppetlabs.com/browse/PUP-3311', 'https://github.com/puppetlabs/puppet/commit/ccbfedcc778f0461a60e5ee818ce1a51bc58c4e0'),
('puppet', 70497, 30607499, 3688, 'update puppet-agent path acceptance for Windows 2003 and 32-bit app on 64-bit OS', 'First version of {{ensure_puppet-agent_paths}} was based on examples specific to Windows Server 2008+ and using matching Ruby and OS architectures. It needs to be extended to cover Windows Server 2003 paths, and running 32-bit Ruby on a 64-bit Windows.', 'https://tickets.puppetlabs.com/browse/PUP-4088', 'https://github.com/puppetlabs/puppet/pull/3688', '2015-03-05T14:28:09.000-0800', '2015-04-09T10:41:22.000-0700', '2015-04-09T10:41:22.000-0700', 'Closed', 'AIO', 4, '0', 2, 99, 55, 1, '7c706243bbcdea2050539f7a45d11e4d31bca165', 'https://tickets.puppetlabs.com/browse/PUP-4088', 'https://github.com/puppetlabs/puppet/pull/3688'),
('puppet', 55523, 27068470, 3461, 'Stop overwriting the agent"s facts timestamp', 'The master overwrites the timestamp on the agent"s facts. This change was made in 2010 (https://github.com/puppetlabs/puppet/commit/fb5f859cf4), and does the wrong thing when there is more than one puppet master. We should stop doing this.\r\n', 'https://tickets.puppetlabs.com/browse/PUP-3488', 'https://github.com/puppetlabs/puppet/pull/3461', '2014-10-17T15:08:15.000-0700', '2015-04-09T10:41:22.000-0700', '2015-04-09T10:41:22.000-0700', 'Closed', '', 2, '0', 1, 4, 9, 2, '1c9b3a859be80654aff9bfde141bf143e90fcb15', 'https://tickets.puppetlabs.com/browse/PUP-3488', 'https://github.com/puppetlabs/puppet/pull/3461'),
('puppet', 64430, 28129551, 3526, 'Yum provider cannot parse long package names', 'Pull request #2670 replaces yumhelper with a direct call to yum check-update. The output is then parsed line by line for package update information.\r\n\r\nhttps://github.com/puppetlabs/puppet/commit/8b18639427dbeb17c262f9a459f4d1b6c0380b40#diff-d66f8a2f004447ff56ddba30c0b9161d\r\n\r\nUnfortunately, YUM the yum binary performs line wrapping on all output at 80 characters when piped to an external command. Lines may not contain the expected fields if any long package names are present on the system. This can result in a parse error when the provider is invoked.\r\n\r\nWhile this is not in keeping with the unix philosophy, the YUM authors have no plans to change the behavior.\r\n\r\nhttps://bugzilla.redhat.com/show_bug.cgi?id=584525\r\n\r\nThe workaround is either to invoke YUM using the Python API calls, or to use repoquery instead. Repoquery is part of the yum-utils package, which may or may not be present on the system. Invoking repoquery will solve the issue, but creates a new RPM dependency for Puppet. While yum-utils is part of many standard installs, it"s not universally available on all platforms.', 'https://tickets.puppetlabs.com/browse/PUP-3861', 'https://github.com/puppetlabs/puppet/pull/3526', '2015-01-17T22:36:30.000-0800', '2015-04-09T10:41:22.000-0700', '2015-04-09T10:41:22.000-0700', 'Closed', '', 9, '0', 1, 252, 43, 4, '32b0895a6ea5ac325926dd41a247a8fe3e8e5e2b', 'https://tickets.puppetlabs.com/browse/PUP-3861', 'https://github.com/puppetlabs/puppet/pull/3526'),
('puppet', 69941, 30364848, 3670, 'Deep merge options cannot be passed as options map.', ' When using lookup, the merge strategy can be passed as a map with a "strategy" key and additional options. This map is type validated and everything works fine for the "unique" and "hash" strategies but it fails when  using the "deep" merge strategy since it allows additional options with varying element types (booleans in particular).\r\n\r\nThe reason this fails is that the type validation incorrectly uses "infer()" on the given map (which produces a Hash type) instead of "infer_set()" (which produces a Struct type). The assignable? then fails since it tries to verify all elements of the required type using the common element type of the inferred Hash.', 'https://tickets.puppetlabs.com/browse/PUP-4070', 'https://github.com/puppetlabs/puppet/pull/3670', '2015-03-03T03:10:36.000-0800', '2015-04-09T10:41:23.000-0700', '2015-04-09T10:41:23.000-0700', 'Closed', '', 23, '0', 1, 12, 2, 2, '1defec3a9431b88e917847fc607381674d312d89', 'https://tickets.puppetlabs.com/browse/PUP-4070', 'https://github.com/puppetlabs/puppet/pull/3670'),
('puppet', 68028, 29287406, 3605, 'parsed provider destroys file if a line starts with uppercase Q', 'if a record in a file starts with an uppercase Q, puppet will merge this line with the previous line when the file is written back to disc, making the file invalid.\r\n\r\nI know this sounds weired\r\n\r\n{code}\r\ndef lines(text)\r\n  # Remove any trailing separators, and then split based on them\r\n  text.sub(/#{self.line_separator}\Q/,"").split(self.line_separator)\r\nend\r\n{code}\r\n\r\nI don"t get the intention but {{\Q}} does not have a special meaning in this context so every newline (which is the default line_seperator) followed by an uppercase Q are replaced with the empty string.', 'https://tickets.puppetlabs.com/browse/PUP-4012', 'https://github.com/puppetlabs/puppet/pull/3605', '2015-02-13T10:13:00.000-0800', '2015-04-09T10:41:24.000-0700', '2015-04-09T10:41:24.000-0700', 'Closed', '', 9, '0', 1, 6, 2, 2, 'b7dd89a464900a639c29fc9c94f39bdb6d8e00f2', 'https://tickets.puppetlabs.com/browse/PUP-4012', 'https://github.com/puppetlabs/puppet/pull/3605'),
('puppet', 21459, 651937036, 8610, 'Resource refreshes don"t check for failed dependencies', 'Given this manifest:\r\n\r\n{code}\r\nexec{"moo":\r\n    command => "/usr/bin/cowsay "fail :("",\r\n    refreshonly => true,\r\n    logoutput => true,\r\n    require  => Exec["false"],\r\n    subscribe => [ File["/tmp/1"], File["/tmp/2"], File["/tmp/3"] ]\r\n}\r\n\r\nfile{"/tmp/1": content => 1}\r\nfile{"/tmp/2": content => 2}\r\nfile{"/tmp/3": content => 3}\r\nexec{"false": command => "/bin/false"}\r\n{code}\r\n\r\nThe Exec\[moo] shouldn"t run it requires Exec\[false] which will always fail, but it gets notified by the file resources via its subscribes and then runs anyway regardless of the state of the required resources.\r\n\r\nIn version 2.6.5 this might be related to #5670 but I am filing a new bug since I think its not as this bug is also present in 0.25.x while the one in #5670 is 2.6.x only\r\n\r\n{code}\r\nnotice: //File[/tmp/1]/content: defined content as "unknown checksum"\r\nnotice: //File[/tmp/3]/content: defined content as "unknown checksum"\r\nerr: //Exec[false]/returns: change from notrun to 0 failed: /bin/false returned 1 instead of one of [0] at /home/rip/test.pp:12\r\nnotice: //File[/tmp/2]/content: defined content as "unknown checksum"\r\nnotice: //Exec[moo]: Dependency exec[/bin/false] has 1 failures\r\nwarning: //Exec[moo]: Skipping because of failed dependencies\r\nnotice: //Exec[moo]: Triggering "refresh" from 3 dependencies\r\nnotice: //Exec[moo]/returns:  _________ \r\nnotice: //Exec[moo]/returns: < fail :( >\r\nnotice: //Exec[moo]/returns:  --------- \r\nnotice: //Exec[moo]/returns:         \   ^__^\r\nnotice: //Exec[moo]/returns:          \  (oo)\_______\r\nnotice: //Exec[moo]/returns:             (__)\       )\/\\r\nnotice: //Exec[moo]/returns:                 ||----w |\r\nnotice: //Exec[moo]/returns:                 ||     ||\r\n{code}', 'https://tickets.puppetlabs.com/browse/PUP-1106', 'https://github.com/puppetlabs/puppet/pull/8610', '2013-12-16T11:49:34.000-0800', '2015-04-09T10:41:27.000-0700', '2015-04-09T10:41:27.000-0700', 'Closed', 'customer;redmine', 12, '0', 1, 169, 20, 3, 'aadc6245c01414d4ce11a91c55fc228076e94a5c', 'https://tickets.puppetlabs.com/browse/PUP-1106', 'https://github.com/puppetlabs/puppet/pull/8610'),
('puppet', 55743, 23082331, 3220, 'Puppet should allow Upstart service provider for Linux Mint', 'Recent versions of LinuxMint use Upstart. But puppet does not allow the upstart provider for LinuxMint so you cannot start services.', 'https://tickets.puppetlabs.com/browse/PUP-3492', 'https://github.com/puppetlabs/puppet/pull/3220', '2014-10-21T05:39:31.000-0700', '2015-04-09T10:41:31.000-0700', '2015-04-09T10:41:31.000-0700', 'Closed', '', 1, '0', 1, 2, 1, 1, 'd09b00fce24c2c10b99d830c9862545d1a2f1a07', 'https://tickets.puppetlabs.com/browse/PUP-3492', 'https://github.com/puppetlabs/puppet/pull/3220'),
('puppet', 59935, 25173201, 3356, 'defined function does not handle qualified variable names correctly', 'The defined function can answer if a variable is defined. If the variable name contains "::" it always returns false even if variable is defined.\r\n\r\n{code}\r\n$x = 10\r\nnotice defined("$::x")\r\n{code}\r\nOr variations thereof referencing a variable in a class.\r\n\r\nThere are no tests for this.', 'https://tickets.puppetlabs.com/browse/PUP-3718', 'https://github.com/puppetlabs/puppet/pull/3356', '2014-11-27T16:18:33.000-0800', '2015-04-09T10:41:33.000-0700', '2015-04-09T10:41:33.000-0700', 'Closed', '', 4, '0', 2, 34, 2, 3, '554f692a46770f50567dc1bfc59dc4f6985c2fa0', 'https://tickets.puppetlabs.com/browse/PUP-3718', 'https://github.com/puppetlabs/puppet/pull/3356'),
('puppet', 65008, 27939094, 3512, 'Data providers cannot be added in modules', 'The new mechanism for "agnostic data in modules" introduced in PUP-1640 has issues with handling additional data-provider mechanisms.\r\n\r\nThis manifests as either problems finding the new extensions, or that the default "none" is not found.\r\n\r\nA preliminary investigation shows that there are issues with the {{PuppetX}} name space which is used as {{puppetx}} in some places and {{puppet_x}} in other. This ended up being wrong when the injector was made to stop squatting on the PuppetX namespace.\r\n\r\nThere also seems to be an issue with the injector handling multiple contributions to a multibind - either in general or specifically for the configuration of the data providers.\r\n', 'https://tickets.puppetlabs.com/browse/PUP-3900', 'https://github.com/puppetlabs/puppet/pull/3512', '2015-01-22T14:21:03.000-0800', '2015-04-09T10:41:34.000-0700', '2015-04-09T10:41:34.000-0700', 'Closed', '', 5, '0', 8, 246, 22, 17, '3c95490a256be774c8e5a054f4b51926966e86ca', 'https://tickets.puppetlabs.com/browse/PUP-3900', 'https://github.com/puppetlabs/puppet/pull/3512'),
('puppet', 66798, 0, 0, 'Puppet agent requests do not include the X-Puppet-Version header', 'HTTP requests coming from the puppet agent do not include the X-Puppet-Version header.  Talking with [~kylo] this looks like an oversight or regression.  Looks like it wasn"t a regression, orginially we just added this to the response header in 70a18ef.\r\n\r\n{noformat}\r\n$ be puppet agent -t --http_debug --server puppetmaster\r\n<- "GET /puppet/v3/node/percival.corp.puppetlabs.net?environment=production&transaction_uuid=e223c1ef-3a80-404c-8fc7-8d938cb5cdd5&fail_on_404=true HTTP/1.1\r\nAccept: pson, msgpack, yaml, binary\r\nAccept-Encoding: gzip;q=1.0,deflate;q=0.6,identity;q=0.3\r\nUser-Agent: Ruby\r\nHost: puppetmaster:8140\r\n\r\n"\r\n-> "HTTP/1.1 200 OK \r\n"\r\n-> "X-Puppet-Version: 3.7.4\r\n"\r\n-> "Content-Type: text/pson\r\n"\r\n-> "Server: WEBrick/1.3.1 (Ruby/1.9.3/2013-11-22) OpenSSL/1.0.1c\r\n"\r\n-> "Date: Wed, 04 Feb 2015 17:28:30 GMT\r\n"\r\n-> "Content-Length: 5661\r\n"\r\n-> "Connection: Keep-Alive\r\n"\r\n-> "\r\n"\r\n{noformat}\r\n\r\nAbove, the agent"s GET request does not have the X-Puppet-Version header, but the response from the server does.', 'https://tickets.puppetlabs.com/browse/PUP-3958', '', '2015-02-04T09:42:48.000-0800', '2015-04-09T10:41:36.000-0700', '2015-04-09T10:41:36.000-0700', 'Closed', '', 5, '0', 0, 0, 0, 0, 'aecdeaf8fd1b31f8702035d3342e2deaf025c3fd', 'https://tickets.puppetlabs.com/browse/PUP-3958', 'https://github.com/puppetlabs/puppet/commit/aecdeaf8fd1b31f8702035d3342e2deaf025c3fd'),
('puppet', 19796, 874656864, 8890, 'noop => true is ignored when resource is triggered by other resource', 'when running :\r\n\r\n{code}\r\n    file {"/tmp/asd":\r\n      content => generate("/bin/date"),\r\n    notify  => Exec["ttt"],\r\n    }\r\n\r\n\r\n    exec { "ttt":\r\n      command   =>"/bin/date",\r\n      logoutput => true,\r\n      noop      => true,\r\n    }\r\n{code}\r\n\r\nexec is still ran even tho it"s set to noop, any notify to resource makes it ignore noop parameter:\r\n\r\n{code}\r\n    Notice: /Stage[main]//File[/tmp/asd]/ensure: defined content as "{md5}2f61ea5f548d9cfcda74e24a547dfa86"\r\n    Notice: /Stage[main]//Exec[ttt]/returns: current_value notrun, should be 0 (noop)\r\n    Notice: /Stage[main]//Exec[ttt]/returns: Tue Jun 18 14:12:15 CEST 2013\r\n    Notice: /Stage[main]//Exec[ttt]: Triggered "refresh" from 1 events\r\n    Notice: Finished catalog run in 0.99 seconds\r\n{code}\r\n', 'https://tickets.puppetlabs.com/browse/PUP-900', 'https://github.com/puppetlabs/puppet/pull/8890', '2013-11-27T11:21:31.000-0800', '2015-04-09T10:41:37.000-0700', '2015-04-09T10:41:37.000-0700', 'Closed', 'redmine;support', 8, '0', 1, 43, 13, 3, '20d5f5d0ac2c2e8c8bfd86b4411379e8dcab7d28', 'https://tickets.puppetlabs.com/browse/PUP-900', 'https://github.com/puppetlabs/puppet/pull/8890'),
('puppet', 13766, 23416568, 3241, 'Powershell execs failing when running Puppet as a service', 'See https://projects.puppetlabs.com/issues/22258', 'https://tickets.puppetlabs.com/browse/PUP-271', 'https://github.com/puppetlabs/puppet/pull/3241', '2013-08-28T11:45:48.000-0700', '2015-04-09T15:16:15.000-0700', '2015-04-09T15:16:15.000-0700', 'Closed', 'windows', 1, '0', 2, 8, 19, 5, 'ec910598c2c6953079d3683063ae730c4cebd854', 'https://tickets.puppetlabs.com/browse/PUP-271', 'https://github.com/puppetlabs/puppet/pull/3241'),
('puppet', 13618, 16015462, 2663, 'Exec of powershell.exe broken when running as a service', 'Ruby 1.9 changed how rubyw.exe works, and that broke puppet #21043. We made a change to puppet to use ruby.exe instead, but this seems to break executing powershell via an exec resource #22258.', 'https://tickets.puppetlabs.com/browse/PUP-258', 'https://github.com/puppetlabs/puppet/pull/2663', '2013-08-26T08:43:26.000-0700', '2015-04-09T15:19:57.000-0700', '2015-04-09T15:19:57.000-0700', 'Resolved', 'windows', 4, '0', 1, 32, 16, 5, '05af20b70b5ad5ee0079f6661aa8fa163935b608', 'https://tickets.puppetlabs.com/browse/PUP-258', 'https://github.com/puppetlabs/puppet/pull/2663'),
('puppet', 14453, 20839408, 3055, 'powershell module"s unless and onlyif checks fail on ruby 1.8.7', '', 'https://tickets.puppetlabs.com/browse/PUP-317', 'https://github.com/puppetlabs/puppet/pull/3055', '2013-09-11T13:15:30.000-0700', '2015-04-09T15:21:36.000-0700', '2015-04-09T15:21:36.000-0700', 'Resolved', 'windows', 6, '0', 1, 12, 4, 2, '7a0a93701b42ce200baa5e5124bdbca506d38e23', 'https://tickets.puppetlabs.com/browse/PUP-317', 'https://github.com/puppetlabs/puppet/pull/3055'),
('puppet', 14636, 24201490, 3299, 'puppet 3.3.0 ignores File ignore in recursive copy if talking to pre-3.3.0 master', 'A 3.3.0 agent talking to a pre-3.3.0 master will ignore the file resource"s ignore list, i.e. it will copy over unwanted files/directories. This is a fallout of the yaml deprecation effort, b/c the array of ignore patterns was serialized as yaml which was then added to the query parameter list (for the file_metadata endpoint).', 'https://tickets.puppetlabs.com/browse/PUP-338', 'https://github.com/puppetlabs/puppet/pull/3299', '2013-09-13T13:39:27.000-0700', '2015-04-09T15:43:48.000-0700', '2015-04-09T15:43:48.000-0700', 'Resolved', '', 1, '0', 2, 54, 12, 2, '83649041921df5a44d9d2f611763b5c6ef561f43', 'https://tickets.puppetlabs.com/browse/PUP-338', 'https://github.com/puppetlabs/puppet/pull/3299'),
('puppet', 37798, 23193747, 3225, 'Intermittent "chage" Puppet installation failure on Ubuntu 14.04 during PDB build', 'We keep getting this error during Puppet installation for our PuppetDB builds:\r\n\r\n{code}\r\nSetting up ruby-augeas (0.5.0-2) ...\r\nSetting up libaugeas-ruby (0.5.0-2) ...\r\nSetting up ruby-shadow (2.2.0-1) ...\r\nSetting up ruby-json (1.8.0-1build1) ...\r\nSetting up hiera (1.3.3-1puppetlabs1) ...\r\nSetting up puppet-common (3.6.1-1puppetlabs1) ...\r\nchage: the shadow password file is not present\r\n/usr/bin/chage failed with return code 15, shadow not enabled, password aging cannot be set. Continuing.\r\nchfn: PAM: Authentication failure\r\nadduser: `/usr/bin/chfn -f Puppet configuration management daemon puppet" returned error code 1. Exiting.\r\ndpkg: error processing package puppet-common (--configure):\r\n subprocess installed post-installation script returned error exit status 1\r\ndpkg: dependency problems prevent configuration of puppet:\r\n puppet depends on puppet-common (= 3.6.1-1puppetlabs1); however:\r\n  Package puppet-common is not configured yet.\r\n\r\ndpkg: error processing package puppet (--configure):\r\n dependency problems - leaving unconfigured\r\nProcessing triggers for libc-bin (2.19-0ubuntu6) ...\r\nProcessing triggers for ca-certificates (20130906ubuntu2) ...\r\nUpdating certificates in /etc/ssl/certs... 164 added, 0 removed; done.\r\nRunning hooks in /etc/ca-certificates/update.d....done.\r\nErrors were encountered while processing:\r\n puppet-common\r\n puppet\r\nE: Sub-process /usr/bin/dpkg returned an error code (1)\r\nA package failed to install.  Trying to recover:\r\nSetting up puppet-common (3.6.1-1puppetlabs1) ...\r\nSetting up puppet (3.6.1-1puppetlabs1) ...\r\ninitctl: Unable to connect to Upstart: Failed to connect to socket /com/ubuntu/upstart: Connection refused\r\ninvoke-rc.d: policy-rc.d denied execution of start.\r\n{code}\r\n\r\n(see http://jenkins-release.delivery.puppetlabs.net/job/puppetdb-packaging-2014-06-01-21-11-50-afb66e3aa28a5fe69963f490114c9a9f15cf927c/command=pl_deb%20COW=base-trusty-i386.cow/1/console)\r\n\r\nNow this only happens for Ubuntu 14.04, no other distro we can see exhibits this. It seems we"re getting it about 50% of the time (rough guess).\r\n\r\nJust today we received the error twice in a row for both our stable and master branches:\r\n\r\nhttp://jenkins-release.delivery.puppetlabs.net/job/puppetdb-packaging-2014-06-01-21-11-50-afb66e3aa28a5fe69963f490114c9a9f15cf927c/command=pl_deb%20COW=base-trusty-i386.cow/1/console\r\nhttp://jenkins-release.delivery.puppetlabs.net/job/puppetdb-packaging-2014-06-01-23-08-48-d07001846081a5f187b287faddd80c9931ce8dbd/command=pl_deb%20COW=base-trusty-i386.cow/1/consoleFull\r\n\r\nIf we can"t get a resolution soon we"ll have to drop Ubuntu 14.04 build targets from PDB temporarily as its starting to get more and more frequent now and its affecting our day to day.', 'https://tickets.puppetlabs.com/browse/PUP-2706', 'https://github.com/puppetlabs/puppet/pull/3225', '2014-06-02T05:59:45.000-0700', '2015-04-09T16:01:05.000-0700', '2015-04-09T16:01:05.000-0700', 'Closed', '', 11, '0', 1, 4, 4, 2, 'ddbd2400475f243ab696c233ecfcddfe7f46ebbb', 'https://tickets.puppetlabs.com/browse/PUP-2706', 'https://github.com/puppetlabs/puppet/pull/3225'),
('puppet', 31003, 0, 0, 'file provider silent behaviour change for "mode"', 'The type reference for file in Puppet 0.25.5 said:\r\n\r\n{noformat}\r\nfile { "/some/dir":\r\n  mode => 644,\r\n  recurse => true,\r\n}\r\n{noformat}\r\n\r\nRef: http://docs.puppetlabs.com/references/0.25.5/type.html#file\r\n\r\nI believe that there are many Puppet manifests out there that still writes file mode as 3-digit numbers and expect them to be interpreted as octal.\r\n\r\nStarting with Puppet 3.5.0 (using future parser), this would set the mode to 1204 instead of the intended 0644.  The mode 755 becomes 1363 -- which means that the file is world writable.\r\n\r\nI know that for a long time the documentation says that the mode should be specified as a four-digit octal value. But it doesn"t say that it has to be a string. Specifying 4711 used to make a file setuid; starting in Puppet 3.5.0 is produces the nonsensical error message "The file mode specification is invalid: 4711".\r\n\r\nThere has never been any deprecation warnings, so code written by the ancient documentation now suddenly behaves differently. Files that were supposed to be read-only can now become writable by everybody on the system.\r\n\r\nAt the very least, this should have been mentioned in the release notes.', 'https://tickets.puppetlabs.com/browse/PUP-2156', '', '2014-04-04T05:51:42.000-0700', '2015-04-13T05:06:54.000-0700', '2015-04-13T05:06:54.000-0700', 'Closed', 'docs_reviewed;future-parser', 20, '0', 0, 0, 0, 0, '67646c18c031403b64d1c83c3010172205b6c89e', 'https://tickets.puppetlabs.com/browse/PUP-2156', 'https://github.com/puppetlabs/puppet/commit/67646c18c031403b64d1c83c3010172205b6c89e'),
('puppet', 70206, 30950741, 3701, 'lookup should lookup in module when looking up qualified names', 'The current behavior of the {{lookup}} function is to only lookup data provided by a module data provider if the call to lookup comes from within the module. \r\nThis is done to protect that one module overrides values for other modules (which is not allowed).\r\n\r\nThe rules should be changed so that a lookup for a fully qualified key should be directed to the module matched by the first name segment (if that module supports a data provider).\r\n\r\nWithout this ability, it is not possible to figure out what the value of a parameter will be (unless it is overridden in the environment or globally) unless that call to lookup comes from within the module.\r\n\r\nAll other keys bound by the module data provider continues to be private and should only be visible to lookups from within the module.\r\n', 'https://tickets.puppetlabs.com/browse/PUP-4081', 'https://github.com/puppetlabs/puppet/pull/3701', '2015-03-04T06:15:13.000-0800', '2015-04-21T15:22:58.000-0700', '2015-04-21T15:22:58.000-0700', 'Closed', '', 9, '0', 1, 192, 94, 15, '4dc25b7406f4cce1ca47b5bf87167952c4fdd661', 'https://tickets.puppetlabs.com/browse/PUP-4081', 'https://github.com/puppetlabs/puppet/pull/3701'),
('puppet', 71568, 31157709, 3712, 'config.ru is missing codedir argument', 'config.ru in master doesn"t work because it is missing a codedir. \r\n\r\nPatch incoming. ', 'https://tickets.puppetlabs.com/browse/PUP-4199', 'https://github.com/puppetlabs/puppet/pull/3712', '2015-03-13T12:39:06.000-0700', '2015-04-28T15:55:41.000-0700', '2015-04-28T15:55:41.000-0700', 'Closed', '', 2, '0', 1, 1, 0, 1, 'e0c2984061bd64333ee3b71d654d5ed41288e429', 'https://tickets.puppetlabs.com/browse/PUP-4199', 'https://github.com/puppetlabs/puppet/pull/3712'),
('puppet', 66831, 28687624, 3575, 'Presence of createrepo not checked by acceptance/rpm_util.rb', 'The helper functions in acceptance/lib/puppet/acceptance/rpm_util.rb do not verify that the packages {{createrepo}} and {{rpmbuild}} are present on the system under test prior to invoking them.\r\n\r\nThis is causing the following acceptance test to fail:\r\n\r\n{{acceptance/tests/resource/package.common_package_name_in_different_providers.rb}}', 'https://tickets.puppetlabs.com/browse/PUP-3960', 'https://github.com/puppetlabs/puppet/pull/3575', '2015-02-04T11:48:38.000-0800', '2015-05-05T15:56:06.000-0700', '2015-05-05T15:56:06.000-0700', 'Closed', '', 6, '0', 2, 14, 22, 5, '8c1751ed96e094608f98578b95078e577cc07e72', 'https://tickets.puppetlabs.com/browse/PUP-3960', 'https://github.com/puppetlabs/puppet/pull/3575'),
('puppet', 79188, 35174270, 3915, 'Stock Puppet shipping with Ubuntu Vivid (3.7.2) has broken service type', 'If you run a puppet manifest on Ubuntu Vivid, certain services get detected incorrectly, and Puppet attempts to treat them as Upstart services, using the /sbin/{start,stop,restart,reload,status} commands. For instance, {{mysql}} works that way. The following Puppet manifest exercises the error:\r\n\r\n{code:none}\r\nservice{"mysql":\r\n	ensure => running,\r\n}\r\n\r\nnotify {"test":\r\n	notify => Service["mysql"]\r\n}\r\n{code}\r\n\r\nOutput:\r\n{code:none}\r\n$ sudo puppet apply test.pp \r\nNotice: Compiled catalog for vdanilchenko-vivid.vistaprint.net in environment production in 0.33 seconds\r\nNotice: test\r\nNotice: /Stage[main]/Main/Notify[test]/message: defined "message" as "test"\r\nError: /Stage[main]/Main/Service[mysql]: Could not evaluate: Execution of "/sbin/status mysql" returned 1: status: Unable to connect to Upstart: Failed to connect to socket /com/ubuntu/upstart: Connection refused\r\nError: /Stage[main]/Main/Service[mysql]: Failed to call refresh: Execution of "/sbin/status mysql" returned 1: status: Unable to connect to Upstart: Failed to connect to socket /com/ubuntu/upstart: Connection refused\r\nError: /Stage[main]/Main/Service[mysql]: Execution of "/sbin/status mysql" returned 1: status: Unable to connect to Upstart: Failed to connect to socket /com/ubuntu/upstart: Connection refused\r\n{code}\r\nOf course, this fails because running {{/sbin/status mysql}} fails. This can be verified by simply running it on command line.\r\n\r\nNow the {{apache2}} service, for instance, gets detected correctly (Upstart commands also fail, but Puppet treats apache2 as Init service and manages it correctly); but {{mysql}} breaks.\r\n\r\nI didn"t test all the services on the system, but the {{cups}} service, for instance, also breaks, just like {{mysql}}.', 'https://tickets.puppetlabs.com/browse/PUP-4540', 'https://github.com/puppetlabs/puppet/pull/3915', '2015-05-07T11:00:36.000-0700', '2015-05-12T12:54:08.000-0700', '2015-05-12T12:54:08.000-0700', 'Closed', '', 6, '0', 1, 36, 2, 3, '', 'https://tickets.puppetlabs.com/browse/PUP-4540', 'https://github.com/puppetlabs/puppet/pull/3915'),
('puppet', 77622, 34267466, 3873, 'Document PUP-4201 JSON logging via --logdest', 'PUP-4201 added support for specifying {{--logdest /var/log/somefile.json}} and getting a (partial) JSON array of log message objects. This wasn"t documented. \r\n\r\nDocs for {{--logdest}} are in several files in lib/puppet/application/<NAME>.rb. The most important ones are apply, agent, and master. All three of these, at least, need edits to reflect the new feature. \r\n\r\nThis feature is quiet enough and odd enough that I believe updating the description of {{--logdest}} is the only documentation we need. \r\n\r\nh2. QA Risk Analysis\r\n| Probability | Low |\r\n| Impact | Low |\r\n| Risk Level | Low |\r\n| Test Level | none|', 'https://tickets.puppetlabs.com/browse/PUP-4465', 'https://github.com/puppetlabs/puppet/pull/3873', '2015-04-27T12:58:28.000-0700', '2015-05-15T17:50:07.000-0700', '2015-05-15T17:50:07.000-0700', 'Closed', '', 4, '0', 1, 23, 3, 4, '9fc4a9e8a07faea5c5e6c4e1e44ef29fb77b09c7', 'https://tickets.puppetlabs.com/browse/PUP-4465', 'https://github.com/puppetlabs/puppet/pull/3873'),
('puppet', 77516, 34169897, 3869, 'split with just Regexp (unparameterized type) splits on whitespace', 'Since 4.0.0 it is possible to give a Regexp type to split to specify the pattern to split on.  Since a Regexp without a parameter (pattern) has an undef/nil pattern, and this is given directly to the Ruby String#split method, it is taken to mean "split on whitespace".\r\n\r\nThis is different that if the pattern is set to the an empty string, or to an empty regular expression where the split is made on "nothing" - i.e. between every character.\r\n\r\nThe most reasonable would be if {{Regexp}} and {{Regexp\[""]}} results in the same regular expression while as types they are different since Regexp accepts any other Regexp, while Regexp[""] only accepts that specific regexp.\r\n\r\nh2. QA Risk Analysis\r\n| Probability | Medium (how frequently do people split with {{Regexp}}?) |\r\n| Impact | Low (unexpected results but no data loss) |\r\n| Risk Level | Medium |\r\n| Test Level | Spec |', 'https://tickets.puppetlabs.com/browse/PUP-4463', 'https://github.com/puppetlabs/puppet/pull/3869', '2015-04-26T13:37:41.000-0700', '2015-05-20T15:24:20.000-0700', '2015-05-20T15:24:20.000-0700', 'Closed', '', 12, '0', 1, 16, 3, 5, '795d693e226c3730fedbb58ee10290765a2602f0', 'https://tickets.puppetlabs.com/browse/PUP-4463', 'https://github.com/puppetlabs/puppet/pull/3869'),
('puppet', 73785, 33214812, 3816, 'puppet apply --trace has stopped producing output', 'When running something that fails and using the {{--trace}} flag to get a stack trace, no stack trace appears. This works on 3.7.5, but not on 3.x.\r\n\r\nExpected:\r\n{code}\r\npuppet apply -e "1 < blue" --parser future --trace\r\n{code}\r\n\r\nto produce a stack trace, but no stack trace is produced.\r\n\r\n', 'https://tickets.puppetlabs.com/browse/PUP-4336', 'https://github.com/puppetlabs/puppet/pull/3816', '2015-03-28T18:18:22.000-0700', '2015-05-20T15:24:24.000-0700', '2015-05-20T15:24:24.000-0700', 'Closed', '', 4, '0', 1, 7, 0, 1, '6debe89bd935d56e2ec424900ad6f573bbf45552', 'https://tickets.puppetlabs.com/browse/PUP-4336', 'https://github.com/puppetlabs/puppet/pull/3816'),
('puppet', 79447, 35123500, 3912, 'TypeCalculator.generalize() produces bad types for Struct', 'The {{TypeCalculator.generalize}} strips all information about type and represented value (or values) when applied to a {{String}}. This behavior becomes problematic when generalizing a {{Struct}} type since it means that all information about the keys in that struct is lost and a printout of a generalized Struct becomes nonsensical. The struct:\r\n{code}\r\nStruct[{name => String[1], version => String[1]}]\r\n{code}\r\nbecomes:\r\n{code}\r\nStruct[{"" => String, "" => String}]\r\n{code}\r\n', 'https://tickets.puppetlabs.com/browse/PUP-4551', 'https://github.com/puppetlabs/puppet/pull/3912', '2015-05-11T04:15:41.000-0700', '2015-05-20T15:24:25.000-0700', '2015-05-20T15:24:25.000-0700', 'Closed', '', 2, '0', 1, 38, 6, 2, '6482836109e80c4ad246a314128fbc7b5f964b3f', 'https://tickets.puppetlabs.com/browse/PUP-4551', 'https://github.com/puppetlabs/puppet/pull/3912'),
('puppet', 64942, 33464623, 3831, 'EPP validator should error when specified template file does not exist', 'If an attempt is made to validate or render an existing file that is not an {{.epp}} there is no error, and the exit code is 0. A file that is actually missing is flagged with an error.\r\n\r\nrisk: medium\r\nprobability: medium (only affects epp)\r\nseverity: low (only affects epp)\r\ntest layer: acceptance on exit codes in general, no unit test in PR', 'https://tickets.puppetlabs.com/browse/PUP-3895', 'https://github.com/puppetlabs/puppet/pull/3831', '2015-01-22T08:42:29.000-0800', '2015-05-20T15:24:27.000-0700', '2015-05-20T15:24:27.000-0700', 'Closed', 'EPP', 4, '0', 1, 7, 2, 1, '1ddbe8a78b9fc463fe1d1afd79f673534f7561ee', 'https://tickets.puppetlabs.com/browse/PUP-3895', 'https://github.com/puppetlabs/puppet/pull/3831'),
('puppet', 70534, 32281851, 3774, 'Zypper provider doesn"t work correctly on SLES 10.4 with install_options set', 'h2. Overview\r\nAttempting to run puppet with {{install_options}} set to disable GPG checks for package installation results in an error from the {{zypper}} command that the {{--name}} and {--no-gpg-checks}} options are not recognised.\r\n\r\nWith the stock puppet zypper provider, its impossible to install packages with option set.\r\n\r\nh2.  Test case\r\nThe following Puppet code was used to attempt to bypass the {{zypper}} GPG signing requirements:\r\n{noformat}\r\npackage { "REDACTED":,\r\n  provider => "zypper",\r\n  name => REDACTED,\r\n  ensure => $user_supplied_variable,\r\n  install_options => [ "--no-gpg-checks" ],\r\n }\r\n{noformat}\r\n\r\nRunning this code resulted in an error from the {{zypper}} command being returned via a failed Puppet execution:\r\n{noformat}\r\n# /opt/puppet/bin/puppet agent --test\r\nInfo: Retrieving pluginfacts\r\nInfo: Retrieving plugin\r\nInfo: Loading facts\r\nInfo: Caching catalog for REDACTED\r\nInfo: Applying configuration version "1425621321"\r\nError: Could not update: Execution of "/usr/bin/zypper --terse install --auto-agree-with-licenses --no-confirm --name --no-gpg-checks REDACTED(was package name)" returned 2: Unknown option --name\r\nUnknown option --no-gpg-checks\r\nWrapped exception:\r\nExecution of "/usr/bin/zypper --terse install --auto-agree-with-licenses --no-confirm --name --no-gpg-checks REDACTED" returned 2: Unknown option --name\r\nUnknown option --no-gpg-checks\r\nError: /Stage[main]/REDACTED/Package[REDACTED]/ensure: change from absent to latest failed: Could not update: Execution of "/usr/bin/zypper --terse install --auto-agree-with-licenses --no-confirm --name --no-gpg-checks REDACTED" returned 2: Unknown option --name\r\nUnknown option --no-gpg-checks\r\nNotice: Finished catalog run in 0.97 seconds\r\n{noformat}\r\n\r\nh2. Experimental workaround\r\nThe {{zypper}} command in this version of SUSE expects the parameters to be ordered in a different way to that which is coded into the {{zypper.rb}} provider.  As an experiment, I was able to rearrange things so that the parameters were fed in the order that the program accepts:\r\n* --no-gpg-checks must come before the action (install)\r\n* --name doesn"t seem to be recognised at any position and had to be removed\r\n* package name should directly follow the action, eg {{install foobar}}\r\n\r\nh2. Long term fix\r\nDue to the way {{zypper}} is invoked, perhaps we may need two arguments to be passed to different parts of the command to get it to work as advertised, eg:\r\n{noformat}\r\nzypper $default_options $command_options $subcommand $subcommand_options $package_name\r\n{noformat}\r\nOr perhaps the invocation of the zypper command has changed between SUSE versions?\r\n\r\nrisk: low \r\nprobability: low: zypper install options on sles10\r\nseverity: low (workarounds exist)\r\ntest layer: unit ', 'https://tickets.puppetlabs.com/browse/PUP-4090', 'https://github.com/puppetlabs/puppet/pull/3774', '2015-03-05T22:12:37.000-0800', '2015-05-20T15:24:27.000-0700', '2015-05-20T15:24:27.000-0700', 'Closed', '', 14, '0', 1, 42, 21, 2, '347cf2ef98a4444485af977d0f1f5306042faadc', 'https://tickets.puppetlabs.com/browse/PUP-4090', 'https://github.com/puppetlabs/puppet/pull/3774'),
('puppet', 76250, 33555570, 3841, 'The "err" logging function cannot be called as a statement', 'In the language specification: https://github.com/puppetlabs/puppet-specifications/blob/master/language/expressions.md#function-calls\r\n\r\nunder the "statement style" subhead, there"s a list like:\r\n{code}\r\n# logging\r\ndebug\r\ninfo\r\nnotice\r\nwarning\r\nerror\r\n{code}\r\n\r\nWhere "error" is wrong and don"t exist. There are also several similar functions that aren"t listed. cf. http://docs.puppetlabs.com/references/latest/configuration.html#loglevel\r\n\r\nWe should allow the "err" function to be called as a statement. The remaining  logging functions are almost never used and should continue to require parentheses.\r\n\r\nrisk: medium (qa manual validate only for now)\r\nprobability: medium\r\nseverity: low (work arounds exist)\r\ntest layer: acceptance (unit test only confirms parser transform)', 'https://tickets.puppetlabs.com/browse/PUP-4428', 'https://github.com/puppetlabs/puppet/pull/3841', '2015-04-16T14:31:49.000-0700', '2015-05-20T15:24:30.000-0700', '2015-05-20T15:24:30.000-0700', 'Closed', '', 5, '0', 1, 2, 2, 2, 'd3013094fda59d595bc097c9d33605f49f344bd9', 'https://tickets.puppetlabs.com/browse/PUP-4428', 'https://github.com/puppetlabs/puppet/pull/3841'),
('puppet', 36519, 35605173, 3942, 'Server-set global variables like $::environment get overwritten by client facts', 'REPORTED PROBLEM\r\n---\r\nAs per the docs (http://docs.puppetlabs.com/puppet/latest/reference/lang_facts_and_builtin_vars.html#variables-set-by-the-puppet-master) the puppet master sets the global $::environment variable to contain the name of the node"s environment. However, if a node provides a fact with the name "environment" that fact"s value overrides the server-set environment.\r\n\r\nThe same happens with other server-set global variables, like $::servername and $::serverip.\r\n\r\nAs a result, modules can"t reliably use these variables for whatever their intended purpose is.\r\n\r\nIf this is the intended behavior, then the docs should clarify this and discourage use of the server-set variables, because a misbehaving node can override them.\r\n\r\nSOLUTION\r\n---\r\nAfter discussion with Eric Soerenson, we decided that it was best to make this an opt-in and that we are not adding a function - this for the sake of consistency between $facts, $trusted_facts, and $server_facts. This means:\r\n\r\n    At the same place where we currently set $trusted_facts we should also set $server_facts if users have opted in\r\n    The values set in $server_facts are the @server_facts set in the node by the compiler indirection + the current environment name\r\n    The user opts in by using the setting :trusted_server_facts\r\n    The setting is false by default\r\n    We issue a warning if any node parameter is overwritten\r\n    We need a ticket to add a deprecation for the opt-in being set to false\r\n    We need a ticket for 5.0.0 to remove the opt in and make $server_facts default, and to stop merging the server_facts into the node"s parameters\r\n\r\nWhen using puppet apply and {{trusted_server_facts}} is true, the {{$server_facts}} will be a hash with only the key {{environment}} set. The value for this key is the environment that was configured locally on the agent, or given on the command line (i.e. in this case there is no call to the master to compute what the master thinks the environment should be for the node).\r\n\r\nh3. an example $server_facts hash\r\n{serverversion => 4.0.0, servername => v85ix8blah.delivery.puppetlabs.net, serverip => 10.32.115.182, environment => production}\r\n\r\nQA\r\n---\r\nrisk: high\r\nprobability: medium\r\nseverity: high (hard to debug, somewhat of a security issue, can spoof environment)\r\ntest layer: acceptance', 'https://tickets.puppetlabs.com/browse/PUP-2630', 'https://github.com/puppetlabs/puppet/pull/3942', '2014-05-21T05:29:44.000-0700', '2015-05-20T15:24:31.000-0700', '2015-05-20T15:24:31.000-0700', 'Closed', '', 20, '0', 2, 17, 0, 2, 'c5676240e79d1b902469345199a510fcf4540bbb', 'https://tickets.puppetlabs.com/browse/PUP-2630', 'https://github.com/puppetlabs/puppet/pull/3942'),
('puppet', 78207, 34537129, 3884, 'Types Array[?], Hash[?,?], and Optional[?] are not assignable to themselves', 'The {{TypeCalculator.assignable?}} method does not consider the types {{Array[?]}}, {{Hash[?,?]}}, and {{Optional[?]}} to be assignable to themselves.\r\n\r\nThis is an internal fix. The problem can not be reproduced from Puppet. The only way to reproduce the problem is to use internal Ruby methods.\r\n\r\nh3. QA\r\n----\r\nrisk: low\r\nprobability: low\r\nseverity: low \r\ntest level: unit', 'https://tickets.puppetlabs.com/browse/PUP-4511', 'https://github.com/puppetlabs/puppet/pull/3884', '2015-05-01T05:33:41.000-0700', '2015-05-20T15:24:31.000-0700', '2015-05-20T15:24:31.000-0700', 'Closed', '', 5, '0', 2, 26, 11, 2, '7fee68ca3e11b6338a9a105ccc121d75eebea3c3', 'https://tickets.puppetlabs.com/browse/PUP-4511', 'https://github.com/puppetlabs/puppet/pull/3884'),
('puppet', 78043, 34449672, 3881, 'The size_type is dropped when inferring common type for String types', 'The {{TypeCalculator}} will lose the {{String.size_type}} when computing the common type of two {{String}} types that both have a {{size_type}}. The correct behavior is to compute the common type of the two.\r\n\r\nh3. QA\r\n----\r\nrisk: low\r\nprobability: low\r\nseverity: low\r\ntest level: unit', 'https://tickets.puppetlabs.com/browse/PUP-4499', 'https://github.com/puppetlabs/puppet/pull/3881', '2015-04-30T02:28:00.000-0700', '2015-05-20T15:24:31.000-0700', '2015-05-20T15:24:31.000-0700', 'Closed', '', 5, '0', 3, 41, 1, 2, '87eb36f7eb13f25716ed879b6863998ba82ddf64', 'https://tickets.puppetlabs.com/browse/PUP-4499', 'https://github.com/puppetlabs/puppet/pull/3881'),
('puppet', 77491, 34097937, 3867, 'Single backslash before $ blocks interpolation in heredoc with no escapes enabled', 'Ran:\r\n\r\n{code}\r\n$thing = "hi there"\r\nnotice(@("END INTERP"))\r\nThis string should be able to interpolate variables, and all backslashes should\r\nbe interpreted as plain old literal backslashes.\r\nVariable standing apart: ${thing}\r\nVariable enjambed: hey${thing}\r\nVariable with single backslash enjambed: \${thing}\r\nVariable with double backslash enjambed: \\${thing}\r\nEND INTERP\r\n{code}\r\n\r\nThe single backslash before the $ causes a problem. I"m pretty sure this is against [the specification of heredocs|https://github.com/puppetlabs/puppet-specifications/blob/master/language/heredoc.md].\r\n\r\nActual result:\r\n\r\n{code}\r\nNotice: Scope(Class[main]): This string should be able to interpolate variables, and all backslashes should\r\nbe interpreted as plain old literal backslashes.\r\nVariable standing apart: hi there\r\nVariable enjambed: heyhi there\r\nVariable with single backslash enjambed: \${thing}\r\nVariable with double backslash enjambed: \\hi there\r\n\r\n{code}\r\n\r\nExpected result: \r\n\r\n{code}\r\nNotice: Scope(Class[main]): This string should be able to interpolate variables, and all backslashes should\r\nbe interpreted as plain old literal backslashes.\r\nVariable standing apart: hi there\r\nVariable enjambed: heyhi there\r\nVariable with single backslash enjambed: \hi there\r\nVariable with double backslash enjambed: \\hi there\r\n\r\n{code}\r\n\r\n3.7.5 and 4.0.0 behave identically. \r\n\r\nIn addition, if any escape (other than "$" escapes) are turned on, it also turns on escaping of "$". This is caused by the same faulty logic.\r\n\r\nh3. QA\r\n----\r\nrisk: medium (validate only)\r\nprobability: low (single backslash directly before interpolation in pp heredoc)\r\nseverity: medium (obvious issue, workarounds)\r\ntest level: unit', 'https://tickets.puppetlabs.com/browse/PUP-4462', 'https://github.com/puppetlabs/puppet/pull/3867', '2015-04-24T15:40:13.000-0700', '2015-05-20T15:24:33.000-0700', '2015-05-20T15:24:33.000-0700', 'Closed', '', 14, '0', 2, 40, 1, 4, 'e0085ff42928edbd4c7fc86ef71bc0a219834077', 'https://tickets.puppetlabs.com/browse/PUP-4462', 'https://github.com/puppetlabs/puppet/pull/3867'),
('puppet', 74769, 32812279, 3794, 'Future parser interpolation with [] after variable prefixed with underscore', 'When a variable containing a hash has a name prefixed with an underscore:\r\n{noformat}\r\n$_foo = {\r\n  "a" => "b",\r\n}\r\nnotify { "${_foo["a"]}": }\r\n{noformat}\r\n\r\nand run `puppet apply --parser=future` you get the following error:\r\n{noformat}\r\nError: Evaluation Error: The value "a" cannot be converted to Numeric. on node uagent2.corp.puppetlabs.net\r\nError: Evaluation Error: The value "a" cannot be converted to Numeric. on node uagent2.corp.puppetlabs.net\r\n{noformat}\r\n\r\nThat looks like it might be assuming that the hash is an array?\r\n\r\nThe following applies without error:\r\n{noformat}\r\n$foo = {\r\n  "a" => "b",\r\n}\r\nnotify { "${foo["a"]}": }\r\n{noformat}\r\n\r\nThis fails with the future parser on puppet 3.7.5, and also fails against master (at 7ba7ae8f3b221896a3b77beb6778b7a895671c7d)', 'https://tickets.puppetlabs.com/browse/PUP-4379', 'https://github.com/puppetlabs/puppet/pull/3794', '2015-04-06T16:45:09.000-0700', '2015-05-20T15:24:33.000-0700', '2015-05-20T15:24:33.000-0700', 'Closed', '', 15, '0', 1, 20, 1, 2, 'a270a3c57fc109f940379e9549e6730d9dd71f57', 'https://tickets.puppetlabs.com/browse/PUP-4379', 'https://github.com/puppetlabs/puppet/pull/3794'),
('puppet', 74584, 34008822, 3864, 'Splatting attributes into an amended attribute block isn"t supported', 'Per [~henrik.lindberg] in email, this is supposed to work... but it totally doesn"t.\r\n\r\n{code}\r\nnotify {"first":}\r\n\r\n$myattrs = {"message" => "from a reference attribute block"}\r\n\r\nNotify[first] { *=> $myattrs }\r\n# Error: Could not parse for environment production: The operator "* =>" in an Object is not supported. at /Users/nick/Documents/splat_reference.pp:5:17 on node magpie.lan\r\n\r\nnotify {"extra": *=> $myattrs }\r\n# works fine.\r\n\r\nNotify <| title == "first" |> { *=> $myattrs }\r\n# Error: Could not parse for environment production: In Puppet::Pops::Model::CollectExpression : Can not use a Puppet::Pops::Model::AttributesOperation where a Puppet::Pops::Model::AttributeOperation is expected on node magpie.lan\r\n{code}\r\n\r\nh3. QA\r\n----\r\nrisk: medium\r\nprobability: low (passing a whole block)\r\nseverity: medium (work-arounds available, obvious problem)\r\ntest layer: unit-integration', 'https://tickets.puppetlabs.com/browse/PUP-4374', 'https://github.com/puppetlabs/puppet/pull/3864', '2015-04-03T14:19:30.000-0700', '2015-05-20T15:24:33.000-0700', '2015-05-20T15:24:33.000-0700', 'Closed', '', 9, '0', 5, 26, 19, 6, 'f4423cacde4f5e3b194f81e745308c59c0409e44', 'https://tickets.puppetlabs.com/browse/PUP-4374', 'https://github.com/puppetlabs/puppet/pull/3864'),
('puppet', 78433, 34688828, 3893, 'Future parser is not correctly handling the default case of a case statement', 'According to https://docs.puppetlabs.com/puppet/latest/reference/future_lang_conditional.html#behavior-2 the future parser should always evaluate the default case last; however, that does not seem to be happening.  The following code, executed on a VM always returns the default case.\r\n\r\n{code:puppet}\r\n[root@master ~]# facter is_virtual\r\ntrue\r\n[root@master ~]# cat foo.pp\r\ncase $is_virtual {\r\n  default: { notify { "default case": } }\r\n  true: { notify { "nondefault case": } }\r\n}\r\n[root@master ~]# puppet apply foo.pp\r\nNotice: Compiled catalog for master.inf.puppetlabs.demo in environment production in 0.51 seconds\r\nNotice: default case\r\nNotice: /Stage[main]/Main/Notify[default case]/message: defined "message" as "default case"\r\nNotice: Finished catalog run in 0.28 seconds\r\n{code}', 'https://tickets.puppetlabs.com/browse/PUP-4520', 'https://github.com/puppetlabs/puppet/pull/3893', '2015-05-04T12:29:46.000-0700', '2015-05-20T15:24:33.000-0700', '2015-05-20T15:24:33.000-0700', 'Closed', '', 13, '0', 1, 6, 2, 3, 'a7817b7c37340664af0fb592fc6f93a0e56fb3d4', 'https://tickets.puppetlabs.com/browse/PUP-4520', 'https://github.com/puppetlabs/puppet/pull/3893'),
('puppet', 79448, 35474334, 3937, 'Resource parameter validation uses TypeCalculator.infer instead of infer_set', 'Type TypeCalculator.infer is used when type constrained resource parameters are validated which means that important information is lost when an error message is printed. The following expression:\r\n{code}\r\ndefine foo(Struct[{b => Integer, d=>String}] $a) { notice $a }\r\nfoo{ bar: a => {b => 5, c => "stuff"}}\r\n{code}\r\ncurrently results in the following error message:\r\n{code}\r\nError: Expected parameter "a" of "Foo[bar]" to have type Struct[{"b"=>Integer, "d"=>String}], got Hash[String, Scalar]\r\n{code}\r\nthe correct output (when using `infer_set` instead of `infer`) should be:\r\n{code}\r\nError: Expected parameter "a" of "Foo[bar]" to have type Struct[{"b"=>Integer, "d"=>String}], got Struct[{"b"=>Integer, "c"=>String}]\r\n{code}\r\n', 'https://tickets.puppetlabs.com/browse/PUP-4552', 'https://github.com/puppetlabs/puppet/pull/3937', '2015-05-11T05:21:00.000-0700', '2015-05-20T15:24:35.000-0700', '2015-05-20T15:24:35.000-0700', 'Closed', '', 14, '0', 1, 822, 9, 5, 'ad9f2ce07bb6bca67f95b2f0d1e66f7908868408', 'https://tickets.puppetlabs.com/browse/PUP-4552', 'https://github.com/puppetlabs/puppet/pull/3937'),
('puppet', 17143, 62479998, 4779, 'Run spec tests for opened PR on Windows ', 'Filing on behalf of [~ethan].\r\n\r\nTravis-ci works great for running PR on Linux, but they do not support Windows yet: https://github.com/travis-ci/travis-ci/issues/216\r\n\r\n[~branan] and [~ethan] talked about this, and there may be a jenkins plugin to allow us to execute github PR against our internal CI. This would help identify windows issues before the code gets to "ready for merge"', 'https://tickets.puppetlabs.com/browse/PUP-585', 'https://github.com/puppetlabs/puppet/pull/4779', '2013-10-23T13:54:11.000-0700', '2015-05-20T15:24:36.000-0700', '2015-05-20T15:24:36.000-0700', 'Closed', 'windows', 8, '0', 2, 84, 3, 3, 'a68761e34d996252946b010cc3a359e556185cbf', 'https://tickets.puppetlabs.com/browse/PUP-585', 'https://github.com/puppetlabs/puppet/pull/4779'),
('puppet', 78045, 34446325, 3880, 'TypeCalculator instance_of? does not consider String type values.', 'The {{TypeCalculator.instance_of?}} method for {{PStringType}} only checks if the incoming object is a {{String}} and if it"s size is compliant with the {{size_type}}. It does not check if the type has values and, if so, if the given string is one of them. This check must be added.\r\n\r\nh3. QA\r\n----\r\nrisk: medium\r\nprobability: medium (instance_of? on string values)\r\nseverity: medium (could produce incorrect result)\r\ntest level: unit', 'https://tickets.puppetlabs.com/browse/PUP-4501', 'https://github.com/puppetlabs/puppet/pull/3880', '2015-04-30T02:37:27.000-0700', '2015-05-20T15:24:36.000-0700', '2015-05-20T15:24:36.000-0700', 'Closed', '', 4, '0', 1, 14, 2, 2, '2edafd50c2d5a34ca8b51bad38e6845e6098dd96', 'https://tickets.puppetlabs.com/browse/PUP-4501', 'https://github.com/puppetlabs/puppet/pull/3880'),
('puppet', 71041, 33546651, 3840, 'defined() function returns true for undef and empty string, and false for "main"', 'The defined() function is written using the 3.x API and cannot differentiate between undefined and the empty string. Moving the function to the 4.x function API solves that issue.\r\n\r\nThe second issue is if the main class (known as "" internally) really should be available under that name. Everyone knows it as "main", and it is not possible to create your own "main" class without causing strange side effects.\r\n\r\n{code}\r\npuppet apply -e "notice(defined(""))"\r\nNotice: Scope(Class[main]): true\r\n\r\npuppet apply -e "notice(defined("main"))"\r\nNotice: Scope(Class[main]): false\r\n\r\npuppet apply -e "notice(defined(undef))"\r\nNotice: Scope(Class[main]): true\r\n{code}\r\n\r\nFurther, it is not possible to ask specifically if a class foo is defined, or if a resource type foo is defined using the current version of the function since\r\na request for {{Class\[foo]}} requires that the class is included in the catalog, and a request for {{"foo"}} is satisfied by either a built in type, a define\r\nor a class. For a resource type (built in or user defined) it is possible to ask for only the type e.g. {{File}}, or {{Resource\[File]}}. To facilitate this, and for completeness, it should be possible to ask if {{Type\[Class\[foo]]}} is defined (as well as {{Type\[Resource\[T]]}} (even if the later is not absolutely required).\r\n\r\nThe solutions (in PR 3840) produces:\r\n{code}\r\nnotice defined("")     # false\r\nnotice defined(undef)  # error\r\nnotice defined("main") # true\r\n\r\nclass not_included { }\r\nnotice defined("not_included") # true (but you don"t know what it is)\r\nnotice defined(Class[not_included]) # false\r\nnotice defined(Type[Class[not_included]]) # true\r\nnotice defined(Type[Class[non_existing]]) # false\r\n\r\n{code}\r\n\r\nWhen defined is used with the future parser on 3.x, and always on 4.x\r\n\r\nrisk: medium\r\nprobability: medium\r\nseverity: medium (confusing, can cause code to be unpredictable, but work arounds exist)\r\ntest layer: unit', 'https://tickets.puppetlabs.com/browse/PUP-4178', 'https://github.com/puppetlabs/puppet/pull/3840', '2015-03-10T13:21:20.000-0700', '2015-05-20T15:24:36.000-0700', '2015-05-20T15:24:36.000-0700', 'Closed', '', 8, '0', 7, 482, 6, 6, 'c8ce62a4ba06aaab34154958acf15e91d2baf5c2', 'https://tickets.puppetlabs.com/browse/PUP-4178', 'https://github.com/puppetlabs/puppet/pull/3840'),
('puppet', 78044, 34449672, 3881, 'Common type of two strings where only one has values is too restricted', 'The {{TypeCalculator.common_type(t1,t2)}} method, when given two Strings where only one of the Strings has values will yield a common String type that is restricted to those values. This is wrong. If one of the types is unrestricted, then the common type must also be unrestricted.\r\n\r\nh3. QA\r\n----\r\nrisk: low\r\nprobability: low \r\nseverity: low\r\ntest level: unit', 'https://tickets.puppetlabs.com/browse/PUP-4500', 'https://github.com/puppetlabs/puppet/pull/3881', '2015-04-30T02:32:36.000-0700', '2015-05-20T15:24:36.000-0700', '2015-05-20T15:24:36.000-0700', 'Closed', '', 3, '0', 3, 41, 1, 2, '61afe39bfec2007eaefc00ff78ddaee21782eb32', 'https://tickets.puppetlabs.com/browse/PUP-4500', 'https://github.com/puppetlabs/puppet/pull/3881'),
('puppet', 74946, 32816287, 3797, 'Can"t write WOMANS HAT emoji with \uXXXX unicode escapes', 'Unicode includes a bunch of 5+ hex digit characters now; most notably emoji, but I think there might be some real human language characters in there too.\r\n\r\nPuppet"s \u escape sequences don"t accommodate these. The 5-digit versions get truncated, and the alternate 2x4-digit forms result in an error. \r\n\r\n{code}\r\nnotice("5 digit unicode \u1f452 hat") # prints: 5 digit unicode ὅ2 hat\r\n# notice("double 4 digit unicode \uD83D\uDC52 hat") # Results in Error: Could not parse for environment production: invalid byte sequence in UTF-8 on node magpie.lan\r\nnotice("literal 👒 hat") # works fine\r\n{code}\r\n\r\nh2. Update\r\nThe implementation allows using the escape \r\n{code}\r\n\u{nnnn}\r\n{code}\r\n where n is 1 or more hex digits.\r\n{code:puppet}\r\nnotice("5 digit unicode \u{1f452} hat")\r\n{code}\r\n\r\nh2. QA Risk Analysis\r\n| Probability | Medium (anyone using 5+ byte unicode characters)|\r\n| Impact | Medium (broken Unicode support breaks puppet) |\r\n| Risk Level | Medium |\r\n| Test Level | Spec |', 'https://tickets.puppetlabs.com/browse/PUP-4385', 'https://github.com/puppetlabs/puppet/pull/3797', '2015-04-07T14:41:03.000-0700', '2015-05-20T15:24:37.000-0700', '2015-05-20T15:24:37.000-0700', 'Closed', '', 11, '0', 1, 26, 3, 3, 'dd7f71ef572e096f228ae5bc3799953d9dbbfaab', 'https://tickets.puppetlabs.com/browse/PUP-4385', 'https://github.com/puppetlabs/puppet/pull/3797'),
('puppet', 62710, 32324909, 3776, 'hiera("some::key", undef) returns empty string', 'When using the {{hiera()}} function with a second parameter of {{undef}}, Hiera returns the empty string for the value. When using Puppet 3.7 future parser, this means that Hiera returns a truthy value when it cannot find a key.\r\n\r\nIn the Puppet 3 language, this doesn"t matter because {{"" == undef}} evaluates to {{true}}.\r\n\r\nA workaround for this is to specify a second parameter of {{false}} instead of {{undef}}, but that doesn"t make this behavior any less confusing.\r\n\r\n*Final resolution:* In the Puppet 4 language, the hiera functions will now respect and return a default of {{undef}}, same as they do in the Puppet 3 language. ([in comment|https://tickets.puppetlabs.com/browse/PUP-3863?focusedCommentId=134708&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-134708])\r\n\r\nrisk assessment: high\r\nprobability: high (regression)\r\nseverity: medium (can work around in puppet code, but it"s not-expected)\r\nhighest test layer: acceptance\r\nFR only for now (acceptance is ticketed in a larger test for all functions) [PUP-4342|https://tickets.puppetlabs.com/browse/PUP-4342]', 'https://tickets.puppetlabs.com/browse/PUP-3863', 'https://github.com/puppetlabs/puppet/pull/3776', '2014-12-31T11:11:50.000-0800', '2015-05-20T15:24:38.000-0700', '2015-05-20T15:24:38.000-0700', 'Closed', 'future-parser', 28, '0', 1, 23, 10, 2, '4585a37f98e6cadf24bd4e444c3d0649f38fcf5f', 'https://tickets.puppetlabs.com/browse/PUP-3863', 'https://github.com/puppetlabs/puppet/pull/3776'),
('puppet', 73783, 32174951, 3763, 'hiera_include stopped working', 'This worked in version 3.7.4, and is broken in 3.7.5:\r\nhiera_include("classes", "")\r\nnode foo {\r\n}\r\n\r\nBut only as a catalog compile driven for nodes, I can"t get it to happen for puppet apply.\r\n\r\nIt gets a failure of:\r\nError: Could not retrieve catalog from remote server: Error 400 on SERVER: Evaluation Error: Error while evaluating a Function Call, uninitialized constant Hiera::PuppetFunction at .../manifests/site.pp:48:1 on node puppetmaster\r\n\r\nWhere line 48 is where I have hiera_include("classes", "")', 'https://tickets.puppetlabs.com/browse/PUP-4334', 'https://github.com/puppetlabs/puppet/pull/3763', '2015-03-28T13:45:43.000-0700', '2015-05-20T15:24:38.000-0700', '2015-05-20T15:24:38.000-0700', 'Closed', 'hiera', 12, '0', 1, 9, 2, 3, 'e5211fdee9d73424af8ac72dca7826d28384b8b1', 'https://tickets.puppetlabs.com/browse/PUP-4334', 'https://github.com/puppetlabs/puppet/pull/3763'),
('puppet', 75667, 33400119, 3824, 'Splat unfolding not supported in method call syntax', 'I expected the following to be equivalent:\r\n\r\nFunction call sytnax:\r\n{code}\r\nwith(*[1, 2, 3]) |$x, $y, $z| {\r\n    notice $x, $y, $z\r\n}\r\n{code}\r\n\r\nMethod call syntax:\r\n{code}\r\n(*[1, 2, 3]).with |$x, $y, $z| {\r\n    notice $x, $y, $z\r\n}\r\n{code}\r\n\r\nThe function call outputs:\r\n{code}\r\nNotice: Scope(Class[main]): 1 2 3\r\n{code}\r\n\r\nThe method call outputs an error:\r\n{code}\r\nError: Evaluation Error: Parameter $y is required but no value was given at...\r\n{code}\r\n\r\nIn the latter, $x is the array without being unfolded.\r\n\r\nNote: I could not find a workaround in the syntax to be able to splat for a method call.\r\n\r\nrisk: medium\r\nprobability: low (unfolding IN arrays/method calls/etc)\r\nseverity: medium (no work arounds other than using different class function structure)\r\ntest layer: unit', 'https://tickets.puppetlabs.com/browse/PUP-4398', 'https://github.com/puppetlabs/puppet/pull/3824', '2015-04-11T21:58:56.000-0700', '2015-05-20T15:24:39.000-0700', '2015-05-20T15:24:39.000-0700', 'Closed', '', 8, '0', 1, 19, 3, 2, '365616e6d4e1bd020aad68e2c2a1391115693e62', 'https://tickets.puppetlabs.com/browse/PUP-4398', 'https://github.com/puppetlabs/puppet/pull/3824'),
('puppet', 63137, 34010327, 3865, 'Duplicated error output', '{code}\r\n[mguezuraga@server ~]$ puppet apply -e "notice this_will_fail("yes")"\r\nError: Unknown function this_will_fail at line 1 on node server\r\nError: Unknown function this_will_fail at line 1 on node server\r\n[mguezuraga@server ~]$\r\n{code}\r\n\r\nI started looking into this, because I saw it on a different place, such as:\r\n\r\n{code}\r\n[mguezuraga@server ~]$ cat test.pp\r\nservice { "nginx":\r\n    ensure => "running",\r\n}\r\n\r\n# Forcing an error in nginx.conf\r\n[mguezuraga@server ~]$ sudo puppet apply test.pp\r\nNotice: Compiled catalog for server in environment production in 0.24 seconds\r\nError: Could not start Service[nginx]: Execution of "/sbin/service nginx start" returned 1: Starting nginx: nginx: [emerg] "worker_processes" directive invalid value in /etc/nginx/nginx.conf:8\r\n[FAILED]\r\nWrapped exception:\r\nExecution of "/sbin/service nginx start" returned 1: Starting nginx: nginx: [emerg] "worker_processes" directive invalid value in /etc/nginx/nginx.conf:8\r\n[FAILED]\r\nError: /Stage[main]/Main/Service[nginx]/ensure: change from stopped to running failed: Could not start Service[nginx]: Execution of "/sbin/service nginx start" returned 1: Starting nginx: nginx: [emerg] "worker_processes" directive invalid value in /etc/nginx/nginx.conf:8\r\n[FAILED]\r\nNotice: Finished catalog run in 1.31 seconds\r\n[mguezuraga@server ~]$\r\n{code}\r\n\r\nrisk: medium (low severity)\r\nprobability: high\r\nseverity: low (meh, but impacts overall quality "feel")\r\nhighest test layer: acceptance', 'https://tickets.puppetlabs.com/browse/PUP-3814', 'https://github.com/puppetlabs/puppet/pull/3865', '2015-01-07T04:17:08.000-0800', '2015-05-20T15:24:39.000-0700', '2015-05-20T15:24:39.000-0700', 'Closed', '', 10, '0', 2, 49, 15, 2, 'dc8f66e44728c8997eaa491c08e63e560b245056', 'https://tickets.puppetlabs.com/browse/PUP-3814', 'https://github.com/puppetlabs/puppet/pull/3865'),
('puppet', 72534, 31926429, 3749, 'unless with else when then part is empty produces nil result (future parser)', '{code}\r\nnotice unless false {} else { correct }\r\n{code}\r\nshould notice "correct", but notices "".\r\n\r\nIf instead this is evaluated:\r\n{code}\r\nnotice unless false { derp } else { correct }\r\n{code}\r\nthe value "correct" is noticed.\r\n', 'https://tickets.puppetlabs.com/browse/PUP-4278', 'https://github.com/puppetlabs/puppet/pull/3749', '2015-03-20T15:58:48.000-0700', '2015-05-20T15:24:39.000-0700', '2015-05-20T15:24:39.000-0700', 'Closed', '', 4, '0', 1, 3, 2, 3, '1dcbc014bf85bf32984a1d7da92e7611d4259ceb', 'https://tickets.puppetlabs.com/browse/PUP-4278', 'https://github.com/puppetlabs/puppet/pull/3749'),
('puppet', 34218, 32974473, 3805, 'Puppet running as Solaris SMF service needs to run child processes in separate "contract"', 'If Puppet is running on a Solaris server as an SMF service, and starts a long-running process - e.g. it starts a daemon via an init script - that process is within the same "contract" as the Puppet agent process. If the Puppet agent is stopped/restarted, SMF waits for the **contract** to finish, not just the agent process. As the daemon doesn"t terminate, the contract doesn"t finish within the configured timeout, and so SMF puts the service into "maintenance" state and sends **kill -9** to all processes still left in the contract.\r\n\r\nIt is possible to force a process to run in a new contract (e.g. using "/usr/bin/ctrun") and it would be useful if Puppet could support this on Solaris, so that the agent can be stopped/restarted without affecting services that it manages.\r\n\r\n\r\n\r\nSteps to reproduce:\r\n\r\n1. Configure and run a puppet agent as an SMF service (using the default "contract" model of service management).\r\n   (For example, install & configure the OpenCSW Puppet package)\r\n2. Set puppet to manage a daemon that is started by an init script.\r\n3. Try to stop the puppet agent.\r\n4. Observe (from the service log files, server"s messages file, and process listings) that the init-controlled daemon has been killed and the puppet agent service placed into "maintenance" state.\r\n\r\nIn my test scenario, Puppet was starting an exim daemon via an init script. \r\n{code}\r\n# ptree -c\r\n[process contract 1]\r\n  1     /sbin/init\r\n    [process contract 4]\r\n      7     /lib/svc/bin/svc.startd\r\n[...]\r\n        [process contract 3431]\r\n          4056  ./exim -bd -q1m\r\n          4138  /opt/csw/bin/ruby18 /opt/csw/sbin/puppetd\r\n          4270  pkgserv -N pkginfo\r\n\r\n# svcadm disable cswpuppetd\r\n# tail -f /var/svc/log/network-cswpuppetd:default.log\r\n[ Nov 12 17:48:27 Stopping because service disabled. ]\r\n[ Nov 12 17:48:27 Executing stop method ("/var/opt/csw/svc/method/svc-cswpuppetd stop") ]\r\nStopping Puppet client services: puppetd\r\n[ Nov 12 17:48:32 Method "stop" exited with status 0 ]\r\n[ Nov 12 17:49:27 Method or service exit timed out.  Killing contract 3431 ]\r\n^C\r\n# ps -ef | grep exim\r\n    root  4394  2825   0 18:03:13 pts/1       0:00 grep exim\r\n# svcs -vx\r\nsvc:/network/cswpuppetd:default (?)\r\n State: maintenance since Mon Nov 12 17:49:28 2012\r\nReason: Method failed.\r\n   See: http://sun.com/msg/SMF-8000-8Q\r\n   See: /var/svc/log/network-cswpuppetd:default.log\r\nImpact: This service is not running.\r\n\r\n{code}', 'https://tickets.puppetlabs.com/browse/PUP-2455', 'https://github.com/puppetlabs/puppet/pull/3805', '2014-05-05T00:48:51.000-0700', '2015-05-26T15:51:06.000-0700', '2015-05-26T15:51:06.000-0700', 'Closed', 'redmine;solaris', 6, '0', 1, 3, 1, 1, 'a9a78fbc16bf8c57bef24dc601eae9acf9611408', 'https://tickets.puppetlabs.com/browse/PUP-2455', 'https://github.com/puppetlabs/puppet/pull/3805'),
('puppet', 77922, 35055171, 3909, 'Adding user to group fails', 'When adding a user to a group, the command usermod fails:\r\n\r\n{code:title=user.pp}\r\nuser {"root":\r\n  groups => ["root", "wheel"],\r\n}\r\n{code}\r\n\r\n{code:title=Console output}\r\nError: Could not set groups on user[root]: Execution of "/usr/sbin/usermod -S root,wheel root" returned 2: /usr/sbin/usermod: invalid option -- "S"\r\n{code}', 'https://tickets.puppetlabs.com/browse/PUP-4491', 'https://github.com/puppetlabs/puppet/pull/3909', '2015-04-29T08:24:11.000-0700', '2015-06-03T18:16:03.000-0700', '2015-06-03T18:16:03.000-0700', 'Closed', '', 6, '0', 1, 1, 0, 1, '79373bb73eace8636979fa0b6ef424350ef37460', 'https://tickets.puppetlabs.com/browse/PUP-4491', 'https://github.com/puppetlabs/puppet/pull/3909'),
('puppet', 82032, 36458057, 3973, 'Puppet::Parser::Scope has no inspect method which is causing an extremely large string to be produced', 'Recently, SERVER-556 was filed against Puppet Server. After some investigation, it seems that when an error is thrown in Puppet"s {{template}} function, Ruby will call inspect on the top-level scope object, but not use the returned string.\r\n\r\nHowever, since the {{Puppet::Parser::Scope}} class has no inspect method of its own, inspecting the scope object causes an absolutely massive string to be produced and never used. The more code the user has in their environment, the larger the string. This string can grow so large that it can cause an OOM error when running Puppet Server due to the restrictions placed on the heap size.\r\n\r\nWe need to add an {{inspect}} method to the {{Puppet::Parser::Scope}} class that returns something simple to avoid this.', 'https://tickets.puppetlabs.com/browse/PUP-4665', 'https://github.com/puppetlabs/puppet/pull/3973', '2015-05-28T11:57:25.000-0700', '2015-06-05T15:20:19.000-0700', '2015-06-05T15:20:19.000-0700', 'Closed', '', 5, '0', 1, 11, 0, 2, '80bc235d4d67ea3897aa9eee9f11cf47ea008af0', 'https://tickets.puppetlabs.com/browse/PUP-4665', 'https://github.com/puppetlabs/puppet/pull/3973'),
('puppet', 74565, 35539289, 3939, 'Windows ADSI User groups property should behave similarly to Groups members property', 'When setting groups using the User resource:\r\n\r\n{noformat}\r\nuser { "bud":\r\n  ensure => present,\r\n  groups => ["BUILTIN\Administrators"],\r\n}\r\n{noformat}\r\n\r\nit runs into issues because it is trying to compare names and not SIDs like the users in a group resource do. It also doesn"t allow empty groups like can be done with PUP-3653. \r\n\r\nWe should enhance it so it has more parity with the groups resource.', 'https://tickets.puppetlabs.com/browse/PUP-4373', 'https://github.com/puppetlabs/puppet/pull/3939', '2015-04-03T11:58:13.000-0700', '2015-06-08T06:44:09.000-0700', '2015-06-08T06:44:09.000-0700', 'Closed', 'windows', 4, '0', 7, 329, 80, 7, 'bd3f3a18fa4b5ae1f1f26d8aabf74edd18598746', 'https://tickets.puppetlabs.com/browse/PUP-4373', 'https://github.com/puppetlabs/puppet/pull/3939'),
('puppet', 21420, 589333867, 8536, 'Pacman provider constantly reinstalls package groups on arch linux', 'The pacman system understands the concept of package "groups"; a group of packages given a name, all of which are installed when that name is specified. The default repos" package groups can be seen at https://www.archlinux.org/groups/; examples include kdebase (22 packages; https://www.archlinux.org/groups/x86_64/kdebase/), xorg (77 packages ;https://www.archlinux.org/groups/x86_64/xorg/) and xorg-apps (37 packages; https://www.archlinux.org/groups/x86_64/xorg-apps/).\r\n\r\nIf I specify one of these groups as a Package resource in my manifest, the packages within the group are reinstalled at every puppet run. This is because running a package list query (listcmd; pacman -Q) only lists the actual packages installed, not the groups.\r\n\r\nThe pacman provider (self.instances) should also execute `pacman -Qg` and add the unique values of the first column of output (the names of installed package groups) to the list of installed packages - this will stop the reinstall from happening.', 'https://tickets.puppetlabs.com/browse/PUP-1085', 'https://github.com/puppetlabs/puppet/pull/8536', '2013-12-16T11:19:31.000-0800', '2015-06-09T15:43:34.000-0700', '2015-06-09T15:43:34.000-0700', 'Closed', 'arch;package;pacman;redmine', 11, '0', 1, 494, 493, 146, '28490d235e639d60cd72eda4c73d82ad51717997', 'https://tickets.puppetlabs.com/browse/PUP-1085', 'https://github.com/puppetlabs/puppet/pull/8536'),
('puppet', 68247, 29549408, 3624, 'Update embedded docs for package resource type in light of PUP-1073', 'Update the main description for the resource type, as well as the description of the :name attribute. Salient points are:\r\n\r\n* Different providers can use the same package name, but resources need unique titles. \r\n* When making a resource reference to a package resource, you need to do Package["title of resource"], not Package[name]. Automatic aliasing doesn"t work with this type anymore. \r\n\r\nAlso, let"s fix the examples in the :name description, because they"re actually kind of heinous. Make it so they actually set {{name => ...etc}} and use a stable and reliable resource title. ', 'https://tickets.puppetlabs.com/browse/PUP-4027', 'https://github.com/puppetlabs/puppet/pull/3624', '2015-02-17T16:35:20.000-0800', '2015-06-09T15:52:41.000-0700', '2015-06-09T15:52:41.000-0700', 'Closed', '', 1, '0', 1, 16, 13, 1, 'c300dbac8a3f079f6f4bf6e8b1ebc45d71c0b0bd', 'https://tickets.puppetlabs.com/browse/PUP-4027', 'https://github.com/puppetlabs/puppet/pull/3624'),
('puppet', 76367, 35259113, 3919, 'With a gem install of puppet, when run as root, "puppet {agent|apply}" fail', 'This is because of the new AIO paths. For package installs, these directories are created, and for non-root users, the appropriate directories are created. But gem installs run as root will run into something like this:\r\n\r\n{code}\r\n[root@om6o1hcgialwa9i ~]# puppet apply -e "notice foo"\r\nNotice: Scope(Class[main]): foo\r\nNotice: Compiled catalog for om6o1hcgialwa9i.delivery.puppetlabs.net in environment production in 0.36 seconds\r\nError: Cannot create /etc/puppetlabs/puppet; parent directory /etc/puppetlabs does not exist\r\nError: /File[/etc/puppetlabs/puppet]/ensure: change from absent to directory failed: Cannot create /etc/puppetlabs/puppet; parent directory /etc/puppetlabs does not exist\r\nError: Cannot create /etc/puppetlabs/code; parent directory /etc/puppetlabs does not exist\r\nError: /File[/etc/puppetlabs/code]/ensure: change from absent to directory failed: Cannot create /etc/puppetlabs/code; parent directory /etc/puppetlabs does not exist\r\nError: Cannot create /opt/puppetlabs/puppet/cache; parent directory /opt/puppetlabs/puppet does not exist\r\nError: /File[/opt/puppetlabs/puppet/cache]/ensure: change from absent to directory failed: Cannot create /opt/puppetlabs/puppet/cache; parent directory /opt/puppetlabs/puppet does not exist\r\nError: Cannot create /var/log/puppetlabs/puppet; parent directory /var/log/puppetlabs does not exist\r\nError: /File[/var/log/puppetlabs/puppet]/ensure: change from absent to directory failed: Cannot create /var/log/puppetlabs/puppet; parent directory /var/log/puppetlabs does not exist\r\nNotice: /File[/opt/puppetlabs/puppet/cache/state]: Dependency File[/opt/puppetlabs/puppet/cache] has failures: true\r\nWarning: /File[/opt/puppetlabs/puppet/cache/state]: Skipping because of failed dependencies\r\nNotice: /File[/opt/puppetlabs/puppet/cache/lib]: Dependency File[/opt/puppetlabs/puppet/cache] has failures: true\r\nWarning: /File[/opt/puppetlabs/puppet/cache/lib]: Skipping because of failed dependencies\r\nNotice: /File[/etc/puppetlabs/puppet/ssl]: Dependency File[/etc/puppetlabs/puppet] has failures: true\r\nWarning: /File[/etc/puppetlabs/puppet/ssl]: Skipping because of failed dependencies\r\nNotice: /File[/etc/puppetlabs/puppet/ssl/certs]: Dependency File[/etc/puppetlabs/puppet] has failures: true\r\nWarning: /File[/etc/puppetlabs/puppet/ssl/certs]: Skipping because of failed dependencies\r\nNotice: /File[/etc/puppetlabs/puppet/ssl/public_keys]: Dependency File[/etc/puppetlabs/puppet] has failures: true\r\nWarning: /File[/etc/puppetlabs/puppet/ssl/public_keys]: Skipping because of failed dependencies\r\nNotice: /File[/etc/puppetlabs/puppet/ssl/certificate_requests]: Dependency File[/etc/puppetlabs/puppet] has failures: true\r\nWarning: /File[/etc/puppetlabs/puppet/ssl/certificate_requests]: Skipping because of failed dependencies\r\nNotice: /File[/etc/puppetlabs/puppet/ssl/private_keys]: Dependency File[/etc/puppetlabs/puppet] has failures: true\r\nWarning: /File[/etc/puppetlabs/puppet/ssl/private_keys]: Skipping because of failed dependencies\r\nNotice: /File[/etc/puppetlabs/puppet/ssl/private]: Dependency File[/etc/puppetlabs/puppet] has failures: true\r\nWarning: /File[/etc/puppetlabs/puppet/ssl/private]: Skipping because of failed dependencies\r\nNotice: /File[/opt/puppetlabs/puppet/cache/client_yaml]: Dependency File[/opt/puppetlabs/puppet/cache] has failures: true\r\nWarning: /File[/opt/puppetlabs/puppet/cache/client_yaml]: Skipping because of failed dependencies\r\nNotice: /File[/opt/puppetlabs/puppet/cache/client_data]: Dependency File[/opt/puppetlabs/puppet/cache] has failures: true\r\nWarning: /File[/opt/puppetlabs/puppet/cache/client_data]: Skipping because of failed dependencies\r\nNotice: /File[/opt/puppetlabs/puppet/cache/clientbucket]: Dependency File[/opt/puppetlabs/puppet/cache] has failures: true\r\nWarning: /File[/opt/puppetlabs/puppet/cache/clientbucket]: Skipping because of failed dependencies\r\nNotice: /File[/opt/puppetlabs/puppet/cache/state/graphs]: Dependency File[/opt/puppetlabs/puppet/cache] has failures: true\r\nWarning: /File[/opt/puppetlabs/puppet/cache/state/graphs]: Skipping because of failed dependencies\r\nNotice: /File[/opt/puppetlabs/puppet/cache/facts.d]: Dependency File[/opt/puppetlabs/puppet/cache] has failures: true\r\nWarning: /File[/opt/puppetlabs/puppet/cache/facts.d]: Skipping because of failed dependencies\r\nError: Got 4 failure(s) while initializing: File[/etc/puppetlabs/puppet]: change from absent to directory failed: Cannot create /etc/puppetlabs/puppet; parent directory /etc/puppetlabs does not exist; File[/etc/puppetlabs/code]: change from absent to directory failed: Cannot create /etc/puppetlabs/code; parent directory /etc/puppetlabs does not exist; File[/opt/puppetlabs/puppet/cache]: change from absent to directory failed: Cannot create /opt/puppetlabs/puppet/cache; parent directory /opt/puppetlabs/puppet does not exist; File[/var/log/puppetlabs/puppet]: change from absent to directory failed: Cannot create /var/log/puppetlabs/puppet; parent directory /var/log/puppetlabs does not exist\r\n{code}\r\n\r\nh3. QA\r\n----\r\nrisk: high \r\nprobability: medium (gem installs run as root)\r\nseverity: high (must run from different install)\r\ntest level: acceptance', 'https://tickets.puppetlabs.com/browse/PUP-4436', 'https://github.com/puppetlabs/puppet/pull/3919', '2015-04-17T16:22:39.000-0700', '2015-06-14T12:12:43.000-0700', '2015-06-14T12:12:43.000-0700', 'Closed', '', 9, '0', 1, 4, 5, 1, '88ae8a98042dc3f9691c556c22c1824f4bd08717', 'https://tickets.puppetlabs.com/browse/PUP-4436', 'https://github.com/puppetlabs/puppet/pull/3919'),
('puppet', 24979, 12041412, 2311, 'PR (2311) Undefined method `groups" for nil:NilClass', 'Lost quite some time in a rspec-puppet issue due to this error\r\nUltimately it was due to being on os x and setting {{operatingsystem}} fact to centos, making puppet unable to find providers for the user type.\r\n\r\n{code}\r\n     NoMethodError:\r\n       undefined method `groups" for nil:NilClass\r\n     # /Users/csanchez/.rvm/gems/ruby-1.9.3-p484/gems/puppet-3.4.2/lib/puppet/property/list.rb:57:in `retrieve"\r\n     # /Users/csanchez/.rvm/gems/ruby-1.9.3-p484/gems/puppet-3.4.2/lib/puppet/property/list.rb:46:in `should"\r\n     # /Users/csanchez/.rvm/gems/ruby-1.9.3-p484/gems/puppet-3.4.2/lib/puppet/type/user.rb:359:in `block (2 levels) in <module:Puppet>"\r\n{code}\r\n', 'https://tickets.puppetlabs.com/browse/PUP-1547', 'https://github.com/puppetlabs/puppet/pull/2311', '2014-01-30T08:03:41.000-0800', '2015-06-15T18:12:11.000-0700', '2015-06-15T18:12:11.000-0700', 'Closed', '', 8, '0', 1, 10, 2, 2, '8054a06fe58b9e771867747a7119377d274656f5', 'https://tickets.puppetlabs.com/browse/PUP-1547', 'https://github.com/puppetlabs/puppet/pull/2311'),
('puppet', 21551, 731296547, 8764, 'Node regex beginning with dash results in invalid tag', 'A node regex starting with a dash results in a tag that begins with a dash, which Puppet doesn"t accept as valid:\r\n\r\n{noformat}\r\nnode /-(abc|def)-/ {\r\n{noformat}\r\n\r\nresults in the following error when it is matched:\r\n\r\n{noformat}\r\nInvalid tag "-abcdef-" on node host-abc-5678.example.com\r\n{noformat}\r\n\r\nRemoving the initial dash works as expected:\r\n\r\n{noformat}\r\nnode /(abc|def)-/ {\r\n{noformat}\r\n', 'https://tickets.puppetlabs.com/browse/PUP-1121', 'https://github.com/puppetlabs/puppet/pull/8764', '2013-12-16T22:22:19.000-0800', '2015-06-18T09:56:20.000-0700', '2015-06-18T09:56:20.000-0700', 'Resolved', 'redmine', 1, '0', 1, 2, 3, 3, '90a0b3c29407c280e495912a97030ef297a14fae', 'https://tickets.puppetlabs.com/browse/PUP-1121', 'https://github.com/puppetlabs/puppet/pull/8764'),
('puppet', 81974, 36805795, 3993, 'Make systemd the default service provider for Fedora 22', 'Fedora 22 has been released, and the Puppet systemd service provider needs an update to make it the default in that platform. The current code (https://github.com/puppetlabs/puppet/blob/3.x/lib/puppet/provider/service/systemd.rb#L10) only lists Fedora 17 to 21, so for Fedora 22 it goes with the default redhat provider, which has known issues (e.g. chkconfig --add).\r\n\r\nThis issue is present in both master and the 3.x branches.', 'https://tickets.puppetlabs.com/browse/PUP-4663', 'https://github.com/puppetlabs/puppet/pull/3993', '2015-05-28T08:17:36.000-0700', '2015-06-24T16:20:16.000-0700', '2015-06-24T16:20:16.000-0700', 'Closed', '', 1, '0', 1, 1, 1, 1, '28bfc9c843d98701fa94ef869dc2f5100e1c92f3', 'https://tickets.puppetlabs.com/browse/PUP-4663', 'https://github.com/puppetlabs/puppet/pull/3993'),
('puppet', 79179, 35648822, 3945, 'plugin face application does not use source permissions during fact sync', 'If you use the {{plugin}} face application to download plugins, then any executable external facts will not be executable and will run into the same problem described in PUP-4420.\r\n\r\n{noformat}\r\n$ bundle exec puppet plugin download --server ql1prr50yqgx40d.delivery.puppetlabs.net --http_debug\r\n...\r\n<- "GET /puppet/v3/file_metadatas/pluginfacts?environment=production&links=follow&recurse=true&ignore=.svn&ignore=CVS&ignore=.git&checksum_type=md5 HTTP/1.1\r\nAccept: pson, yaml, binary\r\nX-Puppet-Version: 4.0.0\r\nAccept-Encoding: gzip;q=1.0,deflate;q=0.6,identity;q=0.3\r\nUser-Agent: Ruby\r\nConnection: close\r\nHost: ql1prr50yqgx40d.delivery.puppetlabs.net:8140\r\n\r\n"\r\n-> "HTTP/1.1 200 OK\r\n"\r\n-> "Date: Thu, 07 May 2015 17:18:56 GMT\r\n"\r\n-> "Content-Type: text/pson;charset=ISO-8859-1\r\n"\r\n-> "X-Puppet-Version: 4.0.0\r\n"\r\n-> "Connection: close\r\n"\r\n-> "Server: Jetty(9.1.z-SNAPSHOT)\r\n"\r\n-> "\r\n"\r\nreading all...\r\n-> "[{\"path\":\"/etc/puppetlabs/code/environments/production/modules/foo/facts.d\",\"relative_path\":\".\",\"links\":\"follow\",\"owner\":998,\"group\":997,\"mode\":420,\"checksum\":{\"type\":\"ctime\",\"value\":\"{ctime}2015-05-07 10:13:17 -0700\"},\"type\":\"directory\",\"destination\":null},{\"path\":\"/etc/puppetlabs/code/environments/production/modules/foo/facts.d\",\"relative_path\":\"foo.sh\",\"links\":\"follow\",\"owner\":998,\"group\":997,\"mode\":420,\"checksum\":{\"type\":\"md5\",\"value\":\"{md5}940339479f148a731c7b820dfba2223d\"},\"type\":\"file\",\"destination\":null}]"\r\n{noformat}\r\n\r\nThe {{plugin}} face application should use {{/lib/puppet/configurer/downloader_factory.rb}} to create the downloader objects so that we have consistent behavior when using {{puppet agent}} and {{puppet plugin}} ', 'https://tickets.puppetlabs.com/browse/PUP-4538', 'https://github.com/puppetlabs/puppet/pull/3945', '2015-05-07T10:21:38.000-0700', '2015-06-24T16:20:17.000-0700', '2015-06-24T16:20:17.000-0700', 'Closed', '', 1, '0', 3, 101, 34, 5, '9d9bf8d6677c5755150869c92ef0df262c489760', 'https://tickets.puppetlabs.com/browse/PUP-4538', 'https://github.com/puppetlabs/puppet/pull/3945'),
('puppet', 78066, 35359755, 3932, 'systemd should be the default provider for Debian Jessie', 'There is, unfortunately, a bug in systemd on Debian Jessie where older sysvinit scripts can"t detect the enabled status. Therefore you should not just enable that as the default.\r\n\r\nI wrote a version of a provider based on systemd that can check enabled via both systemd AND sysvinit and then the enable/disable in systemd does the right thing.\r\n\r\nhttps://gist.github.com/leepa/9818b46b29b161413824\r\n\r\nThis is a bug because Puppet 3.7.5 does not work correctly at all on Debian Jessie because of this.', 'https://tickets.puppetlabs.com/browse/PUP-4503', 'https://github.com/puppetlabs/puppet/pull/3932', '2015-04-30T09:25:26.000-0700', '2015-06-24T16:20:19.000-0700', '2015-06-24T16:20:19.000-0700', 'Closed', '', 8, '0', 2, 77, 9, 6, '7fe61647f23650fc4c93cd6b54c654a20ff7c9f9', 'https://tickets.puppetlabs.com/browse/PUP-4503', 'https://github.com/puppetlabs/puppet/pull/3932'),
('puppet', 80935, 36673617, 3989, 'Cannot install packages without membership to any group with pacman provider ', '$ puppet apply -e "package { "git": ensure => present }"\r\nNotice: Compiled catalog for arch in environment production in 1.00 seconds\r\nError: /Stage[main]/Main/Package[git]: Could not evaluate: Error while getting installed groups\r\nNotice: Applied catalog in 0.81 seconds', 'https://tickets.puppetlabs.com/browse/PUP-4635', 'https://github.com/puppetlabs/puppet/pull/3989', '2015-05-20T06:46:45.000-0700', '2015-06-24T16:20:19.000-0700', '2015-06-24T16:20:19.000-0700', 'Closed', 'arch;community;package;pacman', 7, '0', 1, 64, 8, 2, 'e1fb1a3fce4bfa6bd1c997e034efdebbf538527f', 'https://tickets.puppetlabs.com/browse/PUP-4635', 'https://github.com/puppetlabs/puppet/pull/3989'),
('puppet', 82041, 36443745, 3970, 'acceptance test build_ignore_module_file fails if "/tmp/test" already exists', 'In the Puppet Server acceptance test pipeline, we"ve seen the "build_ignore_module_file_test" Puppet acceptance test fail if a directory named "/tmp/test" exists when the test is run.  The test expects to be able to create a directory with that name and so fails when it is pre-existing.  I"m not exactly sure what it is during the job execution which creates that directory.  I think it would be safer, though, if the test just created its own unique tmpdir on the master rather than relying upon a hard-coded one.', 'https://tickets.puppetlabs.com/browse/PUP-4666', 'https://github.com/puppetlabs/puppet/pull/3970', '2015-05-28T12:39:28.000-0700', '2015-06-24T16:20:21.000-0700', '2015-06-24T16:20:21.000-0700', 'Closed', '', 1, '0', 1, 1, 4, 1, 'f4875734087ce36359c50e924725051b82eaf562', 'https://tickets.puppetlabs.com/browse/PUP-4666', 'https://github.com/puppetlabs/puppet/pull/3970'),
('puppet', 81896, 36555328, 3982, 'EPP template can"t explicitly access top scope variables if there"s no node definition in the scope chain', 'If you try to explicitly access a top scope variable that is shadowed by a template parameter, Puppet will incorrectly use the parameter value instead unless there"s a node scope present in the scope chain. \r\n\r\nManifest:\r\n\r\n{code}\r\n$testvar = "from top scope"\r\n\r\nnode "magpie.lan" {\r\n  $testvar = "from node scope"\r\n}\r\n\r\ninclude epp_class\r\n\r\nclass epp_class {\r\n  $testvar = "from the local scope"\r\n\r\n  notify { "mynotify":\r\n    message => epp( "epp_test/future_epp_scope_bug.epp", { testvar => "from the params" } ),\r\n  }\r\n}\r\n{code}\r\n\r\nTemplate:\r\n\r\n{code}\r\n<%- |$testvar| -%>\r\ntestvar is <%= $testvar %>.\r\nTop testvar is <%= $::testvar %>\r\nLocal testvar is <%= $epp_class::testvar %>.\r\n{code}\r\n\r\nResult: \r\n\r\n{code}\r\ntestvar is from the params.\r\nTop testvar is from the params\r\nLocal testvar is from the local scope.\r\n{code}\r\n\r\nIf you move that {{include epp_class}} into the node definition, it will instead say "Top testvar is from top scope". ', 'https://tickets.puppetlabs.com/browse/PUP-4662', 'https://github.com/puppetlabs/puppet/pull/3982', '2015-05-27T16:32:55.000-0700', '2015-06-24T16:20:24.000-0700', '2015-06-24T16:20:24.000-0700', 'Closed', '', 5, '0', 1, 26, 14, 2, '19ccf96ae2ae3ab198037447236b8b9df9709109', 'https://tickets.puppetlabs.com/browse/PUP-4662', 'https://github.com/puppetlabs/puppet/pull/3982'),
('puppet', 83228, 37308158, 4020, 'Make fqdn_rand() Return A Numeric Instead of a String', 'While testing the following snippet of code with the puppet 4 parser it would fail unexpectedly on only a few nodes.  \r\n\r\n{code}\r\n$cron_minute = fqdn_rand( 60 ) \r\nif ($cron_minute >= "60") { \r\n  fail ("Variable cron_minute in module connection_watcher is >= 60. Values must be < 60. The cron_minute value is $cron_minute.") \r\n}\r\n{code}\r\n\r\nUpon further research, I figured the issue was because of the comparison of two strings not working the same was as two integers would.  \r\n\r\nSo, changing over to numeric for the comparison resolves the issue.  \r\n\r\n{code}\r\n$cron_minute = 0 + fqdn_rand( 60 ) #change a string to a numeric type\r\n  if ($cron_minute >= 60) {\r\n    fail ("Variable cron_minute in module connection_watcher is >= 60. Values must be < 60. The cron_minute value is $cron_minute.")\r\n  }\r\n{code}\r\n\r\nIt turns out the issue with the original code only shows up with the values "7", "8", and "9" because the comparison compares lexiographically and makes a decision on the first two values since "7", "8" and "9" are > "6" (the first character in "60").\r\n\r\nAt the end of the day it seems that fqdn_rand should just return a numeric as it will always be a number and is only a string for historical reasons.  \r\n', 'https://tickets.puppetlabs.com/browse/PUP-4698', 'https://github.com/puppetlabs/puppet/pull/4020', '2015-06-04T14:25:57.000-0700', '2015-06-24T16:20:24.000-0700', '2015-06-24T16:20:24.000-0700', 'Closed', 'tcse', 10, '0', 2, 16, 7, 3, '3dcf66bb54779020cb74958332e25a150ad0fcd2', 'https://tickets.puppetlabs.com/browse/PUP-4698', 'https://github.com/puppetlabs/puppet/pull/4020'),
('puppet', 76609, 34165904, 3868, 'manifest changes are ignored when using hiera_include', 'I"m experimenting with puppetserver 2 / puppet-agent 1 and I"m running into an issue where changes to manifests don"t get picked up by the server.\r\nWhen I"m making changes to a manifest after starting puppetserver it is working for the first 2 or 3 changes I make.\r\nAfter that new changes don"t get picked up anymore until I restart puppetserver.\r\nI can reproduce that behavior. \r\n\r\nFor an example session see: https://gist.github.com/roman-mueller/cf776fd180a085a551c2\r\n\r\nI"m running:\r\nCentOS 7.0.1406 (but also reproduced it on CentOS 7.1.1503)\r\npuppetserver-2.0.0-1.el7.noarch\r\npuppet-agent-1.0.0-1.el7.x86_64\r\n\r\nI"ve set "environment_timeout = 0" in the "production/environment.conf" - which also should be the default.\r\nEverything else is kept on default settings too.\r\nI"ve committed my experimental Vagrant environment here:\r\nhttps://github.com/roman-mueller/puppet4-sandbox\r\nNote that this is using vboxsf but I get the same behavior with local files. \r\n\r\nWhen I"m running strace on the puppetserver PID I can see for the first 2 puppet agent runs that global/manifests/init.pp gets accessed.\r\nAfter that it is not getting read anymore.\r\nI"ve also waited 45 minutes, but still the change was not picked up.\r\nOnly a restart of the puppetserver fixes it at that point.\r\n\r\nWORK AROUND\r\n---\r\nThere is no simple work around, but there is a simple patch that can be applied.\r\n\r\nThe problem is on line 17 of lib/puppet/pops/loaders.rb which says:\r\n{code:ruby}\r\n@@puppet_system_loader ||= create_puppet_system_loader()\r\n{code}\r\nThis can be patched to read:\r\n{code:ruby}\r\n@@puppet_system_loader = create_puppet_system_loader()\r\n{code}\r\n\r\nh3. QA\r\n----\r\n\r\nrisk: medium (manual validate only for now)\r\nprobability: medium (hiera_include picking up manifest changes downstream only)\r\nseverity: medium (changes not picked up, confusing but possibly not blocking)\r\ntest level: acceptance (we should update existing acceptance to ensure an altered manifest is picked up)', 'https://tickets.puppetlabs.com/browse/PUP-4461', 'https://github.com/puppetlabs/puppet/pull/3868', '2015-04-21T00:51:59.000-0700', '2015-06-26T08:21:05.000-0700', '2015-06-26T08:21:05.000-0700', 'Closed', '', 19, '0', 1, 6, 4, 1, '3685befc9ae9ad8d7cafda764103534504797d96', 'https://tickets.puppetlabs.com/browse/PUP-4461', 'https://github.com/puppetlabs/puppet/pull/3868'),
('puppet', 81407, 36668410, 3986, 'Problem of indentation with epp()', 'Hi,\r\n\r\nI have just tried the {{epp()}} function in a basic module with this code:\r\n\r\n{code:pp}\r\nclass test {\r\n  file { "/tmp/a":\r\n    ensure  => present,\r\n    content => epp("test/foo.epp", { "a"=> "1234", "b" => "5678",}),\r\n  }\r\n}\r\n{code}\r\n\r\nHere is my embedded puppet template {{foo.epp}}:\r\n\r\n{code}\r\n<%- |$a, $b| -%>\r\nblabla blabla\r\nblabla blabla\r\n  Should be indented\r\n  Should be indented <%= $a %>\r\n  Should be indented <%= $b %>\r\nblabla blabla\r\nblabla blabla\r\n{code}\r\n\r\nAfter a puppet run (directly on my puppet server), here is the content of the {{/tmp/a}} file:\r\n\r\n{code}\r\nblabla blabla\r\nblabla blabla\r\nShould be indented\r\nShould be indented 1234\r\n  Should be indented 5678\r\nblabla blabla\r\nblabla blabla\r\n{code}\r\n\r\nI have 2 lines which should be indented but this not the case.\r\n\r\nRq: if I remove the first line of the template (ie the declaration of the template"s parameter), the indentation is correct.\r\n\r\nUPDATE\r\n---\r\nThis was caused by several factors; the specification was vague and the implementation was not correct. This led to the problem reported here (loosing expected indentation). In general the trimming operations removed too much whitespace (on lines it should not touch). The specification has been updated with clearer rules. Basically:\r\n* A right trim tags trims trailing whitepace at most up to and including a line break on the same line as the end (right trimming) tag\r\n* A left trim tag trims leading whitepsace at most up to, but not including a line break on the same line as the opening (left trimming) tag\r\n* A comment tag is always left trimming\r\n\r\nThe fix for this ticket (problem with indentation) makes the implementation compliant with the specification.', 'https://tickets.puppetlabs.com/browse/PUP-4648', 'https://github.com/puppetlabs/puppet/pull/3986', '2015-05-22T16:08:52.000-0700', '2015-07-08T12:10:33.000-0700', '2015-07-08T12:10:33.000-0700', 'Closed', '', 8, '0', 2, 39, 5, 2, 'fc45fa2982886ff7e78bb30b1a6c4f4b73f41ffd', 'https://tickets.puppetlabs.com/browse/PUP-4648', 'https://github.com/puppetlabs/puppet/pull/3986'),
('puppet', 66329, 28425967, 3547, 'Pluginsync errors when no source is available and modulepath directory is a symlink', 'h3. Context\r\n\r\nCurrently, Puppet produces one of two pluginsync errors during an agent run if the root of a modulepath directory is a symlink and no modules contain a facts.d or lib directory.\r\n\r\nIn the normal case, when the base module path is a directory and none if its modules include facts.d or lib directories, pluginsync returns the path to the module path directory itself, at which point the file type disables recursion in its `recurse_remote` method and stops the agent from attempting to download plugins.\r\n\r\nHowever, if the base module path is not a directory (in this case a link), `recurse_remote` returns early, causing the agent-side facts.d or lib directory to not have its "source" metadata set, leading to a failing query back to the master.\r\n\r\nh3. Steps to reproduce\r\n\r\n1) Install any version of Puppet from 3.5.1 onward\r\n2) Edit {{puppet.conf}} to look like the following (where this is both the master and the agent):\r\n\r\n{noformat}\r\n[main]\r\n    logdir = /var/log/puppet\r\n    rundir = /var/run/puppet\r\n    ssldir = $vardir/ssl\r\n    server = miyxwpjl6z3zkmn.delivery.puppetlabs.net\r\n    basemodulepath = /usr/share/puppet/modules:/h/puppet_modules\r\n    environmentpath = $confdir/environments\r\n\r\n[agent]\r\n    classfile = $vardir/classes.txt\r\n    localconfig = $vardir/localconfig\r\n    pluginsync = true\r\n    environment = production\r\n{noformat}\r\n\r\n3) {{mkdir -p /h/puppet_modules}}\r\n4) {{mkdir -p /etc/puppet/environments/production}}\r\n5) {{ln -s /h/puppet_modules /etc/puppet/environments/production/modules}}\r\n6) {{puppet module install puppetlabs-stdlib}}\r\n7) Start the master with {{puppet master --verbose --no-daemonize}}\r\n8) Run the agent with {{puppet agent -t}}\r\n\r\nTo "fix" the error, simply run {{mkdir /h/puppet_modules/stdlib/facts.d}}.\r\n\r\nh3. Output\r\n{noformat}\r\n[root@foupsthuyg3ci5r ~]# puppet agent -t\r\nInfo: Retrieving pluginfacts\r\nError: /File[/var/lib/puppet/facts.d]: Could not evaluate: Could not retrieve information from environment production source(s) puppet://foupsthuyg3ci5r.delivery.puppetlabs.net/pluginfacts\r\nInfo: Retrieving plugin\r\nError: /File[/var/lib/puppet/lib]: Could not evaluate: Could not retrieve information from environment production source(s) puppet://foupsthuyg3ci5r.delivery.puppetlabs.net/plugins\r\nInfo: Caching catalog for foupsthuyg3ci5r.delivery.puppetlabs.net\r\nInfo: Applying configuration version "1422752263"\r\nNotice: Finished catalog run in 0.04 seconds\r\n{noformat}', 'https://tickets.puppetlabs.com/browse/PUP-3935', 'https://github.com/puppetlabs/puppet/pull/3547', '2015-01-31T20:21:08.000-0800', '2015-07-17T13:35:59.000-0700', '2015-07-17T13:35:59.000-0700', 'Closed', '', 5, '0', 1, 51, 0, 3, 'a6f7ff21adc77f06ffcc47573e6645e196d64c95', 'https://tickets.puppetlabs.com/browse/PUP-3935', 'https://github.com/puppetlabs/puppet/pull/3547'),
('puppet', 48451, 36876456, 4000, 'Debug logging messages can"t be used by providers with a "path" method', 'The definition of the `debug` logging method contains some very bad assumptions. In particular, logging at the debug level will attempt to set a source line for the message (location in ruby file, puppet manifest, etc.). Unfortunately, the method which sets the source line [assumes|https://github.com/puppetlabs/puppet/blob/3.6.2/lib/puppet/util/log.rb#L317-L328] that if the object which emitted the log message responds to the {{path}} method, then it also responds to {{tags}}, {{file}} and {{line}}.\r\n\r\nThis assumption is disastrous when a class using debug logging defines a {{path}} method purely by coincidence. The original reproduction case for this is the Solaris Zone provider which has a {{path}} property and emits log messages at {{debug}} level:\r\n\r\n{code:title=test_zone.pp}\r\nzone { "test_zone":\r\n  ensure => "running",\r\n  path => "/zones/test_zone",\r\n  # This part is required, it adds un-modeled configuration to the zone\r\n  # which results in "Ignoring zone output" debug messages.\r\n  create_args => "\nadd net\nset address=172.16.12.6\nset physical=ixgbe0\nend",\r\n}\r\n{code}\r\n\r\n{noformat}\r\n# /opt/puppet/bin/puppet apply --debug --trace zone_test.pp \r\nInfo: Loading facts in /var/opt/lib/pe-puppet/lib/facter/concat_basedir.rb\r\nInfo: Loading facts in /var/opt/lib/pe-puppet/lib/facter/custom_auth_conf.rb\r\nInfo: Loading facts in /var/opt/lib/pe-puppet/lib/facter/facter_dot_d.rb\r\nInfo: Loading facts in /var/opt/lib/pe-puppet/lib/facter/ip6tables_version.rb\r\nInfo: Loading facts in /var/opt/lib/pe-puppet/lib/facter/iptables_persistent_version.rb\r\nInfo: Loading facts in /var/opt/lib/pe-puppet/lib/facter/iptables_version.rb\r\nInfo: Loading facts in /var/opt/lib/pe-puppet/lib/facter/pe_build.rb\r\nInfo: Loading facts in /var/opt/lib/pe-puppet/lib/facter/pe_postgres_default_version.rb\r\nInfo: Loading facts in /var/opt/lib/pe-puppet/lib/facter/pe_puppetdb_server_status.rb\r\nInfo: Loading facts in /var/opt/lib/pe-puppet/lib/facter/pe_version.rb\r\nInfo: Loading facts in /var/opt/lib/pe-puppet/lib/facter/platform_tag.rb\r\nInfo: Loading facts in /var/opt/lib/pe-puppet/lib/facter/postgres_default_version.rb\r\nInfo: Loading facts in /var/opt/lib/pe-puppet/lib/facter/puppet_vardir.rb\r\nInfo: Loading facts in /var/opt/lib/pe-puppet/lib/facter/root_home.rb\r\nInfo: Loading facts in /var/opt/lib/pe-puppet/lib/facter/staging_http_get.rb\r\nInfo: Loading facts in /var/opt/lib/pe-puppet/lib/facter/windows.rb\r\nNotice: Compiled catalog for pe-331-agent-solaris.puppetdebug.vlan in environment production in 0.07 seconds\r\nDebug: Creating default schedules\r\nDebug: Failed to load library "selinux" for feature "selinux"\r\nDebug: Using settings: adding file resource "confdir": "File[/etc/puppetlabs/puppet]{:path=>"/etc/puppetlabs/puppet", :ensure=>:directory, :loglevel=>:debug, :links=>:follow, :backup=>false}"\r\nDebug: Failed to load library "shadow" for feature "libshadow"\r\nDebug: Puppet::Type::User::ProviderDirectoryservice: file /usr/bin/uuidgen does not exist\r\nDebug: Puppet::Type::User::ProviderUseradd: file chage does not exist\r\nDebug: Failed to load library "ldap" for feature "ldap"\r\nDebug: Puppet::Type::User::ProviderLdap: feature ldap is missing\r\nDebug: Puppet::Type::User::ProviderPw: file pw does not exist\r\nDebug: /User[pe-puppet]: Provider user_role_add does not support features libuser; not managing attribute forcelocal\r\nDebug: Puppet::Type::Group::ProviderDirectoryservice: file /usr/bin/dscl does not exist\r\nDebug: Failed to load library "ldap" for feature "ldap"\r\nDebug: Puppet::Type::Group::ProviderLdap: feature ldap is missing\r\nDebug: Puppet::Type::Group::ProviderPw: file pw does not exist\r\nDebug: /Group[pe-puppet]: Provider groupadd does not support features libuser; not managing attribute forcelocal\r\nDebug: Using settings: adding file resource "vardir": "File[/var/opt/lib/pe-puppet]{:path=>"/var/opt/lib/pe-puppet", :owner=>"pe-puppet", :group=>"pe-puppet", :ensure=>:directory, :loglevel=>:debug, :links=>:follow, :backup=>false}"\r\nDebug: Using settings: adding file resource "logdir": "File[/var/log/pe-puppet]{:path=>"/var/log/pe-puppet", :mode=>"750", :owner=>"pe-puppet", :group=>"pe-puppet", :ensure=>:directory, :loglevel=>:debug, :links=>:follow, :backup=>false}"\r\nDebug: Using settings: adding file resource "statedir": "File[/var/opt/lib/pe-puppet/state]{:path=>"/var/opt/lib/pe-puppet/state", :mode=>"1755", :ensure=>:directory, :loglevel=>:debug, :links=>:follow, :backup=>false}"\r\nDebug: Using settings: adding file resource "rundir": "File[/var/run/pe-puppet]{:path=>"/var/run/pe-puppet", :mode=>"755", :owner=>"pe-puppet", :group=>"pe-puppet", :ensure=>:directory, :loglevel=>:debug, :links=>:follow, :backup=>false}"\r\nDebug: Using settings: adding file resource "libdir": "File[/var/opt/lib/pe-puppet/lib]{:path=>"/var/opt/lib/pe-puppet/lib", :ensure=>:directory, :loglevel=>:debug, :links=>:follow, :backup=>false}"\r\nDebug: Using settings: adding file resource "certdir": "File[/etc/puppetlabs/puppet/ssl/certs]{:path=>"/etc/puppetlabs/puppet/ssl/certs", :mode=>"755", :owner=>"pe-puppet", :group=>"pe-puppet", :ensure=>:directory, :loglevel=>:debug, :links=>:follow, :backup=>false}"\r\nDebug: Using settings: adding file resource "ssldir": "File[/etc/puppetlabs/puppet/ssl]{:path=>"/etc/puppetlabs/puppet/ssl", :mode=>"771", :owner=>"pe-puppet", :group=>"pe-puppet", :ensure=>:directory, :loglevel=>:debug, :links=>:follow, :backup=>false}"\r\nDebug: Using settings: adding file resource "publickeydir": "File[/etc/puppetlabs/puppet/ssl/public_keys]{:path=>"/etc/puppetlabs/puppet/ssl/public_keys", :mode=>"755", :owner=>"pe-puppet", :group=>"pe-puppet", :ensure=>:directory, :loglevel=>:debug, :links=>:follow, :backup=>false}"\r\nDebug: Using settings: adding file resource "requestdir": "File[/etc/puppetlabs/puppet/ssl/certificate_requests]{:path=>"/etc/puppetlabs/puppet/ssl/certificate_requests", :mode=>"755", :owner=>"pe-puppet", :group=>"pe-puppet", :ensure=>:directory, :loglevel=>:debug, :links=>:follow, :backup=>false}"\r\nDebug: Using settings: adding file resource "privatekeydir": "File[/etc/puppetlabs/puppet/ssl/private_keys]{:path=>"/etc/puppetlabs/puppet/ssl/private_keys", :mode=>"750", :owner=>"pe-puppet", :group=>"pe-puppet", :ensure=>:directory, :loglevel=>:debug, :links=>:follow, :backup=>false}"\r\nDebug: Using settings: adding file resource "privatedir": "File[/etc/puppetlabs/puppet/ssl/private]{:path=>"/etc/puppetlabs/puppet/ssl/private", :mode=>"750", :owner=>"pe-puppet", :group=>"pe-puppet", :ensure=>:directory, :loglevel=>:debug, :links=>:follow, :backup=>false}"\r\nDebug: Using settings: adding file resource "hostcert": "File[/etc/puppetlabs/puppet/ssl/certs/pe-331-agent-solaris.puppetdebug.vlan.pem]{:path=>"/etc/puppetlabs/puppet/ssl/certs/pe-331-agent-solaris.puppetdebug.vlan.pem", :mode=>"644", :owner=>"pe-puppet", :group=>"pe-puppet", :ensure=>:file, :loglevel=>:debug, :links=>:follow, :backup=>false}"\r\nDebug: Using settings: adding file resource "hostprivkey": "File[/etc/puppetlabs/puppet/ssl/private_keys/pe-331-agent-solaris.puppetdebug.vlan.pem]{:path=>"/etc/puppetlabs/puppet/ssl/private_keys/pe-331-agent-solaris.puppetdebug.vlan.pem", :mode=>"640", :owner=>"pe-puppet", :group=>"pe-puppet", :ensure=>:file, :loglevel=>:debug, :links=>:follow, :backup=>false}"\r\nDebug: Using settings: adding file resource "hostpubkey": "File[/etc/puppetlabs/puppet/ssl/public_keys/pe-331-agent-solaris.puppetdebug.vlan.pem]{:path=>"/etc/puppetlabs/puppet/ssl/public_keys/pe-331-agent-solaris.puppetdebug.vlan.pem", :mode=>"644", :owner=>"pe-puppet", :group=>"pe-puppet", :ensure=>:file, :loglevel=>:debug, :links=>:follow, :backup=>false}"\r\nDebug: Using settings: adding file resource "localcacert": "File[/etc/puppetlabs/puppet/ssl/certs/ca.pem]{:path=>"/etc/puppetlabs/puppet/ssl/certs/ca.pem", :mode=>"644", :owner=>"pe-puppet", :group=>"pe-puppet", :ensure=>:file, :loglevel=>:debug, :links=>:follow, :backup=>false}"\r\nDebug: Using settings: adding file resource "hostcrl": "File[/etc/puppetlabs/puppet/ssl/crl.pem]{:path=>"/etc/puppetlabs/puppet/ssl/crl.pem", :mode=>"644", :owner=>"pe-puppet", :group=>"pe-puppet", :ensure=>:file, :loglevel=>:debug, :links=>:follow, :backup=>false}"\r\nDebug: Using settings: adding file resource "statefile": "File[/var/opt/lib/pe-puppet/state/state.yaml]{:path=>"/var/opt/lib/pe-puppet/state/state.yaml", :mode=>"660", :ensure=>:file, :loglevel=>:debug, :links=>:follow, :backup=>false}"\r\nDebug: Using settings: adding file resource "clientyamldir": "File[/var/opt/lib/pe-puppet/client_yaml]{:path=>"/var/opt/lib/pe-puppet/client_yaml", :mode=>"750", :ensure=>:directory, :loglevel=>:debug, :links=>:follow, :backup=>false}"\r\nDebug: Using settings: adding file resource "client_datadir": "File[/var/opt/lib/pe-puppet/client_data]{:path=>"/var/opt/lib/pe-puppet/client_data", :mode=>"750", :ensure=>:directory, :loglevel=>:debug, :links=>:follow, :backup=>false}"\r\nDebug: Using settings: adding file resource "resourcefile": "File[/var/opt/lib/pe-puppet/state/resources.txt]{:path=>"/var/opt/lib/pe-puppet/state/resources.txt", :mode=>"640", :owner=>"root", :ensure=>:file, :loglevel=>:debug, :links=>:follow, :backup=>false}"\r\nDebug: Using settings: adding file resource "clientbucketdir": "File[/var/opt/lib/pe-puppet/clientbucket]{:path=>"/var/opt/lib/pe-puppet/clientbucket", :mode=>"750", :ensure=>:directory, :loglevel=>:debug, :links=>:follow, :backup=>false}"\r\nDebug: Using settings: adding file resource "lastrunfile": "File[/var/opt/lib/pe-puppet/state/last_run_summary.yaml]{:path=>"/var/opt/lib/pe-puppet/state/last_run_summary.yaml", :mode=>"644", :ensure=>:file, :loglevel=>:debug, :links=>:follow, :backup=>false}"\r\nDebug: Using settings: adding file resource "lastrunreport": "File[/var/opt/lib/pe-puppet/state/last_run_report.yaml]{:path=>"/var/opt/lib/pe-puppet/state/last_run_report.yaml", :mode=>"640", :ensure=>:file, :loglevel=>:debug, :links=>:follow, :backup=>false}"\r\nDebug: Using settings: adding file resource "graphdir": "File[/var/opt/lib/pe-puppet/state/graphs]{:path=>"/var/opt/lib/pe-puppet/state/graphs", :ensure=>:directory, :loglevel=>:debug, :links=>:follow, :backup=>false}"\r\nDebug: Using settings: adding file resource "pluginfactdest": "File[/var/opt/lib/pe-puppet/facts.d]{:path=>"/var/opt/lib/pe-puppet/facts.d", :ensure=>:directory, :loglevel=>:debug, :links=>:follow, :backup=>false}"\r\nDebug: /File[/var/opt/lib/pe-puppet/state]: Autorequiring File[/var/opt/lib/pe-puppet]\r\nDebug: /File[/var/opt/lib/pe-puppet/lib]: Autorequiring File[/var/opt/lib/pe-puppet]\r\nDebug: /File[/etc/puppetlabs/puppet/ssl/certs]: Autorequiring File[/etc/puppetlabs/puppet/ssl]\r\nDebug: /File[/etc/puppetlabs/puppet/ssl]: Autorequiring File[/etc/puppetlabs/puppet]\r\nDebug: /File[/etc/puppetlabs/puppet/ssl/public_keys]: Autorequiring File[/etc/puppetlabs/puppet/ssl]\r\nDebug: /File[/etc/puppetlabs/puppet/ssl/certificate_requests]: Autorequiring File[/etc/puppetlabs/puppet/ssl]\r\nDebug: /File[/etc/puppetlabs/puppet/ssl/private_keys]: Autorequiring File[/etc/puppetlabs/puppet/ssl]\r\nDebug: /File[/etc/puppetlabs/puppet/ssl/private]: Autorequiring File[/etc/puppetlabs/puppet/ssl]\r\nDebug: /File[/etc/puppetlabs/puppet/ssl/certs/pe-331-agent-solaris.puppetdebug.vlan.pem]: Autorequiring File[/etc/puppetlabs/puppet/ssl/certs]\r\nDebug: /File[/etc/puppetlabs/puppet/ssl/private_keys/pe-331-agent-solaris.puppetdebug.vlan.pem]: Autorequiring File[/etc/puppetlabs/puppet/ssl/private_keys]\r\nDebug: /File[/etc/puppetlabs/puppet/ssl/public_keys/pe-331-agent-solaris.puppetdebug.vlan.pem]: Autorequiring File[/etc/puppetlabs/puppet/ssl/public_keys]\r\nDebug: /File[/etc/puppetlabs/puppet/ssl/certs/ca.pem]: Autorequiring File[/etc/puppetlabs/puppet/ssl/certs]\r\nDebug: /File[/etc/puppetlabs/puppet/ssl/crl.pem]: Autorequiring File[/etc/puppetlabs/puppet/ssl]\r\nDebug: /File[/var/opt/lib/pe-puppet/state/state.yaml]: Autorequiring File[/var/opt/lib/pe-puppet/state]\r\nDebug: /File[/var/opt/lib/pe-puppet/client_yaml]: Autorequiring File[/var/opt/lib/pe-puppet]\r\nDebug: /File[/var/opt/lib/pe-puppet/client_data]: Autorequiring File[/var/opt/lib/pe-puppet]\r\nDebug: /File[/var/opt/lib/pe-puppet/state/resources.txt]: Autorequiring File[/var/opt/lib/pe-puppet/state]\r\nDebug: /File[/var/opt/lib/pe-puppet/clientbucket]: Autorequiring File[/var/opt/lib/pe-puppet]\r\nDebug: /File[/var/opt/lib/pe-puppet/state/last_run_summary.yaml]: Autorequiring File[/var/opt/lib/pe-puppet/state]\r\nDebug: /File[/var/opt/lib/pe-puppet/state/last_run_report.yaml]: Autorequiring File[/var/opt/lib/pe-puppet/state]\r\nDebug: /File[/var/opt/lib/pe-puppet/state/graphs]: Autorequiring File[/var/opt/lib/pe-puppet/state]\r\nDebug: /File[/var/opt/lib/pe-puppet/facts.d]: Autorequiring File[/var/opt/lib/pe-puppet]\r\nDebug: Finishing transaction 75121300\r\nDebug: Loaded state in 0.05 seconds\r\nDebug: Loaded state in 0.05 seconds\r\nInfo: Applying configuration version "1408477665"\r\nDebug: Executing "/usr/sbin/zoneadm -z test_zone list -p"\r\nDebug: Executing "/usr/sbin/zonecfg -z test_zone info"\r\nError: /Stage[main]/Main/Zone[test_zone]: Could not evaluate: undefined method `tags" for Zone[test_zone](provider=solaris):Puppet::Type::Zone::ProviderSolaris\r\n/opt/puppet/lib/ruby/site_ruby/1.9.1/puppet/util/log.rb:322:in `source="\r\n/opt/puppet/lib/ruby/site_ruby/1.9.1/puppet/util/log.rb:253:in `initialize"\r\n/opt/puppet/lib/ruby/site_ruby/1.9.1/puppet/util/log.rb:84:in `new"\r\n/opt/puppet/lib/ruby/site_ruby/1.9.1/puppet/util/log.rb:84:in `create"\r\n/opt/puppet/lib/ruby/site_ruby/1.9.1/puppet/util.rb:98:in `block (2 levels) in logmethods"\r\n/opt/puppet/lib/ruby/site_ruby/1.9.1/puppet/provider/zone/solaris.rb:240:in `block in getconfig"\r\n/opt/puppet/lib/ruby/site_ruby/1.9.1/puppet/provider/zone/solaris.rb:221:in `each"\r\n/opt/puppet/lib/ruby/site_ruby/1.9.1/puppet/provider/zone/solaris.rb:221:in `getconfig"\r\n/opt/puppet/lib/ruby/site_ruby/1.9.1/puppet/provider/zone/solaris.rb:317:in `config_status"\r\n/opt/puppet/lib/ruby/site_ruby/1.9.1/puppet/provider/zone/solaris.rb:290:in `status"\r\n/opt/puppet/lib/ruby/site_ruby/1.9.1/puppet/provider/zone/solaris.rb:175:in `properties"\r\n/opt/puppet/lib/ruby/site_ruby/1.9.1/puppet/type/zone.rb:360:in `retrieve"\r\n/opt/puppet/lib/ruby/site_ruby/1.9.1/puppet/type.rb:1063:in `retrieve_resource"\r\n/opt/puppet/lib/ruby/site_ruby/1.9.1/puppet/transaction/resource_harness.rb:223:in `from_resource"\r\n/opt/puppet/lib/ruby/site_ruby/1.9.1/puppet/transaction/resource_harness.rb:19:in `evaluate"\r\n/opt/puppet/lib/ruby/site_ruby/1.9.1/puppet/transaction.rb:174:in `apply"\r\n/opt/puppet/lib/ruby/site_ruby/1.9.1/puppet/transaction.rb:187:in `eval_resource"\r\n/opt/puppet/lib/ruby/site_ruby/1.9.1/puppet/transaction.rb:117:in `call"\r\n/opt/puppet/lib/ruby/site_ruby/1.9.1/puppet/transaction.rb:117:in `block (2 levels) in evaluate"\r\n/opt/puppet/lib/ruby/site_ruby/1.9.1/puppet/util.rb:327:in `block in thinmark"\r\n/opt/puppet/lib/ruby/1.9.1/benchmark.rb:295:in `realtime"\r\n/opt/puppet/lib/ruby/site_ruby/1.9.1/puppet/util.rb:326:in `thinmark"\r\n/opt/puppet/lib/ruby/site_ruby/1.9.1/puppet/transaction.rb:117:in `block in evaluate"\r\n/opt/puppet/lib/ruby/site_ruby/1.9.1/puppet/graph/relationship_graph.rb:118:in `traverse"\r\n/opt/puppet/lib/ruby/site_ruby/1.9.1/puppet/transaction.rb:108:in `evaluate"\r\n/opt/puppet/lib/ruby/site_ruby/1.9.1/puppet/resource/catalog.rb:167:in `block in apply"\r\n/opt/puppet/lib/ruby/site_ruby/1.9.1/puppet/util/log.rb:149:in `with_destination"\r\n/opt/puppet/lib/ruby/site_ruby/1.9.1/puppet/transaction/report.rb:112:in `as_logging_destination"\r\n/opt/puppet/lib/ruby/site_ruby/1.9.1/puppet/resource/catalog.rb:166:in `apply"\r\n/opt/puppet/lib/ruby/site_ruby/1.9.1/puppet/configurer.rb:117:in `block in apply_catalog"\r\n/opt/puppet/lib/ruby/site_ruby/1.9.1/puppet/util.rb:161:in `block in benchmark"\r\n/opt/puppet/lib/ruby/1.9.1/benchmark.rb:295:in `realtime"\r\n/opt/puppet/lib/ruby/site_ruby/1.9.1/puppet/util.rb:160:in `benchmark"\r\n/opt/puppet/lib/ruby/site_ruby/1.9.1/puppet/configurer.rb:116:in `apply_catalog"\r\n/opt/puppet/lib/ruby/site_ruby/1.9.1/puppet/configurer.rb:191:in `run"\r\n/opt/puppet/lib/ruby/site_ruby/1.9.1/puppet/application/apply.rb:288:in `apply_catalog"\r\n/opt/puppet/lib/ruby/site_ruby/1.9.1/puppet/application/apply.rb:228:in `block in main"\r\n/opt/puppet/lib/ruby/site_ruby/1.9.1/puppet/context.rb:64:in `override"\r\n/opt/puppet/lib/ruby/site_ruby/1.9.1/puppet.rb:234:in `override"\r\n/opt/puppet/lib/ruby/site_ruby/1.9.1/puppet/application/apply.rb:190:in `main"\r\n/opt/puppet/lib/ruby/site_ruby/1.9.1/puppet/application/apply.rb:151:in `run_command"\r\n/opt/puppet/lib/ruby/site_ruby/1.9.1/puppet/application.rb:371:in `block (2 levels) in run"\r\n/opt/puppet/lib/ruby/site_ruby/1.9.1/puppet/application.rb:477:in `plugin_hook"\r\n/opt/puppet/lib/ruby/site_ruby/1.9.1/puppet/application.rb:371:in `block in run"\r\n/opt/puppet/lib/ruby/site_ruby/1.9.1/puppet/util.rb:479:in `exit_on_fail"\r\n/opt/puppet/lib/ruby/site_ruby/1.9.1/puppet/application.rb:371:in `run"\r\n/opt/puppet/lib/ruby/site_ruby/1.9.1/puppet/util/command_line.rb:137:in `run"\r\n/opt/puppet/lib/ruby/site_ruby/1.9.1/puppet/util/command_line.rb:91:in `execute"\r\n/opt/puppet/bin/puppet:8:in `<main>"\r\nDebug: Finishing transaction 72323310\r\nDebug: Storing state\r\nDebug: Stored state in 0.09 seconds\r\nNotice: Finished catalog run in 0.40 seconds\r\nDebug: Using settings: adding file resource "rrddir": "File[/var/opt/lib/pe-puppet/rrd]{:path=>"/var/opt/lib/pe-puppet/rrd", :mode=>"750", :owner=>"pe-puppet", :group=>"pe-puppet", :ensure=>:directory, :loglevel=>:debug, :links=>:follow, :backup=>false}"\r\nDebug: Finishing transaction 72173660\r\nDebug: Received report to process from pe-331-agent-solaris.puppetdebug.vlan\r\nDebug: Processing report from pe-331-agent-solaris.puppetdebug.vlan with processor Puppet::Reports::Store\r\n{noformat}\r\n\r\nThis behavior can be re-produced much easier on other platforms by adding a debug statement to the `File` provider and enabling a {{path}} getter by adding mk_resource_methods to the provider definition:\r\n\r\n{code:title=debug_file.patch}\r\ndiff --git a/lib/puppet/provider/file/posix.rb b/lib/puppet/provider/file/posix.rb\r\nindex 0ce7d22..dfaace8 100644\r\n--- a/lib/puppet/provider/file/posix.rb\r\n+++ b/lib/puppet/provider/file/posix.rb\r\n@@ -52,7 +52,12 @@ Puppet::Type.type(:file).provide :posix do\r\n     Integer(value) rescue gid(value) || false\r\n   end\r\n \r\n+  # DEBUG: Creates a `path` method for accessing the `path` property.\r\n+  mk_resource_methods\r\n+\r\n   def owner\r\n+    debug "Fetching file owner."\r\n+\r\n     unless stat = resource.stat\r\n       return :absent\r\n     end\r\n{code}\r\n\r\n{noformat}\r\n# puppet apply --debug --trace -e "file{"/tmp/tst": ensure => file, owner => root}"\r\nInfo: Loading facts in /etc/puppet/modules/stdlib/lib/facter/pe_version.rb\r\nInfo: Loading facts in /etc/puppet/modules/stdlib/lib/facter/facter_dot_d.rb\r\nInfo: Loading facts in /etc/puppet/modules/stdlib/lib/facter/puppet_vardir.rb\r\nInfo: Loading facts in /etc/puppet/modules/stdlib/lib/facter/root_home.rb\r\nInfo: Loading facts in /etc/puppet/modules/concat/lib/facter/concat_basedir.rb\r\nDebug: Failed to load library "selinux" for feature "selinux"\r\nNotice: Compiled catalog for poss-head-centos.puppetdebug.vlan in environment production in 0.48 seconds\r\nDebug: Creating default schedules\r\nDebug: Using settings: adding file resource "confdir": "File[/etc/puppet]{:path=>"/etc/puppet", :ensure=>:directory, :loglevel=>:debug, :links=>:follow, :backup=>false}"\r\nDebug: Failed to load library "shadow" for feature "libshadow"\r\nDebug: Puppet::Type::User::ProviderDirectoryservice: file /usr/bin/dsimport does not exist\r\nDebug: Failed to load library "ldap" for feature "ldap"\r\nDebug: Puppet::Type::User::ProviderLdap: feature ldap is missing\r\nDebug: Puppet::Type::User::ProviderPw: file pw does not exist\r\nDebug: Puppet::Type::User::ProviderUser_role_add: file roleadd does not exist\r\nDebug: Puppet::Type::Group::ProviderDirectoryservice: file /usr/bin/dscl does not exist\r\nDebug: Failed to load library "ldap" for feature "ldap"\r\nDebug: Puppet::Type::Group::ProviderLdap: feature ldap is missing\r\nDebug: Puppet::Type::Group::ProviderPw: file pw does not exist\r\nDebug: Using settings: adding file resource "vardir": "File[/var/lib/puppet]{:path=>"/var/lib/puppet", :owner=>"puppet", :group=>"puppet", :ensure=>:directory, :loglevel=>:debug, :links=>:follow, :backup=>false}"\r\nDebug: Using settings: adding file resource "logdir": "File[/var/lib/puppet/log]{:path=>"/var/lib/puppet/log", :mode=>"750", :owner=>"puppet", :group=>"puppet", :ensure=>:directory, :loglevel=>:debug, :links=>:follow, :backup=>false}"\r\nDebug: Using settings: adding file resource "statedir": "File[/var/lib/puppet/state]{:path=>"/var/lib/puppet/state", :mode=>"1755", :ensure=>:directory, :loglevel=>:debug, :links=>:follow, :backup=>false}"\r\nDebug: Using settings: adding file resource "rundir": "File[/var/lib/puppet/run]{:path=>"/var/lib/puppet/run", :mode=>"755", :owner=>"puppet", :group=>"puppet", :ensure=>:directory, :loglevel=>:debug, :links=>:follow, :backup=>false}"\r\nDebug: Using settings: adding file resource "libdir": "File[/var/lib/puppet/lib]{:path=>"/var/lib/puppet/lib", :ensure=>:directory, :loglevel=>:debug, :links=>:follow, :backup=>false}"\r\nDebug: Using settings: adding file resource "certdir": "File[/etc/puppet/ssl/certs]{:path=>"/etc/puppet/ssl/certs", :mode=>"755", :owner=>"puppet", :group=>"puppet", :ensure=>:directory, :loglevel=>:debug, :links=>:follow, :backup=>false}"\r\nDebug: Using settings: adding file resource "ssldir": "File[/etc/puppet/ssl]{:path=>"/etc/puppet/ssl", :mode=>"771", :owner=>"puppet", :group=>"puppet", :ensure=>:directory, :loglevel=>:debug, :links=>:follow, :backup=>false}"\r\nDebug: Using settings: adding file resource "publickeydir": "File[/etc/puppet/ssl/public_keys]{:path=>"/etc/puppet/ssl/public_keys", :mode=>"755", :owner=>"puppet", :group=>"puppet", :ensure=>:directory, :loglevel=>:debug, :links=>:follow, :backup=>false}"\r\nDebug: Using settings: adding file resource "requestdir": "File[/etc/puppet/ssl/certificate_requests]{:path=>"/etc/puppet/ssl/certificate_requests", :mode=>"755", :owner=>"puppet", :group=>"puppet", :ensure=>:directory, :loglevel=>:debug, :links=>:follow, :backup=>false}"\r\nDebug: Using settings: adding file resource "privatekeydir": "File[/etc/puppet/ssl/private_keys]{:path=>"/etc/puppet/ssl/private_keys", :mode=>"750", :owner=>"puppet", :group=>"puppet", :ensure=>:directory, :loglevel=>:debug, :links=>:follow, :backup=>false}"\r\nDebug: Using settings: adding file resource "privatedir": "File[/etc/puppet/ssl/private]{:path=>"/etc/puppet/ssl/private", :mode=>"750", :owner=>"puppet", :group=>"puppet", :ensure=>:directory, :loglevel=>:debug, :links=>:follow, :backup=>false}"\r\nDebug: Using settings: adding file resource "hostcert": "File[/etc/puppet/ssl/certs/poss-head-centos.puppetdebug.vlan.pem]{:path=>"/etc/puppet/ssl/certs/poss-head-centos.puppetdebug.vlan.pem", :mode=>"644", :owner=>"puppet", :group=>"puppet", :ensure=>:file, :loglevel=>:debug, :links=>:follow, :backup=>false}"\r\nDebug: Using settings: adding file resource "hostprivkey": "File[/etc/puppet/ssl/private_keys/poss-head-centos.puppetdebug.vlan.pem]{:path=>"/etc/puppet/ssl/private_keys/poss-head-centos.puppetdebug.vlan.pem", :mode=>"640", :owner=>"puppet", :group=>"puppet", :ensure=>:file, :loglevel=>:debug, :links=>:follow, :backup=>false}"\r\nDebug: Using settings: adding file resource "hostpubkey": "File[/etc/puppet/ssl/public_keys/poss-head-centos.puppetdebug.vlan.pem]{:path=>"/etc/puppet/ssl/public_keys/poss-head-centos.puppetdebug.vlan.pem", :mode=>"644", :owner=>"puppet", :group=>"puppet", :ensure=>:file, :loglevel=>:debug, :links=>:follow, :backup=>false}"\r\nDebug: Using settings: adding file resource "localcacert": "File[/etc/puppet/ssl/certs/ca.pem]{:path=>"/etc/puppet/ssl/certs/ca.pem", :mode=>"644", :owner=>"puppet", :group=>"puppet", :ensure=>:file, :loglevel=>:debug, :links=>:follow, :backup=>false}"\r\nDebug: Using settings: adding file resource "hostcrl": "File[/etc/puppet/ssl/crl.pem]{:path=>"/etc/puppet/ssl/crl.pem", :mode=>"644", :owner=>"puppet", :group=>"puppet", :ensure=>:file, :loglevel=>:debug, :links=>:follow, :backup=>false}"\r\nDebug: Using settings: adding file resource "statefile": "File[/var/lib/puppet/state/state.yaml]{:path=>"/var/lib/puppet/state/state.yaml", :mode=>"660", :ensure=>:file, :loglevel=>:debug, :links=>:follow, :backup=>false}"\r\nDebug: Using settings: adding file resource "clientyamldir": "File[/var/lib/puppet/client_yaml]{:path=>"/var/lib/puppet/client_yaml", :mode=>"750", :ensure=>:directory, :loglevel=>:debug, :links=>:follow, :backup=>false}"\r\nDebug: Using settings: adding file resource "client_datadir": "File[/var/lib/puppet/client_data]{:path=>"/var/lib/puppet/client_data", :mode=>"750", :ensure=>:directory, :loglevel=>:debug, :links=>:follow, :backup=>false}"\r\nDebug: Using settings: adding file resource "clientbucketdir": "File[/var/lib/puppet/clientbucket]{:path=>"/var/lib/puppet/clientbucket", :mode=>"750", :ensure=>:directory, :loglevel=>:debug, :links=>:follow, :backup=>false}"\r\nDebug: Using settings: adding file resource "lastrunfile": "File[/var/lib/puppet/state/last_run_summary.yaml]{:path=>"/var/lib/puppet/state/last_run_summary.yaml", :mode=>"644", :ensure=>:file, :loglevel=>:debug, :links=>:follow, :backup=>false}"\r\nDebug: Using settings: adding file resource "lastrunreport": "File[/var/lib/puppet/state/last_run_report.yaml]{:path=>"/var/lib/puppet/state/last_run_report.yaml", :mode=>"640", :ensure=>:file, :loglevel=>:debug, :links=>:follow, :backup=>false}"\r\nDebug: Using settings: adding file resource "graphdir": "File[/var/lib/puppet/state/graphs]{:path=>"/var/lib/puppet/state/graphs", :ensure=>:directory, :loglevel=>:debug, :links=>:follow, :backup=>false}"\r\nDebug: Using settings: adding file resource "pluginfactdest": "File[/var/lib/puppet/facts.d]{:path=>"/var/lib/puppet/facts.d", :ensure=>:directory, :loglevel=>:debug, :links=>:follow, :backup=>false}"\r\nDebug: /File[/var/lib/puppet/log]: Autorequiring File[/var/lib/puppet]\r\nDebug: /File[/var/lib/puppet/state]: Autorequiring File[/var/lib/puppet]\r\nDebug: /File[/var/lib/puppet/run]: Autorequiring File[/var/lib/puppet]\r\nDebug: /File[/var/lib/puppet/lib]: Autorequiring File[/var/lib/puppet]\r\nDebug: /File[/etc/puppet/ssl/certs]: Autorequiring File[/etc/puppet/ssl]\r\nDebug: /File[/etc/puppet/ssl]: Autorequiring File[/etc/puppet]\r\nDebug: /File[/etc/puppet/ssl/public_keys]: Autorequiring File[/etc/puppet/ssl]\r\nDebug: /File[/etc/puppet/ssl/certificate_requests]: Autorequiring File[/etc/puppet/ssl]\r\nDebug: /File[/etc/puppet/ssl/private_keys]: Autorequiring File[/etc/puppet/ssl]\r\nDebug: /File[/etc/puppet/ssl/private]: Autorequiring File[/etc/puppet/ssl]\r\nDebug: /File[/etc/puppet/ssl/certs/poss-head-centos.puppetdebug.vlan.pem]: Autorequiring File[/etc/puppet/ssl/certs]\r\nDebug: /File[/etc/puppet/ssl/private_keys/poss-head-centos.puppetdebug.vlan.pem]: Autorequiring File[/etc/puppet/ssl/private_keys]\r\nDebug: /File[/etc/puppet/ssl/public_keys/poss-head-centos.puppetdebug.vlan.pem]: Autorequiring File[/etc/puppet/ssl/public_keys]\r\nDebug: /File[/etc/puppet/ssl/certs/ca.pem]: Autorequiring File[/etc/puppet/ssl/certs]\r\nDebug: /File[/etc/puppet/ssl/crl.pem]: Autorequiring File[/etc/puppet/ssl]\r\nDebug: /File[/var/lib/puppet/state/state.yaml]: Autorequiring File[/var/lib/puppet/state]\r\nDebug: /File[/var/lib/puppet/client_yaml]: Autorequiring File[/var/lib/puppet]\r\nDebug: /File[/var/lib/puppet/client_data]: Autorequiring File[/var/lib/puppet]\r\nDebug: /File[/var/lib/puppet/clientbucket]: Autorequiring File[/var/lib/puppet]\r\nDebug: /File[/var/lib/puppet/state/last_run_summary.yaml]: Autorequiring File[/var/lib/puppet/state]\r\nDebug: /File[/var/lib/puppet/state/last_run_report.yaml]: Autorequiring File[/var/lib/puppet/state]\r\nDebug: /File[/var/lib/puppet/state/graphs]: Autorequiring File[/var/lib/puppet/state]\r\nDebug: /File[/var/lib/puppet/facts.d]: Autorequiring File[/var/lib/puppet]\r\nError: /File[/etc/puppet/ssl]: Could not evaluate: undefined method `tags" for File[/etc/puppet/ssl](provider=posix):Puppet::Type::File::ProviderPosix\r\n/puppetlabs/puppet/lib/puppet/util/log.rb:322:in `source="\r\n/puppetlabs/puppet/lib/puppet/util/log.rb:253:in `initialize"\r\n/puppetlabs/puppet/lib/puppet/util/log.rb:84:in `new"\r\n/puppetlabs/puppet/lib/puppet/util/log.rb:84:in `create"\r\n/puppetlabs/puppet/lib/puppet/util.rb:98:in `block (2 levels) in logmethods"\r\n/puppetlabs/puppet/lib/puppet/provider/file/posix.rb:57:in `owner"\r\n/puppetlabs/puppet/lib/puppet/property.rb:471:in `retrieve"\r\n/puppetlabs/puppet/lib/puppet/type.rb:1045:in `block in retrieve"\r\n/puppetlabs/puppet/lib/puppet/type.rb:1040:in `each"\r\n/puppetlabs/puppet/lib/puppet/type.rb:1040:in `retrieve"\r\n/puppetlabs/puppet/lib/puppet/type/file.rb:673:in `retrieve"\r\n/puppetlabs/puppet/lib/puppet/type.rb:1063:in `retrieve_resource"\r\n/puppetlabs/puppet/lib/puppet/transaction/resource_harness.rb:223:in `from_resource"\r\n/puppetlabs/puppet/lib/puppet/transaction/resource_harness.rb:19:in `evaluate"\r\n/puppetlabs/puppet/lib/puppet/transaction.rb:174:in `apply"\r\n/puppetlabs/puppet/lib/puppet/transaction.rb:187:in `eval_resource"\r\n/puppetlabs/puppet/lib/puppet/transaction.rb:117:in `call"\r\n/puppetlabs/puppet/lib/puppet/transaction.rb:117:in `block (2 levels) in evaluate"\r\n/puppetlabs/puppet/lib/puppet/util.rb:327:in `block in thinmark"\r\n/opt/rh/ruby193/root/usr/share/ruby/benchmark.rb:295:in `realtime"\r\n/puppetlabs/puppet/lib/puppet/util.rb:326:in `thinmark"\r\n/puppetlabs/puppet/lib/puppet/transaction.rb:117:in `block in evaluate"\r\n/puppetlabs/puppet/lib/puppet/graph/relationship_graph.rb:118:in `traverse"\r\n/puppetlabs/puppet/lib/puppet/transaction.rb:108:in `evaluate"\r\n/puppetlabs/puppet/lib/puppet/resource/catalog.rb:167:in `block in apply"\r\n/puppetlabs/puppet/lib/puppet/util/log.rb:153:in `with_destination"\r\n/puppetlabs/puppet/lib/puppet/transaction/report.rb:112:in `as_logging_destination"\r\n/puppetlabs/puppet/lib/puppet/resource/catalog.rb:166:in `apply"\r\n/puppetlabs/puppet/lib/puppet/settings.rb:957:in `use"\r\n/puppetlabs/puppet/lib/puppet/configurer.rb:48:in `initialize"\r\n/puppetlabs/puppet/lib/puppet/application/apply.rb:287:in `new"\r\n/puppetlabs/puppet/lib/puppet/application/apply.rb:287:in `apply_catalog"\r\n/puppetlabs/puppet/lib/puppet/application/apply.rb:228:in `block in main"\r\n/puppetlabs/puppet/lib/puppet/context.rb:64:in `override"\r\n/puppetlabs/puppet/lib/puppet.rb:234:in `override"\r\n/puppetlabs/puppet/lib/puppet/application/apply.rb:190:in `main"\r\n/puppetlabs/puppet/lib/puppet/application/apply.rb:151:in `run_command"\r\n/puppetlabs/puppet/lib/puppet/application.rb:371:in `block (2 levels) in run"\r\n/puppetlabs/puppet/lib/puppet/application.rb:477:in `plugin_hook"\r\n/puppetlabs/puppet/lib/puppet/application.rb:371:in `block in run"\r\n/puppetlabs/puppet/lib/puppet/util.rb:479:in `exit_on_fail"\r\n/puppetlabs/puppet/lib/puppet/application.rb:371:in `run"\r\n/puppetlabs/puppet/lib/puppet/util/command_line.rb:137:in `run"\r\n/puppetlabs/puppet/lib/puppet/util/command_line.rb:91:in `execute"\r\n/puppetlabs/puppet/bin/puppet:8:in `<main>"\r\nNotice: /File[/etc/puppet/ssl/private_keys]: Dependency File[/etc/puppet/ssl] has failures: true\r\nWarning: /File[/etc/puppet/ssl/private_keys]: Skipping because of failed dependencies\r\nNotice: /File[/etc/puppet/ssl/private_keys/poss-head-centos.puppetdebug.vlan.pem]: Dependency File[/etc/puppet/ssl] has failures: true\r\nWarning: /File[/etc/puppet/ssl/private_keys/poss-head-centos.puppetdebug.vlan.pem]: Skipping because of failed dependencies\r\nError: /File[/var/lib/puppet]: Could not evaluate: undefined method `tags" for File[/var/lib/puppet](provider=posix):Puppet::Type::File::ProviderPosix\r\n/puppetlabs/puppet/lib/puppet/util/log.rb:322:in `source="\r\n/puppetlabs/puppet/lib/puppet/util/log.rb:253:in `initialize"\r\n/puppetlabs/puppet/lib/puppet/util/log.rb:84:in `new"\r\n/puppetlabs/puppet/lib/puppet/util/log.rb:84:in `create"\r\n/puppetlabs/puppet/lib/puppet/util.rb:98:in `block (2 levels) in logmethods"\r\n/puppetlabs/puppet/lib/puppet/provider/file/posix.rb:57:in `owner"\r\n/puppetlabs/puppet/lib/puppet/property.rb:471:in `retrieve"\r\n/puppetlabs/puppet/lib/puppet/type.rb:1045:in `block in retrieve"\r\n/puppetlabs/puppet/lib/puppet/type.rb:1040:in `each"\r\n/puppetlabs/puppet/lib/puppet/type.rb:1040:in `retrieve"\r\n/puppetlabs/puppet/lib/puppet/type/file.rb:673:in `retrieve"\r\n/puppetlabs/puppet/lib/puppet/type.rb:1063:in `retrieve_resource"\r\n/puppetlabs/puppet/lib/puppet/transaction/resource_harness.rb:223:in `from_resource"\r\n/puppetlabs/puppet/lib/puppet/transaction/resource_harness.rb:19:in `evaluate"\r\n/puppetlabs/puppet/lib/puppet/transaction.rb:174:in `apply"\r\n/puppetlabs/puppet/lib/puppet/transaction.rb:187:in `eval_resource"\r\n/puppetlabs/puppet/lib/puppet/transaction.rb:117:in `call"\r\n/puppetlabs/puppet/lib/puppet/transaction.rb:117:in `block (2 levels) in evaluate"\r\n/puppetlabs/puppet/lib/puppet/util.rb:327:in `block in thinmark"\r\n/opt/rh/ruby193/root/usr/share/ruby/benchmark.rb:295:in `realtime"\r\n/puppetlabs/puppet/lib/puppet/util.rb:326:in `thinmark"\r\n/puppetlabs/puppet/lib/puppet/transaction.rb:117:in `block in evaluate"\r\n/puppetlabs/puppet/lib/puppet/graph/relationship_graph.rb:118:in `traverse"\r\n/puppetlabs/puppet/lib/puppet/transaction.rb:108:in `evaluate"\r\n/puppetlabs/puppet/lib/puppet/resource/catalog.rb:167:in `block in apply"\r\n/puppetlabs/puppet/lib/puppet/util/log.rb:153:in `with_destination"\r\n/puppetlabs/puppet/lib/puppet/transaction/report.rb:112:in `as_logging_destination"\r\n/puppetlabs/puppet/lib/puppet/resource/catalog.rb:166:in `apply"\r\n/puppetlabs/puppet/lib/puppet/settings.rb:957:in `use"\r\n/puppetlabs/puppet/lib/puppet/configurer.rb:48:in `initialize"\r\n/puppetlabs/puppet/lib/puppet/application/apply.rb:287:in `new"\r\n/puppetlabs/puppet/lib/puppet/application/apply.rb:287:in `apply_catalog"\r\n/puppetlabs/puppet/lib/puppet/application/apply.rb:228:in `block in main"\r\n/puppetlabs/puppet/lib/puppet/context.rb:64:in `override"\r\n/puppetlabs/puppet/lib/puppet.rb:234:in `override"\r\n/puppetlabs/puppet/lib/puppet/application/apply.rb:190:in `main"\r\n/puppetlabs/puppet/lib/puppet/application/apply.rb:151:in `run_command"\r\n/puppetlabs/puppet/lib/puppet/application.rb:371:in `block (2 levels) in run"\r\n/puppetlabs/puppet/lib/puppet/application.rb:477:in `plugin_hook"\r\n/puppetlabs/puppet/lib/puppet/application.rb:371:in `block in run"\r\n/puppetlabs/puppet/lib/puppet/util.rb:479:in `exit_on_fail"\r\n/puppetlabs/puppet/lib/puppet/application.rb:371:in `run"\r\n/puppetlabs/puppet/lib/puppet/util/command_line.rb:137:in `run"\r\n/puppetlabs/puppet/lib/puppet/util/command_line.rb:91:in `execute"\r\n/puppetlabs/puppet/bin/puppet:8:in `<main>"\r\nNotice: /File[/var/lib/puppet/facts.d]: Dependency File[/var/lib/puppet] has failures: true\r\nWarning: /File[/var/lib/puppet/facts.d]: Skipping because of failed dependencies\r\nNotice: /File[/etc/puppet/ssl/crl.pem]: Dependency File[/etc/puppet/ssl] has failures: true\r\nWarning: /File[/etc/puppet/ssl/crl.pem]: Skipping because of failed dependencies\r\nNotice: /File[/var/lib/puppet/client_data]: Dependency File[/var/lib/puppet] has failures: true\r\nWarning: /File[/var/lib/puppet/client_data]: Skipping because of failed dependencies\r\nNotice: /File[/var/lib/puppet/run]: Dependency File[/var/lib/puppet] has failures: true\r\nWarning: /File[/var/lib/puppet/run]: Skipping because of failed dependencies\r\nNotice: /File[/var/lib/puppet/state]: Dependency File[/var/lib/puppet] has failures: true\r\nWarning: /File[/var/lib/puppet/state]: Skipping because of failed dependencies\r\nNotice: /File[/var/lib/puppet/state/last_run_report.yaml]: Dependency File[/var/lib/puppet] has failures: true\r\nWarning: /File[/var/lib/puppet/state/last_run_report.yaml]: Skipping because of failed dependencies\r\nNotice: /File[/var/lib/puppet/state/graphs]: Dependency File[/var/lib/puppet] has failures: true\r\nWarning: /File[/var/lib/puppet/state/graphs]: Skipping because of failed dependencies\r\nNotice: /File[/var/lib/puppet/client_yaml]: Dependency File[/var/lib/puppet] has failures: true\r\nWarning: /File[/var/lib/puppet/client_yaml]: Skipping because of failed dependencies\r\nNotice: /File[/var/lib/puppet/lib]: Dependency File[/var/lib/puppet] has failures: true\r\nWarning: /File[/var/lib/puppet/lib]: Skipping because of failed dependencies\r\nNotice: /File[/var/lib/puppet/clientbucket]: Dependency File[/var/lib/puppet] has failures: true\r\nWarning: /File[/var/lib/puppet/clientbucket]: Skipping because of failed dependencies\r\nNotice: /File[/etc/puppet/ssl/public_keys]: Dependency File[/etc/puppet/ssl] has failures: true\r\nWarning: /File[/etc/puppet/ssl/public_keys]: Skipping because of failed dependencies\r\nNotice: /File[/etc/puppet/ssl/public_keys/poss-head-centos.puppetdebug.vlan.pem]: Dependency File[/etc/puppet/ssl] has failures: true\r\nWarning: /File[/etc/puppet/ssl/public_keys/poss-head-centos.puppetdebug.vlan.pem]: Skipping because of failed dependencies\r\nNotice: /File[/var/lib/puppet/state/state.yaml]: Dependency File[/var/lib/puppet] has failures: true\r\nWarning: /File[/var/lib/puppet/state/state.yaml]: Skipping because of failed dependencies\r\nNotice: /File[/etc/puppet/ssl/certs]: Dependency File[/etc/puppet/ssl] has failures: true\r\nWarning: /File[/etc/puppet/ssl/certs]: Skipping because of failed dependencies\r\nNotice: /File[/etc/puppet/ssl/certs/ca.pem]: Dependency File[/etc/puppet/ssl] has failures: true\r\nWarning: /File[/etc/puppet/ssl/certs/ca.pem]: Skipping because of failed dependencies\r\nNotice: /File[/etc/puppet/ssl/certs/poss-head-centos.puppetdebug.vlan.pem]: Dependency File[/etc/puppet/ssl] has failures: true\r\nWarning: /File[/etc/puppet/ssl/certs/poss-head-centos.puppetdebug.vlan.pem]: Skipping because of failed dependencies\r\nNotice: /File[/var/lib/puppet/log]: Dependency File[/var/lib/puppet] has failures: true\r\nWarning: /File[/var/lib/puppet/log]: Skipping because of failed dependencies\r\nNotice: /File[/etc/puppet/ssl/private]: Dependency File[/etc/puppet/ssl] has failures: true\r\nWarning: /File[/etc/puppet/ssl/private]: Skipping because of failed dependencies\r\nNotice: /File[/etc/puppet/ssl/certificate_requests]: Dependency File[/etc/puppet/ssl] has failures: true\r\nWarning: /File[/etc/puppet/ssl/certificate_requests]: Skipping because of failed dependencies\r\nNotice: /File[/var/lib/puppet/state/last_run_summary.yaml]: Dependency File[/var/lib/puppet] has failures: true\r\nWarning: /File[/var/lib/puppet/state/last_run_summary.yaml]: Skipping because of failed dependencies\r\nDebug: Finishing transaction 16863400\r\nError: Got 2 failure(s) while initializing: File[/etc/puppet/ssl]: undefined method `tags" for File[/etc/puppet/ssl](provider=posix):Puppet::Type::File::ProviderPosix; File[/var/lib/puppet]: undefined method `tags" for File[/var/lib/puppet](provider=posix):Puppet::Type::File::ProviderPosix\r\n/puppetlabs/puppet/lib/puppet/settings.rb:967:in `block in use"\r\n/puppetlabs/puppet/lib/puppet/resource/catalog.rb:179:in `apply"\r\n/puppetlabs/puppet/lib/puppet/settings.rb:957:in `use"\r\n/puppetlabs/puppet/lib/puppet/configurer.rb:48:in `initialize"\r\n/puppetlabs/puppet/lib/puppet/application/apply.rb:287:in `new"\r\n/puppetlabs/puppet/lib/puppet/application/apply.rb:287:in `apply_catalog"\r\n/puppetlabs/puppet/lib/puppet/application/apply.rb:228:in `block in main"\r\n/puppetlabs/puppet/lib/puppet/context.rb:64:in `override"\r\n/puppetlabs/puppet/lib/puppet.rb:234:in `override"\r\n/puppetlabs/puppet/lib/puppet/application/apply.rb:190:in `main"\r\n/puppetlabs/puppet/lib/puppet/application/apply.rb:151:in `run_command"\r\n/puppetlabs/puppet/lib/puppet/application.rb:371:in `block (2 levels) in run"\r\n/puppetlabs/puppet/lib/puppet/application.rb:477:in `plugin_hook"\r\n/puppetlabs/puppet/lib/puppet/application.rb:371:in `block in run"\r\n/puppetlabs/puppet/lib/puppet/util.rb:479:in `exit_on_fail"\r\n/puppetlabs/puppet/lib/puppet/application.rb:371:in `run"\r\n/puppetlabs/puppet/lib/puppet/util/command_line.rb:137:in `run"\r\n/puppetlabs/puppet/lib/puppet/util/command_line.rb:91:in `execute"\r\n/puppetlabs/puppet/bin/puppet:8:in `<main>"\r\n{noformat}', 'https://tickets.puppetlabs.com/browse/PUP-3088', 'https://github.com/puppetlabs/puppet/pull/4000', '2014-08-19T12:59:15.000-0700', '2015-07-20T09:05:16.000-0700', '2015-07-20T09:05:16.000-0700', 'Closed', 'logging', 4, '0', 1, 58, 14, 3, 'f4b50eea8d51f8570a65b0aebf3420acd5726314', 'https://tickets.puppetlabs.com/browse/PUP-3088', 'https://github.com/puppetlabs/puppet/pull/4000'),
('puppet', 85515, 38497614, 4053, 'Solaris Zones provider debug and error messages are less informative in Puppet 4', 'https://github.com/puppetlabs/puppet/pull/3244 changed the Solaris Zone provider"s debug and error messages to use the global utilities, which means they"re not prefixed with the provider context. This was done to circumvent PUP-3088; now that PUP-3088 is fixed, we should revert the change to the zone provider.', 'https://tickets.puppetlabs.com/browse/PUP-4770', 'https://github.com/puppetlabs/puppet/pull/4053', '2015-06-19T11:47:06.000-0700', '2015-07-22T14:18:59.000-0700', '2015-07-22T14:18:59.000-0700', 'Closed', '', 0, '0', 1, 21, 2, 2, '7737ddfd40ca18d2df5ee48f6f934773c279add7', 'https://tickets.puppetlabs.com/browse/PUP-4770', 'https://github.com/puppetlabs/puppet/pull/4053'),
('puppet', 86251, 38593011, 4057, 'Acceptance failing on check_woy_cache_works.rb on all platforms (master and stable)', 'The test {noformat}check_woy_cache_works.rb{noformat} is failing in CI on both master and stable.\r\n\r\nOutput:\r\n\r\n{noformat}\r\nTest Case tests/node/check_woy_cache_works.rb reported: #<RuntimeError: PuppetAcceptance::DSL::Helpers.with_puppet_running_on failed (check backtrace for location) because: Host "qqhxd1481q6vur4.delivery.puppetlabs.net" exited with 1 running:\r\n puppet node search "*" --node_terminus yaml --clientyamldir /tmp/check_woy_cache_works.37UB1g/yamldir --render-as json\r\nLast 10 lines of output were:\r\n	Error: undefined method `empty?" for nil:NilClass\r\n	Error: Try "puppet help node search" for usage\r\n{noformat}\r\n\r\nThe test started failing after the merging of https://tickets.puppetlabs.com/browse/PUP-4775.', 'https://tickets.puppetlabs.com/browse/PUP-4787', 'https://github.com/puppetlabs/puppet/pull/4057', '2015-06-25T08:30:57.000-0700', '2015-07-22T14:19:00.000-0700', '2015-07-22T14:19:00.000-0700', 'Closed', '', 2, '0', 2, 15, 5, 2, '06fbf25d775819280abe357235b437218724d2a2', 'https://tickets.puppetlabs.com/browse/PUP-4787', 'https://github.com/puppetlabs/puppet/pull/4057'),
('puppet', 84945, 38393134, 4050, 'RSpec 3.3 produces many warning messages during Puppet spec runs', 'RSpec 3.3 now logs a (useful and correct) warning message whenever an example uses `raise_error` without any arguments; doing so can potentially mask bugs (it"s the same as rescuing all errors and going "okie dokie").\r\n\r\n{quote}\r\nWARNING: Using the `raise_error` matcher without providing a specific error or message risks false positives, since `raise_error` will match when Ruby raises a `NoMethodError`, `NameError` or `ArgumentError`, potentially allowing the expectation to pass without even executing the method you are intending to call. Instead consider providing a specific error class or message. This message can be supressed by setting: `RSpec::Expectations.configuration.warn_about_potential_false_positives = false`.\r\n{quote}\r\n\r\nWe should go through the specs and fix every instance of {{raise_error}} to pass at least the type of error that"s expected.', 'https://tickets.puppetlabs.com/browse/PUP-4758', 'https://github.com/puppetlabs/puppet/pull/4050', '2015-06-16T17:24:47.000-0700', '2015-07-22T14:19:01.000-0700', '2015-07-22T14:19:01.000-0700', 'Closed', '', 2, '0', 1, 53, 50, 31, '34d10d698866cd28452ad5dd23653855be3429be', 'https://tickets.puppetlabs.com/browse/PUP-4758', 'https://github.com/puppetlabs/puppet/pull/4050'),
('puppet', 88028, 39551958, 4076, 'meaning of Integer[0] different in a ruby function', 'Update\r\n----\r\nTh 4.x function API created types that were more restrictive for {{Integer}} and {{Float}} than the corresponding expressions in the puppet language.\r\nWhen using {{Integer\[1]}}, the expectation was that this produces the type {{Integer\[1, default]}}, but it produced {{Integer\[1,1]}}. The handling of\r\n{{Float}} had the same problem.\r\n\r\nAfter the fix, the types in the 4.x function API behaves as documented for the Puppet Language.\r\n\r\nOriginal\r\n----\r\n\r\nHi,\r\n\r\nAccording to [the documentation|http://docs.puppetlabs.com/puppet/4.2/reference/lang_data_number.html#parameters],\r\n\r\n{code}\r\nInteger[0]\r\n{code}\r\n\r\nmatches any integer greater than or equal to 0. But the behavior is different in a ruby function. Here is the content of the ruby function {{f.rb}} in a {{test}} puppet module :\r\n\r\n{code:ruby}\r\n# The function is in <module-root>/test/lib/puppet/functions/test/f.rb\r\nPuppet::Functions.create_function(:"test::f") do\r\n\r\n  dispatch :f do\r\n    required_param "Integer[0]", :n\r\n  end\r\n\r\n  def f(n)\r\n    true\r\n  end\r\n\r\nend\r\n{code}\r\n\r\nThen, if I try to call the function in a puppet class like this:\r\n\r\n{code:puppet}\r\nclass test {\r\n\r\n  test::f(10)\r\n\r\n}\r\n{code}\r\n\r\nI have this error:\r\n\r\n{code}\r\nroot@puppet4:~# puppet agent --test\r\nInfo: Retrieving pluginfacts\r\nInfo: Retrieving plugin\r\nInfo: Loading facts\r\nError: Could not retrieve catalog from remote server: Error 400 on SERVER: Evaluation Error: Error while evaluating a Function Call, function "test::f" called with mis-matched arguments\r\nexpected:\r\n  test::f(Integer[0, 0] n) - arg count {1}\r\nactual:\r\n  test::f(Integer) - arg count {1} at /etc/puppetlabs/code/environments/production/modules/test/manifests/init.pp:12:3 on node puppet4.athome.priv\r\nWarning: Not using cache on failed catalog\r\nError: Could not retrieve catalog; skipping run\r\n{code}\r\n\r\nIn ruby function, it seems that:\r\n\r\n{code}\r\nInteger[0] <=> Integer[0, 0]\r\n{code}\r\n\r\nIt isn"t a big problem because there is a workaround with:\r\n\r\n{code}\r\nPuppet::Functions.create_function(:"test::f") do\r\n\r\n  dispatch :f do\r\n    #required_param "Integer[0]", :n\r\n    required_param "Integer[0, default]", :n\r\n  end\r\n\r\n  def f(n)\r\n    true\r\n  end\r\n\r\nend\r\n{code}\r\n\r\nHowever it seems to me that there is a little inconsistency.\r\nRegards.', 'https://tickets.puppetlabs.com/browse/PUP-4826', 'https://github.com/puppetlabs/puppet/pull/4076', '2015-07-07T20:11:51.000-0700', '2015-07-22T14:19:01.000-0700', '2015-07-22T14:19:01.000-0700', 'Closed', '', 8, '0', 1, 10, 2, 2, '6c21906f7bc1f966e6042f556f0b7ae5e333c5c0', 'https://tickets.puppetlabs.com/browse/PUP-4826', 'https://github.com/puppetlabs/puppet/pull/4076'),
('puppet', 79136, 38305021, 4046, 'Transitory failure on rdoc specs in AppVeyor', 'Encountered a transitory failure in spec/integration/util/rdoc when running in AppVeyor.\r\n\r\n{code}\r\n[00:13:33] Failures:\r\n[00:13:33] \r\n[00:13:33]   1) RDoc::Parser rdoc2 support behaves like an_rdoc_site documents the a_module::a_plugin type\r\n[00:13:33]      Failure/Error: Puppet::Util::RDoc.rdoc(doc_dir, [modules_dir, manifests_dir])\r\n[00:13:33]      RDoc::Error:\r\n[00:13:33]        error generating C:/Users/appveyor/AppData/Local/Temp/1/rspecrun20150506-1356-1tdbqqr/rdoc_parser_tmp20150506-1356-1yd6bk1/doc/__/__/Users/appveyor/AppData/Local/Temp/1/rspecrun20150506-1356-1tdbqqr/rdoc_parser_tmp20150506-1356-1yd6bk1/modules/a_module/lib/puppet/type/a_plugin_rb.html: No such file or directory @ rb_sysopen - C:/Users/appveyor/AppData/Local/Temp/1/rspecrun20150506-1356-1tdbqqr/rdoc_parser_tmp20150506-1356-1yd6bk1/doc/__/__/Users/appveyor/AppData/Local/Temp/1/rspecrun20150506-1356-1tdbqqr/rdoc_parser_tmp20150506-1356-1yd6bk1/modules/a_module/manifests/a_type_pp.html (Errno::ENOENT)\r\n[00:13:33]      Shared Example Group: :an_rdoc_site called from ./spec/integration/util/rdoc/parser_spec.rb:180\r\n[00:13:33]      # ./lib/puppet/util/rdoc.rb:39:in `rdoc"\r\n[00:13:33]      # ./spec/integration/util/rdoc/parser_spec\r\n[00:13:33] .rb:141:in `block (2 levels) in <top (required)>"\r\n[00:13:33]      # ./spec/integration/util/rdoc/parser_spec.rb:133:in `block (3 levels) in <top (required)>"\r\n[00:13:33]      # ./lib/puppet/context.rb:64:in `override"\r\n[00:13:33]      # ./lib/puppet.rb:223:in `override"\r\n[00:13:33]      # ./spec/integration/util/rdoc/parser_spec.rb:132:in `block (2 levels) in <top (required)>"\r\n[00:13:33] \r\n[00:13:33]   2) RDoc::Parser rdoc2 support behaves like an_rdoc_site documents the a_module::a_fact fact\r\n[00:13:33]      Failure/Error: Puppet::Util::RDoc.rdoc(doc_dir, [modules_dir, manifests_dir])\r\n[00:13:33]      RDoc::Error:\r\n[00:13:33]        error generating C:/Users/appveyor/AppData/Local/Temp/1/rspecrun20150506-1356-1tdbqqr/rdoc_parser_tmp20150506-1356-1bl19oe/doc/__/__/Users/appveyor/AppData/Local/Temp/1/rspecrun20150506-1356-1tdbqqr/rdoc_parser_tmp20150506-1356-1bl19oe/modules/a_module/lib/puppet/type/a_plugin_rb.html: No such file or directory @ rb_sysopen - C:/Users/appveyor/AppData/Local/Temp/1/rspecrun20150506-1356-1tdbqqr/rdoc_parser_tmp20150506-1356-1bl19oe/doc/__/__/Users/appveyor/AppData/Local/Temp/1\r\n[00:13:33] /rspecrun20150506-1356-1tdbqqr/rdoc_parser_tmp20150506-1356-1bl19oe/modules/a_module/manifests/a_type_pp.html (Errno::ENOENT)\r\n[00:13:33]      Shared Example Group: :an_rdoc_site called from ./spec/integration/util/rdoc/parser_spec.rb:180\r\n[00:13:33]      # ./lib/puppet/util/rdoc.rb:39:in `rdoc"\r\n[00:13:33]      # ./spec/integration/util/rdoc/parser_spec.rb:141:in `block (2 levels) in <top (required)>"\r\n[00:13:33]      # ./spec/integration/util/rdoc/parser_spec.rb:133:in `block (3 levels) in <top (required)>"\r\n[00:13:33]      # ./lib/puppet/context.rb:64:in `override"\r\n[00:13:33]      # ./lib/puppet.rb:223:in `override"\r\n[00:13:33]      # ./spec/integration/util/rdoc/parser_spec.rb:132:in `block (2 levels) in <top (required)>"\r\n{code}\r\n\r\nFull log attached.', 'https://tickets.puppetlabs.com/browse/PUP-4537', 'https://github.com/puppetlabs/puppet/pull/4046', '2015-05-07T08:26:54.000-0700', '2015-07-22T14:19:02.000-0700', '2015-07-22T14:19:02.000-0700', 'Closed', 'rdoc;windows', 9, '0', 1, 1, 1, 1, '48b404a62d8514656cf93f3f41a025c3491ec393', 'https://tickets.puppetlabs.com/browse/PUP-4537', 'https://github.com/puppetlabs/puppet/pull/4046'),
('puppet', 75827, 39133936, 4066, 'Ordering dependency exists between certificate_request_spec.rb and autosign_spec.rb', 'If autosign_spec.rb isn"t run first, certificate_request_spec.rb will fail. This blocks using the parallel:spec rake task to run spec tests faster on Windows.\r\n\r\nSpecifically, it appears {{host.generate_certificate_request}} needs to be called before all the calls to {{Puppet::SSL::CertificateRequest.indirection.save(@csr)}}.\r\n\r\nSo far this has only been confirmed on Windows.\r\n\r\n\r\n\r\nh2. QA Risk Analysis\r\nN/A for testing framework', 'https://tickets.puppetlabs.com/browse/PUP-4405', 'https://github.com/puppetlabs/puppet/pull/4066', '2015-04-13T17:19:45.000-0700', '2015-07-22T14:19:02.000-0700', '2015-07-22T14:19:02.000-0700', 'Closed', '', 2, '0', 2, 10, 4, 9, '60d33c1a7b4924b6da2118a554107883445f91c7', 'https://tickets.puppetlabs.com/browse/PUP-4405', 'https://github.com/puppetlabs/puppet/pull/4066'),
('puppet', 85789, 38300781, 4045, 'Puppet gem dependencies are out of date', 'Installing puppet 4.2.0 as a gem won"t install hiera 3.0, even though that is the combination we"ll be shipping in puppet-agent 1.2.0.\r\n\r\n{noformat}\r\n$ gem install ./hiera-3.0.0.gem\r\nSuccessfully installed hiera-3.0.0\r\n1 gem installed\r\n$ gem install ./puppet-4.2.0.gem\r\nFetching: hiera-2.0.0.gem (100%)\r\nSuccessfully installed hiera-2.0.0\r\nSuccessfully installed puppet-4.2.0\r\n2 gems installed\r\n{noformat}\r\n\r\nAlso if you try to run puppet from source, bundler will refuse to use hiera 3:\r\n\r\n{noformat}\r\n$ echo $HIERA_LOCATION\r\nfile:///Users/josh/work/hiera\r\n$ bundle exec hiera --version\r\n3.0.0\r\n$ cd ../puppet\r\n$ bundle update\r\nFetching gem metadata from https://rubygems.org/.......\r\nFetching version metadata from https://rubygems.org/..\r\nResolving dependencies...\r\nCould not find gem "hiera (< 3, >= 2.0) ruby", which is required by gem "puppet (>= 0)\r\nruby", in any of the sources.\r\n{noformat}', 'https://tickets.puppetlabs.com/browse/PUP-4777', 'https://github.com/puppetlabs/puppet/pull/4045', '2015-06-22T16:55:39.000-0700', '2015-07-22T14:19:02.000-0700', '2015-07-22T14:19:02.000-0700', 'Closed', '', 2, '0', 1, 5, 5, 3, '9556ac45320a57d28e9534ac0a5cfb8d565ee3a2', 'https://tickets.puppetlabs.com/browse/PUP-4777', 'https://github.com/puppetlabs/puppet/pull/4045'),
('puppet', 31935, 17110792, 2767, 'yumrepo attributes cannot be set to "_none_"', 'The {{yumrepo}} attribute cannot be set to the value "_none_" even though this is a supported value for the yum {{proxy}} parameter. We should fix this.\r\n\r\n{code}\r\n$ puppet apply -e "yumrepo {"base": proxy => "_none_"}"\r\nNotice: Compiled catalog for localhost.localdomain in environment production in 0.03 seconds\r\nError: Parameter proxy failed on Yumrepo[base]: Validate method failed for class proxy: Must be a valid URL at line 1\r\nWrapped exception:\r\nValidate method failed for class proxy: Must be a valid URL\r\n{code}', 'https://tickets.puppetlabs.com/browse/PUP-2271', 'https://github.com/puppetlabs/puppet/pull/2767', '2014-04-15T13:27:53.000-0700', '2015-07-28T03:13:21.000-0700', '2015-07-28T03:13:21.000-0700', 'Closed', '', 14, '0', 1, 7, 1, 2, '973c58057d1bb24d64c716e2971d5317f6e0edfb', 'https://tickets.puppetlabs.com/browse/PUP-2271', 'https://github.com/puppetlabs/puppet/pull/2767'),
('puppet', 86843, 39701194, 4079, 'Custom facts not loaded when using puppet resource command', 'I"m seeing an issue where when running puppet resource, it does not load custom facts (puppet apply works ok).\r\n\r\nThis is a masterless installation (i.e. no certs setup), so I don"t believe this to be a pluginsync issue.\r\n\r\n{code}\r\nroot@hkmjr2cbdmkpxh2:~# /opt/puppetlabs/bin/puppet module install puppetlabs-firewall\r\nNotice: Preparing to install into /etc/puppetlabs/code/environments/production/modules ...\r\nNotice: Downloading from https://forgeapi.puppetlabs.com ...\r\nNotice: Installing -- do not interrupt ...\r\n/etc/puppetlabs/code/environments/production/modules\r\n└── puppetlabs-firewall (v1.6.0)\r\nroot@hkmjr2cbdmkpxh2:/opt/puppetlabs/bin# ls /etc/puppetlabs/code/environments/production/modules/firewall/lib/facter/iptables_version.rb\r\n/etc/puppetlabs/code/environments/production/modules/firewall/lib/facter/iptables_version.rb\r\nroot@hkmjr2cbdmkpxh2:/opt/puppetlabs/bin# cat test.pp\r\nnotify {"$::iptables_version":}\r\nroot@hkmjr2cbdmkpxh2:/opt/puppetlabs/bin# strace -efile -f ./puppet apply test.pp 2>&1 | grep iptables_version\r\n[pid  1817] stat("/etc/puppetlabs/code/environments/production/modules/firewall/lib/facter/iptables_version.rb", {st_mode=S_IFREG|0644, st_size=234, ...}) = 0\r\n[pid  1817] open("/etc/puppetlabs/code/environments/production/modules/firewall/lib/facter/iptables_version.rb", O_RDONLY|O_CLOEXEC) = 8\r\n[pid  1817] open("/etc/puppetlabs/code/environments/production/modules/firewall/lib/facter/iptables_version.rb", O_RDONLY|O_CLOEXEC) = 8\r\n[pid  1817] lstat("/etc/puppetlabs/code/environments/production/modules/firewall/lib/facter/iptables_version.rb", {st_mode=S_IFREG|0644, st_size=234, ...}) = 0\r\n[pid  1817] stat("/etc/puppetlabs/code/environments/production/modules/firewall/lib/facter/iptables_version.rb", {st_mode=S_IFREG|0644, st_size=234, ...}) = 0\r\nroot@hkmjr2cbdmkpxh2:/opt/puppetlabs/bin# strace -efile -f ./puppet resource firewall 2>&1 | grep iptables_version\r\nroot@hkmjr2cbdmkpxh2:/opt/puppetlabs/bin# ./puppet resource firewall\r\nError: Could not autoload puppet/provider/firewall/iptables: undefined method `value" for nil:NilClass\r\nError: Could not autoload puppet/type/firewall: Could not autoload puppet/provider/firewall/iptables: undefined method `value" for nil:NilClass\r\nError: Could not run: Could not autoload puppet/type/firewall: Could not autoload puppet/provider/firewall/iptables: undefined method `value" for nil:NilClass\r\nroot@hkmjr2cbdmkpxh2:/opt/puppetlabs/bin# ./puppet resource firewall --trace --debug\r\nDebug: Runtime environment: puppet_version=4.2.0, ruby_version=2.1.6, run_mode=user, default_encoding=UTF-8\r\nDebug: Facter: searching for custom fact "iptables_version".\r\nDebug: Facter: fact "facterversion" has resolved to "3.0.1".\r\nDebug: Facter: skipping external facts for "/opt/puppetlabs/facter/facts.d": No such file or directory\r\nDebug: Facter: skipping external facts for "/etc/facter/facts.d": No such file or directory\r\nDebug: Facter: skipping external facts for "/etc/puppetlabs/facter/facts.d": No such file or directory\r\nDebug: Facter: no external facts were found.\r\nDebug: Facter: loading all custom facts.\r\nDebug: Facter: custom fact "iptables_version" was not found.\r\nError: Could not autoload puppet/provider/firewall/iptables: undefined method `value" for nil:NilClass\r\n/etc/puppetlabs/code/environments/production/modules/firewall/lib/puppet/provider/firewall/iptables.rb:44:in `block in <top (required)>"\r\n/opt/puppetlabs/puppet/lib/ruby/vendor_ruby/puppet/util/classgen.rb:136:in `class_eval"\r\n/opt/puppetlabs/puppet/lib/ruby/vendor_ruby/puppet/util/classgen.rb:136:in `genthing"\r\n/opt/puppetlabs/puppet/lib/ruby/vendor_ruby/puppet/util/classgen.rb:36:in `genclass"\r\n/opt/puppetlabs/puppet/lib/ruby/vendor_ruby/puppet/type.rb:1778:in `provide"\r\n/etc/puppetlabs/code/environments/production/modules/firewall/lib/puppet/provider/firewall/iptables.rb:4:in `<top (required)>"\r\n/opt/puppetlabs/puppet/lib/ruby/vendor_ruby/puppet/util/autoload.rb:59:in `load"\r\n/opt/puppetlabs/puppet/lib/ruby/vendor_ruby/puppet/util/autoload.rb:59:in `load_file"\r\n/opt/puppetlabs/puppet/lib/ruby/vendor_ruby/puppet/util/autoload.rb:74:in `block in loadall"\r\n/opt/puppetlabs/puppet/lib/ruby/vendor_ruby/puppet/util/autoload.rb:72:in `each"\r\n/opt/puppetlabs/puppet/lib/ruby/vendor_ruby/puppet/util/autoload.rb:72:in `loadall"\r\n/opt/puppetlabs/puppet/lib/ruby/vendor_ruby/puppet/util/autoload.rb:203:in `loadall"\r\n/opt/puppetlabs/puppet/lib/ruby/vendor_ruby/puppet/metatype/manager.rb:116:in `newtype"\r\n/etc/puppetlabs/code/environments/production/modules/firewall/lib/puppet/type/firewall.rb:12:in `<top (required)>"\r\n/opt/puppetlabs/puppet/lib/ruby/vendor_ruby/puppet/util/autoload.rb:59:in `load"\r\n/opt/puppetlabs/puppet/lib/ruby/vendor_ruby/puppet/util/autoload.rb:59:in `load_file"\r\n/opt/puppetlabs/puppet/lib/ruby/vendor_ruby/puppet/util/autoload.rb:189:in `load"\r\n/opt/puppetlabs/puppet/lib/ruby/vendor_ruby/puppet/metatype/manager.rb:157:in `type"\r\n/opt/puppetlabs/puppet/lib/ruby/vendor_ruby/puppet/application/resource.rb:194:in `parse_args"\r\n/opt/puppetlabs/puppet/lib/ruby/vendor_ruby/puppet/application/resource.rb:136:in `main"\r\n/opt/puppetlabs/puppet/lib/ruby/vendor_ruby/puppet/application.rb:352:in `run_command"\r\n/opt/puppetlabs/puppet/lib/ruby/vendor_ruby/puppet/application.rb:344:in `block in run"\r\n/opt/puppetlabs/puppet/lib/ruby/vendor_ruby/puppet/util.rb:438:in `exit_on_fail"\r\n/opt/puppetlabs/puppet/lib/ruby/vendor_ruby/puppet/application.rb:344:in `run"\r\n/opt/puppetlabs/puppet/lib/ruby/vendor_ruby/puppet/util/command_line.rb:124:in `run"\r\n/opt/puppetlabs/puppet/lib/ruby/vendor_ruby/puppet/util/command_line.rb:72:in `execute"\r\n/opt/puppetlabs/puppet/bin/puppet:5:in `<main>"\r\nError: Could not autoload puppet/type/firewall: Could not autoload puppet/provider/firewall/iptables: undefined method `value" for nil:NilClass\r\n/etc/puppetlabs/code/environments/production/modules/firewall/lib/puppet/provider/firewall/iptables.rb:44:in `block in <top (required)>"\r\n/opt/puppetlabs/puppet/lib/ruby/vendor_ruby/puppet/util/classgen.rb:136:in `class_eval"\r\n/opt/puppetlabs/puppet/lib/ruby/vendor_ruby/puppet/util/classgen.rb:136:in `genthing"\r\n/opt/puppetlabs/puppet/lib/ruby/vendor_ruby/puppet/util/classgen.rb:36:in `genclass"\r\n/opt/puppetlabs/puppet/lib/ruby/vendor_ruby/puppet/type.rb:1778:in `provide"\r\n/etc/puppetlabs/code/environments/production/modules/firewall/lib/puppet/provider/firewall/iptables.rb:4:in `<top (required)>"\r\n/opt/puppetlabs/puppet/lib/ruby/vendor_ruby/puppet/util/autoload.rb:59:in `load"\r\n/opt/puppetlabs/puppet/lib/ruby/vendor_ruby/puppet/util/autoload.rb:59:in `load_file"\r\n/opt/puppetlabs/puppet/lib/ruby/vendor_ruby/puppet/util/autoload.rb:74:in `block in loadall"\r\n/opt/puppetlabs/puppet/lib/ruby/vendor_ruby/puppet/util/autoload.rb:72:in `each"\r\n/opt/puppetlabs/puppet/lib/ruby/vendor_ruby/puppet/util/autoload.rb:72:in `loadall"\r\n/opt/puppetlabs/puppet/lib/ruby/vendor_ruby/puppet/util/autoload.rb:203:in `loadall"\r\n/opt/puppetlabs/puppet/lib/ruby/vendor_ruby/puppet/metatype/manager.rb:116:in `newtype"\r\n/etc/puppetlabs/code/environments/production/modules/firewall/lib/puppet/type/firewall.rb:12:in `<top (required)>"\r\n/opt/puppetlabs/puppet/lib/ruby/vendor_ruby/puppet/util/autoload.rb:59:in `load"\r\n/opt/puppetlabs/puppet/lib/ruby/vendor_ruby/puppet/util/autoload.rb:59:in `load_file"\r\n/opt/puppetlabs/puppet/lib/ruby/vendor_ruby/puppet/util/autoload.rb:189:in `load"\r\n/opt/puppetlabs/puppet/lib/ruby/vendor_ruby/puppet/metatype/manager.rb:157:in `type"\r\n/opt/puppetlabs/puppet/lib/ruby/vendor_ruby/puppet/application/resource.rb:194:in `parse_args"\r\n/opt/puppetlabs/puppet/lib/ruby/vendor_ruby/puppet/application/resource.rb:136:in `main"\r\n/opt/puppetlabs/puppet/lib/ruby/vendor_ruby/puppet/application.rb:352:in `run_command"\r\n/opt/puppetlabs/puppet/lib/ruby/vendor_ruby/puppet/application.rb:344:in `block in run"\r\n/opt/puppetlabs/puppet/lib/ruby/vendor_ruby/puppet/util.rb:438:in `exit_on_fail"\r\n/opt/puppetlabs/puppet/lib/ruby/vendor_ruby/puppet/application.rb:344:in `run"\r\n/opt/puppetlabs/puppet/lib/ruby/vendor_ruby/puppet/util/command_line.rb:124:in `run"\r\n/opt/puppetlabs/puppet/lib/ruby/vendor_ruby/puppet/util/command_line.rb:72:in `execute"\r\n/opt/puppetlabs/puppet/bin/puppet:5:in `<main>"\r\nError: Could not run: Could not autoload puppet/type/firewall: Could not autoload puppet/provider/firewall/iptables: undefined method `value" for nil:NilClass\r\n/etc/puppetlabs/code/environments/production/modules/firewall/lib/puppet/provider/firewall/iptables.rb:44:in `block in <top (required)>"\r\n/opt/puppetlabs/puppet/lib/ruby/vendor_ruby/puppet/util/classgen.rb:136:in `class_eval"\r\n/opt/puppetlabs/puppet/lib/ruby/vendor_ruby/puppet/util/classgen.rb:136:in `genthing"\r\n/opt/puppetlabs/puppet/lib/ruby/vendor_ruby/puppet/util/classgen.rb:36:in `genclass"\r\n/opt/puppetlabs/puppet/lib/ruby/vendor_ruby/puppet/type.rb:1778:in `provide"\r\n/etc/puppetlabs/code/environments/production/modules/firewall/lib/puppet/provider/firewall/iptables.rb:4:in `<top (required)>"\r\n/opt/puppetlabs/puppet/lib/ruby/vendor_ruby/puppet/util/autoload.rb:59:in `load"\r\n/opt/puppetlabs/puppet/lib/ruby/vendor_ruby/puppet/util/autoload.rb:59:in `load_file"\r\n/opt/puppetlabs/puppet/lib/ruby/vendor_ruby/puppet/util/autoload.rb:74:in `block in loadall"\r\n/opt/puppetlabs/puppet/lib/ruby/vendor_ruby/puppet/util/autoload.rb:72:in `each"\r\n/opt/puppetlabs/puppet/lib/ruby/vendor_ruby/puppet/util/autoload.rb:72:in `loadall"\r\n/opt/puppetlabs/puppet/lib/ruby/vendor_ruby/puppet/util/autoload.rb:203:in `loadall"\r\n/opt/puppetlabs/puppet/lib/ruby/vendor_ruby/puppet/metatype/manager.rb:116:in `newtype"\r\n/etc/puppetlabs/code/environments/production/modules/firewall/lib/puppet/type/firewall.rb:12:in `<top (required)>"\r\n/opt/puppetlabs/puppet/lib/ruby/vendor_ruby/puppet/util/autoload.rb:59:in `load"\r\n/opt/puppetlabs/puppet/lib/ruby/vendor_ruby/puppet/util/autoload.rb:59:in `load_file"\r\n/opt/puppetlabs/puppet/lib/ruby/vendor_ruby/puppet/util/autoload.rb:189:in `load"\r\n/opt/puppetlabs/puppet/lib/ruby/vendor_ruby/puppet/metatype/manager.rb:157:in `type"\r\n/opt/puppetlabs/puppet/lib/ruby/vendor_ruby/puppet/application/resource.rb:194:in `parse_args"\r\n/opt/puppetlabs/puppet/lib/ruby/vendor_ruby/puppet/application/resource.rb:136:in `main"\r\n/opt/puppetlabs/puppet/lib/ruby/vendor_ruby/puppet/application.rb:352:in `run_command"\r\n/opt/puppetlabs/puppet/lib/ruby/vendor_ruby/puppet/application.rb:344:in `block in run"\r\n/opt/puppetlabs/puppet/lib/ruby/vendor_ruby/puppet/util.rb:438:in `exit_on_fail"\r\n/opt/puppetlabs/puppet/lib/ruby/vendor_ruby/puppet/application.rb:344:in `run"\r\n/opt/puppetlabs/puppet/lib/ruby/vendor_ruby/puppet/util/command_line.rb:124:in `run"\r\n/opt/puppetlabs/puppet/lib/ruby/vendor_ruby/puppet/util/command_line.rb:72:in `execute"\r\n/opt/puppetlabs/puppet/bin/puppet:5:in `<main>"\r\n{code}\r\n\r\n\r\n{code}\r\nroot@hkmjr2cbdmkpxh2:/opt/puppetlabs/bin# ./puppet --version\r\n4.2.0\r\nroot@hkmjr2cbdmkpxh2:/opt/puppetlabs/bin# ./facter --version\r\n3.0.1 (commit 9b1ef723a1494a01e0eccfe93a75fd43316690c2)\r\n{code}\r\n\r\nThis is caused by new Facter behavior, but the new Facter behavior makes a lot more sense, so fixing in Puppet by re-initializing Facter after $LOAD_PATH manipulation.', 'https://tickets.puppetlabs.com/browse/PUP-4847', 'https://github.com/puppetlabs/puppet/pull/4079', '2015-06-30T11:58:42.000-0700', '2015-07-29T15:41:42.000-0700', '2015-07-29T15:41:42.000-0700', 'Closed', '', 10, '0', 3, 78, 0, 2, 'b6cd193ef56076a02f467bccbe0cce8f7af24861', 'https://tickets.puppetlabs.com/browse/PUP-4847', 'https://github.com/puppetlabs/puppet/pull/4079'),
('puppet', 86342, 38605056, 4058, 'hiera_include does not have access to variables from node scope when future parser is enabled', 'The 4.x hiera include function does not propagate the correct scope to the include function and this screws up in which context/scope things are being looked up.\r\n\r\nWORKAROUND\r\n----\r\nInstead of {{hiera_include}} use {{include hiera_array("classes")}} as the problem is with the "include" functionality inside of hiera_include.\r\n\r\nREPRODUCTION\r\n----\r\n{noformat}\r\n[root@master381-centos-2 ~]# cat /etc/puppetlabs/puppet/environments/production/modules/test/manifests/init.pp\r\nclass test {\r\n\r\n  notify { "my role is ${role}": }\r\n\r\n}\r\n[root@master381-centos-2 ~]# cat /etc/puppetlabs/puppet/environments/production/modules/test_wrapper/manifests/init.pp\r\nclass test_wrapper {\r\n\r\n  notify { "in test_wrapper ${role}" : }\r\n  include test\r\n\r\n}\r\n[root@master381-centos-2 ~]# cat /etc/puppetlabs/puppet/environments/production/manifests/site.pp\r\n\r\nnode default {\r\n  #$role = "my_test_role"\r\n  hiera_include( "classes" )\r\n  #include hiera_array("classes")\r\n  notify { "${role}" : }\r\n\r\n}\r\n{noformat}', 'https://tickets.puppetlabs.com/browse/PUP-4789', 'https://github.com/puppetlabs/puppet/pull/4058', '2015-06-25T15:30:45.000-0700', '2015-07-29T15:42:08.000-0700', '2015-07-29T15:42:08.000-0700', 'Closed', 'tcse', 4, '0', 1, 9, 9, 3, '87e49c3ad737fb96a73391ea0429f73ff2fbfaa9', 'https://tickets.puppetlabs.com/browse/PUP-4789', 'https://github.com/puppetlabs/puppet/pull/4058'),
('puppet', 84376, 39314480, 4068, 'Uppercase letters in parameter variable names', 'According to https://docs.puppetlabs.com/puppet/4.1/reference/lang_reserved.html#parameters\r\nuppercase letters are not allowed in parameter names.  Reference documentation as far back as at least 2.7 also forbids them.\r\n\r\nFollowing discussion on IRC,\r\nPuppet 4 is a lot stricter than puppet 3, and *does* check variables names, but *not* if they appear as names of parameters.  Apparently, it should, and that it doesn"t is a bug.\r\n\r\nUPDATE\r\n----\r\nThe only validation taking place on parameters is a check that they are are numeric. When improving the checking, it should also be validated that the name does not include "::".', 'https://tickets.puppetlabs.com/browse/PUP-4752', 'https://github.com/puppetlabs/puppet/pull/4068', '2015-06-12T07:43:32.000-0700', '2015-07-29T15:42:45.000-0700', '2015-07-29T15:42:45.000-0700', 'Closed', '', 9, '0', 1, 32, 2, 4, '5ddfc6c03045a4d8a867cb9421fda7cfafc0062e', 'https://tickets.puppetlabs.com/browse/PUP-4752', 'https://github.com/puppetlabs/puppet/pull/4068'),
('puppet', 86440, 39931044, 4086, 'Global parser = future with environment.conf parser = current gives an error', 'Update\r\n----\r\nCollect expressions in a manifest will result in an attempt to use 4.x code that has not been loaded when the parser setting is future and an environment sets parser to current. The problem does not occur if the master prior to evaluating a collexpr in a parser=current environment has evaluated something in an environment where parser=future. This can be reproduced with this manifest, having main setting parser=future, and production environment parser=current.\r\n\r\n{code:puppet}\r\nnode default {\r\n  @file {"/tmp/somefile":\r\n    content => "puppet file",\r\n    tag => ["specialfile"]\r\n  }\r\n\r\n  File <| tag == "specialfile" |>\r\n}\r\n{code}\r\n\r\nOriginal\r\n----\r\n1. Set parser = future in puppet.conf\r\n2. Set parser = current in environment.conf for production\r\n3.  service pe-puppetserver restart\r\n4.  run puppet agent -t \r\n5.  Get the following error\r\n\r\n{noformat}\r\n[root@master381-centos ~]# service pe-puppetserver restart; puppet agent -t\r\nStopping pe-puppetserver:                                  [  OK  ]\r\nStarting pe-puppetserver:                                  [  OK  ]\r\nInfo: Retrieving pluginfacts\r\nInfo: Retrieving plugin\r\nInfo: Loading facts\r\nError: Could not retrieve catalog from remote server: Error 400 on SERVER: uninitialized constant Puppet::Pops at /opt/puppet/share/puppet/modules/puppet_enterprise/manifests/profile/agent.pp:12 on node master381-centos\r\nWarning: Not using cache on failed catalog\r\nError: Could not retrieve catalog; skipping run\r\n{noformat}\r\n\r\nThe issue does not occur by simply enabling future parser or by using current parser but only in this specific configuration.  I think.  ', 'https://tickets.puppetlabs.com/browse/PUP-4848', 'https://github.com/puppetlabs/puppet/pull/4086', '2015-06-26T10:39:35.000-0700', '2015-08-06T14:56:02.000-0700', '2015-08-06T14:56:02.000-0700', 'Closed', 'tcse', 23, '0', 1, 1, 1, 1, 'a96257fcdc125ff9ab50197e91f6b0c6e7931706', 'https://tickets.puppetlabs.com/browse/PUP-4848', 'https://github.com/puppetlabs/puppet/pull/4086'),
('puppet', 18411, 164035885, 6556, 'puppet facts find returns facts for wrong node', '[root@master mconotify]# puppet -V\r\n3.3.1 (Puppet Enterprise 3.1.0)\r\n[root@master mconotify]# puppet facts find --render-as yaml  puppet06.puppet.tld|grep fqdn\r\n    fqdn: master.spence.org.uk.local\r\n', 'https://tickets.puppetlabs.com/browse/PUP-704', 'https://github.com/puppetlabs/puppet/pull/6556', '2013-11-07T08:02:13.000-0800', '2015-08-07T13:38:49.000-0700', '2015-08-07T13:38:49.000-0700', 'Closed', '', 7, '0', 1, 1, 1, 1, '094760d9262c7fbf2afd86e6cf0a88b29a468fa9', 'https://tickets.puppetlabs.com/browse/PUP-704', 'https://github.com/puppetlabs/puppet/pull/6556'),
('puppet', 56732, 23588208, 3257, '"ensure" parameter is always treated as if it were a property', 'Puppet (since at least 2.6.0; I"ve marked the earliest and latest available released versions as affected) considers any parameter named "ensure" on a type to be a property that can be synced. While this is true for all built-in types, it is not generally true. A property is a special type of parameter, and if "ensure" is not a property, then Ruby will throw undefined method exceptions in at least two different places in the code because Puppet assumes that methods defined by Puppet::Property are available.\r\n\r\nA real-world use case where it makes sense to have an "ensure" parameter which is not a property is a type that exists only to generate additional resources on the agent. For example, we have a custom type (Gen_file) that has a "command" parameter, runs this command on the agent, and generates a File resource with the command output as its contents. Gen_file itself has no syncable state, so it makes no sense for it to have properties, but it does have an "ensure" parameter whose value is passed onto the generated File resource"s "ensure" property.\r\n\r\nI intend to submit a pull request to fix this behaviour shortly, which will highlight the specific parts of the code where this assumption is made.', 'https://tickets.puppetlabs.com/browse/PUP-3589', 'https://github.com/puppetlabs/puppet/pull/3257', '2014-10-30T01:06:24.000-0700', '2015-09-08T22:39:07.000-0700', '2015-09-08T22:39:07.000-0700', 'Closed', '', 1, '0', 1, 71, 4, 3, '', 'https://tickets.puppetlabs.com/browse/PUP-3589', 'https://github.com/puppetlabs/puppet/pull/3257'),
('puppet', 68842, 29662268, 3633, 'puppet device always exits 0', 'Compile errors, resource failures, --detailed-exitcodes... it always exits 0.', 'https://tickets.puppetlabs.com/browse/PUP-4032', 'https://github.com/puppetlabs/puppet/pull/3633', '2015-02-20T09:36:33.000-0800', '2015-09-08T22:56:18.000-0700', '2015-09-08T22:56:18.000-0700', 'Resolved', '', 4, '0', 1, 61, 15, 2, 'e89753026db3f952de0b5e4d3ab8bc26d0b2c60c', 'https://tickets.puppetlabs.com/browse/PUP-4032', 'https://github.com/puppetlabs/puppet/pull/3633'),
('puppet', 71271, 0, 0, 'Backport ability to add a member to group to Puppet 3.8', '', 'https://tickets.puppetlabs.com/browse/PUP-4185', '', '2015-03-11T13:33:21.000-0700', '2015-09-13T12:50:08.000-0700', '2015-09-13T12:50:08.000-0700', 'Resolved', 'windows', 1, '0', 0, 0, 0, 0, '4ba145099fd191f1035ee3f19b9537e8b9cae5a1', 'https://tickets.puppetlabs.com/browse/PUP-4185', 'https://github.com/puppetlabs/puppet/commit/4ba145099fd191f1035ee3f19b9537e8b9cae5a1'),
('puppet', 92676, 42065938, 4147, 'Puppet::FileSystem.unlink fails on Windows when the target path doesn"t exist', 'When attempting to delete a symlink on Windows for a target path that no longer exists, Puppet throws a Permission Denied error.\r\n\r\nThis was discovered during the work for MODULES-2175.\r\n{noformat}\r\n[1] pry(DscSymlink)> e.class\r\n=> Errno::EACCES\r\n{noformat}\r\n\r\n*Expected:* The link should be removed.\r\n\r\n*Repro:* To reproduce, create a symlink, delete the target path and then try to unlink it:\r\n\r\n{noformat}\r\n    it "should unlink a symlink if the existing link path does not exist" do\r\n      path =   Dir.mktmpdir("test")\r\n      symlink_path = "#{path}\\link"\r\n      link_target = Dir.mktmpdir("link_test")\r\n      Puppet::FileSystem.symlink(link_target, symlink_path, { :force => true})\r\n      system("rmdir /s /q \"#{link_target}\"")\r\n\r\n      Puppet::FileSystem.unlink(symlink_path)\r\n    end\r\n{noformat}\r\n', 'https://tickets.puppetlabs.com/browse/PUP-5018', 'https://github.com/puppetlabs/puppet/pull/4147', '2015-08-10T11:57:37.000-0700', '2015-09-14T13:50:39.000-0700', '2015-09-14T13:50:39.000-0700', 'Closed', 'windows', 8, '0', 1, 23, 1, 2, '579d5ea3e7608328c1169a6672678c0144e7b525', 'https://tickets.puppetlabs.com/browse/PUP-5018', 'https://github.com/puppetlabs/puppet/pull/4147'),
('puppet', 91046, 42291780, 4153, 'acceptance test curl fails on sles-10', 'In finishing up the work for PUP-4757, I saw that {{tests/concurrency/ticket_2659_concurrent_catalog_requests.rb}} fails for just sles-10 platforms while trying to run a curl command:\r\n\r\n{noformat}\r\nerror:0D0C50A1:asn1 encoding routines:ASN1_item_verify:unknown message digest algorithm\r\n{noformat}\r\n\r\nThe output from the [Jenkins job|https://jenkins.puppetlabs.com/view/PE-Only%20Agents/job/platform_aio-suite_intn-sys_stable-pe-puppet/27/SLAVE_LABEL=beaker,TEST_TARGET=sles-10-x86_64/] is below:\r\n\r\n{noformat}\r\nLaunched 7242\r\nAll requests are finished\r\n\r\nvi0wlol4yl8zhej.delivery.puppetlabs.net (agent) executed in 0.44 seconds\r\n\r\n  * Checking the results of catalog request #0\r\n\r\nvi0wlol4yl8zhej.delivery.puppetlabs.net (agent) 14:25:16$ cat /tmp/concurrent-loop-script.WI7228/catalog-request-0.out\r\nCurling: https://vhe7vlgjov1x02t.delivery.puppetlabs.net:8140/puppet/v3/catalog/vi0wlol4yl8zhej.delivery.puppetlabs.net?environment=production\r\n* About to connect() to vhe7vlgjov1x02t.delivery.puppetlabs.net port 8140\r\n*   Trying 10.32.113.13... connected\r\n* Connected to vhe7vlgjov1x02t.delivery.puppetlabs.net (10.32.113.13) port 8140\r\n* successfully set certificate verify locations:\r\n*   CAfile: /etc/puppetlabs/puppet/ssl/certs/ca.pem\r\n  CApath: none\r\n* SSLv3, TLS handshake, Client hello (1):\r\nSSLv3, TLS handshake, Server hello (2):\r\nSSLv3, TLS handshake, CERT (11):\r\nSSLv3, TLS alert, Server hello (2):\r\nerror:0D0C50A1:asn1 encoding routines:ASN1_item_verify:unknown message digest algorithm\r\n* Closing connection #0\r\ncurl: (35) error:0D0C50A1:asn1 encoding routines:ASN1_item_verify:unknown message digest algorithm\r\n5117 Completed\r\n\r\nvi0wlol4yl8zhej.delivery.puppetlabs.net (agent) executed in 0.03 seconds\r\nWarning: \r\nExpected /< HTTP\/1.* 200/ to match "Curling: https://vhe7vlgjov1x02t.delivery.puppetlabs.net:8140/puppet/v3/catalog/vi0wlol4yl8zhej.delivery.puppetlabs.net?environment=production\n* About to connect() to vhe7vlgjov1x02t.delivery.puppetlabs.net port 8140\n*   Trying 10.32.113.13... connected\n* Connected to vhe7vlgjov1x02t.delivery.puppetlabs.net (10.32.113.13) port 8140\n* successfully set certificate verify locations:\n*   CAfile: /etc/puppetlabs/puppet/ssl/certs/ca.pem\n  CApath: none\n* SSLv3, TLS handshake, Client hello (1):\nSSLv3, TLS handshake, Server hello (2):\nSSLv3, TLS handshake, CERT (11):\nSSLv3, TLS alert, Server hello (2):\nerror:0D0C50A1:asn1 encoding routines:ASN1_item_verify:unknown message digest algorithm\n* Closing connection #0\ncurl: (35) error:0D0C50A1:asn1 encoding routines:ASN1_item_verify:unknown message digest algorithm\n5117 Completed\n".\r\n{noformat}\r\n\r\nIt also outputs a stack trace which I"ve included here if needed:\r\n{noformat}\r\n/var/lib/jenkins/workspace/platform_aio-suite_intn-sys_stable-pe-puppet/SLAVE_LABEL/beaker/TEST_TARGET/sles-10-x86_64/puppet/acceptance/.bundle/gems/gems/beaker-2.18.3/lib/beaker/dsl/outcomes.rb:42\r\n/var/lib/jenkins/workspace/platform_aio-suite_intn-sys_stable-pe-puppet/SLAVE_LABEL/beaker/TEST_TARGET/sles-10-x86_64/puppet/acceptance/.bundle/gems/gems/beaker-2.18.3/lib/beaker/dsl/helpers/puppet_helpers.rb:174\r\n/var/lib/jenkins/workspace/platform_aio-suite_intn-sys_stable-pe-puppet/SLAVE_LABEL/beaker/TEST_TARGET/sles-10-x86_64/puppet/acceptance/.bundle/gems/gems/beaker-2.18.3/lib/beaker/dsl/helpers/puppet_helpers.rb:214\r\n/var/lib/jenkins/workspace/platform_aio-suite_intn-sys_stable-pe-puppet/SLAVE_LABEL/beaker/TEST_TARGET/sles-10-x86_64/puppet/acceptance/tests/concurrency/ticket_2659_concurrent_catalog_requests.rb:66\r\n/var/lib/jenkins/workspace/platform_aio-suite_intn-sys_stable-pe-puppet/SLAVE_LABEL/beaker/TEST_TARGET/sles-10-x86_64/puppet/acceptance/.bundle/gems/gems/beaker-2.18.3/lib/beaker/test_case.rb:128\r\n/var/lib/jenkins/workspace/platform_aio-suite_intn-sys_stable-pe-puppet/SLAVE_LABEL/beaker/TEST_TARGET/sles-10-x86_64/puppet/acceptance/.bundle/gems/gems/beaker-2.18.3/lib/beaker/test_case.rb:128\r\n/usr/local/rvm/rubies/ruby-1.9.3-p484/lib/ruby/1.9.1/benchmark.rb:295\r\n/var/lib/jenkins/workspace/platform_aio-suite_intn-sys_stable-pe-puppet/SLAVE_LABEL/beaker/TEST_TARGET/sles-10-x86_64/puppet/acceptance/.bundle/gems/gems/beaker-2.18.3/lib/beaker/test_case.rb:125\r\n/var/lib/jenkins/workspace/platform_aio-suite_intn-sys_stable-pe-puppet/SLAVE_LABEL/beaker/TEST_TARGET/sles-10-x86_64/puppet/acceptance/.bundle/gems/gems/beaker-2.18.3/lib/beaker/test_suite.rb:311\r\n/var/lib/jenkins/workspace/platform_aio-suite_intn-sys_stable-pe-puppet/SLAVE_LABEL/beaker/TEST_TARGET/sles-10-x86_64/puppet/acceptance/.bundle/gems/gems/beaker-2.18.3/lib/beaker/test_suite.rb:308\r\n/var/lib/jenkins/workspace/platform_aio-suite_intn-sys_stable-pe-puppet/SLAVE_LABEL/beaker/TEST_TARGET/sles-10-x86_64/puppet/acceptance/.bundle/gems/gems/beaker-2.18.3/lib/beaker/test_suite.rb:308\r\n/var/lib/jenkins/workspace/platform_aio-suite_intn-sys_stable-pe-puppet/SLAVE_LABEL/beaker/TEST_TARGET/sles-10-x86_64/puppet/acceptance/.bundle/gems/gems/beaker-2.18.3/lib/beaker/test_suite.rb:357\r\n/var/lib/jenkins/workspace/platform_aio-suite_intn-sys_stable-pe-puppet/SLAVE_LABEL/beaker/TEST_TARGET/sles-10-x86_64/puppet/acceptance/.bundle/gems/gems/beaker-2.18.3/lib/beaker/cli.rb:155\r\n/var/lib/jenkins/workspace/platform_aio-suite_intn-sys_stable-pe-puppet/SLAVE_LABEL/beaker/TEST_TARGET/sles-10-x86_64/puppet/acceptance/.bundle/gems/gems/beaker-2.18.3/lib/beaker/cli.rb:97\r\n/var/lib/jenkins/workspace/platform_aio-suite_intn-sys_stable-pe-puppet/SLAVE_LABEL/beaker/TEST_TARGET/sles-10-x86_64/puppet/acceptance/.bundle/gems/gems/beaker-2.18.3/bin/beaker:6\r\n/var/lib/jenkins/workspace/platform_aio-suite_intn-sys_stable-pe-puppet/SLAVE_LABEL/beaker/TEST_TARGET/sles-10-x86_64/puppet/acceptance/.bundle/gems/bin/beaker:23\r\n/var/lib/jenkins/workspace/platform_aio-suite_intn-sys_stable-pe-puppet/SLAVE_LABEL/beaker/TEST_TARGET/sles-10-x86_64/puppet/acceptance/.bundle/gems/bin/beaker:23\r\n{noformat}', 'https://tickets.puppetlabs.com/browse/PUP-4952', 'https://github.com/puppetlabs/puppet/pull/4153', '2015-07-29T08:51:05.000-0700', '2015-09-14T13:50:39.000-0700', '2015-09-14T13:50:39.000-0700', 'Closed', '', 1, '0', 1, 1, 1, 1, '57371de85e12b280ee48e3aa3f2b132316f344b9', 'https://tickets.puppetlabs.com/browse/PUP-4952', 'https://github.com/puppetlabs/puppet/pull/4153'),
('puppet', 93244, 42466605, 4158, '`--parser future` breaks `class application {}` ', 'First noticed after updating to 3.8.2. Compilation will fail with error: \r\n\r\n{{Error: Could not parse for environment production: Syntax error at "application"  at line 1:7 on node build.setup}}\r\n\r\nInvestigation concurred that if you have a class named {{application}}, and the {{--parser future}} options specified, the compilation will fail: \r\n\r\n\r\n{code}\r\n[root@build puppet]# puppet apply -e "class application {}"\r\nNotice: Compiled catalog for build.setup in environment production in 0.04 seconds\r\nNotice: Finished catalog run in 0.01 seconds\r\n[root@build puppet]# puppet apply -e "class application {}" --parser future\r\nError: Could not parse for environment production: Syntax error at "application"  at line 1:7 on node build.setup\r\nError: Could not parse for environment production: Syntax error at "application"  at line 1:7 on node build.setup\r\n{code}\r\n\r\nFixed by rolling back to 3.8.1: \r\n\r\n{code}\r\nInstalled:\r\n  puppet.noarch 0:3.8.1-1.el6\r\n\r\nComplete!\r\n[vagrant@build puppet]$ puppet apply -e "class application {}" Notice: Compiled catalog for build.setup in environment production in 0.01 seconds\r\nNotice: Finished catalog run in 0.02 seconds\r\n[vagrant@build puppet]$ puppet apply -e "class application {}" --parser future\r\nNotice: Compiled catalog for build.setup in environment production in 0.24 seconds\r\nNotice: Finished catalog run in 0.02 seconds\r\n{code}', 'https://tickets.puppetlabs.com/browse/PUP-5036', 'https://github.com/puppetlabs/puppet/pull/4158', '2015-08-13T08:12:23.000-0700', '2015-09-14T13:50:40.000-0700', '2015-09-14T13:50:40.000-0700', 'Closed', '', 8, '0', 1, 942, 878, 5, '81212b948a74052a1ffff7d279b1961b921c4521', 'https://tickets.puppetlabs.com/browse/PUP-5036', 'https://github.com/puppetlabs/puppet/pull/4158'),
('puppet', 47399, 42483248, 4159, 'exec resource with timeout doesn"t kill executed command that times out', 'Trivial reproduction case:\r\n\r\nexec { "sleep":\r\n  command => "/bin/sleep 1800",\r\n  timeout => 10,\r\n}\r\n\r\nWith this, Puppet exits after roughly 10 seconds, but the sleep continues to run until the 1800 seconds are over.\r\n\r\nMy expectation would be for the sleep to get killed after the timeout hits.\r\n\r\nAs far as I can tell, the relevant code didn"t change (much) till current head, so I suspect the issue still exists.', 'https://tickets.puppetlabs.com/browse/PUP-3045', 'https://github.com/puppetlabs/puppet/pull/4159', '2014-08-12T01:25:30.000-0700', '2015-09-14T13:50:40.000-0700', '2015-09-14T13:50:40.000-0700', 'Closed', 'customer;support', 5, '0', 1, 14, 9, 1, '3a24be7b237526d4e61b8387859898c4d363c70c', 'https://tickets.puppetlabs.com/browse/PUP-3045', 'https://github.com/puppetlabs/puppet/pull/4159'),
('puppet', 96615, 44231356, 4219, 'Investigate Puppet acceptance failures on Solaris 10 x86_64', 'Ran with {{be rake ci:test:aio SHA=bd98fdd74b51eba26a76dcb2fd2d3afc0fc3596c CONFIG=config/nodes/solaris-10-x86_64.yaml SUITE_VERSION=1.2.3.230.gbd98fdd}}, probably need to get a new build.\r\n\r\n{code}\r\n      Test Suite: tests @ 2015-09-02 15:57:00 -0700\r\n\r\n      - Host Configuration Summary -\r\n\r\n\r\n              - Test Case Summary for suite "tests" -\r\n       Total Suite Time: 5512.83 seconds\r\n      Average Test Time: 19.41 seconds\r\n              Attempted: 284\r\n                 Passed: 203\r\n                 Failed: 2\r\n                Errored: 9\r\n                Skipped: 68\r\n                Pending: 2\r\n                  Total: 284\r\n\r\n      - Specific Test Case Status -\r\n\r\nFailed Tests Cases:\r\n  Test Case tests/ticket_2455_on_solaris_init_provider_should_start_service_in_own_smf_contract.rb reported: #<Beaker::DSL::Outcomes::FailTest:\r\nThe fixture process sleepy_daemon is not alone in its SMF contract on qnio9m24e99vu6u.delivery.puppetlabs.net.\r\n>\r\n  Test Case tests/concurrency/ticket_2659_concurrent_catalog_requests.rb reported: #<Beaker::DSL::Outcomes::FailTest:\r\nExpected /< HTTP\/1.* 200/ to match "sleep: bad character in argument\nCurling: https://lwj6fmovcxp7yjx.delivery.puppetlabs.net:8140/puppet/v3/catalog/qnio9m24e99vu6u.delivery.puppetlabs.net?environment=production\nenv: No such file or directory\n696 Completed\n".\r\n>\r\nErrored Tests Cases:\r\n  Test Case tests/allow_symlinks_as_config_directories.rb reported: #<Beaker::Host::CommandFailure: Host "qnio9m24e99vu6u.delivery.puppetlabs.net" exited with 2 running:\r\n [ $(readlink /tmp/puppet_conf-symlink.7Maa6b) = /tmp/puppet_conf-directory.0Ma45b ]\r\nLast 10 lines of output were:\r\n	bash: readlink: command not found\r\n	bash: line 0: [: =: unary operator expected>\r\n  Test Case tests/ticket_9862_puppet_runs_without_service_user_or_group_present.rb reported: #<Beaker::Host::CommandFailure: Host "qnio9m24e99vu6u.delivery.puppetlabs.net" exited with 1 running:\r\n find "/opt/puppetlabs/puppet/cache" -user existinguser\r\nLast 10 lines of output were:\r\n	find: cannot find existinguser name>\r\n  Test Case tests/config/apply_file_metadata_specified_in_config.rb reported: #<Beaker::Host::CommandFailure: Host "qnio9m24e99vu6u.delivery.puppetlabs.net" exited with 127 running:\r\n stat --format "%U:%G:%a" /tmp/apply_file_metadata_specified_in_config.Xva4If/log\r\nLast 10 lines of output were:\r\n	bash: stat: command not found>\r\n  Test Case tests/resource/file/symbolic_modes.rb reported: #<Beaker::Host::CommandFailure: Host "qnio9m24e99vu6u.delivery.puppetlabs.net" exited with 127 running:\r\n stat --format "%U:%G:%a" /tmp/symbolic-modes.DdaGAp/file\r\nLast 10 lines of output were:\r\n	bash: stat: command not found>\r\n  Test Case tests/resource/mount/defined.rb reported: #<Beaker::Host::CommandFailure: Host "qnio9m24e99vu6u.delivery.puppetlabs.net" exited with 2 running:\r\n cp /etc/fstab /tmp/fstab\r\nLast 10 lines of output were:\r\n	cp: cannot access /etc/fstab>\r\n  Test Case tests/resource/mount/destroy.rb reported: #<Beaker::Host::CommandFailure: Host "qnio9m24e99vu6u.delivery.puppetlabs.net" exited with 2 running:\r\n cp /etc/fstab /tmp/fstab\r\nLast 10 lines of output were:\r\n	cp: cannot access /etc/fstab>\r\n  Test Case tests/resource/mount/modify.rb reported: #<Beaker::Host::CommandFailure: Host "qnio9m24e99vu6u.delivery.puppetlabs.net" exited with 2 running:\r\n cp /etc/fstab /tmp/fstab\r\nLast 10 lines of output were:\r\n	cp: cannot access /etc/fstab>\r\n  Test Case tests/resource/mount/mounted.rb reported: #<Beaker::Host::CommandFailure: Host "qnio9m24e99vu6u.delivery.puppetlabs.net" exited with 2 running:\r\n cp /etc/fstab /tmp/fstab\r\nLast 10 lines of output were:\r\n	cp: cannot access /etc/fstab>\r\n  Test Case tests/resource/mount/query.rb reported: #<Beaker::Host::CommandFailure: Host "qnio9m24e99vu6u.delivery.puppetlabs.net" exited with 2 running:\r\n cp /etc/fstab /tmp/fstab\r\nLast 10 lines of output were:\r\n	cp: cannot access /etc/fstab>\r\nSkipped Tests Cases:\r\n  Test Case tests/ticket_15560_managehome.rb skip\r\n  Test Case tests/aix/aix_package_provider.rb skip\r\n  Test Case tests/aix/nim_package_provider.rb skip\r\n  Test Case tests/config/puppet_manages_own_configuration_in_robust_manner.rb skip\r\n  Test Case tests/external_ca_support/apache_external_root_ca.rb skip\r\n  Test Case tests/windows/eventlog.rb skip\r\n  Test Case tests/modules/changes/module_with_modified_file.rb skip\r\n  Test Case tests/modules/changes/module_with_removed_file.rb skip\r\n  Test Case tests/modules/changes/unmodified_module.rb skip\r\n  Test Case tests/modules/install/already_installed.rb skip\r\n  Test Case tests/modules/install/already_installed_elsewhere.rb skip\r\n  Test Case tests/modules/install/already_installed_with_local_changes.rb skip\r\n  Test Case tests/modules/install/basic_install.rb skip\r\n  Test Case tests/modules/install/force_ignores_dependencies.rb skip\r\n  Test Case tests/modules/install/ignoring_dependencies.rb skip\r\n  Test Case tests/modules/install/nonexistent_directory.rb skip\r\n  Test Case tests/modules/install/nonexistent_module.rb skip\r\n  Test Case tests/modules/install/with_debug.rb skip\r\n  Test Case tests/modules/install/with_dependencies.rb skip\r\n  Test Case tests/modules/install/with_environment.rb skip\r\n  Test Case tests/modules/install/with_existing_module_directory.rb skip\r\n  Test Case tests/modules/install/with_modulepath.rb skip\r\n  Test Case tests/modules/install/with_necessary_upgrade.rb skip\r\n  Test Case tests/modules/install/with_no_dependencies.rb skip\r\n  Test Case tests/modules/install/with_unnecessary_upgrade.rb skip\r\n  Test Case tests/modules/install/with_unsatisfied_constraints.rb skip\r\n  Test Case tests/modules/install/with_version.rb skip\r\n  Test Case tests/modules/list/with_environment.rb skip\r\n  Test Case tests/modules/search/formatting.rb skip\r\n  Test Case tests/modules/search/no_results.rb skip\r\n  Test Case tests/modules/uninstall/with_multiple_modules_installed.rb skip\r\n  Test Case tests/modules/upgrade/in_a_secondary_directory.rb skip\r\n  Test Case tests/modules/upgrade/introducing_new_dependencies.rb skip\r\n  Test Case tests/modules/upgrade/not_upgradable.rb skip\r\n  Test Case tests/modules/upgrade/that_was_installed_twice.rb skip\r\n  Test Case tests/modules/upgrade/to_a_specific_version.rb skip\r\n  Test Case tests/modules/upgrade/to_installed_version.rb skip\r\n  Test Case tests/modules/upgrade/with_constraints_on_it.rb skip\r\n  Test Case tests/modules/upgrade/with_constraints_on_its_dependencies.rb skip\r\n  Test Case tests/modules/upgrade/with_environment.rb skip\r\n  Test Case tests/modules/upgrade/with_local_changes.rb skip\r\n  Test Case tests/modules/upgrade/with_scattered_dependencies.rb skip\r\n  Test Case tests/modules/upgrade/with_update_available.rb skip\r\n  Test Case tests/resource/file/should_create_symlink.rb skip\r\n  Test Case tests/resource/file/ticket_7680-follow-symlinks.rb skip\r\n  Test Case tests/resource/package/common_package_name_in_different_providers.rb skip\r\n  Test Case tests/resource/package/does_not_exist.rb skip\r\n  Test Case tests/resource/package/yum.rb skip\r\n  Test Case tests/resource/scheduled_task/should_create.rb skip\r\n  Test Case tests/resource/scheduled_task/should_destroy.rb skip\r\n  Test Case tests/resource/scheduled_task/should_modify.rb skip\r\n  Test Case tests/resource/scheduled_task/should_query.rb skip\r\n  Test Case tests/resource/service/AIX_service_provider.rb skip\r\n  Test Case tests/resource/service/launchd_provider.rb skip\r\n  Test Case tests/resource/service/ticket_1343_should_add_and_remove_symlinks.rb skip\r\n  Test Case tests/resource/service/ticket_14297_handle_upstart.rb skip\r\n  Test Case tests/resource/service/ticket_4123_should_list_all_running_redhat.rb skip\r\n  Test Case tests/resource/service/ticket_4124_should_list_all_disabled.rb skip\r\n  Test Case tests/resource/ssh_authorized_key/query.rb skip\r\n  Test Case tests/resource/zone/ticket_4840_should_create_zone_with_zpool.rb skip\r\n  Test Case tests/resource/package/ips/basic_tests.rb skip\r\n  Test Case tests/resource/package/ips/should_be_holdable.rb skip\r\n  Test Case tests/resource/package/ips/should_be_idempotent.rb skip\r\n  Test Case tests/resource/package/ips/should_be_updatable.rb skip\r\n  Test Case tests/resource/package/ips/should_be_versionable.rb skip\r\n  Test Case tests/resource/package/ips/should_create.rb skip\r\n  Test Case tests/resource/package/ips/should_query.rb skip\r\n  Test Case tests/resource/package/ips/should_remove.rb skip\r\nPending Tests Cases:\r\n  Test Case tests/resource/user/should_modify_when_not_managing_home.rb pending\r\n  Test Case tests/resource/user/should_modify_while_managing_home.rb pending\r\n\r\n\r\nFailed: errored in TestSuite: report_and_raise_on_failure\r\n#<RuntimeError: Failed while running the tests suite>\r\nNo tests to run for suite "post_suite"\r\n\r\nYou can reproduce this run with:\r\n/Users/michaelsmith/puppetlabs/puppet/acceptance/.bundle/gems/ruby/2.1.0/bin/beaker --options-file merged_options.rb --hosts=config/nodes/solaris-10-x86_64\r\n\r\nYou can re-run commands against the already provisioned SUT(s) with:\r\n/Users/michaelsmith/puppetlabs/puppet/acceptance/.bundle/gems/ruby/2.1.0/bin/beaker --options-file merged_options.rb --hosts=config/nodes/solaris-10-x86_64\r\n\r\nImportant ENV variables that may have affected your run:\r\n    GEM_HOME		/Users/michaelsmith/puppetlabs/puppet/acceptance/.bundle/gems/ruby/2.1.0\r\n    GEM_PATH\r\n    RUBYLIB		/Users/michaelsmith/.rbenv/versions/2.1.5/lib/ruby/gems/2.1.0/gems/bundler-1.9.7/lib\r\n    PATH		/Users/michaelsmith/puppetlabs/puppet/acceptance/.bundle/gems/ruby/2.1.0/bin:/Users/michaelsmith/.rbenv/versions/2.1.5/bin:/usr/local/Cellar/rbenv/0.4.0/libexec:/Users/michaelsmith/Documents/google-cloud-sdk/bin:/Users/michaelsmith/.rbenv/shims:/usr/local/bin:/usr/local/sbin:/usr/bin:/bin:/usr/sbin:/sbin:/opt/X11/bin:/usr/local/MacGPG2/bin\r\n    home		/Users/michaelsmith\r\nFailed running the test suite.\r\n{code}', 'https://tickets.puppetlabs.com/browse/PUP-5191', 'https://github.com/puppetlabs/puppet/pull/4219', '2015-09-02T17:34:57.000-0700', '2015-09-14T13:50:40.000-0700', '2015-09-14T13:50:40.000-0700', 'Closed', '', 3, '0', 4, 25, 10, 11, 'ccf3cadd6108a2419cbd5b96a789b899958d4b06', 'https://tickets.puppetlabs.com/browse/PUP-5191', 'https://github.com/puppetlabs/puppet/pull/4219'),
('puppet', 75820, 33192658, 3813, 'Spec tests on Windows expect environment setup', 'There"s no requirement that Windows installations have an Administrator user, but the Puppet spec tests expect one to exist. Change the tests to use the current user.\r\n\r\nThis blocks using AppVeyor for CI, as those machines don"t have Administrator users.', 'https://tickets.puppetlabs.com/browse/PUP-4404', 'https://github.com/puppetlabs/puppet/pull/3813', '2015-04-13T16:33:39.000-0700', '2015-09-15T13:27:26.000-0700', '2015-09-15T13:27:26.000-0700', 'Closed', '', 2, '0', 3, 33, 7, 4, 'e87471238cd1a17502c80dc72c7f010ad68832c8', 'https://tickets.puppetlabs.com/browse/PUP-4404', 'https://github.com/puppetlabs/puppet/pull/3813'),
('puppet', 84095, 42644608, 4164, 'launchd enable/disable on OS X 10.11', 'On OS X 10.11, the entire /System folder is write protected by the kernel.  \r\n\r\nThe launchd provider currently uses both the global overrides plist at /var/db/launchd.db/com.apple.launchd/overrides.plist as well as the Disabled key in the job plists.  This works fine for items in /Library/LaunchDaemons and /Library/LaunchAgents, but modifying the job plist is not possible for those in the /System folder.\r\n\r\nThis provider should be changed to either use only the global overrides plist or to not modify anything in the system folder.  ', 'https://tickets.puppetlabs.com/browse/PUP-4738', 'https://github.com/puppetlabs/puppet/pull/4164', '2015-06-10T09:47:05.000-0700', '2015-09-15T15:06:05.000-0700', '2015-09-15T15:06:05.000-0700', 'Closed', '', 2, '0', 1, 32, 6, 1, '', 'https://tickets.puppetlabs.com/browse/PUP-4738', 'https://github.com/puppetlabs/puppet/pull/4164'),
('puppet', 87140, 39538666, 4073, 'Puppet caches parse results when environment_timeout is set to 0', 'When {{environment_timeout}} is set to {{0}}, caching of parsed manifests is essentially a no-op as any object put into the cache is immediately marked as expired. However, Puppet still builds a cache when the timeout is set to 0  which consumes memory. This memory usage can be significant, especially when classifier sync hits the {{resource_types/*}} endpoint on each environment.\r\n\r\nh2. Reproduction Case\r\n\r\n*  Install {{puppet-agent}} and {{puppetserver}}.\r\n*  Edit {{/opt/puppetlabs/puppet/puppet.conf}} and set {{environment_timeout}} to 0 in the {{master}} section.\r\n*  Edit {{/opt/puppetlabs/puppet/auth.conf}} and allow unrestricted access to the {{environments}} and {{resource_types}} endpoints:\r\n\r\n{code}\r\npath /puppet/v3/environments\r\nauth any\r\nmethod find\r\nallow *\r\n\r\npath /puppet/v3/resource_type\r\nauth any\r\nmethod search\r\nallow *\r\n{code}\r\n\r\n*  Create a large number of classes in the {{production}} environment, and then a large number of copies of that environment (the number created is a bit excessive since the classes are simple, but real-world environments have shown this behavior with only hundreds of classes):\r\n\r\n{code:bash}\r\nmkdir -p /etc/puppetlabs/code/environments/production/modules/test_classes/manifests\r\n\r\ncat <<EOF | /opt/puppetlabs/puppet/bin/erb > /etc/puppetlabs/code/environments/production/modules/test_classes/manifests/init.pp\r\n<% 100000.times do |i| %>\r\nclass test_class_<%= i %> () {}\r\n<% end %>\r\nEOF\r\n\r\nfor i in $(seq 100);do cp -r /etc/puppetlabs/code/environments/production /etc/puppetlabs/code/environments/test_${i}; done\r\n{code}\r\n\r\n*  Restart the puppetserver.\r\n*  Simulate classifier syncs using the following script:\r\n\r\n{code:bash}\r\n#!/bin/bash\r\n\r\nget_env_list() {\r\n  curl -s -k \\r\n    https://localhost:8140/puppet/v3/environments |\\r\n    /opt/puppetlabs/puppet/bin/ruby -rjson -e \\r\n    "puts JSON.load($stdin.read())["environments"].keys.sort"\r\n}\r\n\r\nget_env_classes() {\r\n  start_time=`date +%s`\r\n  curl -s -k \\r\n    "https://localhost:8140/puppet/v3/resource_types/*?environment=$1" > /tmp/${1}_classes.json;\r\n  echo "Sync time: $(expr `date +%s` - $start_time) seconds";\r\n}\r\n\r\nget_all_classes() {\r\n  for env in $(get_env_list); do\r\n    echo "Fectching classes for: $env";\r\n    get_env_classes $env\r\n  done\r\n}\r\n\r\nwhile :; do get_all_classes; done\r\n{code}\r\n\r\nh3. Outcome\r\n\r\nDuring class sync, each class is persisted to the cache despite {{environment_timeout}} being set to zero. This causes the Puppet Server to run out of memory:\r\n\r\n!pup_42_unpatched.png|thumbnail!\r\n\r\nh3. Expected Outcome\r\n\r\nWhen `environment_timeout` is set to 0, no memory is wasted on caching classes.\r\n\r\nApplying a quick spike for this change:\r\n\r\n{code:diff}\r\ndiff --git a/puppet/environments.rb b/puppet/environments.rb\r\nindex fa5a028..0ac12b7 100644\r\n--- a/puppet/environments.rb\r\n+++ b/puppet/environments.rb\r\n@@ -304,7 +304,8 @@ module Puppet::Environments\r\n       if result = @cache[name]\r\n         return result.value\r\n       elsif (result = @loader.get(name))\r\n-        @cache[name] = entry(result)\r\n+        e = entry(result)\r\n+        @cache[name] = e unless e.is_a?(NotCachedEntry)\r\n         result\r\n       end\r\n     end\r\n{code}\r\n\r\nResults in the Puppet Server being able to sustain syncing a large number of classes:\r\n\r\n!pup_42_patched.png|thumbnail!', 'https://tickets.puppetlabs.com/browse/PUP-4810', 'https://github.com/puppetlabs/puppet/pull/4073', '2015-07-01T17:43:00.000-0700', '2015-09-22T09:36:46.000-0700', '2015-09-22T09:36:46.000-0700', 'Closed', 'customer;support', 9, '0', 2, 95, 18, 4, '0d0e42a1f33cd3e4b225e9d89f377550845f2796', 'https://tickets.puppetlabs.com/browse/PUP-4810', 'https://github.com/puppetlabs/puppet/pull/4073'),
('puppet', 96264, 0, 0, 'service provider failing to enable/mask apache on ubuntu15 and debian8', 'while updating acceptance/tests/resource/service/service_enable_linux.rb \r\nwe discovered two failures in the service provider for debian8 and ubuntu15\r\n\r\nubuntu15:\r\n{code}\r\nroot@bnyr5s806rfghrh:~# puppet resource service apache2 enable=true\r\nError: Could not enable apache2:\r\nError: /Service[apache2]/enable: change from false to true failed: Could not enable apache2:\r\nservice { "apache2":\r\n  ensure => "stopped",\r\n  enable => "false",\r\n}\r\n{code}\r\n\r\ndebian8:\r\n{code}\r\nroot@ycn3o98zi9wix82:~# find  /etc/ -name S02apache2\r\n/etc/rc5.d/S02apache2\r\n/etc/rc4.d/S02apache2\r\n/etc/rc3.d/S02apache2\r\n/etc/rc2.d/S02apache2\r\nroot@ycn3o98zi9wix82:~# puppet resource service apache2\r\nservice { "apache2":\r\n  ensure => "stopped",\r\n}\r\n{code}\r\nit"s not enabled but the start links persist...', 'https://tickets.puppetlabs.com/browse/PUP-5149', '', '2015-09-01T17:22:37.000-0700', '2015-09-30T08:52:34.000-0700', '2015-09-30T08:52:34.000-0700', 'Resolved', '', 5, '0', 0, 0, 0, 0, '9b8ef229751288c030584876e864e0d2b5aa894e', 'https://tickets.puppetlabs.com/browse/PUP-5149', 'https://github.com/puppetlabs/puppet/commit/9b8ef229751288c030584876e864e0d2b5aa894e'),
('puppet', 75451, 33700100, 3850, 'Regression: Webrick fails to start if the puppet user and group don"t exist', 'If you install puppet-agent and try to start webrick, it will attempt to switch to the {{puppet}} user and group, and fail, because the puppet-agent package no longer creates these accounts.\r\n\r\n{noformat}\r\n[root@yvf37tnj11yfmn1 ~]# puppet master --verbose --no-daemonize\r\nWarning: could not change to group "puppet": Invalid group: puppet\r\ncould not change to group "puppet"\r\nCould not change to user puppet: Invalid user: puppet\r\n{noformat}\r\n\r\nThe desired behavior is that puppet"s webrick code should not switch uid/gid to a non-existent account.\r\n\r\nTo work around the issue, specify the puppet {{user}} and {{group}} to accounts that are known to exist, either in {{puppet.conf}}, command line, etc:\r\n\r\n{noformat}\r\n[root@yvf37tnj11yfmn1 ~]# puppet master --verbose --no-daemonize --user root --group root\r\nNotice: Starting Puppet master version 4.0.0\r\n{noformat}\r\n\r\nThis was not discovered earlier because we have only been testing webrick on hosts where {{puppetserver}} is installed, and that package does create the {{puppet}} user and group.\r\n\r\nRisk Assessment: low (but already verified)\r\nProbability: low (webrick)\r\nImpact: low (obvious problem, existing warnings/errors)\r\nTest Layer: Unit/Integration', 'https://tickets.puppetlabs.com/browse/PUP-4394', 'https://github.com/puppetlabs/puppet/pull/3850', '2015-04-09T16:40:13.000-0700', '2015-10-05T21:53:12.000-0700', '2015-10-05T21:53:12.000-0700', 'Closed', '', 6, '0', 1, 29, 9, 2, '144ea12396588c1ddc313d078070e6b71aa1825a', 'https://tickets.puppetlabs.com/browse/PUP-4394', 'https://github.com/puppetlabs/puppet/pull/3850'),
('puppet', 89088, 41151793, 4108, 'Package resources no longer fail with bad names on EL5', 'Running with AIO on EL5 platforms \r\n\r\n{noformat}\r\npackage { "clearly doenst exist":\r\n  name => "doesnotexist",\r\n}\r\n{noformat}\r\n\r\nno longer returns an error in the puppet run. This is probably due to the fact that `yum install doesnotexist` returns 0 and the fact that yumhelper.py was removed.', 'https://tickets.puppetlabs.com/browse/PUP-4865', 'https://github.com/puppetlabs/puppet/pull/4108', '2015-07-14T16:49:07.000-0700', '2015-10-07T13:14:03.000-0700', '2015-10-07T13:14:03.000-0700', 'Closed', '', 3, '0', 2, 123, 17, 4, 'ab4754cfcafbfdb85a5ca5de47226cf5c0557e41', 'https://tickets.puppetlabs.com/browse/PUP-4865', 'https://github.com/puppetlabs/puppet/pull/4108'),
('puppet', 80964, 35887718, 3958, 'Manifest with future parser code fails in a non-production environment with environment.conf parser=future setting', 'Testing the following setup:\r\n\r\n* Puppet 3.8.0\r\n* puppet.conf\r\n** environmentpath=$confdir/environments\r\n* environments/production\r\n** no environment.conf\r\n* environments/testing/environment.conf\r\n** parser=future\r\n* environment/testing/manifests/site.pp\r\n\r\n{noformat}\r\nnotify { "testing env": }\r\n$list = [1,2,3]\r\n$listb = $list.map |$i| {\r\n    $i + 1 \r\n}\r\nnotify { "list: ${list}": }\r\nnotify { "listb: ${listb}": }\r\n{noformat}\r\n\r\n`puppet agent -t` (against a webrick master serving those environments)\r\n\r\nis raising:\r\n\r\n{noformat}\r\nError: Evaluation Error: Error while evaluating a Method call, uninitialized constant Puppet::Pops::Loaders at /home/jpartlow/test/master/parser-settings/environments/testing/manifests/site.pp:3:15 on node\r\n percival.corp.puppetlabs.net\r\n/home/jpartlow/work/src/pl/puppet/lib/puppet/parser/compiler.rb:277:in `loaders"\r\n/home/jpartlow/work/src/pl/puppet/lib/puppet/pops/evaluator/runtime3_support.rb:234:in `call_function"\r\n/home/jpartlow/work/src/pl/puppet/lib/puppet/pops/evaluator/evaluator_impl.rb:833:in `call_function_with_block"\r\n/home/jpartlow/work/src/pl/puppet/lib/puppet/pops/evaluator/evaluator_impl.rb:825:in `eval_CallMethodExpression"\r\n/home/jpartlow/work/src/pl/puppet/lib/puppet/pops/visitor.rb:43:in `block in visit_this"\r\n/home/jpartlow/work/src/pl/puppet/lib/puppet/pops/visitor.rb:39:in `each"\r\n/home/jpartlow/work/src/pl/puppet/lib/puppet/pops/visitor.rb:39:in `visit_this"\r\n/home/jpartlow/work/src/pl/puppet/lib/puppet/pops/visitor.rb:66:in `visit_this_1"\r\n/home/jpartlow/work/src/pl/puppet/lib/puppet/pops/evaluator/evaluator_impl.rb:77:in `evaluate"\r\n/home/jpartlow/work/src/pl/puppet/lib/puppet/pops/evaluator/evaluator_impl.rb:299:in `eval_AssignmentExpression"\r\n/home/jpartlow/work/src/pl/puppet/lib/puppet/pops/visitor.rb:64:in `visit_this_1"\r\n/home/jpartlow/work/src/pl/puppet/lib/puppet/pops/evaluator/evaluator_impl.rb:77:in `evaluate"\r\n/home/jpartlow/work/src/pl/puppet/lib/puppet/pops/evaluator/evaluator_impl.rb:563:in `block in eval_BlockExpression"\r\n/home/jpartlow/work/src/pl/puppet/lib/puppet/pops/evaluator/evaluator_impl.rb:563:in `each"\r\n/home/jpartlow/work/src/pl/puppet/lib/puppet/pops/evaluator/evaluator_impl.rb:563:in `eval_BlockExpression"\r\n/home/jpartlow/work/src/pl/puppet/lib/puppet/pops/visitor.rb:43:in `block in visit_this"\r\n/home/jpartlow/work/src/pl/puppet/lib/puppet/pops/visitor.rb:39:in `each"\r\n/home/jpartlow/work/src/pl/puppet/lib/puppet/pops/visitor.rb:39:in `visit_this"\r\n/home/jpartlow/work/src/pl/puppet/lib/puppet/pops/visitor.rb:66:in `visit_this_1"\r\n/home/jpartlow/work/src/pl/puppet/lib/puppet/pops/evaluator/evaluator_impl.rb:77:in `evaluate"\r\n/home/jpartlow/work/src/pl/puppet/lib/puppet/pops/evaluator/evaluator_impl.rb:634:in `eval_Program"\r\n/home/jpartlow/work/src/pl/puppet/lib/puppet/pops/visitor.rb:43:in `block in visit_this"\r\n/home/jpartlow/work/src/pl/puppet/lib/puppet/pops/visitor.rb:39:in `each"\r\n/home/jpartlow/work/src/pl/puppet/lib/puppet/pops/visitor.rb:39:in `visit_this"\r\n/home/jpartlow/work/src/pl/puppet/lib/puppet/pops/visitor.rb:66:in `visit_this_1"\r\n/home/jpartlow/work/src/pl/puppet/lib/puppet/pops/evaluator/evaluator_impl.rb:77:in `evaluate"\r\n/home/jpartlow/work/src/pl/puppet/lib/puppet/pops/parser/evaluating_parser.rb:57:in `evaluate"\r\n/home/jpartlow/work/src/pl/puppet/lib/puppet/parser/ast/pops_bridge.rb:96:in `evaluate"\r\n/home/jpartlow/work/src/pl/puppet/lib/puppet/parser/ast.rb:61:in `safeevaluate"\r\n/home/jpartlow/work/src/pl/puppet/lib/puppet/parser/ast/block_expression.rb:11:in `block in evaluate"\r\n/home/jpartlow/work/src/pl/puppet/lib/puppet/parser/ast/block_expression.rb:10:in `each"\r\n/home/jpartlow/work/src/pl/puppet/lib/puppet/parser/ast/block_expression.rb:10:in `evaluate"\r\n/home/jpartlow/work/src/pl/puppet/lib/puppet/parser/ast.rb:61:in `safeevaluate"\r\n/home/jpartlow/work/src/pl/puppet/lib/puppet/resource/type.rb:127:in `evaluate_code"\r\n/home/jpartlow/work/src/pl/puppet/lib/puppet/parser/resource.rb:79:in `evaluate"\r\n/home/jpartlow/work/src/pl/puppet/lib/puppet/parser/compiler.rb:429:in `evaluate_main"\r\n/home/jpartlow/work/src/pl/puppet/lib/puppet/parser/compiler.rb:135:in `block (2 levels) in compile"\r\n/home/jpartlow/work/src/pl/puppet/lib/puppet/util/profiler/around_profiler.rb:58:in `profile"\r\n/home/jpartlow/work/src/pl/puppet/lib/puppet/util/profiler.rb:51:in `profile"\r\n/home/jpartlow/work/src/pl/puppet/lib/puppet/parser/compiler.rb:135:in `block (2 levels) in compile"                                                                                                [59/1875]\r\n/home/jpartlow/work/src/pl/puppet/lib/puppet/util/profiler/around_profiler.rb:58:in `profile"\r\n/home/jpartlow/work/src/pl/puppet/lib/puppet/util/profiler.rb:51:in `profile"\r\n/home/jpartlow/work/src/pl/puppet/lib/puppet/parser/compiler.rb:135:in `block in compile"\r\n/home/jpartlow/work/src/pl/puppet/lib/puppet/context.rb:64:in `override"\r\n/home/jpartlow/work/src/pl/puppet/lib/puppet.rb:244:in `override"\r\n/home/jpartlow/work/src/pl/puppet/lib/puppet/parser/compiler.rb:121:in `compile"\r\n/home/jpartlow/work/src/pl/puppet/lib/puppet/parser/compiler.rb:34:in `compile"\r\n/home/jpartlow/work/src/pl/puppet/lib/puppet/indirector/catalog/compiler.rb:95:in `block (2 levels) in compile"\r\n/home/jpartlow/work/src/pl/puppet/lib/puppet/util/profiler/around_profiler.rb:58:in `profile"\r\n/home/jpartlow/work/src/pl/puppet/lib/puppet/util/profiler.rb:51:in `profile"\r\n/home/jpartlow/work/src/pl/puppet/lib/puppet/indirector/catalog/compiler.rb:93:in `block in compile"\r\n/home/jpartlow/work/src/pl/puppet/lib/puppet/util.rb:161:in `block in benchmark"\r\n/home/jpartlow/.rbenv/versions/1.9.3-p484/lib/ruby/1.9.1/benchmark.rb:295:in `realtime"\r\n/home/jpartlow/work/src/pl/puppet/lib/puppet/util.rb:160:in `benchmark"\r\n/home/jpartlow/work/src/pl/puppet/lib/puppet/indirector/catalog/compiler.rb:92:in `compile"\r\n/home/jpartlow/work/src/pl/puppet/lib/puppet/indirector/catalog/compiler.rb:52:in `find"\r\n/home/jpartlow/work/src/pl/puppet/lib/puppet/indirector/indirection.rb:201:in `find"\r\n/home/jpartlow/work/src/pl/puppet/lib/puppet/network/http/api/v1.rb:105:in `do_find"\r\n/home/jpartlow/work/src/pl/puppet/lib/puppet/network/http/api/v1.rb:50:in `block in call"\r\n/home/jpartlow/work/src/pl/puppet/lib/puppet/context.rb:64:in `override"\r\n/home/jpartlow/work/src/pl/puppet/lib/puppet.rb:244:in `override"\r\n/home/jpartlow/work/src/pl/puppet/lib/puppet/network/http/api/v1.rb:49:in `call"\r\n/home/jpartlow/work/src/pl/puppet/lib/puppet/network/http/route.rb:82:in `block in process"\r\n/home/jpartlow/work/src/pl/puppet/lib/puppet/network/http/route.rb:81:in `each"\r\n/home/jpartlow/work/src/pl/puppet/lib/puppet/network/http/route.rb:81:in `process"\r\n/home/jpartlow/work/src/pl/puppet/lib/puppet/network/http/handler.rb:63:in `block in process"\r\n/home/jpartlow/work/src/pl/puppet/lib/puppet/util/profiler/around_profiler.rb:58:in `profile"\r\n/home/jpartlow/work/src/pl/puppet/lib/puppet/util/profiler.rb:51:in `profile"\r\n/home/jpartlow/work/src/pl/puppet/lib/puppet/network/http/handler.rb:61:in `process"\r\n/home/jpartlow/work/src/pl/puppet/lib/puppet/network/http/webrick/rest.rb:37:in `block in service"\r\n<internal:prelude>:10:in `synchronize"\r\n/home/jpartlow/work/src/pl/puppet/lib/puppet/network/http/webrick/rest.rb:36:in `service"\r\n/home/jpartlow/.rbenv/versions/1.9.3-p484/lib/ruby/1.9.1/webrick/httpserver.rb:138:in `service"\r\n/home/jpartlow/.rbenv/versions/1.9.3-p484/lib/ruby/1.9.1/webrick/httpserver.rb:94:in `run"\r\n/home/jpartlow/work/src/pl/puppet/lib/puppet/network/http/webrick.rb:33:in `block (2 levels) in listen"\r\n/home/jpartlow/.rbenv/versions/1.9.3-p484/lib/ruby/1.9.1/webrick/server.rb:191:in `call"\r\n/home/jpartlow/.rbenv/versions/1.9.3-p484/lib/ruby/1.9.1/webrick/server.rb:191:in `block in start_thread"\r\n{noformat}\r\n\r\nh3. UPDATE\r\nA workaround is to set the default environment to use future parser, and then in each environment that should not use future parser, set {{parser==current}}. While this is painful until this is released it is the only way to use parser setting per environment in puppet 3.8.0.\r\n', 'https://tickets.puppetlabs.com/browse/PUP-4636', 'https://github.com/puppetlabs/puppet/pull/3958', '2015-05-20T10:40:38.000-0700', '2015-10-28T18:08:13.000-0700', '2015-10-28T18:08:13.000-0700', 'Closed', 'DSL;Server', 10, '0', 1, 7, 4, 3, 'f7f1ece3427b1d30643da8ff38cc4a30afe3a095', 'https://tickets.puppetlabs.com/browse/PUP-4636', 'https://github.com/puppetlabs/puppet/pull/3958'),
('puppet', 97629, 0, 0, 'Skip yum related acceptance tests on centos 4 since the provider is not suitable', 'Not sure if this is an issue with the vm template or an alternate command should be executed or the test should be skipped on el4/centos4:\r\n\r\n{noformat}\r\n# export SHA=1.2.4\r\n# export CONFIG=config/nodes/centos-4-x86_64.yaml\r\n# bundle exec rake ci:test:aio\r\n..\r\nBegin tests/resource/package/common_package_name_in_different_providers.rb\r\n\r\nticket 1073: common package name in two different providers should be allowed\r\n\r\nsb1nht6p15drgb1.delivery.puppetlabs.net (agent) 11:16:28$ rm -rf /tmp/rpmrepo\r\n\r\nsb1nht6p15drgb1.delivery.puppetlabs.net (agent) executed in 0.04 seconds\r\n\r\nsb1nht6p15drgb1.delivery.puppetlabs.net (agent) 11:16:28$ yum remove -y guid\r\nNo Match for argument: guid\r\nSetting up Remove Process\r\nNo Packages marked for removal\r\n\r\nsb1nht6p15drgb1.delivery.puppetlabs.net (agent) executed in 0.21 seconds\r\n\r\nsb1nht6p15drgb1.delivery.puppetlabs.net (agent) 11:16:29$ rm -f /etc/yum.repos.d/tstpub.lan.repo\r\n\r\nsb1nht6p15drgb1.delivery.puppetlabs.net (agent) executed in 0.04 seconds\r\n\r\nsb1nht6p15drgb1.delivery.puppetlabs.net (agent) 11:16:29$ yum list installed createrepo\r\n\r\nsb1nht6p15drgb1.delivery.puppetlabs.net (agent) executed in 0.18 seconds\r\n\r\nsb1nht6p15drgb1.delivery.puppetlabs.net (agent) 11:16:29$ yum list installed rpm-build\r\n\r\nsb1nht6p15drgb1.delivery.puppetlabs.net (agent) executed in 0.19 seconds\r\n\r\nsb1nht6p15drgb1.delivery.puppetlabs.net (agent) 11:16:29$ mkdir -p /tmp/rpmrepo/{RPMS,SRPMS,BUILD,SOURCES,SPECS}\r\n\r\nsb1nht6p15drgb1.delivery.puppetlabs.net (agent) executed in 0.04 seconds\r\n\r\nsb1nht6p15drgb1.delivery.puppetlabs.net (agent) 11:16:29$ echo "%_topdir /tmp/rpmrepo" > ~/.rpmmacros\r\n\r\nsb1nht6p15drgb1.delivery.puppetlabs.net (agent) executed in 0.04 seconds\r\n\r\nsb1nht6p15drgb1.delivery.puppetlabs.net (agent) 11:16:29$ createrepo /tmp/rpmrepo\r\nbash: createrepo: command not found\r\n\r\nBegin tests/resource/package/yum.rb\r\n\r\ntest the yum package provider\r\n\r\n  * Setup repo and package\r\n\r\nsb1nht6p15drgb1.delivery.puppetlabs.net (agent) 11:16:31$ rm -rf /tmp/rpmrepo\r\n\r\nsb1nht6p15drgb1.delivery.puppetlabs.net (agent) executed in 0.04 seconds\r\n\r\nsb1nht6p15drgb1.delivery.puppetlabs.net (agent) 11:16:31$ yum remove -y guid\r\nNo Match for argument: guid\r\nSetting up Remove Process\r\nNo Packages marked for removal\r\n\r\nsb1nht6p15drgb1.delivery.puppetlabs.net (agent) executed in 0.19 seconds\r\n\r\nsb1nht6p15drgb1.delivery.puppetlabs.net (agent) 11:16:31$ rm -f /etc/yum.repos.d/tstpub.lan.repo\r\n\r\nsb1nht6p15drgb1.delivery.puppetlabs.net (agent) executed in 0.04 seconds\r\n\r\nsb1nht6p15drgb1.delivery.puppetlabs.net (agent) 11:16:31$ yum list installed createrepo\r\n\r\nsb1nht6p15drgb1.delivery.puppetlabs.net (agent) executed in 0.19 seconds\r\n\r\nsb1nht6p15drgb1.delivery.puppetlabs.net (agent) 11:16:31$ yum list installed rpm-build\r\n\r\nsb1nht6p15drgb1.delivery.puppetlabs.net (agent) executed in 0.19 seconds\r\n\r\nsb1nht6p15drgb1.delivery.puppetlabs.net (agent) 11:16:31$ mkdir -p /tmp/rpmrepo/{RPMS,SRPMS,BUILD,SOURCES,SPECS}\r\n\r\nsb1nht6p15drgb1.delivery.puppetlabs.net (agent) executed in 0.04 seconds\r\n\r\nsb1nht6p15drgb1.delivery.puppetlabs.net (agent) 11:16:31$ echo "%_topdir /tmp/rpmrepo" > ~/.rpmmacros\r\n\r\nsb1nht6p15drgb1.delivery.puppetlabs.net (agent) executed in 0.04 seconds\r\n\r\nsb1nht6p15drgb1.delivery.puppetlabs.net (agent) 11:16:31$ createrepo /tmp/rpmrepo\r\nbash: createrepo: command not found\r\n{noformat}', 'https://tickets.puppetlabs.com/browse/PUP-5227', '', '2015-09-11T11:57:36.000-0700', '2015-10-29T16:51:11.000-0700', '2015-10-29T16:51:11.000-0700', 'Closed', '', 4, '0', 0, 0, 0, 0, 'a7bf44b64ba8e56eb981c6b0044e3fc90549c437', 'https://tickets.puppetlabs.com/browse/PUP-5227', 'https://github.com/puppetlabs/puppet/commit/a7bf44b64ba8e56eb981c6b0044e3fc90549c437'),
('puppet', 99077, 46578119, 4312, 'Puppet cert generate leaves ca_key as 644 on first run', 'On the first run of `puppet cert generate`, if a ca is not already set up, puppet will generate a ca_key, but will leave it as world readable, which isn"t good. Subsequent puppet cert calls will manage the permissions of the file correctly as 640, but the key will be world readable for an indeterminate amount of time. You can see it in action below:\r\n\r\n{code}\r\nroot@klga76ahkykjzad:~# rm -rf /etc/puppetlabs/puppet/ssl/\r\nroot@klga76ahkykjzad:~# /opt/puppetlabs/bin/puppet cert generate foo\r\nNotice: Signed certificate request for ca\r\nls -la /etc/puppetlabs/puppet/ssl/caNotice: foo has a waiting certificate request\r\nNotice: Signed certificate request for foo\r\nNotice: Removing file Puppet::SSL::CertificateRequest foo at "/etc/puppetlabs/puppet/ssl/ca/requests/foo.pem"\r\nNotice: Removing file Puppet::SSL::CertificateRequest foo at "/etc/puppetlabs/puppet/ssl/certificate_requests/foo.pem"\r\nroot@klga76ahkykjzad:~# ls -la /etc/puppetlabs/puppet/ssl/ca/\r\ntotal 44\r\ndrwxr-xr-x 5 root root 4096 Sep 22 15:14 .\r\ndrwxrwx--x 8 root root 4096 Sep 22 15:14 ..\r\n-rw-r--r-- 1 root root  995 Sep 22 15:14 ca_crl.pem\r\n-rw-r--r-- 1 root root 2057 Sep 22 15:14 ca_crt.pem\r\n-rw-r--r-- 1 root root 3247 Sep 22 15:14 ca_key.pem\r\n-rw-r--r-- 1 root root  800 Sep 22 15:14 ca_pub.pem\r\n-rw-r--r-- 1 root root  169 Sep 22 15:14 inventory.txt\r\ndrwxr-x--- 2 root root 4096 Sep 22 15:14 private\r\ndrwxr-xr-x 2 root root 4096 Sep 22 15:14 requests\r\n-rw-r--r-- 1 root root    4 Sep 22 15:14 serial\r\ndrwxr-xr-x 2 root root 4096 Sep 22 15:14 signed\r\nroot@klga76ahkykjzad:~# /opt/puppetlabs/bin/puppet cert help\r\nError: Invalid method help to apply\r\nroot@klga76ahkykjzad:~# ls -la /etc/puppetlabs/puppet/ssl/ca/\r\ntotal 44\r\ndrwxr-xr-x 5 root root 4096 Sep 22 15:14 .\r\ndrwxrwx--x 8 root root 4096 Sep 22 15:14 ..\r\n-rw-r--r-- 1 root root  995 Sep 22 15:14 ca_crl.pem\r\n-rw-r--r-- 1 root root 2057 Sep 22 15:14 ca_crt.pem\r\n-rw-r----- 1 root root 3247 Sep 22 15:14 ca_key.pem\r\n-rw-r--r-- 1 root root  800 Sep 22 15:14 ca_pub.pem\r\n-rw-r--r-- 1 root root  169 Sep 22 15:14 inventory.txt\r\ndrwxr-x--- 2 root root 4096 Sep 22 15:14 private\r\ndrwxr-xr-x 2 root root 4096 Sep 22 15:14 requests\r\n-rw-r--r-- 1 root root    4 Sep 22 15:14 serial\r\ndrwxr-xr-x 2 root root 4096 Sep 22 15:14 signed\r\n{code}', 'https://tickets.puppetlabs.com/browse/PUP-5274', 'https://github.com/puppetlabs/puppet/pull/4312', '2015-09-22T15:17:02.000-0700', '2015-10-29T16:51:11.000-0700', '2015-10-29T16:51:11.000-0700', 'Closed', 'product-security', 10, '0', 2, 100, 9, 4, 'cd03f6fc23145a43431f01514a2afd26581ba6af', 'https://tickets.puppetlabs.com/browse/PUP-5274', 'https://github.com/puppetlabs/puppet/pull/4312'),
('puppet', 101230, 47637606, 4339, 'Puppet filter function does not behave consistently across all supported argument types.', 'The overload of the {{filter}} function that takes a {{Hash}} behaves differently from the other overloads that take an "enumerable" type.\r\n\r\nFor example:\r\n{code}\r\nnotice({a => 1, b => 2, c => 3}.filter |$k, $v| { $v })\r\n{code}\r\n\r\nWill output\r\n{code}\r\n{a => 1, b=> 2, c => 3}\r\n{code}\r\n\r\nHowever:\r\n{code}\r\nnotice([1, 2, 3].filter |$v| { $v })\r\n{code}\r\n\r\nWill output:\r\n{code}\r\n[]\r\n{code}\r\n\r\nThe first example returns an {{Integer}} and results in not filtering the element.  The second example also returns an {{Integer}}, but this results in filtering the element.\r\n\r\nOne of these behaviors is incorrect and should be made consistent.\r\n\r\nCause of bug:\r\n\r\nIn the {{filter}} function"s implementation, the {{Hash}} overload uses {{hash#select}} and returns the result of yielding to the lambda, which Ruby treats as true if the value is _truthy_.  The enumerable overload instead has a direct comparison of the lambda"s return value to {{true}}.', 'https://tickets.puppetlabs.com/browse/PUP-5350', 'https://github.com/puppetlabs/puppet/pull/4339', '2015-10-09T15:18:41.000-0700', '2015-10-29T16:51:11.000-0700', '2015-10-29T16:51:11.000-0700', 'Closed', '', 8, '0', 1, 20, 2, 2, 'e6b396559021643c0d7164691788bbd562f99c9c', 'https://tickets.puppetlabs.com/browse/PUP-5350', 'https://github.com/puppetlabs/puppet/pull/4339'),
('puppet', 99700, 46262740, 4303, 'Puppet::Error raised by an indirector save method is silent', 'When the PuppetDB raises a Puppet::Error during catalog save (for example here: https://github.com/puppetlabs/puppetdb/blob/3.1.1/puppet/lib/puppet/indirector/catalog/puppetdb.rb#L326) it is silently dropped by the apply application here: https://github.com/puppetlabs/puppet/blob/4.2.2/lib/puppet/application/apply.rb#L257-L260\r\n\r\nThis leads to a silent exit where no clue what the error is is given to the user.\r\n\r\nI think a decent solution would be to add an exception handler to the indirector caching that logs exceptions (and doesn"t abort if they happen as caching failure shouldn"t be critical). That would be here: https://github.com/puppetlabs/puppet/blob/4.2.2/lib/puppet/indirector/indirection.rb#L199', 'https://tickets.puppetlabs.com/browse/PUP-5290', 'https://github.com/puppetlabs/puppet/pull/4303', '2015-09-29T02:43:03.000-0700', '2015-10-29T16:51:12.000-0700', '2015-10-29T16:51:12.000-0700', 'Closed', '', 1, '0', 1, 17, 1, 2, '489a279e055859379c609233af043183b8f2c6d5', 'https://tickets.puppetlabs.com/browse/PUP-5290', 'https://github.com/puppetlabs/puppet/pull/4303'),
('puppet', 100605, 47739813, 4346, 'password-disclosure-when-changing-a-users-password fails on AIX', 'Puppet acceptance test Case {{tests/ticket_6857_password-disclosure-when-changing-a-users-password.rb}} fails with the following:\r\n\r\n{code}\r\nTest Case tests/ticket_6857_password-disclosure-when-changing-a-users-password.rb reported: #<Minitest::Assertion: Expected /current_value \[old password hash redacted\], should be \[new password hash redacted\]/ to match "pe-aix-53-acceptance: \e[mNotice: Compiled catalog for pe-aix-53-acceptance.delivery.puppetlabs.net in environment production in 0.42 seconds\e[0m\n\e[0;32mInfo: Applying configuration version "1443972467"\e[0m\n\e[mNotice: /Stage[main]/Main/User[passwordtestuser]/ensure: current_value absent, should be present (noop)\e[0m\n\e[mNotice: Class[Main]: Would have triggered "refresh" from 1 events\e[0m\n\e[mNotice: Stage[main]: Would have triggered "refresh" from 1 events\e[0m\n\e[mNotice: Applied catalog in 0.16 seconds\e[0m\n".>\r\n{code}', 'https://tickets.puppetlabs.com/browse/PUP-5310', 'https://github.com/puppetlabs/puppet/pull/4346', '2015-10-05T07:00:59.000-0700', '2015-10-29T16:51:12.000-0700', '2015-10-29T16:51:12.000-0700', 'Closed', '', 6, '0', 1, 12, 2, 1, 'bbb71cbe128e53731e72abf3b121a465691aee0f', 'https://tickets.puppetlabs.com/browse/PUP-5310', 'https://github.com/puppetlabs/puppet/pull/4346'),
('puppet', 99030, 45981743, 4289, 'tests/resource/file/source_attribute.rb susceptible to timing failures', 'The `tests/resource/file/source_attribute.rb` has been shown to intermittently fail in CI due to the duration of execution of the test. If the validation step takes too long to execute, it will fail due to the mtime attribute changing.', 'https://tickets.puppetlabs.com/browse/PUP-5272', 'https://github.com/puppetlabs/puppet/pull/4289', '2015-09-22T10:53:22.000-0700', '2015-10-29T16:51:12.000-0700', '2015-10-29T16:51:12.000-0700', 'Closed', '', 8, '0', 1, 37, 2, 2, 'bac7674740c1b65a9221b862c8c4d6d4d0c69e60', 'https://tickets.puppetlabs.com/browse/PUP-5272', 'https://github.com/puppetlabs/puppet/pull/4289'),
('puppet', 103407, 49116729, 4387, 'Yum package provider: ensure => latest fails when security packages are present', 'When the yum provider has packages marked as security, the yum provider fails to ensure => latest on a package. This is almost like https://tickets.puppetlabs.com/browse/PUP-4497 and this fix should be almost the same.\r\n\r\nOutput of `yum check-update` ends with:\r\n```\r\nSecurity: kernel-3.10.0-229.14.1.el7.x86_64 is an installed security update\r\nSecurity: kernel-3.10.0-229.4.2.el7.x86_64 is the currently running version\r\n```', 'https://tickets.puppetlabs.com/browse/PUP-5453', 'https://github.com/puppetlabs/puppet/pull/4387', '2015-10-29T02:40:07.000-0700', '2015-11-02T11:39:45.000-0800', '2015-11-02T11:39:45.000-0800', 'Closed', '', 1, '0', 3, 104, 1, 3, '', 'https://tickets.puppetlabs.com/browse/PUP-5453', 'https://github.com/puppetlabs/puppet/pull/4387'),
('puppet', 102126, 48296135, 4364, 'Fix regression that reintroduced file watching for directory environments', 'The fix for PUP-3389 introduced a regression that resulted in all manifests being watched for directory environments. This has the effect that directory environments will be evicted when the filetimeout triggers (default 15s). The settings "infinite" therefore does not have the intended effect. \r\n\r\nThis also causes performance issues since it means using very inefficient file watching that results in potentially millions of kernel calls to stat files.\r\n\r\n', 'https://tickets.puppetlabs.com/browse/PUP-5398', 'https://github.com/puppetlabs/puppet/pull/4364', '2015-10-20T07:49:19.000-0700', '2015-11-03T18:24:35.000-0800', '2015-11-03T18:24:35.000-0800', 'Closed', '', 4, '0', 1, 3, 1, 1, 'e6cd7b67882ededf555190644d5a43bb2e3e82f8', 'https://tickets.puppetlabs.com/browse/PUP-5398', 'https://github.com/puppetlabs/puppet/pull/4364'),
('puppet', 91125, 47966821, 4355, 'filebucket fails when environment is specified', 'If the agent"s `puppet.conf` specifies an environment, then filebucketing fails with an inscrutable error and the run is marked as failed in the Console.\r\n\r\n{code}\r\nroot@binford2k:~ # cat /etc/puppetlabs/puppet/puppet.conf\r\n# This file can be used to override the default puppet settings.\r\n# See the following links for more details on what settings are available:\r\n# - https://docs.puppetlabs.com/puppet/latest/reference/config_important_settings.html\r\n# - https://docs.puppetlabs.com/puppet/latest/reference/config_about_settings.html\r\n# - https://docs.puppetlabs.com/puppet/latest/reference/config_file_main.html\r\n# - https://docs.puppetlabs.com/references/latest/configuration.html\r\n[main]\r\nserver = master.puppetlabs.vm\r\nenvironment_timeout = 0\r\nenvironmentpath = /etc/puppetlabs/code/environments\r\n[agent]\r\ncertname = binford2k.puppetlabs.vm\r\nenvironment = binford2k\r\nroot@binford2k:~ # puppet agent -t\r\nInfo: Retrieving pluginfacts\r\nInfo: Retrieving plugin\r\nInfo: Loading facts\r\nInfo: Caching catalog for binford2k.puppetlabs.vm\r\nInfo: Applying configuration version "1438197631"\r\nNotice: Hello binford2k.puppetlabs.vm\r\nNotice: /Stage[main]/Main/Node[default]/Notify[Hello binford2k.puppetlabs.vm]/message: defined "message" as "Hello binford2k.puppetlabs.vm"\r\nNotice: /Stage[main]/Userprefs::Bash/File[/root/.bashrc.puppet]/content:\r\n--- /root/.bashrc.puppet	2015-07-29 19:20:26.719816423 +0000\r\n+++ /tmp/puppet-file20150729-52505-17roz3n	2015-07-29 19:20:34.453201837 +0000\r\n@@ -1,5 +1,3 @@\r\n-#boogers\r\n-\r\n # NOTE: This file is managed by Puppet; any changes you make will be erased.\r\n\r\n parse_git_branch ()\r\n\r\nInfo: Computing checksum on file /root/.bashrc.puppet\r\nError: Could not back up /root/.bashrc.puppet: Could not find a directory environment named "binford2k" anywhere in the path: /etc/puppetlabs/code/environments. Does the directory exist?\r\nError: Could not back up /root/.bashrc.puppet: Could not find a directory environment named "binford2k" anywhere in the path: /etc/puppetlabs/code/environments. Does the directory exist?\r\nError: /Stage[main]/Userprefs::Bash/File[/root/.bashrc.puppet]/content: change from {md5}1df06bcfcafd1511cccea89849c37102 to {md5}c81901d08fb7e2c27fff6ca1e450e99e failed: Could not back up /root/.bashrc.puppet: Could not find a directory environment named "binford2k" anywhere in the path: /etc/puppetlabs/code/environments. Does the directory exist?\r\nInfo: Stage[main]: Unscheduling all events on Stage[main]\r\nNotice: Applied catalog in 1.35 seconds\r\n{code}\r\n\r\nThe environment exists and *the file does not get updated*.', 'https://tickets.puppetlabs.com/browse/PUP-4954', 'https://github.com/puppetlabs/puppet/pull/4355', '2015-07-29T12:29:35.000-0700', '2015-11-06T13:30:26.000-0800', '2015-11-06T13:30:26.000-0800', 'Closed', '', 11, '0', 1, 14, 5, 2, '', 'https://tickets.puppetlabs.com/browse/PUP-4954', 'https://github.com/puppetlabs/puppet/pull/4355'),
('puppet', 74954, 37176145, 4010, 'Windows Group resource reports errors incorrectly when specifying an invalid group member', 'Because of the bug described in PUP-1542, extraneous messages may be output from Puppet when error message generation for an event fails in the resource harness sync_if_needed method.\r\n\r\nThere are 2 issues specifically in the Windows group code:\r\n\r\n* {{members_to_s}} expects a string, but is passed an array when trying to create the message, which is an easily correctable issue\r\n* {{members_to_s}} tries to resolve bad usernames to sid objects, then tries to access the {{account}} member of {{nil}} sid object\r\n\r\nInitially spiked a solution for both of these issues in: https://github.com/Iristyle/puppet/commit/a6393b07772146101ae1894381e96cea25f05ed2\r\n\r\nSimple repo example.  Assume that the current system has:\r\n\r\n{code}\r\nbundle exec puppet resource group guests\r\n\r\ngroup { "guests":\r\n  ensure  => "present",\r\n  gid     => "S-1-5-32-546",\r\n  members => ["Guest", "Administrator"],\r\n}\r\n{code}\r\n\r\nTrying to apply the following manifest with a bad user:\r\n\r\n{code}\r\ngroup { "guests":\r\n  ensure => present,\r\n  members => ["Guest", "Administrator", ""],\r\n}\r\n\r\n# generates\r\n\r\nNotice: Compiled catalog for vagrant-2008r2.corp.puppetlabs.net in environment production in 0.22 seconds Error: Could not resolve username:\r\nError: /Group[Guests]: Could not evaluate: Puppet::Util::Log requires a message\r\nNotice: Finished catalog run in 0.05 seconds\r\n{code}\r\n\r\n\r\nThis spiked change does not lose error detail, nor trigger an extraneous /\r\nmisleading message:\r\n\r\n{code}\r\nNotice: Compiled catalog for vagrant-2008r2.corp.puppetlabs.net in environment production in 0.22 seconds Error: Could not resolve username:\r\nError: /Stage[main]/Main/Group[Guests]/members: change from VAGRANT-2008R2\Guest,VAGRANT-2008R2\Administrator to ["Guest", "Administrator", ""] failed: Could not resolve username:\r\nNotice: Finished catalog run in 0.05 seconds\r\n{code}', 'https://tickets.puppetlabs.com/browse/PUP-4386', 'https://github.com/puppetlabs/puppet/pull/4010', '2015-04-07T15:13:42.000-0700', '2015-11-11T19:39:17.000-0800', '2015-11-11T19:39:17.000-0800', 'Closed', 'windows', 6, '0', 1, 13, 1, 3, '20d416060b8ee6109523642ee5cd7608e4b32319', 'https://tickets.puppetlabs.com/browse/PUP-4386', 'https://github.com/puppetlabs/puppet/pull/4010'),
('puppet', 25948, 32257663, 3769, 'Add mount provider for AIX', 'Puppet does not provides a correct provider for the mount type on AIX.\r\n\r\nA new provider must be created.\r\n\r\nMountpoints in AIX are managed by the commands: crfs, lsfs, rmfs, chfs (http://publib.boulder.ibm.com/infocenter/aix/v6r1/index.jsp?topic=/com.ibm.aix.cmds/doc/aixcmds1/crfs.htm). For nfs mountpoints the commands mknfsmnt, chnfsmnt, rmnfsmnt and chnfsmnt are provided, but they can partially be managed with former commands.\r\n\r\nThe commands update the file /etc/filesystems that has following syntax:\r\n\r\n    /usr:\r\n       dev             = /dev/hd2\r\n       vfs             = jfs2\r\n       log             = /dev/hd8\r\n       mount           = automatic\r\n       check           = false\r\n       type            = bootfs\r\n       vol             = /usr\r\n       free            = false\r\n\r\n    /var:\r\n       dev             = /dev/hd9var\r\n       vfs             = jfs2\r\n       log             = /dev/hd8\r\n       mount           = automatic\r\n       check           = false\r\n       type            = bootfs\r\n       vol             = /var\r\n       free            = false\r\n\r\n**IMPORTANT**: crfs (create) and rmfs (remove), if it is a local filesystem,  will create and format (using jfs/jfs2) the needed Logical Volume, or directly remove the Logical Volume losing data.   \r\n\r\nTwo approaches:\r\n 1. Use command line tools and operate as expected by AIX commands: Operate on the LV. In that case type should be extended with new parameters (Volume Group, LV name, size...)\r\n 2. Modify directly /etc/filesystems files, and manage the Logical Volumes using a LVM type (as in other OS)\r\n\r\n\r\nrisk: medium (manual validate)\r\nprobability: medium (aix)\r\nseverity: medium (can"t manage aix mounts)\r\ntest layer (no acceptance setup for aix)\r\n', 'https://tickets.puppetlabs.com/browse/PUP-1628', 'https://github.com/puppetlabs/puppet/pull/3769', '2014-02-10T06:09:33.000-0800', '2015-11-12T11:35:38.000-0800', '2015-11-12T11:35:38.000-0800', 'Closed', 'aix;customer;redmine', 16, '0', 1, 294, 102, 5, 'f1a9904f0b8265b67b2b889b220ff7295f7bd270', 'https://tickets.puppetlabs.com/browse/PUP-1628', 'https://github.com/puppetlabs/puppet/pull/3769'),
('puppet', 14438, 194967868, 6884, 'Windows agents don"t run on non-EN US systems', 'This is an issue in win32-dir gem, which apparently is not fixed.', 'https://tickets.puppetlabs.com/browse/PUP-316', 'https://github.com/puppetlabs/puppet/pull/6884', '2013-09-11T10:19:48.000-0700', '2015-11-12T11:35:39.000-0800', '2015-11-12T11:35:39.000-0800', 'Resolved', 'windows', 5, '0', 2, 151, 24, 3, '2a284f13c2865b94483ef669ffd16c87f90185fa', 'https://tickets.puppetlabs.com/browse/PUP-316', 'https://github.com/puppetlabs/puppet/pull/6884'),
('puppet', 31031, 14528953, 2520, 'yumrepo resource completely broken with 3.5 release', '1. Any attribute that can take "absent" as a value, either complains about it being invalid or puts the actual text value "absent" in to the produced repo file.\r\n\r\nhttp://docs.puppetlabs.com/references/latest/type.html#yumrepo\r\n\r\nfor example:\r\nexclude => absent\r\n\r\nends up looking like \r\nexclude=absent\r\n\r\nin the .repo file.\r\n\r\n2. yumrepo resource title should become the repo id, and the attribute name should become the name value in the .repo file. If you manage to produce a repo file by not specifying any attribute with absent you will be greeted by this error when running yum..\r\n\r\n{code}\r\nRepository "local-base" is missing name in configuration, using id\r\nRepository "local-centosplus" is missing name in configuration, using id\r\nRepository "local-extras" is missing name in configuration, using id\r\nRepository "local-updates" is missing name in configuration, using id\r\n{code}\r\n\r\n3. When using ensure => absent on an existing repository id of say "base" for centos/rhel it removes the entire CentOS-Base.repo file which contains more than just the base repo. It should edit the repo in place.\r\n\r\n4. The name attribute becomes the repo filename, where as the title (repository id) attribute should really be used as the file name. Because usually repository name"s are long winded and contain lots of spaces..\r\n\r\nAs it stands I"ll have to rollback our puppet clients and servers to the previous release until this is fixed/sane.', 'https://tickets.puppetlabs.com/browse/PUP-2163', 'https://github.com/puppetlabs/puppet/pull/2520', '2014-04-04T10:30:13.000-0700', '2015-11-12T11:35:39.000-0800', '2015-11-12T11:35:39.000-0800', 'Closed', 'yumrepo', 13, '0', 14, 1089, 187, 6, '52421e10236d0bea639828f17faedf927853d99f', 'https://tickets.puppetlabs.com/browse/PUP-2163', 'https://github.com/puppetlabs/puppet/pull/2520'),
('puppet', 69560, 37036733, 4008, 'Acceptance suite and install.rb use incorrect paths on Windows for codedir', 'According to https://github.com/puppetlabs/puppet-specifications/blob/master/file_paths.md#puppet-agent-windows, {{:codedir}} is at {{C:\ProgramData\PuppetLabs\code}}. The install.rb in Puppet sets it to {{C:\ProgramData\PuppetLabs\puppet\code}}, which is incorrect.\r\n\r\nAdditionally, the existing YAML files being used for acceptance that feature these paths should be modified:\r\nhttps://github.com/puppetlabs/puppet/blob/master/acceptance/config/nodes/win2012r2-rubyx64.yaml\r\nhttps://github.com/puppetlabs/puppet/blob/master/acceptance/config/nodes/win2012r2-rubyx86.yaml', 'https://tickets.puppetlabs.com/browse/PUP-4050', 'https://github.com/puppetlabs/puppet/pull/4008', '2015-02-26T12:06:23.000-0800', '2015-11-13T10:45:02.000-0800', '2015-11-13T10:45:02.000-0800', 'Closed', 'AIO', 11, '0', 4, 30, 0, 1, '5d41bbf7dbc19d93b17ef7f73a7bf79188f6769a', 'https://tickets.puppetlabs.com/browse/PUP-4050', 'https://github.com/puppetlabs/puppet/pull/4008'),
('puppet', 100611, 47205017, 4328, 'Fix acceptance tests for AIX', 'The following 21 puppet acceptance tests error out as indicated below. Most of these errors are the result of shell commands that are incompatible AIX.\r\n\r\nList of tests\r\n{code}\r\ntests/allow_symlinks_as_config_directories.rb\r\ntests/ticket_9862_puppet_runs_without_service_user_or_group_present.rb\r\ntests/aix/nim_package_provider.rb\r\ntests/config/apply_file_metadata_specified_in_config.rb\r\ntests/environment/can_enumerate_environments.rb\r\ntests/security/cve-2013-1652_improper_query_params.rb\r\ntests/security/cve-2013-4761_resource_type.rb\r\ntests/modules/install/basic_install.rb\r\ntests/modules/install/with_version.rb\r\ntests/resource/file/symbolic_modes.rb\r\ntests/resource/group/should_not_create_existing.rb\r\ntests/resource/mount/defined.rb\r\ntests/resource/mount/destroy.rb\r\ntests/resource/mount/modify.rb\r\ntests/resource/mount/mounted.rb\r\ntests/resource/package/common_package_name_in_different_providers.rb\r\ntests/resource/package/yum.rb\r\ntests/resource/service/puppet_mcollective_service_management.rb\r\ntests/resource/user/should_create.rb\r\ntests/resource/user/should_modify_gid.rb\r\ntests/resource/user/should_not_create_existing.rb\r\n{code}\r\n\r\nError results\r\n{code}\r\nErrored Tests Cases:\r\n                Test Case tests/allow_symlinks_as_config_directories.rb reported: #<Beaker::Host::CommandFailure: Host "pe-aix-53-acceptance" exited with 2 running:\r\n               [ $(readlink /tmp/puppet_conf-symlink.6430) = /tmp/puppet_conf-directory.29613 ]\r\n              Last 10 lines of output were:\r\n              	bash: readlink: command not found\r\n              	bash: line 0: [: =: unary operator expected>\r\n                Test Case tests/ticket_9862_puppet_runs_without_service_user_or_group_present.rb reported: #<Beaker::Host::CommandFailure: Host "pe-aix-53-acceptance" exited with 127 running:\r\n               stat --format "%U:%G:%a" /tmp/ticket_9862_puppet_runs_without_service_user_or_group_present.2081/log\r\n              Last 10 lines of output were:\r\n              	bash: stat: command not found>\r\n                Test Case tests/aix/nim_package_provider.rb reported: #<Beaker::Host::CommandFailure: Host "pe-aix-53-acceptance" exited with 0 running:\r\n               puppet apply --detailed-exitcodes --verbose\r\n              Last 10 lines of output were:\r\n              	Notice: Compiled catalog for pe-aix-53-acceptance.delivery.puppetlabs.net in environment production in 1.52 seconds\r\n              	Info: Applying configuration version "1443972955"\r\n              	Notice: Applied catalog in 0.17 seconds>\r\n                Test Case tests/config/apply_file_metadata_specified_in_config.rb reported: #<Beaker::Host::CommandFailure: Host "pe-aix-53-acceptance" exited with 127 running:\r\n               stat --format "%U:%G:%a" /tmp/apply_file_metadata_specified_in_config.2046/log\r\n              Last 10 lines of output were:\r\n              	bash: stat: command not found>\r\n                Test Case tests/environment/can_enumerate_environments.rb reported: #<RuntimeError: PuppetAcceptance::DSL::Helpers.with_puppet_running_on failed (check backtrace for location) because: Host "pe-aix-53-acceptance" exited with 2 running:\r\n               curl --tlsv1 -ksv https://oxgwrmrqdurja2p.delivery.puppetlabs.net:8140/puppet/v3/environments\r\n              Last 10 lines of output were:\r\n              	curl: option -ksv is unknown\r\n              	curl: try "curl --help" for more information\r\n              /var/lib/jenkins/workspace/platform_aio-suite_intn-sys_adhoc-puppet/SLAVE_LABEL/beaker/TEST_TARGET/aix-53-power/puppet/acceptance/.bundle/gems/gems/beaker-2.25.0/lib/beaker/host.rb:309:in `exec"\r\n              /var/lib/jenkins/workspace/platform_aio-suite_intn-sys_adhoc-puppet/SLAVE_LABEL/beaker/TEST_TARGET/aix-53-power/puppet/acceptance/.bundle/gems/gems/beaker-2.25.0/lib/beaker/dsl/helpers/host_helpers.rb:73:in `block in on"\r\n              /var/lib/jenkins/workspace/platform_aio-suite_intn-sys_adhoc-puppet/SLAVE_LABEL/beaker/TEST_TARGET/aix-53-power/puppet/acceptance/.bundle/gems/gems/beaker-2.25.0/lib/beaker/shared/host_manager.rb:105:in `run_block_on"\r\n              /var/lib/jenkins/workspace/platform_aio-suite_intn-sys_adhoc-puppet/SLAVE_LABEL/beaker/TEST_TARGET/aix-53-power/puppet/acceptance/.bundle/gems/gems/beaker-2.25.0/lib/beaker/dsl/patterns.rb:32:in `block_on"\r\n              /var/lib/jenkins/workspace/platform_aio-suite_intn-sys_adhoc-puppet/SLAVE_LABEL/beaker/TEST_TARGET/aix-53-power/puppet/acceptance/.bundle/gems/gems/beaker-2.25.0/lib/beaker/dsl/helpers/host_helpers.rb:63:in `on"\r\n              tests/environment/can_enumerate_environments.rb:59:in `block (4 levels) in run_test"\r\n              /var/lib/jenkins/workspace/platform_aio-suite_intn-sys_adhoc-puppet/SLAVE_LABEL/beaker/TEST_TARGET/aix-53-power/puppet/acceptance/.bundle/gems/gems/beaker-2.25.0/lib/beaker/dsl/structure.rb:43:in `step"\r\n              tests/environment/can_enumerate_environments.rb:58:in `block (3 levels) in run_test"\r\n              tests/environment/can_enumerate_environments.rb:57:in `each"\r\n              tests/environment/can_enumerate_environments.rb:57:in `block (2 levels) in run_test"\r\n              /var/lib/jenkins/workspace/platform_aio-suite_intn-sys_adhoc-puppet/SLAVE_LABEL/beaker/TEST_TARGET/aix-53-power/puppet/acceptance/.bundle/gems/gems/beaker-2.25.0/lib/beaker/dsl/helpers/puppet_helpers.rb:171:in `with_puppet_running_on"\r\n              tests/environment/can_enumerate_environments.rb:56:in `block in run_test"\r\n              /var/lib/jenkins/workspace/platform_aio-suite_intn-sys_adhoc-puppet/SLAVE_LABEL/beaker/TEST_TARGET/aix-53-power/puppet/acceptance/.bundle/gems/gems/beaker-2.25.0/lib/beaker/test_case.rb:128:in `eval"\r\n              /var/lib/jenkins/workspace/platform_aio-suite_intn-sys_adhoc-puppet/SLAVE_LABEL/beaker/TEST_TARGET/aix-53-power/puppet/acceptance/.bundle/gems/gems/beaker-2.25.0/lib/beaker/test_case.rb:128:in `block in run_test"\r\n              /usr/local/rvm/rubies/ruby-1.9.3-p484/lib/ruby/1.9.1/benchmark.rb:295:in `realtime"\r\n              /var/lib/jenkins/workspace/platform_aio-suite_intn-sys_adhoc-puppet/SLAVE_LABEL/beaker/TEST_TARGET/aix-53-power/puppet/acceptance/.bundle/gems/gems/beaker-2.25.0/lib/beaker/test_case.rb:125:in `run_test"\r\n              /var/lib/jenkins/workspace/platform_aio-suite_intn-sys_adhoc-puppet/SLAVE_LABEL/beaker/TEST_TARGET/aix-53-power/puppet/acceptance/.bundle/gems/gems/beaker-2.25.0/lib/beaker/test_suite.rb:311:in `block in run"\r\n              /var/lib/jenkins/workspace/platform_aio-suite_intn-sys_adhoc-puppet/SLAVE_LABEL/beaker/TEST_TARGET/aix-53-power/puppet/acceptance/.bundle/gems/gems/beaker-2.25.0/lib/beaker/test_suite.rb:308:in `each"\r\n              /var/lib/jenkins/workspace/platform_aio-suite_intn-sys_adhoc-puppet/SLAVE_LABEL/beaker/TEST_TARGET/aix-53-power/puppet/acceptance/.bundle/gems/gems/beaker-2.25.0/lib/beaker/test_suite.rb:308:in `run"\r\n              /var/lib/jenkins/workspace/platform_aio-suite_intn-sys_adhoc-puppet/SLAVE_LABEL/beaker/TEST_TARGET/aix-53-power/puppet/acceptance/.bundle/gems/gems/beaker-2.25.0/lib/beaker/test_suite.rb:357:in `run_and_raise_on_failure"\r\n              /var/lib/jenkins/workspace/platform_aio-suite_intn-sys_adhoc-puppet/SLAVE_LABEL/beaker/TEST_TARGET/aix-53-power/puppet/acceptance/.bundle/gems/gems/beaker-2.25.0/lib/beaker/cli.rb:155:in `run_suite"\r\n              /var/lib/jenkins/workspace/platform_aio-suite_intn-sys_adhoc-puppet/SLAVE_LABEL/beaker/TEST_TARGET/aix-53-power/puppet/acceptance/.bundle/gems/gems/beaker-2.25.0/lib/beaker/cli.rb:97:in `execute!"\r\n              /var/lib/jenkins/workspace/platform_aio-suite_intn-sys_adhoc-puppet/SLAVE_LABEL/beaker/TEST_TARGET/aix-53-power/puppet/acceptance/.bundle/gems/gems/beaker-2.25.0/bin/beaker:6:in `<top (required)>"\r\n              /var/lib/jenkins/workspace/platform_aio-suite_intn-sys_adhoc-puppet/SLAVE_LABEL/beaker/TEST_TARGET/aix-53-power/puppet/acceptance/.bundle/gems/bin/beaker:23:in `load"\r\n              /var/lib/jenkins/workspace/platform_aio-suite_intn-sys_adhoc-puppet/SLAVE_LABEL/beaker/TEST_TARGET/aix-53-power/puppet/acceptance/.bundle/gems/bin/beaker:23:in `<main>"\r\n              >\r\n                Test Case tests/security/cve-2013-1652_improper_query_params.rb reported: #<RuntimeError: PuppetAcceptance::DSL::Helpers.with_puppet_running_on failed (check backtrace for location) because: Host "pe-aix-53-acceptance" exited with 2 running:\r\n               curl --tlsv1 -g --cert "/etc/puppetlabs/puppet/ssl/certs/pe-aix-53-acceptance.delivery.puppetlabs.net.pem" --key "/etc/puppetlabs/puppet/ssl/private_keys/pe-aix-53-acceptance.delivery.puppetlabs.net.pem" -k -H "Accept: pson" "https://oxgwrmrqdurja2p.delivery.puppetlabs.net:8140/puppet/v3/catalog/pe-aix-53-acceptance.delivery.puppetlabs.net?environment=production&use_node=---%20!ruby/object:Puppet::Node%0A%20%20name:%20oxgwrmrqdurja2p.delivery.puppetlabs.net%0A%20%20classes:%20[]%0A%20%20parameters:%20%7B%7D%0A%20%20facts:%20%7B%7D"\r\n              Last 10 lines of output were:\r\n              	curl: option -k is unknown\r\n              	curl: try "curl --help" for more information\r\n              /var/lib/jenkins/workspace/platform_aio-suite_intn-sys_adhoc-puppet/SLAVE_LABEL/beaker/TEST_TARGET/aix-53-power/puppet/acceptance/.bundle/gems/gems/beaker-2.25.0/lib/beaker/host.rb:309:in `exec"\r\n              /var/lib/jenkins/workspace/platform_aio-suite_intn-sys_adhoc-puppet/SLAVE_LABEL/beaker/TEST_TARGET/aix-53-power/puppet/acceptance/.bundle/gems/gems/beaker-2.25.0/lib/beaker/dsl/helpers/host_helpers.rb:73:in `block in on"\r\n              /var/lib/jenkins/workspace/platform_aio-suite_intn-sys_adhoc-puppet/SLAVE_LABEL/beaker/TEST_TARGET/aix-53-power/puppet/acceptance/.bundle/gems/gems/beaker-2.25.0/lib/beaker/shared/host_manager.rb:105:in `run_block_on"\r\n              /var/lib/jenkins/workspace/platform_aio-suite_intn-sys_adhoc-puppet/SLAVE_LABEL/beaker/TEST_TARGET/aix-53-power/puppet/acceptance/.bundle/gems/gems/beaker-2.25.0/lib/beaker/dsl/patterns.rb:32:in `block_on"\r\n              /var/lib/jenkins/workspace/platform_aio-suite_intn-sys_adhoc-puppet/SLAVE_LABEL/beaker/TEST_TARGET/aix-53-power/puppet/acceptance/.bundle/gems/gems/beaker-2.25.0/lib/beaker/dsl/helpers/host_helpers.rb:63:in `on"\r\n              tests/security/cve-2013-1652_improper_query_params.rb:29:in `block (5 levels) in run_test"\r\n              /var/lib/jenkins/workspace/platform_aio-suite_intn-sys_adhoc-puppet/SLAVE_LABEL/beaker/TEST_TARGET/aix-53-power/puppet/acceptance/.bundle/gems/gems/beaker-2.25.0/lib/beaker/dsl/structure.rb:43:in `step"\r\n              tests/security/cve-2013-1652_improper_query_params.rb:28:in `block (4 levels) in run_test"\r\n              tests/security/cve-2013-1652_improper_query_params.rb:11:in `each"\r\n              tests/security/cve-2013-1652_improper_query_params.rb:11:in `block (3 levels) in run_test"\r\n              /var/lib/jenkins/workspace/platform_aio-suite_intn-sys_adhoc-puppet/SLAVE_LABEL/beaker/TEST_TARGET/aix-53-power/puppet/acceptance/.bundle/gems/gems/beaker-2.25.0/lib/beaker/dsl/helpers/puppet_helpers.rb:171:in `with_puppet_running_on"\r\n              tests/security/cve-2013-1652_improper_query_params.rb:7:in `block (2 levels) in run_test"\r\n              /var/lib/jenkins/workspace/platform_aio-suite_intn-sys_adhoc-puppet/SLAVE_LABEL/beaker/TEST_TARGET/aix-53-power/puppet/acceptance/.bundle/gems/gems/beaker-2.25.0/lib/beaker/dsl/structure.rb:58:in `test_name"\r\n             tests/security/cve-2013-1652_improper_query_params.rb:3:in `block in run_test"\r\n              /var/lib/jenkins/workspace/platform_aio-suite_intn-sys_adhoc-puppet/SLAVE_LABEL/beaker/TEST_TARGET/aix-53-power/puppet/acceptance/.bundle/gems/gems/beaker-2.25.0/lib/beaker/test_case.rb:128:in `eval"\r\n              /var/lib/jenkins/workspace/platform_aio-suite_intn-sys_adhoc-puppet/SLAVE_LABEL/beaker/TEST_TARGET/aix-53-power/puppet/acceptance/.bundle/gems/gems/beaker-2.25.0/lib/beaker/test_case.rb:128:in `block in run_test"\r\n              /usr/local/rvm/rubies/ruby-1.9.3-p484/lib/ruby/1.9.1/benchmark.rb:295:in `realtime"\r\n              /var/lib/jenkins/workspace/platform_aio-suite_intn-sys_adhoc-puppet/SLAVE_LABEL/beaker/TEST_TARGET/aix-53-power/puppet/acceptance/.bundle/gems/gems/beaker-2.25.0/lib/beaker/test_case.rb:125:in `run_test"\r\n              /var/lib/jenkins/workspace/platform_aio-suite_intn-sys_adhoc-puppet/SLAVE_LABEL/beaker/TEST_TARGET/aix-53-power/puppet/acceptance/.bundle/gems/gems/beaker-2.25.0/lib/beaker/test_suite.rb:311:in `block in run"\r\n              /var/lib/jenkins/workspace/platform_aio-suite_intn-sys_adhoc-puppet/SLAVE_LABEL/beaker/TEST_TARGET/aix-53-power/puppet/acceptance/.bundle/gems/gems/beaker-2.25.0/lib/beaker/test_suite.rb:308:in `each"\r\n              /var/lib/jenkins/workspace/platform_aio-suite_intn-sys_adhoc-puppet/SLAVE_LABEL/beaker/TEST_TARGET/aix-53-power/puppet/acceptance/.bundle/gems/gems/beaker-2.25.0/lib/beaker/test_suite.rb:308:in `run"\r\n              /var/lib/jenkins/workspace/platform_aio-suite_intn-sys_adhoc-puppet/SLAVE_LABEL/beaker/TEST_TARGET/aix-53-power/puppet/acceptance/.bundle/gems/gems/beaker-2.25.0/lib/beaker/test_suite.rb:357:in `run_and_raise_on_failure"\r\n              /var/lib/jenkins/workspace/platform_aio-suite_intn-sys_adhoc-puppet/SLAVE_LABEL/beaker/TEST_TARGET/aix-53-power/puppet/acceptance/.bundle/gems/gems/beaker-2.25.0/lib/beaker/cli.rb:155:in `run_suite"\r\n              /var/lib/jenkins/workspace/platform_aio-suite_intn-sys_adhoc-puppet/SLAVE_LABEL/beaker/TEST_TARGET/aix-53-power/puppet/acceptance/.bundle/gems/gems/beaker-2.25.0/lib/beaker/cli.rb:97:in `execute!"\r\n              /var/lib/jenkins/workspace/platform_aio-suite_intn-sys_adhoc-puppet/SLAVE_LABEL/beaker/TEST_TARGET/aix-53-power/puppet/acceptance/.bundle/gems/gems/beaker-2.25.0/bin/beaker:6:in `<top (required)>"\r\n              /var/lib/jenkins/workspace/platform_aio-suite_intn-sys_adhoc-puppet/SLAVE_LABEL/beaker/TEST_TARGET/aix-53-power/puppet/acceptance/.bundle/gems/bin/beaker:23:in `load"\r\n              /var/lib/jenkins/workspace/platform_aio-suite_intn-sys_adhoc-puppet/SLAVE_LABEL/beaker/TEST_TARGET/aix-53-power/puppet/acceptance/.bundle/gems/bin/beaker:23:in `<main>"\r\n              >\r\n                Test Case tests/security/cve-2013-4761_resource_type.rb reported: #<RuntimeError: PuppetAcceptance::DSL::Helpers.with_puppet_running_on failed (check backtrace for location) because: Host "pe-aix-53-acceptance" exited with 2 running:\r\n               curl --tlsv1 -g --cert "/etc/puppetlabs/puppet/ssl/certs/pe-aix-53-acceptance.delivery.puppetlabs.net.pem" --key "/etc/puppetlabs/puppet/ssl/private_keys/pe-aix-53-acceptance.delivery.puppetlabs.net.pem" -k -H "Accept: pson" "https://oxgwrmrqdurja2p.delivery.puppetlabs.net:8140/puppet/v3/resource_type/::..::..::..::..::..::tmp::exploit?environment=production"\r\n              Last 10 lines of output were:\r\n              	curl: option -k is unknown\r\n              	curl: try "curl --help" for more information\r\n              /var/lib/jenkins/workspace/platform_aio-suite_intn-sys_adhoc-puppet/SLAVE_LABEL/beaker/TEST_TARGET/aix-53-power/puppet/acceptance/.bundle/gems/gems/beaker-2.25.0/lib/beaker/host.rb:309:in `exec"\r\n              /var/lib/jenkins/workspace/platform_aio-suite_intn-sys_adhoc-puppet/SLAVE_LABEL/beaker/TEST_TARGET/aix-53-power/puppet/acceptance/.bundle/gems/gems/beaker-2.25.0/lib/beaker/dsl/helpers/host_helpers.rb:73:in `block in on"\r\n              /var/lib/jenkins/workspace/platform_aio-suite_intn-sys_adhoc-puppet/SLAVE_LABEL/beaker/TEST_TARGET/aix-53-power/puppet/acceptance/.bundle/gems/gems/beaker-2.25.0/lib/beaker/shared/host_manager.rb:105:in `run_block_on"\r\n              /var/lib/jenkins/workspace/platform_aio-suite_intn-sys_adhoc-puppet/SLAVE_LABEL/beaker/TEST_TARGET/aix-53-power/puppet/acceptance/.bundle/gems/gems/beaker-2.25.0/lib/beaker/dsl/patterns.rb:32:in `block_on"\r\n              /var/lib/jenkins/workspace/platform_aio-suite_intn-sys_adhoc-puppet/SLAVE_LABEL/beaker/TEST_TARGET/aix-53-power/puppet/acceptance/.bundle/gems/gems/beaker-2.25.0/lib/beaker/dsl/helpers/host_helpers.rb:63:in `on"\r\n              tests/security/cve-2013-4761_resource_type.rb:51:in `block (5 levels) in run_test"\r\n              /var/lib/jenkins/workspace/platform_aio-suite_intn-sys_adhoc-puppet/SLAVE_LABEL/beaker/TEST_TARGET/aix-53-power/puppet/acceptance/.bundle/gems/gems/beaker-2.25.0/lib/beaker/dsl/structure.rb:43:in `step"\r\n              tests/security/cve-2013-4761_resource_type.rb:44:in `block (4 levels) in run_test"\r\n              tests/security/cve-2013-4761_resource_type.rb:37:in `each"\r\n              tests/security/cve-2013-4761_resource_type.rb:37:in `block (3 levels) in run_test"\r\n              /var/lib/jenkins/workspace/platform_aio-suite_intn-sys_adhoc-puppet/SLAVE_LABEL/beaker/TEST_TARGET/aix-53-power/puppet/acceptance/.bundle/gems/gems/beaker-2.25.0/lib/beaker/dsl/helpers/puppet_helpers.rb:171:in `with_puppet_running_on"\r\n              tests/security/cve-2013-4761_resource_type.rb:33:in `block (2 levels) in run_test"\r\n              /var/lib/jenkins/workspace/platform_aio-suite_intn-sys_adhoc-puppet/SLAVE_LABEL/beaker/TEST_TARGET/aix-53-power/puppet/acceptance/.bundle/gems/gems/beaker-2.25.0/lib/beaker/dsl/structure.rb:58:in `test_name"\r\n              tests/security/cve-2013-4761_resource_type.rb:10:in `block in run_test"\r\n              /var/lib/jenkins/workspace/platform_aio-suite_intn-sys_adhoc-puppet/SLAVE_LABEL/beaker/TEST_TARGET/aix-53-power/puppet/acceptance/.bundle/gems/gems/beaker-2.25.0/lib/beaker/test_case.rb:128:in `eval"\r\n              /var/lib/jenkins/workspace/platform_aio-suite_intn-sys_adhoc-puppet/SLAVE_LABEL/beaker/TEST_TARGET/aix-53-power/puppet/acceptance/.bundle/gems/gems/beaker-2.25.0/lib/beaker/test_case.rb:128:in `block in run_test"\r\n              /usr/local/rvm/rubies/ruby-1.9.3-p484/lib/ruby/1.9.1/benchmark.rb:295:in `realtime"\r\n              /var/lib/jenkins/workspace/platform_aio-suite_intn-sys_adhoc-puppet/SLAVE_LABEL/beaker/TEST_TARGET/aix-53-power/puppet/acceptance/.bundle/gems/gems/beaker-2.25.0/lib/beaker/test_case.rb:125:in `run_test"\r\n              /var/lib/jenkins/workspace/platform_aio-suite_intn-sys_adhoc-puppet/SLAVE_LABEL/beaker/TEST_TARGET/aix-53-power/puppet/acceptance/.bundle/gems/gems/beaker-2.25.0/lib/beaker/test_suite.rb:311:in `block in run"\r\n              /var/lib/jenkins/workspace/platform_aio-suite_intn-sys_adhoc-puppet/SLAVE_LABEL/beaker/TEST_TARGET/aix-53-power/puppet/acceptance/.bundle/gems/gems/beaker-2.25.0/lib/beaker/test_suite.rb:308:in `each"\r\n              /var/lib/jenkins/workspace/platform_aio-suite_intn-sys_adhoc-puppet/SLAVE_LABEL/beaker/TEST_TARGET/aix-53-power/puppet/acceptance/.bundle/gems/gems/beaker-2.25.0/lib/beaker/test_suite.rb:308:in `run"\r\n              /var/lib/jenkins/workspace/platform_aio-suite_intn-sys_adhoc-puppet/SLAVE_LABEL/beaker/TEST_TARGET/aix-53-power/puppet/acceptance/.bundle/gems/gems/beaker-2.25.0/lib/beaker/test_suite.rb:357:in `run_and_raise_on_failure"\r\n              /var/lib/jenkins/workspace/platform_aio-suite_intn-sys_adhoc-puppet/SLAVE_LABEL/beaker/TEST_TARGET/aix-53-power/puppet/acceptance/.bundle/gems/gems/beaker-2.25.0/lib/beaker/cli.rb:155:in `run_suite"\r\n              /var/lib/jenkins/workspace/platform_aio-suite_intn-sys_adhoc-puppet/SLAVE_LABEL/beaker/TEST_TARGET/aix-53-power/puppet/acceptance/.bundle/gems/gems/beaker-2.25.0/lib/beaker/cli.rb:97:in `execute!"\r\n              /var/lib/jenkins/workspace/platform_aio-suite_intn-sys_adhoc-puppet/SLAVE_LABEL/beaker/TEST_TARGET/aix-53-power/puppet/acceptance/.bundle/gems/gems/beaker-2.25.0/bin/beaker:6:in `<top (required)>"\r\n              /var/lib/jenkins/workspace/platform_aio-suite_intn-sys_adhoc-puppet/SLAVE_LABEL/beaker/TEST_TARGET/aix-53-power/puppet/acceptance/.bundle/gems/bin/beaker:23:in `load"\r\n              /var/lib/jenkins/workspace/platform_aio-suite_intn-sys_adhoc-puppet/SLAVE_LABEL/beaker/TEST_TARGET/aix-53-power/puppet/acceptance/.bundle/gems/bin/beaker:23:in `<main>"\r\n              >\r\n                Test Case tests/modules/install/basic_install.rb reported: #<Beaker::Host::CommandFailure: Host "pe-aix-53-acceptance" exited with 1 running:\r\n               puppet module install pmtacceptance-nginx\r\n              Last 10 lines of output were:\r\n              	Notice: Preparing to install into /etc/puppetlabs/code/environments/production/modules ...\r\n              	Notice: Downloading from https://forgeapi.puppetlabs.com ...\r\n              	Error: Could not connect via HTTPS to https://forgeapi.puppetlabs.com\r\n              	  Unable to verify the SSL certificate\r\n              	    The certificate may not be signed by a valid CA\r\n              	    The CA bundle included with OpenSSL may not be valid or up to date>\r\n                Test Case tests/modules/install/with_version.rb reported: #<Beaker::Host::CommandFailure: Host "pe-aix-53-acceptance" exited with 1 running:\r\n               puppet module install --version "< 1.7.0" pmtacceptance-java\r\n              Last 10 lines of output were:\r\n              	Notice: Preparing to install into /etc/puppetlabs/code/environments/production/modules ...\r\n              	Notice: Downloading from https://forgeapi.puppetlabs.com ...\r\n              	Error: Could not connect via HTTPS to https://forgeapi.puppetlabs.com\r\n              	  Unable to verify the SSL certificate\r\n              	    The certificate may not be signed by a valid CA\r\n              	    The CA bundle included with OpenSSL may not be valid or up to date>\r\n                Test Case tests/resource/file/symbolic_modes.rb reported: #<Beaker::Host::CommandFailure: Host "pe-aix-53-acceptance" exited with 127 running:\r\n               stat --format "%U:%G:%a" /tmp/symbolic-modes.19205/file\r\n              Last 10 lines of output were:\r\n              	bash: stat: command not found>\r\n                Test Case tests/resource/group/should_not_create_existing.rb reported: #<Beaker::Host::CommandFailure: Host "pe-aix-53-acceptance" exited with 86 running:\r\n               if ! lsgroup test-group-1443979156; then mkgroup test-group-1443979156; fi\r\n              Last 10 lines of output were:\r\n              	3004-686 Group "test-group-1443979156" does not exist.\r\n              	3004-694 Error adding "test-group-1443979156" : Name is too long.>\r\n                Test Case tests/resource/mount/defined.rb reported: #<Beaker::Host::CommandFailure: Host "pe-aix-53-acceptance" exited with 2 running:\r\n               cat /etc/fstab\r\n              Last 10 lines of output were:\r\n              	cat: 0652-050 Cannot open /etc/fstab.>\r\n                Test Case tests/resource/mount/destroy.rb reported: #<Beaker::Host::CommandFailure: Host "pe-aix-53-acceptance" exited with 1 running:\r\n               yes | mkfs -t ext3 -q /tmp/pl559317\r\n              Last 10 lines of output were:\r\n              	mkfs: Not a recognized flag: t\r\n              	Usage: mkfs [-b BootProgram] [-i Inodes] [-l Label] [-o Options] [-p Prototype]\r\n              		[-s Size] [-v VolumeLabel] [-V vfs] {Device|Filesystem}>\r\n                Test Case tests/resource/mount/modify.rb reported: #<Beaker::Host::CommandFailure: Host "pe-aix-53-acceptance" exited with 1 running:\r\n               yes | mkfs -t ext3 -q /tmp/pl103746\r\n              Last 10 lines of output were:\r\n              	mkfs: Not a recognized flag: t\r\n              	Usage: mkfs [-b BootProgram] [-i Inodes] [-l Label] [-o Options] [-p Prototype]\r\n              		[-s Size] [-v VolumeLabel] [-V vfs] {Device|Filesystem}>\r\n                Test Case tests/resource/mount/mounted.rb reported: #<Beaker::Host::CommandFailure: Host "pe-aix-53-acceptance" exited with 1 running:\r\n               yes | mkfs -t ext3 -q /tmp/pl598605\r\n              Last 10 lines of output were:\r\n              	mkfs: Not a recognized flag: t\r\n              	Usage: mkfs [-b BootProgram] [-i Inodes] [-l Label] [-o Options] [-p Prototype]\r\n              		[-s Size] [-v VolumeLabel] [-V vfs] {Device|Filesystem}>\r\n                Test Case tests/resource/package/common_package_name_in_different_providers.rb reported: #<NoMethodError: undefined method `each" for nil:NilClass>\r\n                Test Case tests/resource/package/yum.rb reported: #<NoMethodError: undefined method `each" for nil:NilClass>\r\n                Test Case tests/resource/service/puppet_mcollective_service_management.rb reported: #<Beaker::Host::CommandFailure: Host "pe-aix-53-acceptance" exited with 4 running:\r\n               puppet apply --detailed-exitcodes --verbose\r\n              Last 10 lines of output were:\r\n              	Notice: Compiled catalog for pe-aix-53-acceptance.delivery.puppetlabs.net in environment production in 0.71 seconds\r\n              	Info: Applying configuration version "1443979394"\r\n              	Error: Could not stop Service[puppet]: Execution of "/usr/bin/stopsrc -s puppet" returned 1: 0513-056 Timeout waiting for command response. If you specified a foreign host,\r\n              	see the /etc/inittab file on the foreign host to verify that the SRC daemon\r\n              	(srcmstr) was started with the -r flag to accept remote requests.\r\n              	Error: /Stage[main]/Main/Service[puppet]/ensure: change from running to stopped failed: Could not stop Service[puppet]: Execution of "/usr/bin/stopsrc -s puppet" returned 1: 0513-056 Timeout waiting for command response. If you specified a foreign host,\r\n              	see the /etc/inittab file on the foreign host to verify that the SRC daemon\r\n              	(srcmstr) was started with the -r flag to accept remote requests.\r\n              	Notice: Applied catalog in 60.35 seconds>\r\n                Test Case tests/resource/user/should_create.rb reported: #<Beaker::Host::CommandFailure: Host "pe-aix-53-acceptance" exited with 2 running:\r\n               lsgroup pl637994\r\n              Last 10 lines of output were:\r\n              	3004-686 Group "pl637994" does not exist.>\r\n                Test Case tests/resource/user/should_modify_gid.rb reported: #<Beaker::Host::CommandFailure: Host "pe-aix-53-acceptance" exited with 2 running:\r\n               lsgroup -a id pl72781old\r\n              Last 10 lines of output were:\r\n              	3004-686 Group "pl72781old" does not exist.>\r\n                Test Case tests/resource/user/should_not_create_existing.rb reported: #<Beaker::Host::CommandFailure: Host "pe-aix-53-acceptance" exited with 86 running:\r\n               if ! lsuser user305768; then mkuser user305768; fi\r\n              Last 10 lines of output were:\r\n              	3004-687 User "user305768" does not exist.\r\n              	3004-694 Error adding "user305768" : Name is too long.>\r\n{code}', 'https://tickets.puppetlabs.com/browse/PUP-5315', 'https://github.com/puppetlabs/puppet/pull/4328', '2015-10-05T07:25:24.000-0700', '2015-11-16T09:10:01.000-0800', '2015-11-16T09:10:01.000-0800', 'Closed', '', 2, '0', 1, 58, 56, 34, 'f946651b8d26bd61daeebad1b42f1bfc3c7f781c', 'https://tickets.puppetlabs.com/browse/PUP-5315', 'https://github.com/puppetlabs/puppet/pull/4328'),
('puppet', 100608, 47747561, 4348, 'user resource should_create_with_gid test fails on AIX', 'Puppet acceptance test Case {{tests/resource/user/should_create_with_gid.rb}} fails with the following:\r\n\r\n{code}\r\nTest Case tests/resource/user/should_create_with_gid.rb reported: #<Beaker::DSL::Outcomes::FailTest: \r\n              expected gid 208 but got: \r\n{code}', 'https://tickets.puppetlabs.com/browse/PUP-5313', 'https://github.com/puppetlabs/puppet/pull/4348', '2015-10-05T07:06:51.000-0700', '2015-11-16T09:10:32.000-0800', '2015-11-16T09:10:32.000-0800', 'Closed', '', 6, '0', 1, 3, 0, 1, '83dcde7c9bf28ea5a948f4d1578b2fd2770d8c70', 'https://tickets.puppetlabs.com/browse/PUP-5313', 'https://github.com/puppetlabs/puppet/pull/4348'),
('puppet', 100607, 47744381, 4347, 'concurrent_catalog_requests test fails on AIX', 'Puppet acceptance test Case {{tests/concurrency/ticket_2659_concurrent_catalog_requests.rb}} fails with the following:\r\n{code}\r\nTest Case tests/concurrency/ticket_2659_concurrent_catalog_requests.rb reported: #<Beaker::DSL::Outcomes::FailTest: \r\n              Expected /< HTTP\/1.* 200/ to match "sleep: 0509-020 Specify time as a positive integer.\nCurling: https://oxgwrmrqdurja2p.delivery.puppetlabs.net:8140/puppet/v3/catalog/pe-aix-53-acceptance.delivery.puppetlabs.net?environment=production\ncurl: A file or directory in the path name does not exist.\n848050 Completed\n".\r\n{code}', 'https://tickets.puppetlabs.com/browse/PUP-5312', 'https://github.com/puppetlabs/puppet/pull/4347', '2015-10-05T07:04:44.000-0700', '2015-11-16T09:10:43.000-0800', '2015-11-16T09:10:43.000-0800', 'Closed', '', 3, '0', 1, 1, 0, 1, 'd7b2374c8c95855906d7b1a83faf86f3a3b3a899', 'https://tickets.puppetlabs.com/browse/PUP-5312', 'https://github.com/puppetlabs/puppet/pull/4347'),
('puppet', 100610, 47726546, 4345, 'user should_manage_shell test fails on AIX', 'Puppet acceptance test case {{tests/resource/user/should_manage_shell.rb}} fails with the following\r\n{code}\r\nTest Case tests/resource/user/should_manage_shell.rb reported: #<Beaker::DSL::Outcomes::FailTest: \r\n              didn"t set the user shell for pl339772\r\n{code}', 'https://tickets.puppetlabs.com/browse/PUP-5314', 'https://github.com/puppetlabs/puppet/pull/4345', '2015-10-05T07:08:37.000-0700', '2015-11-18T13:08:52.000-0800', '2015-11-18T13:08:52.000-0800', 'Closed', '', 5, '0', 1, 8, 1, 1, '1225a19c2319049e8f67b52de39a60afdc3f5250', 'https://tickets.puppetlabs.com/browse/PUP-5314', 'https://github.com/puppetlabs/puppet/pull/4345'),
('puppet', 96897, 44734345, 4242, 'missing help for "puppet lookup" command line option', 'No help is available for "puppet lookup" commandline option\r\n\r\n{code}\r\n[root@gsiw4grv2nzupgg ~]# puppet lookup --help\r\nNo help available for puppet lookup\r\n\r\n[root@gsiw4grv2nzupgg ~]# puppet help\r\n\r\nUsage: puppet <subcommand> [options] <action> [options]\r\n\r\nAvailable subcommands:\r\n...\r\n  inspect           Send an inspection report\r\n  key               Create, save, and remove certificate keys.\r\n  lookup\r\n  man               Display Puppet manual pages.\r\n\r\n{code}', 'https://tickets.puppetlabs.com/browse/PUP-5202', 'https://github.com/puppetlabs/puppet/pull/4242', '2015-09-04T11:38:59.000-0700', '2015-11-18T13:08:52.000-0800', '2015-11-18T13:08:52.000-0800', 'Closed', '', 6, '0', 2, 124, 0, 1, 'dfcbab509a29a81804608e6154cbda269c6462b7', 'https://tickets.puppetlabs.com/browse/PUP-5202', 'https://github.com/puppetlabs/puppet/pull/4242'),
('puppet', 91205, 46159264, 4298, 'Runtime type does not treat ruby Module correctly.', 'The {{Runtime}} type does not handle the case where the LHS is a ruby {{Module}} and RHS is implements that Module. This can be tested using following statement. It will print "Notice: nope" indicating that {{Array}} is not assignable to {{Enumerable}}.\r\n{code}\r\npuppet apply -e "if Runtime["ruby","Enumerable"] > Runtime["ruby", "Array"] { notify{yes:} } else { notify{nope:} }"\r\n{code}\r\n', 'https://tickets.puppetlabs.com/browse/PUP-4960', 'https://github.com/puppetlabs/puppet/pull/4298', '2015-07-30T05:46:59.000-0700', '2015-11-18T13:08:53.000-0800', '2015-11-18T13:08:53.000-0800', 'Closed', '', 2, '0', 1, 34, 10, 3, '957eb9f17f3f1abdc0c999c21c3b31928aab2ebb', 'https://tickets.puppetlabs.com/browse/PUP-4960', 'https://github.com/puppetlabs/puppet/pull/4298'),
('puppet', 99736, 48270553, 4362, 'regsubst doesn"t work on empty arrays in puppet 4.x', 'regsubst gives an error about being called with the wrong type if you give it an empty array of strings to do substitutions on. This used to work in Puppet 3.x.\r\n\r\n{code}\r\n$ puppet apply -e "notice(regsubst([],"",""))"\r\nError: Evaluation Error: Error while evaluating a Function Call, function "regsubst" called with mis-matched arguments\r\nexpected one of:\r\n  regsubst(Variant[Array[String], String] target, String pattern, String replacement, Optional[Pattern[/^[GEIM]*$/]] flags?, Enum["N", "E", "S", "U"] encoding?) - arg count {3,5}\r\n  regsubst(Variant[Array[String], String] target, Variant[Regexp, Type[Regexp]] pattern, String replacement, Pattern[/^G?$/] flags?) - arg count {3,4}\r\nactual:\r\n  regsubst(Array[Undef], String, String) - arg count {3}  at line 1:8 on node valentina.local\r\n{code}', 'https://tickets.puppetlabs.com/browse/PUP-5292', 'https://github.com/puppetlabs/puppet/pull/4362', '2015-09-29T09:40:37.000-0700', '2015-11-18T13:08:57.000-0800', '2015-11-18T13:08:57.000-0800', 'Closed', '', 7, '0', 1, 9, 0, 1, '4d2ad0f167d39624da282ac0b8260256746fe488', 'https://tickets.puppetlabs.com/browse/PUP-5292', 'https://github.com/puppetlabs/puppet/pull/4362'),
('puppet', 90335, 49288912, 4392, 'puppet resource package does not display installs that use QuietDisplayName ', 'The Programs and Features view of *Windows Server 2012 R2* is displaying *McAfee Agent* in Version *4.8.0.887*.\r\n\r\n!ProgramsAndFeaturesW2012.png|thumbnail!\r\n\r\nHowever, the execution of the following command in the Windows Command Prompt as Administrator\r\n{code:JavaScript}\r\npuppet resource package\r\n{code}\r\nreturns the following output where the *McAfee Agent* is not displayed:\r\n{code:JavaScript}\r\npackage { "McAfee VirusScan Enterprise":\r\n  ensure => "8.8.04001",\r\n}\r\npackage { "Microsoft Silverlight":\r\n  ensure => "5.1.30514.0",\r\n}\r\npackage { "Microsoft Visual C++ 2008 Redistributable - x64 9.0.30729.6161":\r\n  ensure => "9.0.30729.6161",\r\n}\r\npackage { "Microsoft Visual C++ 2008 Redistributable - x86 9.0.30729.4148":\r\n  ensure => "9.0.30729.4148",\r\n}\r\npackage { "Microsoft Visual C++ 2008 Redistributable - x86 9.0.30729.6161":\r\n  ensure => "9.0.30729.6161",\r\n}\r\npackage { "Puppet Agent (64-bit)":\r\n  ensure => "1.2.2",\r\n}\r\npackage { "VMware Tools":\r\n  ensure => "9.4.12.2627939",\r\n}\r\n...\r\n{code}\r\n\r\nIn comparison, on *Windows Server 2008 R2* with installed *McAfee Agent* in Version *4.6.0.2292* it is displayed on the Programs and Features view and also by _*puppet resource package*_:\r\n\r\n{code:JavaScript}\r\npackage { "McAfee Agent":\r\n  ensure => "4.6.0.2292",\r\n}\r\npackage { "McAfee VirusScan Enterprise":\r\n  ensure => "8.8.02004",\r\n}\r\npackage { "Microsoft .NET Framework 4.5.2":\r\n  ensure => "4.5.51209",\r\n}\r\npackage { "Microsoft Visual C++ 2008 Redistributable - x64 9.0.30729.6161":\r\n  ensure => "9.0.30729.6161",\r\n}\r\npackage { "Microsoft Visual C++ 2008 Redistributable - x86 9.0.30729.4148":\r\n  ensure => "9.0.30729.4148",\r\n}\r\npackage { "Puppet Agent (64-bit)":\r\n  ensure => "1.2.1",\r\n}\r\npackage { "VMware Tools":\r\n  ensure => "9.4.12.2627939",\r\n}\r\n...\r\n{code}\r\n\r\n!ProgramsAndFeaturesW2008.png|thumbnail!', 'https://tickets.puppetlabs.com/browse/PUP-4917', 'https://github.com/puppetlabs/puppet/pull/4392', '2015-07-23T01:30:46.000-0700', '2015-11-18T13:08:57.000-0800', '2015-11-18T13:08:57.000-0800', 'Closed', 'windows', 13, '0', 1, 64, 12, 4, '193fba6c582e32bf2e383dee00c4cae554936f4e', 'https://tickets.puppetlabs.com/browse/PUP-4917', 'https://github.com/puppetlabs/puppet/pull/4392'),
('puppet', 90643, 41012311, 4107, 'Relationship with a parameter does not work', 'Test.pp:\r\n\r\n{code}\r\nnotify {\r\n  "1":\r\n}\r\n\r\ndefine mynotify(Type[Notify] $req) {\r\n  notify {\r\n    $title:\r\n  }\r\n  $req -> Mynotify[$title]\r\n}\r\n\r\nmynotify {\r\n  "2":\r\n    req => Notify["1"]\r\n}\r\n\r\n{code}\r\n\r\nh2. Expected:\r\n\r\nRelationship works: Notify["1"] is triggered before Notify["2"]\r\n\r\nh2. Result:\r\n\r\n{code}\r\npuppet apply test.pp\r\nError: Evaluation Error: Illegal relationship operand, can not form a relationship with an Object. A Catalog type is required. at /root/test.pp:9:8 on node foo\r\n{code}\r\n\r\n\r\nh2. Workaround:\r\n\r\n{code}\r\nnotify {\r\n  "1":\r\n}\r\n\r\ndefine mynotify(String $prereq) {\r\n  $req = Notify[$prereq] \r\n  notify {\r\n    $title:\r\n  }\r\n  $req -> Mynotify[$title]\r\n}\r\n\r\nmynotify {\r\n  "2":\r\n    prereq => "1"\r\n}\r\n{code}\r\n{code}\r\nNotice: Compiled catalog for foo in environment production in 0.48 seconds\r\nNotice: 1\r\nNotice: /Stage[main]/Main/Notify[1]/message: defined "message" as "1"\r\nNotice: 2\r\nNotice: /Stage[main]/Main/Mynotify[2]/Notify[2]/message: defined "message" as "2"\r\nNotice: Applied catalog in 0.06 seconds\r\n{code}', 'https://tickets.puppetlabs.com/browse/PUP-4926', 'https://github.com/puppetlabs/puppet/pull/4107', '2015-07-27T05:57:54.000-0700', '2015-11-18T13:08:58.000-0800', '2015-11-18T13:08:58.000-0800', 'Closed', '', 3, '0', 2, 15, 1, 2, '2ba0c047cde223b8781600448e3371fc89a4218a', 'https://tickets.puppetlabs.com/browse/PUP-4926', 'https://github.com/puppetlabs/puppet/pull/4107'),
('puppet', 101720, 49043123, 4383, 'Don"t restart puppetserver twice each time with_puppet_running_on is called', 'Beaker"s {{with_puppet_running_on}} method will restart {{puppetserver}} twice, once to lay down the test specified configuration, e.g. ssl, autosign policy, environment directories, and again at the end, to restore the original configuration. The second restart is unnecessary in FOSS and adds 25 MINUTES to the total acceptance run.\r\n\r\nBeaker added support to not restart the second time in BKR-53. However, due to BKR-574, the option can"t be specified globally, and must be specified for each test.\r\n\r\nOnce BKR-574 is fixed, we should disable the second restart in puppet acceptance.', 'https://tickets.puppetlabs.com/browse/PUP-5383', 'https://github.com/puppetlabs/puppet/pull/4383', '2015-10-14T22:52:53.000-0700', '2015-11-18T13:09:01.000-0800', '2015-11-18T13:09:01.000-0800', 'Closed', '', 2, '0', 1, 30, 35, 3, '59cce2311076488a348bdc61db977cfff56cd263', 'https://tickets.puppetlabs.com/browse/PUP-5383', 'https://github.com/puppetlabs/puppet/pull/4383'),
('puppet', 93179, 44496563, 4228, 'Update node terminus configured_environment to mirror agent_specified_environment', 'Puppet"s communication with the node and catalog terminus included a configured_environment option in the last release. That option sometimes includes redundant or irrelevant information when Puppet[:environment] has the default setting. That redundant information precludes it from being used to identify when an agent has explicitly requested a particular environment.\r\n\r\nChange the behavior of configured_environment to only be set when the environment setting is explicitly set.\r\n\r\nThis would technically be a breaking change in Puppet"s node and catalog terminus behavior, but seeing as we have yet to document it I think it"s a reasonable break.', 'https://tickets.puppetlabs.com/browse/PUP-5032', 'https://github.com/puppetlabs/puppet/pull/4228', '2015-08-12T15:14:37.000-0700', '2015-11-18T13:09:02.000-0800', '2015-11-18T13:09:02.000-0800', 'Closed', '', 8, '0', 5, 107, 8, 4, '0ce84342b385ea7ce68298b41836858ca70ff2d0', 'https://tickets.puppetlabs.com/browse/PUP-5032', 'https://github.com/puppetlabs/puppet/pull/4228'),
('puppet', 83304, 37008264, 4006, 'Yum provider fails spec tests due to root requirement', '41 spec tests fail when running on a Fedora 21 machine. They all fail with the same stacktrace that has this at the top:\r\n{code}\r\nPuppet::Error:\r\n       The yum provider can only be used as root\r\n     # ./lib/puppet/provider/package/yum.rb:29:in `prefetch"\r\n{code}\r\n', 'https://tickets.puppetlabs.com/browse/PUP-4701', 'https://github.com/puppetlabs/puppet/pull/4006', '2015-06-05T00:42:20.000-0700', '2015-11-18T13:09:07.000-0800', '2015-11-18T13:09:07.000-0800', 'Closed', '', 1, '0', 1, 3, 0, 2, 'a4179b65d518da547b0813b313d104ab5c9a315a', 'https://tickets.puppetlabs.com/browse/PUP-4701', 'https://github.com/puppetlabs/puppet/pull/4006'),
('puppet', 100606, 47992528, 4357, 'aix_package_provider test fails on AIX', 'Puppet acceptance test Case {{tests/aix/aix_package_provider.rb}} fails with the following:\r\n\r\n{code}\r\nTest Case tests/aix/aix_package_provider.rb reported: #<Minitest::Assertion: Didn"t get an error about downgrading packages.\r\n              Expected /aix package provider is unable to downgrade packages/ to match "\e[mNotice: Compiled catalog for pe-aix-53-acceptance.delivery.puppetlabs.net in environment production in 1.54 seconds\e[0m\n\e[0;32mInfo: Applying configuration version "1443972941"\e[0m\n\e[mNotice: Applied catalog in 0.44 seconds\e[0m\n".>\r\n{code}', 'https://tickets.puppetlabs.com/browse/PUP-5311', 'https://github.com/puppetlabs/puppet/pull/4357', '2015-10-05T07:02:56.000-0700', '2015-11-18T13:09:09.000-0800', '2015-11-18T13:09:09.000-0800', 'Closed', '', 11, '0', 1, 5, 4, 1, 'c0fe4b9d0168c0d621ec35d24610273eba599299', 'https://tickets.puppetlabs.com/browse/PUP-5311', 'https://github.com/puppetlabs/puppet/pull/4357'),
('puppet', 99780, 46390607, 4309, 'Environment compilation fails if there is no site { } declaration', 'Compiling an environment catalog without including a {{site}} declaration causing an error about trying to convert nil to array. This seems to happen because of this code in {{environment_compiler.rb}}:\r\n\r\n{code}\r\n  def prune_env_catalog\r\n    # Everything under Class[main], that is not under (inclusive of) Site[site] should be pruned as those resources\r\n    # are intended for nodes in a node catalog.\r\n    #\r\n    the_main_class_resource = @catalog.resource("Class", "")\r\n    the_site_resource = @catalog.resource("Site", "site")\r\n\r\n    # Get downstream vertexes returns a hash where the keys are the resources and values nesting level\r\n    rooted_in_main = @catalog.downstream_from_vertex(the_main_class_resource).keys\r\n    if the_site_resource\r\n      keep_from_site = @catalog.downstream_from_vertex(the_site_resource).keys\r\n      keep_from_site << the_site_resource\r\n    end\r\n\r\n    to_be_removed = rooted_in_main - keep_from_site\r\n    @catalog.remove_resource(*to_be_removed)\r\n    # The compiler keeps a list of added resources, this shadows that list with the now pruned result\r\n    @pruned_resources = @catalog.resources\r\n  end\r\n{code}\r\n\r\nIf there is no site resource, {{keep_from_site}} is never set and is nil. So {{rooted_in_main - keep_from_site}} is Array - nil, which fails.', 'https://tickets.puppetlabs.com/browse/PUP-5293', 'https://github.com/puppetlabs/puppet/pull/4309', '2015-09-29T13:36:03.000-0700', '2015-11-18T13:09:09.000-0800', '2015-11-18T13:09:09.000-0800', 'Closed', '', 4, '0', 1, 13, 1, 2, '5666842784a9ff4917e11b8fe206999b42a77d2d', 'https://tickets.puppetlabs.com/browse/PUP-5293', 'https://github.com/puppetlabs/puppet/pull/4309'),
('puppet', 94892, 43399827, 4195, 'classes within a modules namespace cannot be used to produce capabilities', 'I have an [ELK module|https://github.com/puppetlabs/appmgmt-module-elk/blob/master/manifests/elasticsearch.pp] that I used with earlier versions of the language to demonstrate appmgmt. \r\n\r\nIn an attempt to use David"s latest language implementation in dev/xnode, I modified my capability mapping to match xnode-spec. \r\n\r\n{code}\r\n# map data from the capability resource (left) to this profile (right)\r\nElk::Elasticsearch produces Es_instance {\r\n  port     => $es_port,\r\n  host     => $::fqdn,\r\n  clustername => $cluster_name\r\n}\r\n{code}\r\n\r\nWhen asked to list apps for the environment, validating the environment graph, the CLI tells me:\r\n\r\n{noformat}\r\n[root@appmgmt-services puppetlabs]# /opt/puppetlabs/bin/deployer-client --host https://appmgmt-services.vm:9999 apps\r\njava.lang.Exception: Received HTTP 500: Server Error: Illegal class reference at /etc/puppetlabs/code/environments/production/modules/elk/manifests/elasticsearch.pp:28:5 in environment production\r\n{noformat}\r\n\r\nIn discussion with David, the likely bug is that Puppet expects top-scope class names like elk to work but not namespaces under the module name, like elk::elasticsearch.', 'https://tickets.puppetlabs.com/browse/PUP-5075', 'https://github.com/puppetlabs/puppet/pull/4195', '2015-08-24T17:45:50.000-0700', '2015-11-18T13:09:12.000-0800', '2015-11-18T13:09:12.000-0800', 'Closed', '', 2, '0', 2, 109, 29, 5, 'c13be8594323253075ad132983a899d55676f59e', 'https://tickets.puppetlabs.com/browse/PUP-5075', 'https://github.com/puppetlabs/puppet/pull/4195'),
('puppet', 97184, 44665745, 4239, 'component to capability mapping (both produce and consume) don"t allow trailing comma on last parameter', 'Since Puppet 2.7, the language allowed the last parameter in a resource, class param list--wherever, to have a trailing comma. This is convenient as a courtesy to the next person modifying the parameter list who may not think to add a comma to your parameter when they add their own. \r\n\r\n{code}\r\nForge::Db produces Sql {\r\n  user     => $user,\r\n  password => $password,\r\n  host     => $host,\r\n  database => $name,\r\n}\r\nForge::Api consumes Sql {\r\n  db_name => $database,\r\n  db_user => $user,\r\n  db_password => $password,\r\n  db_host => $host,\r\n}\r\n{code}\r\n\r\nBoth of these statements fail when the comma after either $name and $host are present. We need to allow these trailing commas to remain consistent with the behavior expected from the rest of the Puppet DSL. ', 'https://tickets.puppetlabs.com/browse/PUP-5214', 'https://github.com/puppetlabs/puppet/pull/4239', '2015-09-08T17:20:58.000-0700', '2015-11-18T13:09:12.000-0800', '2015-11-18T13:09:12.000-0800', 'Closed', '', 2, '0', 1, 668, 666, 3, '35285342f3642a08a666ff21a5d9789cee5994c8', 'https://tickets.puppetlabs.com/browse/PUP-5214', 'https://github.com/puppetlabs/puppet/pull/4239'),
('puppet', 102770, 49184804, 4388, 'puppet lookup creates phantom node', 'Immediately after installing 2015.3.0-rc4-12-g0b26932, running {{puppet lookup key1 --debug}} as root doesn"t error out but adds a new node {{default}} to PuppetDB. \r\n\r\nRe-running the command exhibits the behavior described in PUP-5423\r\n\r\nDebug output attached.', 'https://tickets.puppetlabs.com/browse/PUP-5425', 'https://github.com/puppetlabs/puppet/pull/4388', '2015-10-23T13:53:14.000-0700', '2015-11-18T13:09:14.000-0800', '2015-11-18T13:09:14.000-0800', 'Closed', '', 4, '0', 1, 2, 2, 1, '3a9082a903dcf39f4cce5e89ecd1b929ae17045b', 'https://tickets.puppetlabs.com/browse/PUP-5425', 'https://github.com/puppetlabs/puppet/pull/4388'),
('puppet', 87911, 41813277, 4135, 'Regression PMT cannot connect to forge on OSX', 'The PMT fails to connect:\r\n\r\n{noformat}\r\nvfyfy4ou7ntrxfp:~ root# puppet module install puppetlabs-stdlib\r\nNotice: Preparing to install into /etc/puppetlabs/code/environments/production/modules ...\r\nNotice: Downloading from https://forgeapi.puppetlabs.com ...\r\nError: Could not connect via HTTPS to https://forgeapi.puppetlabs.com\r\n  Unable to verify the SSL certificate\r\n    The certificate may not be signed by a valid CA\r\n    The CA bundle included with OpenSSL may not be valid or up to date\r\n{noformat}\r\n\r\nHowever, using the system openssl, it does successfully connect:\r\n\r\n{noformat}\r\nvfyfy4ou7ntrxfp:~ root# openssl s_client -connect forgeapi.puppetlabs.com:443\r\nCONNECTED(00000003)\r\ndepth=1 /C=US/O=GeoTrust Inc./CN=GeoTrust SSL CA - G2\r\nverify error:num=20:unable to get local issuer certificate\r\nverify return:0\r\n---\r\n{noformat}\r\n\r\nIt seems osx patches system openssl so it looks in the keystore, but that doesn"t work for puppet-agent, because we compile openssl ourselves.\r\n\r\nThe fix for PUP-3450 would fix this issue. Filing this as a separate issue because it affects OSX acceptance (which fails try to connect to the test forge).\r\n\r\nh4. Workaround\r\n\r\nCreate a file {{/opt/puppetlabs/puppet/ssl/cert.pem}} with the GeoTrust Global CA below, making sure permissions are not writable by non-root:\r\n\r\n{noformat}\r\n-----BEGIN CERTIFICATE-----\r\nMIIDVDCCAjygAwIBAgIDAjRWMA0GCSqGSIb3DQEBBQUAMEIxCzAJBgNVBAYTAlVT\r\nMRYwFAYDVQQKEw1HZW9UcnVzdCBJbmMuMRswGQYDVQQDExJHZW9UcnVzdCBHbG9i\r\nYWwgQ0EwHhcNMDIwNTIxMDQwMDAwWhcNMjIwNTIxMDQwMDAwWjBCMQswCQYDVQQG\r\nEwJVUzEWMBQGA1UEChMNR2VvVHJ1c3QgSW5jLjEbMBkGA1UEAxMSR2VvVHJ1c3Qg\r\nR2xvYmFsIENBMIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEA2swYYzD9\r\n9BcjGlZ+W988bDjkcbd4kdS8odhM+KhDtgPpTSEHCIjaWC9mOSm9BXiLnTjoBbdq\r\nfnGk5sRgprDvgOSJKA+eJdbtg/OtppHHmMlCGDUUna2YRpIuT8rxh0PBFpVXLVDv\r\niS2Aelet8u5fa9IAjbkU+BQVNdnARqN7csiRv8lVK83Qlz6cJmTM386DGXHKTubU\r\n1XupGc1V3sjs0l44U+VcT4wt/lAjNvxm5suOpDkZALeVAjmRCw7+OC7RHQWa9k0+\r\nbw8HHa8sHo9gOeL6NlMTOdReJivbPagUvTLrGAMoUgRx5aszPeE4uwc2hGKceeoW\r\nMPRfwCvocWvk+QIDAQABo1MwUTAPBgNVHRMBAf8EBTADAQH/MB0GA1UdDgQWBBTA\r\nephojYn7qwVkDBF9qn1luMrMTjAfBgNVHSMEGDAWgBTAephojYn7qwVkDBF9qn1l\r\nuMrMTjANBgkqhkiG9w0BAQUFAAOCAQEANeMpauUvXVSOKVCUn5kaFOSPeCpilKIn\r\nZ57QzxpeR+nBsqTP3UEaBU6bS+5Kb1VSsyShNwrrZHYqLizz/Tt1kL/6cdjHPTfS\r\ntQWVYrmm3ok9Nns4d0iXrKYgjy6myQzCsplFAMfOEVEiIuCl6rYVSAlk6l5PdPcF\r\nPseKUgzbFbS9bZvlxrFUaKnjaZC2mqUPuLk/IH2uSrW4nOQdtqvmlKXBx4Ot2/Un\r\nhw4EbNX/3aBd7YdStysVAq45pmp06drE57xNNB6pXE0zX5IJL4hmXXeXxx12E6nV\r\n5fEWCRE11azbJHFwLJhWC9kXtNHjUStedejV0NxPNO3CBWaAocvmMw==\r\n-----END CERTIFICATE-----\r\n{noformat}\r\n\r\nand PMT will work:\r\n\r\n{noformat}\r\ncpwj90x3cw44guh:~ root# /opt/puppetlabs/bin/puppet module install puppetlabs-stdlib\r\nNotice: Preparing to install into /etc/puppetlabs/code/environments/production/modules ...\r\nNotice: Downloading from https://forgeapi.puppetlabs.com ...\r\nNotice: Installing -- do not interrupt ...\r\n/etc/puppetlabs/code/environments/production/modules\r\n└── puppetlabs-stdlib (v4.7.0) \r\n{noformat}\r\n\r\n', 'https://tickets.puppetlabs.com/browse/PUP-4822', 'https://github.com/puppetlabs/puppet/pull/4135', '2015-07-07T13:44:59.000-0700', '2015-11-18T18:33:01.000-0800', '2015-11-18T18:33:01.000-0800', 'Closed', 'regression', 11, '0', 2, 43, 35, 6, '644ac970d7b679cea8312a532132ea75cb4422c0', 'https://tickets.puppetlabs.com/browse/PUP-4822', 'https://github.com/puppetlabs/puppet/pull/4135'),
('puppet', 80131, 49988754, 4419, 'multi-resource references do not accept trailing commas', 'I generally expect that puppet will allow trailing commas when enumerating a list.  This could be considered either a bug or a feature request but I found the result from the following example surprising.\r\n\r\n{code}\r\nnotify { "a": }\r\nnotify { "b": }\r\nnotify { "c": }\r\n\r\nNotify[\r\n  "b",\r\n  "c",\r\n] {\r\n  require => Notify["a"]\r\n}\r\n{code}\r\n\r\n{code}\r\n$ bundle exec puppet --version\r\n4.0.0\r\n$ bundle exec puppet apply test.pp\r\nError: Could not parse for environment production: Syntax error at "]" at /home/jhoblitt/tmp/test.pp:8:1 on node leo\r\nError: Could not parse for environment production: Syntax error at "]" at /home/jhoblitt/tmp/test.pp:8:1 on node leo\r\n{code}', 'https://tickets.puppetlabs.com/browse/PUP-4610', 'https://github.com/puppetlabs/puppet/pull/4419', '2015-05-13T17:50:33.000-0700', '2015-11-24T16:19:00.000-0800', '2015-11-24T16:19:00.000-0800', 'Closed', '', 4, '0', 1, 649, 639, 3, '48ba4e6f9ce086867f94d8f30f1b051111929a77', 'https://tickets.puppetlabs.com/browse/PUP-4610', 'https://github.com/puppetlabs/puppet/pull/4419'),
('puppet', 84177, 47720335, 4342, 'Add missing query parameters to Puppet HTTPS API docs', 'The API docs (at api/doc in the Puppet source) are missing some query parameters that are used by puppet agent in some requests. The ones I know about are {{source_permissions}} and {{configured_environment}} (see PUP-4521). ', 'https://tickets.puppetlabs.com/browse/PUP-4740', 'https://github.com/puppetlabs/puppet/pull/4342', '2015-06-10T15:45:58.000-0700', '2015-11-24T17:11:02.000-0800', '2015-11-24T17:11:02.000-0800', 'Closed', '', 7, '0', 5, 42, 10, 4, 'ef4b02eb0060420bff47624547c7423b77e7e718', 'https://tickets.puppetlabs.com/browse/PUP-4740', 'https://github.com/puppetlabs/puppet/pull/4342'),
('puppet', 100604, 48818550, 4377, 'Yum package provider: ensure => latest fails when kernel is updated but not current', 'Similar to PUP-4497, puppet fail to run when there are kernel upgrade that didnt get apply:\r\n\r\n{code}\r\n# yum check-update \r\nLoaded plugins: product-id, rhnplugin, subscription-manager \r\nThis system is receiving updates from RHN Classic or Red Hat Satellite.\r\n\r\nopenldap.x86_64 2.4.39-7.el7_1 rhel-x86_64-server-7 \r\nSecurity: kernel-3.10.0-229.14.1.el7.x86_64 is an installed security update \r\nSecurity: kernel-3.10.0-123.el7.x86_64 is the currently running version\r\n{code}\r\n\r\nError:\r\n\r\n{code}\r\nError: /Stage[main]/Pe_r10k::Package/Package[pe-r10k]/ensure: change from 2.0.3.0-1.el7 to latest failed: Could not get latest version: undefined method `[]" for nil:NilClass \r\nError: Could not get latest version: undefined method `[]" for nil:NilClass \r\nError: /Stage[main]/Puppet_enterprise::Packages/Package[pe-java]/ensure: change from 1.8.0.51-1.b16.pe.el7 to latest failed: Could not get latest version: undefined method `[]" for nil:NilClass \r\nError: Could not get latest version: undefined method `[]" for nil:NilClass \r\n{code}\r\n\r\nWhen system is rebooted to use the latest kernel, the error will go away.', 'https://tickets.puppetlabs.com/browse/PUP-5309', 'https://github.com/puppetlabs/puppet/pull/4377', '2015-10-05T06:26:47.000-0700', '2015-11-27T02:52:29.000-0800', '2015-11-27T02:52:29.000-0800', 'Closed', '', 6, '0', 1, 196, 1, 3, 'c75d3dd9d174e8546277915329247fdc5be5e13b', 'https://tickets.puppetlabs.com/browse/PUP-5309', 'https://github.com/puppetlabs/puppet/pull/4377'),
('puppet', 106572, 51431353, 4459, 'Hiera special pseudo-variables breaking with puppet 4.3', 'puppet 4.3.0 breaks hiera Special Pseudo-Variables like calling_module.\r\n\r\nreproduce:\r\n{code}\r\n#hiera.yaml:\r\n---\r\n:backends:\r\n  - yaml\r\n\r\n:hierarchy:\r\n  - modules/%{calling_module}\r\n  - global\r\n\r\n:yaml:\r\n  :datadir: "/etc/puppetlabs/code/hiera"\r\n{code}\r\n\r\n{code}\r\n#/etc/puppetlabs/code/hiera/modules/test.yaml:\r\ntest::p1: "hiera value"\r\n{code}\r\n\r\n#test module: /etc/puppetlabs/code/modules/test/manifests/init.pp:\r\n{code:puppet}\r\nclass test ( $p1 = "default module value" ) { notice($p1) }\r\n{code}\r\n\r\nwith puppet 4.3.0:\r\n{code}\r\npuppet apply --hiera_config [...]/hiera.yaml --modulepath=/etc/puppetlabs/code/hiera/modules  -e "include ::test"\r\nNotice: Scope(Class[Test]): default module value\r\nNotice: Compiled catalog for puppet4.3.0 in environment production in 0.38 seconds\r\n{code}\r\n\r\nwith puppet 4.2.3:\r\n{code}\r\npuppet apply --hiera_config [...]/hiera.yaml --modulepath=/etc/puppetlabs/code/hiera/modules/  -e "include ::test"\r\nNotice: Scope(Class[Test]): hiera value\r\nNotice: Compiled catalog for puppet4.2.3 in environment production in 0.64 seconds\r\n{code}\r\n\r\nAs the documentation for the puppet 4.3 release states that the new lookup feature "integrates with the existing Hiera system" I think this is a bug.', 'https://tickets.puppetlabs.com/browse/PUP-5525', 'https://github.com/puppetlabs/puppet/pull/4459', '2015-11-20T05:00:58.000-0800', '2015-11-30T13:03:50.000-0800', '2015-11-30T13:03:50.000-0800', 'Closed', '', 4, '0', 1, 5, 5, 1, '0634b02837f6aef07b21423b1c8983b91a991d1c', 'https://tickets.puppetlabs.com/browse/PUP-5525', 'https://github.com/puppetlabs/puppet/pull/4459'),
('puppet', 62785, 26844601, 3446, 'Issue with Collectors and the Future Parser', 'When running with the apache module with the future parser enabled we"re getting the following error:\r\n{noformat}\r\nError: Evaluation Error: Error while evaluating a Virtual Query, Cannot transform object of class Puppet::Pops::Model::ConcatenatedString at /etc/puppetlabs/puppet/modules/apache/manifests/mod.pp:70:27 on node localhost.localdomain\r\n       	Error: Evaluation Error: Error while evaluating a Virtual Query, Cannot transform object of class Puppet::Pops::Model::ConcatenatedString at /etc/puppetlabs/puppet/modules/apache/manifests/mod.pp:70:27 on node localhost.localdomain\r\n{noformat}\r\n\r\nThe line that is is causing the failure is\r\n{noformat}\r\nPackage[$_package] -> File<| title == "${mod}.conf" |>\r\n{noformat}\r\n\r\nA small example that also reproduces this error is\r\n{noformat}\r\n@file{"/tmp/foo":\r\n  ensure => file\r\n}\r\n\r\n$thing = "foo"\r\n\r\nnotify{"Thing is: ${thing}":}\r\n\r\nFile <| title == "/tmp/${thing}" |>\r\n{noformat}\r\n\r\n[~chuck] used bisect and believes the bug was introduced in https://github.com/puppetlabs/puppet/commit/95b738e', 'https://tickets.puppetlabs.com/browse/PUP-3806', 'https://github.com/puppetlabs/puppet/pull/3446', '2015-01-02T15:59:43.000-0800', '2015-12-08T15:41:34.000-0800', '2015-12-08T15:41:34.000-0800', 'Closed', '', 6, '0', 1, 37, 0, 2, 'da1cafb541cf252137b91bc2952002eff6835bb1', 'https://tickets.puppetlabs.com/browse/PUP-3806', 'https://github.com/puppetlabs/puppet/pull/3446'),
('puppet', 62309, 27603010, 3493, 'Empty LiteralHash and LiteralList parameters get parsed with positioning information that excludes their closing delimiter', 'h2. Reproduction Case\r\n\r\n{code:ruby}\r\n# literal_test.rb\r\nrequire "puppet"\r\nrequire "puppet/pops"\r\n \r\nparser = Puppet::Pops::Parser::Parser.new\r\n  \r\nresult = parser.parse_string <<-EOM\r\nclass test::class (\r\n  $param_one = {},\r\n  $param_two = { },\r\n  $param_three = {a => b},\r\n  $param_four = [],\r\n  $param_five = [ ],\r\n  $param_six = [a],\r\n) {}\r\nEOM\r\n\r\nresult.current.definitions.each do |d|\r\n  d.parameters.each do |p|\r\n    puts "#{p.name}: #{p.value.length}"\r\n  end\r\nend\r\n{code}\r\n\r\nh3. Outcome\r\n\r\n{noformat}\r\n# ruby literal_test.rb \r\nparam_one: 1\r\nparam_two: 1\r\nparam_three: 8\r\nparam_four: 1\r\nparam_five: 1\r\nparam_six: 3\r\n{noformat}\r\n\r\nh3. Expected Outcome\r\n\r\nParams one and four get parsed with a length of 2 and params two and five get a length of 3.', 'https://tickets.puppetlabs.com/browse/PUP-3786', 'https://github.com/puppetlabs/puppet/pull/3493', '2014-12-21T11:59:27.000-0800', '2015-12-08T15:47:44.000-0800', '2015-12-08T15:47:44.000-0800', 'Closed', 'future-parser', 6, '0', 1, 16, 6, 3, '9d5c63a2e5df59a42124d555b8d6bcd4b6d31dc2', 'https://tickets.puppetlabs.com/browse/PUP-3786', 'https://github.com/puppetlabs/puppet/pull/3493'),
('puppet', 93038, 45170887, 4254, 'error message "illegal comma separated argument list" does not give a line number', 'h2. Overview\r\nIf code accidentally includes bad list syntax in the body of their class code, they will receive an error message that does not include a line number.  This is somewhat confusing.  I had this error and spent a good few minutes looking at the parameters to my class before I realised the error was in the body of my code.\r\n\r\nh2. Expected behaviour\r\nThe compile error should give a line number so that user"s can find the error easily\r\n\r\nh2. Actual behaviour\r\nUser"s receive the message {{illegal comma separated argument list}} which contains a filename but no line number.\r\n\r\nSpecifically, the testcase below gives the message:\r\n{noformat}\r\nError: Could not parse for environment production: illegal comma separated argument list in /Users/geoff/whoops.pp\r\n{noformat}\r\n\r\nh2. Testcase\r\n{noformat}\r\nclass whoops($a,$b,$c) {\r\n  $d = "oh noes",  "b"\r\n}\r\n{noformat}\r\n\r\nh2.  Suggested fix\r\nThe line number should be included in the error message', 'https://tickets.puppetlabs.com/browse/PUP-5026', 'https://github.com/puppetlabs/puppet/pull/4254', '2015-08-12T00:39:36.000-0700', '2015-12-11T09:06:34.000-0800', '2015-12-11T09:06:34.000-0800', 'Closed', '', 4, '0', 2, 38, 13, 2, 'e27e9d054f2334ee1f2faba17e2de2c619a5b8c1', 'https://tickets.puppetlabs.com/browse/PUP-5026', 'https://github.com/puppetlabs/puppet/pull/4254'),
('puppet', 72500, 32174081, 3762, 'Case and Selector match should be deep', 'Case and selector match should be recursive. Currently, the match operator only performs a surface level match.\r\n{code}\r\ncase [green, 2, $whatever] {\r\n  [/ee/, Integer[0,10], default] : { notice "yes" }\r\n  default: { notice "no" }\r\n}\r\n{code}\r\nThe above example should notice "yes", it currently notices "no".\r\n\r\nUPDATE\r\n---\r\nRecursive matching means that the same matching rules (as for the surface level) now applies recursively:\r\n* A literal {{default}} accepts any value (e.g. [1,2,3] is matched by [1, default, 3] )\r\n* A regexp can match a String value (e.g. "hello world" is matched by /hello .*/)\r\n* A data type can match a value of that type (e.g. 3 matches Integer[1,10])\r\n\r\n* Arrays must match in size to match the option\r\n* Hashes match if the keys in the option have an equal key in the tested value, and the option key"s value match the tested value.\r\n* Array entries and hash entries (values) are processed recursively.\r\n\r\nThe relevant section in the specification is: https://github.com/puppetlabs/puppet-specifications/blob/4.0.0/language/expressions.md#case-expression\r\n(note the reference to the tag 4.0.0 as there are additional features in the 4.1.0 version - notably PUP-4193 - lambda support).\r\n\r\nrisk assessment: medium (manual validate for now)\r\nprobability: low\r\nseverity: medium (work arounds)\r\ntest layer: unit', 'https://tickets.puppetlabs.com/browse/PUP-4277', 'https://github.com/puppetlabs/puppet/pull/3762', '2015-03-20T15:01:04.000-0700', '2015-12-16T11:56:39.000-0800', '2015-12-16T11:56:39.000-0800', 'Closed', '', 5, '0', 4, 70, 15, 3, '21037fb813e9d30d293af0b33f3ddead7cdfa282', 'https://tickets.puppetlabs.com/browse/PUP-4277', 'https://github.com/puppetlabs/puppet/pull/3762'),
('puppet', 95099, 50017722, 4422, 'Message for missing title is unhelpful', 'h2. Overview\r\nIf customers accidentally forget to type a resource title (or forget to capitalise the first letter of a type to set resource defaults), then the error message shown by puppet is hard to understand.\r\n\r\nh2. Testcase\r\n{noformat}\r\nfile {\r\n  owner => "root",\r\n}\r\n{noformat}\r\n\r\nh2. Expected message\r\n{noformat}\r\nMissing or Invalid resource title at /root/test.pp:1:1\r\n{noformat}\r\n\r\nh2. Actual message\r\n{noformat}\r\nError: Could not parse for environment production: This Name has no effect. A value-producing expression without other effect may only be placed last in a block/sequence at /root/test.pp:1:1 on node geoff.puppetlabs.vm\r\n{noformat}\r\n\r\nh2. Customer impact\r\nCustomers do not understand the current message and require assistance to fix their code', 'https://tickets.puppetlabs.com/browse/PUP-5090', 'https://github.com/puppetlabs/puppet/pull/4422', '2015-08-25T21:26:41.000-0700', '2015-12-16T12:02:50.000-0800', '2015-12-16T12:02:50.000-0800', 'Closed', '', 12, '0', 1, 1, 1, 1, '18a3f2dd88113026a57110b8fdd174ba1bf904ed', 'https://tickets.puppetlabs.com/browse/PUP-5090', 'https://github.com/puppetlabs/puppet/pull/4422'),
('puppet', 100818, 46851980, 4320, 'Master should return 74 when puppet user doesn"t exist', 'Previously, when trying to run a master and the puppet user didn"t exist, we exited with {{74}}.\r\n\r\nIn commit 144ea123965, a change was made to more gracefully handle failing, but raised a {{Puppet::Error}} instead of exiting with 74 as before. This causes {{puppet_manages_own_configuration_in_robust_manner.rb}} to fail.\r\n\r\nWe should go back to exiting with {{74}}.', 'https://tickets.puppetlabs.com/browse/PUP-5317', 'https://github.com/puppetlabs/puppet/pull/4320', '2015-10-05T14:43:14.000-0700', '2015-12-16T15:32:47.000-0800', '2015-12-16T15:32:47.000-0800', 'Closed', '', 4, '0', 1, 6, 6, 3, '898a5ea0e40cc85d45a10915bc2490fa6453ff38', 'https://tickets.puppetlabs.com/browse/PUP-5317', 'https://github.com/puppetlabs/puppet/pull/4320'),
('puppet', 99820, 47422307, 4333, 'Capability resource params without default values fail during env catalog compilation', 'The following sort of code no longer works after a recent change to puppet:\r\n\r\n{code}\r\ndefine producer($foo) { }\r\nProducer produces Capres {\r\n  foo => $foo,\r\n}\r\n\r\ndefine consumer($foo) { }\r\nConsumer consumes Capres {\r\n  foo => $foo,\r\n}\r\n\r\napplication myapp() {\r\n  producer { something:\r\n    foo => "some value",\r\n    export => Capres[name],\r\n  }\r\n\r\n  consumer { something:\r\n    consume => Capres[name],\r\n  }\r\n}\r\n{code}\r\n\r\nThe gist of this application is that some parameter {{$foo}} is set on a producer, which attempts to convey that value to a consumer via a capability resource. However, when evaluating an instance of the application during environment catalog compilation, the consumer"s parameters are validated and it fails because there is no value supplied for the {{$foo}} parameter.\r\n\r\nIn reality, this situation is perfectly acceptable, as no parameters are meant to be set in the environment catalog. We only want to know the type and title of the resources, along with the capabilities that they exchange. On the agent node, the parameters will be populated by the capability resources that are consumed. At environment compilation time, the capabilities haven"t been produced and so that doesn"t work.\r\n\r\nIt seems the solution to this problem is to avoid setting and/or validating resource params during environment catalog compilation, since all we care about are the identities of the resources involved. We can"t actually set the parameters at this time, since their defaults/values may depend on node facts that aren"t available during environment catalog compilation.\r\n\r\nThis seems likely to have been introduced by https://github.com/puppetlabs/puppet/commit/fcf939ebc287eb6ceba7126199c26afc673c44a4.', 'https://tickets.puppetlabs.com/browse/PUP-5294', 'https://github.com/puppetlabs/puppet/pull/4333', '2015-09-29T14:59:23.000-0700', '2015-12-17T10:11:33.000-0800', '2015-12-17T10:11:33.000-0800', 'Closed', '', 10, '0', 1, 39, 8, 5, '610a9a98688b201a445efdb64fe7c0df1d954461', 'https://tickets.puppetlabs.com/browse/PUP-5294', 'https://github.com/puppetlabs/puppet/pull/4333'),
('puppet', 25168, 12090627, 2317, 'Windows - Specifying well-known SIDs as a group / user in manifests causes errors', 'This fix was already done as part of PUP-266 as ADSI queries were failing against well know SIDS like {code}S-1-5-6{code}\r\n\r\nEven though PUP-266 has been moved to a post 4.0 release, since this code is complete and tested, it should make it"s way into 3.4\r\n\r\nCommit msg notes:\r\n\r\n* Previously, calling Puppet::Util::ADSI::Group.exists? for a well-known group SID would return false, because the WinNT:// style URI used to find the group would not examine / lookup the SID, but would instead create a broken Uri that the underlying OS could not understand\r\n* Now, the given group name is checked to see if it"s a SID before the Uri is constructed, and a SID style Uri is created where appropriate', 'https://tickets.puppetlabs.com/browse/PUP-1559', 'https://github.com/puppetlabs/puppet/pull/2317', '2014-01-31T11:02:05.000-0800', '2016-01-11T00:47:08.000-0800', '2016-01-11T00:47:08.000-0800', 'Closed', '', 10, '0', 1, 66, 1, 4, '580a1ce7c21868448a52381d6344756bb51c0427', 'https://tickets.puppetlabs.com/browse/PUP-1559', 'https://github.com/puppetlabs/puppet/pull/2317'),
('puppet', 12756, 18128449, 2852, 'Puppet Windows Exec providers don"t support runas', 'It appears we don"t support configuring a runas user for Windows, it is possible via powershell commands, but being able to have native support inside the provider should be useful and allow feature parity with our linux exec providers.', 'https://tickets.puppetlabs.com/browse/PUP-207', 'https://github.com/puppetlabs/puppet/pull/2852', '2013-08-02T09:07:06.000-0700', '2016-01-11T14:42:16.000-0800', '2016-01-11T14:42:16.000-0800', 'Closed', '', 2, '0', 1, 8, 6, 2, '6dab11c95209655a4254ba69529fe1b20c9844ac', 'https://tickets.puppetlabs.com/browse/PUP-207', 'https://github.com/puppetlabs/puppet/pull/2852'),
('puppet', 78336, 48633626, 4375, 'Agent does not stop with Ctrl-C', 'When running a puppet run from the command line the agent catches a Ctrl-C, but does not stop.\r\n\r\n{code}\r\n^CNotice: Caught INT; storing stop\r\n^CNotice: Caught INT; storing stop\r\n^CNotice: Caught INT; storing stop\r\n^CNotice: Caught INT; storing stop\r\n^CNotice: Caught INT; storing stop\r\nInfo: Caching catalog for ue1a-util03.ineu.us\r\nInfo: Applying configuration version "1430650119"\r\n.... run continues to completion\r\n{code}\r\n\r\nThis is with puppet-agent-1.0.1 on CentOS7', 'https://tickets.puppetlabs.com/browse/PUP-4516', 'https://github.com/puppetlabs/puppet/pull/4375', '2015-05-03T03:50:53.000-0700', '2016-01-20T22:37:28.000-0800', '2016-01-20T22:37:28.000-0800', 'Closed', '', 31, '0', 1, 30, 12, 2, 'c9a7e6d506768cb1c00767f785339bec512d069e', 'https://tickets.puppetlabs.com/browse/PUP-4516', 'https://github.com/puppetlabs/puppet/pull/4375'),
('puppet', 111436, 55324306, 4556, 'Disallow numeric ranges where from > to', 'An integer type can be declared as {{Integer[10,0]}} or {{Integer[0,10]}}. The intention was to give the type a sense of direction which then would affect iterating over the range. This design has been rejected since the direction has no bearing on the constraint. The descending iteration aspect will be covered in a coming release where an {{Iterable}} type is introduced.\r\n\r\nThis, in combination with that the current implementation has a bug that turns descending iteration into an ascending iteration (see PUP-5648) made us decide to change the current behavior so that any construct for a Numeric where the range is declared with from > to should yield an error.\r\n', 'https://tickets.puppetlabs.com/browse/PUP-5658', 'https://github.com/puppetlabs/puppet/pull/4556', '2016-01-07T01:59:25.000-0800', '2016-01-21T16:38:35.000-0800', '2016-01-21T16:38:35.000-0800', 'Closed', '', 4, '0', 1, 23, 24, 5, '4a103a8cef4e64becc80c729b6d108a50cc17aa1', 'https://tickets.puppetlabs.com/browse/PUP-5658', 'https://github.com/puppetlabs/puppet/pull/4556'),
('puppet', 106001, 52669754, 4484, 'No error context when a non-numeric index is used on a string', 'Having a non-capitalized resource type with a relationship Metaparameter resource will give non-descript errors during puppet runs and when using puppet apply.\r\n\r\nManifest with correct metaparameter:\r\n\r\n{code}\r\nclass test {\r\nfile {"test":\r\n ensure => present,\r\n require => Package["ehs"]\r\n }\r\n}\r\n{code}\r\n\r\nManifest causing error:\r\n{code}\r\nclass test {\r\nfile {"test":\r\n ensure => present,\r\n require => package["ehs"]\r\n }\r\n}\r\n{code}\r\n\r\nPuppet Run\r\n{code}\r\n[root@pe-201522-master manifests]# puppet agent -t\r\nInfo: Retrieving pluginfacts\r\nInfo: Retrieving plugin\r\nInfo: Loading facts\r\nError: Could not retrieve catalog from remote server: Error 400 on SERVER: Evaluation Error: The value "ehs" cannot be converted to Numeric. on node pe-201522-master.puppetdebug.vlan\r\nWarning: Not using cache on failed catalog\r\nError: Could not retrieve catalog; skipping run\r\n{code}\r\n\r\n', 'https://tickets.puppetlabs.com/browse/PUP-5509', 'https://github.com/puppetlabs/puppet/pull/4484', '2015-11-16T14:32:54.000-0800', '2016-01-21T16:38:35.000-0800', '2016-01-21T16:38:35.000-0800', 'Closed', '', 6, '0', 1, 3, 3, 1, 'efc4561b63a137ec60021afa40f6a09de0398c0a', 'https://tickets.puppetlabs.com/browse/PUP-5509', 'https://github.com/puppetlabs/puppet/pull/4484'),
('puppet', 106510, 51285427, 4456, 'Puppet node does not keep attributes consistent with parameters', 'The Puppet::Node class has two attributes, environment_name and environment. It also has a parameter named "environment". These are not kept in sync which causes problems for the catalog_preview application. See PRE-81. I think it"s better to fix this in the puppet code than adding a workaround in the catalog preview program.\r\n', 'https://tickets.puppetlabs.com/browse/PUP-5522', 'https://github.com/puppetlabs/puppet/pull/4456', '2015-11-19T13:19:28.000-0800', '2016-01-22T13:41:35.000-0800', '2016-01-22T13:41:35.000-0800', 'Closed', '', 4, '0', 1, 19, 2, 2, '8136aff14d36eedf99df1731cb1997c3db288039', 'https://tickets.puppetlabs.com/browse/PUP-5522', 'https://github.com/puppetlabs/puppet/pull/4456'),
('puppet', 97007, 54728701, 4533, 'call_function and metadata.json: call a function from a different module, very strange behavior', 'Hi,\r\n\r\nAll my code is in the attached file. It"s very minimal to reproduce the problem. There are few files:\r\n\r\n{code}\r\n~# tree production/\r\nproduction/\r\n|-- manifests/\r\n|   `-- site.pp\r\n|-- modules/\r\n|   |-- moda/\r\n|   |   `-- lib/\r\n|   |       `-- puppet/\r\n|   |           `-- functions/\r\n|   |               `-- moda/\r\n|   |                   `-- foo.rb\r\n|   `-- modb/\r\n|       |-- lib/\r\n|       |   `-- puppet/\r\n|       |       `-- functions/\r\n|       |           `-- modb/\r\n|       |               `-- bar.rb\r\n|       |-- manifests/\r\n|       |   `-- init.pp\r\n|       `-- metadata.json\r\n`-- environment.conf\r\n{code}\r\n\r\nIn the {{site.pp}} I just include the {{modb}} puppet class. And in the {{modb}} class I use a custom function {{:modb::bar()}} which calls another function from the {{moda}} module. I have this error:\r\n\r\n{code}\r\nroot@puppet4:~# puppet agent --test\r\nInfo: Retrieving pluginfacts\r\nInfo: Retrieving plugin\r\nError: Could not retrieve catalog from remote server: Error 400 on SERVER: Evaluation Error: Error while evaluating a Function Call, Function modb::bar(): cannot call function "::moda::foo" - not found at /etc/puppetlabs/code/environments/production/modules/modb/manifests/init.pp:4:32 on node puppet4.athome.priv\r\nWarning: Not using cache on failed catalog\r\nError: Could not retrieve catalog; skipping run\r\n{code}\r\n\r\nAnd the *very* *very* curious behavior: if I *just* remove the {{metadata.json}} of the {{modb}} module (no other operation), the puppet run works well!\r\n\r\n{code}\r\nroot@puppet4:~# rm /etc/puppetlabs/code/environments/production/modules/modb/metadata.json \r\nroot@puppet4:~# puppet agent --test\r\nInfo: Retrieving pluginfacts\r\nInfo: Retrieving plugin\r\nInfo: Caching catalog for puppet4.athome.priv\r\nInfo: Applying configuration version "1441677483"\r\nNotice: foo\r\nNotice: /Stage[main]/Modb/Notify[Test1]/message: defined "message" as "foo"\r\nNotice: bar\r\nNotice: /Stage[main]/Modb/Notify[Test2]/message: defined "message" as "bar"\r\nNotice: Applied catalog in 0.04 seconds\r\n{code}\r\n\r\nRegards.\r\nFrançois Lafont\r\n', 'https://tickets.puppetlabs.com/browse/PUP-5209', 'https://github.com/puppetlabs/puppet/pull/4533', '2015-09-07T19:02:44.000-0700', '2016-01-26T06:52:49.000-0800', '2016-01-26T06:52:49.000-0800', 'Closed', '', 28, '0', 1, 20, 3, 5, 'cfe2e4d999a0e86d671c0dcfb72ed588c4d4a5a2', 'https://tickets.puppetlabs.com/browse/PUP-5209', 'https://github.com/puppetlabs/puppet/pull/4533'),
('puppet', 94525, 53275901, 4489, 'Puppet 4 --profile is not complete compared to 3', 'Given sample code like:\r\n\r\n{code}\r\nclass profile_test {\r\n  notice("hello from ${name}")\r\n  notify{"inside ${name}": }\r\n}\r\n\r\ninclude profile_test\r\n{code}\r\n\r\nPuppet 3 profiler were quite handy and complete:\r\n\r\n{code}\r\nDebug: Runtime environment: run_mode=user, puppet_version=3.7.5, ruby_version=1.8.7\r\nDebug: PROFILE [apply] 1 Setup server facts for compiling: took 0.0001 seconds\r\nDebug: PROFILE [apply] 2.1 Compile: Set node parameters: took 0.0013 seconds\r\nDebug: PROFILE [apply] 2.2 Compile: Created settings scope: took 0.0305 seconds\r\nNotice: Scope(Class[Profile_test]): hello from profile_test\r\nDebug: PROFILE [apply] 2.3.1.1 Called notice: took 0.0002 seconds\r\nDebug: PROFILE [apply] 2.3.1 Called include: took 0.0061 seconds\r\nDebug: PROFILE [apply] 2.3 Compile: Evaluated main: took 0.0097 seconds\r\nDebug: PROFILE [apply] 2.4 Compile: Evaluated AST node: took 0.0000 seconds\r\nDebug: PROFILE [apply] 2.5 Compile: Evaluated node classes: took 0.0001 seconds\r\nDebug: PROFILE [apply] 2.6.1.1 Evaluated definitions: took 0.0000 seconds\r\nDebug: PROFILE [apply] 2.6.1 Iterated (1) on generators: took 0.0004 seconds\r\nDebug: PROFILE [apply] 2.6 Compile: Evaluated generators: took 0.0007 seconds\r\nDebug: PROFILE [apply] 2.7 Compile: Finished catalog: took 0.0005 seconds\r\nDebug: PROFILE [apply] 2 Compiled catalog for devco.net in environment production: took 0.0542 seconds\r\n.\r\n.\r\n.\r\n.\r\nDebug: functions: 0.006307 ms (2 calls)\r\nDebug: functions -> include: 0.006126 ms (1 calls)\r\nDebug: functions -> notice: 0.000181 ms (1 calls)\r\n{code}\r\n\r\nIn puppet4 there is no mention of the notice() and so the stats is even just wrong:\r\n\r\n{code}\r\nDebug: functions: 0.004328061 s (1 calls)\r\nDebug: functions -> include: 0.004328061 s (1 calls)\r\n{code}\r\n\r\nNot sure if this only affect a certain class of function - like legacy ones maybe vs ones of the new API, did not investigate that.', 'https://tickets.puppetlabs.com/browse/PUP-5063', 'https://github.com/puppetlabs/puppet/pull/4489', '2015-08-21T07:24:57.000-0700', '2016-01-26T06:52:50.000-0800', '2016-01-26T06:52:50.000-0800', 'Closed', '', 7, '0', 1, 11, 3, 2, '3ce8b6ce93e3bf5fe99587a750dfa580bc1b823e', 'https://tickets.puppetlabs.com/browse/PUP-5063', 'https://github.com/puppetlabs/puppet/pull/4489'),
('puppet', 95900, 51422771, 4457, 'unterminated c-style comment causes hang', 'In my manifest file for my node, I had an unterminated c-style comment:\r\n\r\nhaving a manifest file containing {{/\*}} is sufficient to cause this (though other stupid errors like terminating with another {{/\*}} or bad nesting can also trigger the bug).\r\n\r\nTested with a simple:\r\n\r\n{noformat}\r\nstrace -fff puppet master --debug --no-daemonize --compile puppet-agent \r\n{noformat}\r\n\r\nrelevant strace output:\r\n{noformat}\r\n[pid  3469] stat("/etc/puppet/environments/vagrant/manifests/puppet-agent.pp", {st_mode=S_IFREG|0644, st_size=5, ...}) = 0\r\n[pid  3469] stat("/etc/puppet/environments/vagrant/manifests/puppet-agent.pp", {st_mode=S_IFREG|0644, st_size=5, ...}) = 0\r\n[pid  3469] stat("/etc/puppet/environments/vagrant/manifests/puppet-agent.pp", {st_mode=S_IFREG|0644, st_size=5, ...}) = 0\r\n[pid  3469] open("/etc/puppet/environments/vagrant/manifests/puppet-agent.pp", O_RDONLY) = 5\r\n[pid  3469] fstat(5, {st_mode=S_IFREG|0644, st_size=5, ...}) = 0\r\n[pid  3469] fstat(5, {st_mode=S_IFREG|0644, st_size=5, ...}) = 0\r\n[pid  3469] ioctl(5, SNDCTL_TMR_TIMEBASE or SNDRV_TIMER_IOCTL_NEXT_DEVICE or TCGETS, 0x7fff7c8788e0) = -1 ENOTTY (Inappropriate ioctl for device)\r\n[pid  3469] fstat(5, {st_mode=S_IFREG|0644, st_size=5, ...}) = 0\r\n[pid  3469] lseek(5, 0, SEEK_CUR)       = 0\r\n[pid  3469] read(5, "  /*\n", 5)        = 5\r\n[pid  3469] read(5, "", 8192)           = 0\r\n[pid  3469] close(5)                    = 0\r\n{noformat}\r\n\r\nI was originally suspecting that it was trying to read() past EOF looking for the comment terminator (and perhaps it still is) but it looks like it hangs after close()\r\n\r\nThis causes a complete hang of puppet after that line. I left it running for about 20 minutes and it still persistently hung.', 'https://tickets.puppetlabs.com/browse/PUP-5127', 'https://github.com/puppetlabs/puppet/pull/4457', '2015-08-31T19:49:10.000-0700', '2016-01-26T06:52:50.000-0800', '2016-01-26T06:52:50.000-0800', 'Closed', '', 8, '0', 1, 11, 1, 3, '8732eab975eca5b34844214d17aaf1fd6f75052e', 'https://tickets.puppetlabs.com/browse/PUP-5127', 'https://github.com/puppetlabs/puppet/pull/4457'),
('puppet', 107878, 52649406, 4482, 'parse_string doesnt interpolate %{key} with Puppet 4.0', 'Several backends need to pass {{%\{key\}}} to `Backend.parse_string` in order for it to get interpolated, hiera-http and hiera-mysql are both examples of this.  In Puppet 4.0 the {{%\{key\}}} does not get interpolated (regardless of the hiera version) but running hiera from the command line does work.  So I"m unsure if this is a PUPPET or HIERA issue, but I"m filing it here to start with.\r\n\r\nPlease see https://github.com/crayfishx/hiera-http/issues/38 for a detailed description\r\n\r\n', 'https://tickets.puppetlabs.com/browse/PUP-5578', 'https://github.com/puppetlabs/puppet/pull/4482', '2015-12-02T00:37:22.000-0800', '2016-01-26T06:55:07.000-0800', '2016-01-26T06:55:07.000-0800', 'Closed', '', 17, '0', 1, 6, 3, 2, 'f6a7ba2f4735e24a3eb6bf11b7744bf6e915f882', 'https://tickets.puppetlabs.com/browse/PUP-5578', 'https://github.com/puppetlabs/puppet/pull/4482'),
('puppet', 107178, 52434370, 4478, 'Debian provider fails on Debian 8 systems without systemd present', 'https://github.com/puppetlabs/puppet/commit/75160b78dc4a9189949da50a6b76e42172a45770#commitcomment-14619787 added a bit of logic in the Debian provider for Debian 8 / Ubuntu 15.04 and newer systems to use systemctl to properly determine service status. However, it"s possible to remove systemd from a Debian 8 system all together and run entirely with sysvinit. In such a case, the provider will fail as systemctl doesn"t exist.\r\n\r\nThe provider should check that systemctl exists before attempting to use it in Debian 8 / Ubuntu 15.04.', 'https://tickets.puppetlabs.com/browse/PUP-5548', 'https://github.com/puppetlabs/puppet/pull/4478', '2015-11-25T08:49:54.000-0800', '2016-01-26T06:55:07.000-0800', '2016-01-26T06:55:07.000-0800', 'Closed', '', 3, '0', 1, 11, 42, 2, '802dffac76e7445e9c592a47a8d87ce579b08e5c', 'https://tickets.puppetlabs.com/browse/PUP-5548', 'https://github.com/puppetlabs/puppet/pull/4478'),
('puppet', 109242, 53388999, 4496, 'Subkeys of lookup_options are found when using Hiera data binding', 'If a hiera databinding contains an entry like this:\r\n{code}\r\nlookup_options:\r\n  some::hash:\r\n    merge: deep\r\n{code}\r\nthen while it"s impossible to find the key {{lookup_options}} it is possible to find the subentry using the key {{lookup_options.some::hash}}. This is wrong. Neither the {{lookup_options}} hash nor any of its sub-keys should be possible to find using a normal lookup. \r\n', 'https://tickets.puppetlabs.com/browse/PUP-5598', 'https://github.com/puppetlabs/puppet/pull/4496', '2015-12-11T04:10:33.000-0800', '2016-01-26T06:55:07.000-0800', '2016-01-26T06:55:07.000-0800', 'Closed', '', 1, '0', 1, 51, 3, 3, '83a0bbf5b854ad7bf271ec53381b036fa403d0be', 'https://tickets.puppetlabs.com/browse/PUP-5598', 'https://github.com/puppetlabs/puppet/pull/4496'),
('puppet', 106050, 51164163, 4454, 'puppet lookup command rejects `--merge first`', 'If the lookup data sets a default merge strategy for a key, it"s impossible to override that strategy on the CLI and request a first-found lookup. \r\n\r\n{code}\r\n╚ᐅ puppet lookup datatest::testparam --merge first --node stranger.magpie.lan\r\nError: Could not parse application options: The --merge option only accepts "unique", "hash", or "deep".\r\nRun "puppet lookup --help" for more details\r\n{code}\r\n\r\nThis prevents a reasonable use case, and it conflicts with the behavior of the lookup() function (which does allow `first` as its third argument and behaves as expected).', 'https://tickets.puppetlabs.com/browse/PUP-5511', 'https://github.com/puppetlabs/puppet/pull/4454', '2015-11-17T07:23:27.000-0800', '2016-01-26T06:55:07.000-0800', '2016-01-26T06:55:07.000-0800', 'Closed', '', 2, '0', 1, 33, 8, 2, '6effa7c899109bc0293e107a4343755452a9b304', 'https://tickets.puppetlabs.com/browse/PUP-5511', 'https://github.com/puppetlabs/puppet/pull/4454'),
('puppet', 109570, 54746944, 4534, 'Windows package provider can crash with "Memory access is out of bounds" when registry values are corrupt', 'I was adding some software packages for Windows when I started getting the following error:\r\nError: Failed to apply catalog: Memory access offset=0 size=4 is out of bounds\r\n\r\nI tried the following, but continued to get the same error:\r\n* rerun puppet agent\r\n* restart Windows computer\r\n* uninstall and reinstall puppet agent completely (including deleting everything from %programdata% folder)\r\n* restart puppetserver and the machine puppetserver runs on\r\n* revert to old version of production environment code that was working previously\r\n\r\nI know very little about coding in Ruby, but poking around a little based on the debug output didn"t lead me to anything obvious.\r\n\r\nIt sounds like an array index out of bounds, maybe?\r\n\r\nIf anyone has tips on how to further debug (stack trace, etc.), I"m happy to try and contribute to a solution, just not sure where to go from here.\r\n\r\nAttached is a log of the debug run with some domain names and user account names changed for privacy.  You can see the error pop up four lines from the bottom.', 'https://tickets.puppetlabs.com/browse/PUP-5640', 'https://github.com/puppetlabs/puppet/pull/4534', '2015-12-15T07:46:17.000-0800', '2016-01-26T06:55:07.000-0800', '2016-01-26T06:55:07.000-0800', 'Closed', 'puppet-agent;windows', 10, '0', 1, 112, 15, 2, '649df148ab1f348000f41a7f941bbfd39066321f', 'https://tickets.puppetlabs.com/browse/PUP-5640', 'https://github.com/puppetlabs/puppet/pull/4534'),
('puppet', 103618, 55082705, 4546, 'puppet lookup command too verbose: implied application of manifest (site.pp by default) and all its output', '"puppet lookup symbol" is supposed to return the value of symbol as discovered by the lookup() function.  There is an implied application of a manifest (production environment, site.pp by default).  If these manifests generate output, then that becomes part of the output of the puppet lookup command.\r\n\r\nHere is an example using branch=master, sha = ef9569c59088b85ad8476695a24d479be0dfb376\r\n{code}\r\n[root@lmrgtt9kjyg5esn manifests]# puppet --version\r\n4.3.0\r\n[root@lmrgtt9kjyg5esn manifests]# pwd\r\n/etc/puppetlabs/code/environments/production/modules/data_module/manifests\r\n[root@lmrgtt9kjyg5esn manifests]# cat init.pp\r\n\r\nclass data_module(\r\n) {\r\n  notice("Hello from modules/data_module/manifests/init.pp!")\r\n  notice("Goodbye from modules/data_module/manifests/init.pp!")\r\n}\r\n[root@lmrgtt9kjyg5esn manifests]# puppet lookup data_module::key_in_module\r\nNotice: Scope(Class[Data_module]): Hello from modules/data_module/manifests/init.pp!\r\nNotice: Scope(Class[Data_module]): Goodbye from modules/data_module/manifests/init.pp!\r\n--- data_module1\r\n...\r\n[root@lmrgtt9kjyg5esn manifests]#\r\n{code}\r\nThe expected value is only at the end of the output.', 'https://tickets.puppetlabs.com/browse/PUP-5461', 'https://github.com/puppetlabs/puppet/pull/4546', '2015-10-30T09:15:45.000-0700', '2016-01-26T06:55:08.000-0800', '2016-01-26T06:55:08.000-0800', 'Closed', '', 23, '0', 1, 65, 10, 7, '351438998df39d4926e730d0afd231740337f410', 'https://tickets.puppetlabs.com/browse/PUP-5461', 'https://github.com/puppetlabs/puppet/pull/4546'),
('puppet', 107246, 52227665, 4475, 'epp template don"t check param, just check the number of params', 'when we tried tu do template, only the number of parametter are check.\r\n\r\nWhy if i defined a list of parameters, when call the template whith most number of parameter, the compilator return un error.\r\n\r\nIf i call the template with other parameter name that i have declared in the epp template, i have no compilator error', 'https://tickets.puppetlabs.com/browse/PUP-5552', 'https://github.com/puppetlabs/puppet/pull/4475', '2015-11-26T07:14:38.000-0800', '2016-01-26T06:55:08.000-0800', '2016-01-26T06:55:08.000-0800', 'Closed', '', 12, '0', 1, 61, 61, 3, '690b45d553f68a360ed6b09c8552177c20da502e', 'https://tickets.puppetlabs.com/browse/PUP-5552', 'https://github.com/puppetlabs/puppet/pull/4475'),
('puppet', 110205, 54666109, 4529, 'Functions written in Puppet language errors don"t mention the file', 'With Puppet 4 you"ve done a fantastic job of improving the error messages to indicate the specific file, and the underlying problem. Bravo!\r\n\r\nCould you add a bit of love to the functions written in the Puppet language? They don"t mention which function name, which file name, nothing. All I know is that some Puppet function has an error in it:\r\n\r\n{code}Error: Could not retrieve catalog from remote server: Error 400 on SERVER: Syntax error at ")" at line 26:38 on node client.example.com\r\n{code}\r\n\r\nThe same problem appears when calling log functions and {{fail()}} in particular.\r\n\r\n{code}\r\nError: Could not retrieve catalog from remote server: Error 400 on SERVER: Evaluation Error: Error while evaluating a Function Call, Cannot convert "True" to a boolean value. at line 13:18 on node client.example.com\r\n{code}', 'https://tickets.puppetlabs.com/browse/PUP-5628', 'https://github.com/puppetlabs/puppet/pull/4529', '2015-12-21T00:12:46.000-0800', '2016-01-26T06:55:08.000-0800', '2016-01-26T06:55:08.000-0800', 'Closed', '', 4, '0', 1, 6, 6, 3, '700701db2bc2f5cd6277c89f32e04204e0179de9', 'https://tickets.puppetlabs.com/browse/PUP-5628', 'https://github.com/puppetlabs/puppet/pull/4529'),
('puppet', 111132, 55210032, 4554, 'A puppet function declaration must be a top level construct', 'It"s currently possible to write:\r\n{code:puppet}\r\nclass foo {\r\n  function bar() {\r\n  }\r\n}\r\n{code}\r\nThis should not be possible since a function is a top level construct.', 'https://tickets.puppetlabs.com/browse/PUP-5651', 'https://github.com/puppetlabs/puppet/pull/4554', '2016-01-05T08:19:33.000-0800', '2016-01-26T06:55:08.000-0800', '2016-01-26T06:55:08.000-0800', 'Closed', '', 3, '0', 1, 36, 6, 4, 'e68b539e88f060e11a31a7eaed15df2070354adf', 'https://tickets.puppetlabs.com/browse/PUP-5651', 'https://github.com/puppetlabs/puppet/pull/4554'),
('puppet', 109019, 53371042, 4492, 'hiera lookup regression in resource like class definitions with undef parameter', 'Another regression with hiera lookups if classes are defined resource like and a parameter is configured undef. With prior versions a hiera lookup happened for this parameter. With 4.3.x no lookup occurs. Short reproducer:\r\n\r\n* hiera.yaml:\r\n{code:java}\r\n---\r\n:backends:\r\n  - yaml\r\n\r\n:hierarchy:\r\n  - global\r\n\r\n:yaml:\r\n  :datadir: "/etc/puppetlabs/code/hiera"\r\n{code}\r\n\r\n* /etc/puppetlabs/code/hiera/global.yaml:\r\n{code:java}\r\ntest::p: "hiera value"\r\n{code}\r\n\r\n* test module: /etc/puppetlabs/code/modules/test/manifests/init.pp:\r\n{code:java}\r\nclass test (\r\n  $p = "default module value",\r\n) {\r\n  notice($p)\r\n}\r\n{code}\r\n\r\nwith puppet 4.3.1:\r\n{code:java}\r\npuppet apply --hiera_config [..]/hiera.yaml --modulepath=/etc/puppetlabs/code/modules -e "class { "test": p => undef }"\r\nNotice: Scope(Class[Test]): default module value\r\nNotice: Compiled catalog for puppet4.3.1 in environment production in 0.10 seconds\r\n{code}\r\n\r\nwith puppet 4.2.3:\r\n{code:java}\r\npuppet apply --hiera_config [..]/hiera.yaml --modulepath=/etc/puppetlabs/code/modules -e "class { "test": p => undef }"\r\nNotice: Scope(Class[Test]): hiera value\r\nNotice: Compiled catalog for puppet4.2.3 in environment production in 0.65 seconds\r\n{code}\r\n\r\nAnd an example were this happens in the wild is the module jfryman-nginx with the parameter migration from init.pp to config.pp (an example parameter is server_tokens among others).', 'https://tickets.puppetlabs.com/browse/PUP-5592', 'https://github.com/puppetlabs/puppet/pull/4492', '2015-12-10T02:45:48.000-0800', '2016-01-26T06:55:08.000-0800', '2016-01-26T06:55:08.000-0800', 'Closed', '', 5, '0', 1, 13, 1, 2, '50246cdff3856a120589b3364267a85375116b29', 'https://tickets.puppetlabs.com/browse/PUP-5592', 'https://github.com/puppetlabs/puppet/pull/4492'),
('puppet', 109146, 53312340, 4490, 'Generated resource state is retrieved prematurely', 'Issue discovered while working with the {{lwf/remote_file}} type/provider.\r\n\r\nRemote_file generates a file resource to enforce owner, group and mode parameters. The following is an example use of the resource.\r\n\r\n{code}\r\nremote_file { "download":\r\n  source      => "https://github.com/dimetron/vagrant_docker_dbora12c/archive/master.zip",\r\n  path        => "/tmp/linuxamd64_12102_database_1of2.zip",\r\n  verify_peer => false,\r\n  mode        => "0644",\r\n}\r\n{code}\r\n\r\nThis worked as expected in Puppet 4.2.x However, in Puppet 4.3.1, there is a problem. This is the output from puppet applying this code.\r\n\r\n{code}\r\n[reidmv@halcyon:~/] % puppet apply ~/src/tse-control-repo/test.pp\r\nNotice: Compiled catalog for halcyon.corp.puppetlabs.net in environment production in 0.06 seconds\r\nNotice: /Stage[main]/Main/Remote_file[download]/ensure: created\r\nNotice: /Stage[main]/Main/File[/tmp/linuxamd64_12102_database_1of2.zip]/ensure: created\r\nNotice: Applied catalog in 1.03 seconds\r\n[reidmv@halcyon:~/] % ls -l /tmp/linuxamd64_12102_database_1of2.zip\r\n-rw-r--r-- 1 reidmv staff 0 Dec 10 10:49 /tmp/linuxamd64_12102_database_1of2.zip\r\n[reidmv@halcyon:~/] %\r\n{code}\r\n\r\nNotice that the generated File resource re-creates the file (as an empty file) rather than just changing the mode.\r\n\r\nIf the code directly specifies Remote_file without mode (so no generated file resource) and the File resource explicitly, the behavior is as expected.\r\n\r\n{code}\r\nremote_file { "download":\r\n  source      => "https://github.com/dimetron/vagrant_docker_dbora12c/archive/master.zip",\r\n  path        => "/tmp/linuxamd64_12102_database_1of2.zip",\r\n  verify_peer => false,\r\n}\r\n\r\nfile { "download":\r\n  path => "/tmp/linuxamd64_12102_database_1of2.zip",\r\n  mode => "0644",\r\n}\r\n{code}\r\n\r\nThen Puppet outputs the following on apply:\r\n\r\n{code}\r\n[reidmv@halcyon:~/] % puppet apply ~/src/tse-control-repo/test.pp\r\nNotice: Compiled catalog for halcyon.corp.puppetlabs.net in environment production in 0.05 seconds\r\nNotice: /Stage[main]/Main/Remote_file[download]/ensure: created\r\nNotice: /Stage[main]/Main/File[download]/mode: mode changed "0600" to "0644"\r\nNotice: Applied catalog in 0.92 seconds\r\n[reidmv@halcyon:~/] %\r\n{code}\r\n\r\nThe generated file resource fails to correctly detect that the file already exists.\r\n\r\nWe played around with pry for a bit trying to figure out what was going on and figured out that ensure’s retrieve method was called for the generated file before the remote_file resource was evaluated. The stacktrace from when retrieve is called in 4.3.1 with the generated resource is attached (ignore the line number on the top of the stack as it"s off due to our debugging code).\r\n\r\nThe resource graphs for each manifest are attached as well.\r\n', 'https://tickets.puppetlabs.com/browse/PUP-5595', 'https://github.com/puppetlabs/puppet/pull/4490', '2015-12-10T11:41:09.000-0800', '2016-01-26T06:55:08.000-0800', '2016-01-26T06:55:08.000-0800', 'Closed', '', 2, '0', 1, 17, 3, 1, '9cff0e8fe62dd4c1aa36ff533c4b4e01b078b294', 'https://tickets.puppetlabs.com/browse/PUP-5595', 'https://github.com/puppetlabs/puppet/pull/4490'),
('puppet', 107196, 52201264, 4474, 'package version behavior for epoch versioned rpm"s in centos is broken.', 'puppet-agent 1.3.0\r\nCentOS 7\r\n\r\nI just upgraded from puppet-agent 1.2.4 and all of a sudden I have multiple packages throwing the following notice every single puppet run:\r\n{code:}\r\nNotice: /Stage[main]/Logstash::Package/Logstash::Package::Install[logstash]/Package[logstash]/ensure: ensure changed "1:1.5.5-1" to "1.5.5-1"\r\n{code:}\r\nI"m not 100% positive, but it looks as though this change made be the culprit:\r\nhttps://tickets.puppetlabs.com/browse/PUP-5025\r\n\r\nI tried adding the epoch to the begging of the version given to puppet and I get this:\r\n{code:}\r\nError: Could not update: Execution of "/usr/bin/yum -d 0 -e 0 -y install logstash-1:1.5.5-1" returned 1: Error: Nothing to do\r\nError: /Package[logstash]/ensure: change from purged to 1:1.5.5-1 failed: Could not update: Execution of "/usr/bin/yum -d 0 -e 0 -y install logstash-1:1.5.5-1" returned 1: Error: Nothing to do\r\n{code:}\r\n\r\n', 'https://tickets.puppetlabs.com/browse/PUP-5549', 'https://github.com/puppetlabs/puppet/pull/4474', '2015-11-25T10:41:58.000-0800', '2016-01-26T06:55:08.000-0800', '2016-01-26T06:55:08.000-0800', 'Closed', '', 8, '0', 1, 2, 26, 2, 'ea8ba843ca37d464774b88e5a831bef4ace31d44', 'https://tickets.puppetlabs.com/browse/PUP-5549', 'https://github.com/puppetlabs/puppet/pull/4474'),
('puppet', 105572, 52666076, 4483, 'lookup adapter "lookup_global" produces bad error message for faulty hiera.yaml', 'When there is something wrong with the yaml syntax in a {{hiera.yaml}} the error message produced by the logic in lookup_adapter.lookup_global is not very helpful. It shows the error message twice, the reference to the faulty file says {{<unknown>}}, and the stack trace that is produced is for the location in the lookup_adapter, not where the error occurred. \r\n\r\nTo trigger the error use a hiera yaml with a hierachy like this:\r\n{code:yaml}\r\n:hierarchy:\r\n  - %{boom}\r\n{code}\r\n(error is that there should be quotes around the entry)\r\n\r\nThe error can look like this:\r\n{code}\r\nError: Could not run: Error from DataBinding "hiera" while looking up "lookup_options": (<unknown>): found character that cannot start any token while scanning for the next token at line 3 column 11 in (<unknown>): found character that cannot start any token while scanning for the next token at line 3 column 11\r\n{code}\r\n\r\nI think this is of importance to fix since it provides no clue to the user where the error may be. ', 'https://tickets.puppetlabs.com/browse/PUP-5502', 'https://github.com/puppetlabs/puppet/pull/4483', '2015-11-12T17:11:44.000-0800', '2016-01-26T06:55:10.000-0800', '2016-01-26T06:55:10.000-0800', 'Closed', '', 6, '0', 1, 11, 6, 4, '49c9304deba6635b180a616fd84d5b4baeb318be', 'https://tickets.puppetlabs.com/browse/PUP-5502', 'https://github.com/puppetlabs/puppet/pull/4483'),
('puppet', 111804, 55596358, 4564, 'Windows ADSI User and Group exists? checks are invalid', '{{Puppet::Util::Windows::ADSI::User}} and {{Puppet::Util::Windows::ADSI::Group}} both implement an exists member something like:\r\n\r\n{code}\r\ndef self.exists?(name)\r\n  Puppet::Util::Windows::ADSI.connectable?(Group.uri(name))\r\nend\r\n{code}\r\n\r\nSee https://github.com/puppetlabs/puppet/blob/d26bfd2e9ba08f092114348ebad5e4421270f315/lib/puppet/util/windows/adsi.rb#L324-L326 and https://github.com/puppetlabs/puppet/blob/d26bfd2e9ba08f092114348ebad5e4421270f315/lib/puppet/util/windows/adsi.rb#L467-L469\r\n\r\nThis code is actually incorrect, because a uri like {{WinNT://<SID>}} might be errantly built inside the {{uri}} method and consumed by the {{exists?}} method.  Such a {{WinNT://}} style URI is technically valid, but only for very specific use cases; it cannot be used as a moniker to resolve a user or group when calling {{WIN32OLE.connect}}.  So a COM object that is returned when calling {{WIN32OLE.connect("WinNT://<SID>")}} implements [IADs|https://msdn.microsoft.com/en-us/library/windows/desktop/aa705950(v=vs.85).aspx] but not {{IADsGroup}} or {{IADsUser}}.  When retrieving the {{.Class}} property, the value is always going to be {{"Domain"}} (even though the object returned is not an {{IADsDomain}}.\r\n\r\nThis was discovered during the testing of PUP-5538, and should be fixed prior to that PR being merged.\r\n\r\n{noformat}\r\n[37] pry(main)> admins_by_name = WIN32OLE.connect("WinNT://./Administrators,group")\r\n=> #<WIN32OLE:0x00000008f260e0>\r\n[38] pry(main)> admins_by_name.Class\r\n=> "Group"\r\n[39] pry(main)> admins_by_name.objectSID\r\n=> [1, 2, 0, 0, 0, 0, 0, 5, 32, 0, 0, 0, 32, 2, 0, 0]\r\n\r\n\r\n[40] pry(main)> admins_by_sid = WIN32OLE.connect("WinNT://S-1-5-32-544")\r\n=> #<WIN32OLE:0x000000088429b8>\r\n[41] pry(main)> admins_by_sid.Class\r\n=> "Domain"\r\n[42] pry(main)> admins_by_sid.objectSID\r\nNoMethodError: unknown property or method: `objectSID"\r\n    HRESULT error code:0x80020006\r\n      Unknown name.\r\nfrom (pry):42:in `method_missing"\r\n{noformat}\r\n\r\nThe methods {{sid_uri}} and {{sid_uri_safe}} should **only be used** to generate a SID style uri when adding members to a group via [IADsGroup::Add|https://msdn.microsoft.com/en-us/library/windows/desktop/aa706022(v=vs.85).aspx]', 'https://tickets.puppetlabs.com/browse/PUP-5684', 'https://github.com/puppetlabs/puppet/pull/4564', '2016-01-10T14:30:38.000-0800', '2016-01-26T06:55:10.000-0800', '2016-01-26T06:55:10.000-0800', 'Closed', 'windows', 3, '0', 1, 72, 22, 4, '7e176bfb3adf53d234d893f8481f576e3a2e6a0b', 'https://tickets.puppetlabs.com/browse/PUP-5684', 'https://github.com/puppetlabs/puppet/pull/4564'),
('puppet', 108821, 54717822, 4532, 'Type without namevar causes failures with no error', 'When trying to compile a catalog with a resource type that does not have a namevar specified in the type (ie, no parameter with `:namevar => true` and no `isnamevar` call) then the puppet run will exit 1 as soon as the catalog compile is finished with no back trace, error message, or any other indicator that anything is wrong.\r\n\r\nThis makes it extremely difficult to debug (ie, guessing at what is missing).', 'https://tickets.puppetlabs.com/browse/PUP-5589', 'https://github.com/puppetlabs/puppet/pull/4532', '2015-12-08T21:05:43.000-0800', '2016-01-26T06:55:10.000-0800', '2016-01-26T06:55:10.000-0800', 'Closed', '', 5, '0', 1, 6, 2, 1, 'a15b5b7909b1be36f8eacf1c93d9909b95b8b223', 'https://tickets.puppetlabs.com/browse/PUP-5589', 'https://github.com/puppetlabs/puppet/pull/4532'),
('puppet', 109557, 54761212, 4535, 'Error message for declaring resource without title is confusing', 'When someone makes the mistake of doing something like this\r\n\r\n{code}\r\nexec {\r\n  command => "do something",\r\n}\r\n{code}\r\n\r\nPuppet will complain with:\r\n{code}\r\n A Host Class Definition can not end with a value-producing expression without other effect\r\n{code}\r\n\r\nThis error message is incredibly confusing to anyone without a deeper understanding of the language. What "host class definition"?', 'https://tickets.puppetlabs.com/browse/PUP-5612', 'https://github.com/puppetlabs/puppet/pull/4535', '2015-12-15T01:34:30.000-0800', '2016-01-26T06:55:10.000-0800', '2016-01-26T06:55:10.000-0800', 'Closed', '', 5, '0', 1, 63, 6, 3, '656c98b2998f5324276fb207d4cf2632ca9c623d', 'https://tickets.puppetlabs.com/browse/PUP-5612', 'https://github.com/puppetlabs/puppet/pull/4535'),
('puppet', 110900, 54970019, 4542, 'puppet lookup command creates new SSL hierarchy with self-signed CA', 'Puppet lookup docs says it works on both masterless Puppet nodes, and nodes with a Puppet master (perhaps the docs should say server?). However it fails on agents, and produces an unexpected and unwelcome side effect on Puppet apply nodes.\r\n\r\nWhen using a masterless Puppet it creates a new SSL directory and populates a CA with a new key in the local node"s name.\r\n\r\n{code}\r\n[vagrant@client ~]$ cd .puppetlabs/etc/puppet\r\n\r\n[vagrant@client puppet]$  ls -la ssl\r\nls: cannot access ssl: No such file or directory\r\n\r\n[vagrant@client puppet]$  puppet lookup puppet4::config\r\nNotice: Signed certificate request for ca\r\n---\r\nlog_level: info\r\n\r\n[vagrant@client puppet]$ ls -la ssl\r\ntotal 4\r\ndrwxrwx--x 8 vagrant vagrant 119 Jan  3 10:23 .\r\ndrwxrwxr-x 4 vagrant vagrant  49 Jan  3 10:23 ..\r\ndrwxr-xr-x 5 vagrant vagrant 149 Jan  3 10:23 ca\r\ndrwxr-xr-x 2 vagrant vagrant   6 Jan  3 10:23 certificate_requests\r\ndrwxr-xr-x 2 vagrant vagrant  19 Jan  3 10:23 certs\r\n-rw-r--r-- 1 vagrant vagrant 967 Jan  3 10:23 crl.pem\r\ndrwxr-x--- 2 vagrant vagrant   6 Jan  3 10:23 private\r\ndrwxr-x--- 2 vagrant vagrant   6 Jan  3 10:23 private_keys\r\ndrwxr-xr-x 2 vagrant vagrant   6 Jan  3 10:23 public_keys\r\n\r\n$ openssl x509 -subject -fingerprint -noout -in ssl/ca/ca_crt.pem \r\nsubject= /CN=Puppet CA: client.example.com\r\nSHA1 Fingerprint=DB:A7:FE:80:37:5A:1E:91:C9:FD:B7:0B:88:0E:D0:7D:54:4C:5E:C8\r\n{code}\r\n\r\nFurthermore, on systems which do have an existing Puppet server, it produces the same local CA creation and then complains about the certificate not matching:\r\n\r\n{code}\r\nvagrant@client ssl]$ puppet lookup puppet4::config\r\nError: Could not prepare for execution: The certificate retrieved from the master does not match the agent"s private key.\r\nCertificate fingerprint: 01:56:F3:17:17:A9:65:40:85:04:93:F3:14:A2:6A:A1:AE:DE:B3:52:0E:E7:B7:11:BD:4B:8C:64:74:EF:53:F9\r\nTo fix this, remove the certificate (blah blah blah...)\r\n{code}\r\n\r\nAs before it has created a new SSL CA locally, which of course doesn"t match the key used on the node"s real certificate.\r\n\r\n{code}\r\n[vagrant@client puppet]$ ls -la ssl/ca\r\ntotal 8\r\ndrwxr-xr-x 5 vagrant vagrant   82 Jan  3 10:33 .\r\ndrwxrwx--x 8 vagrant vagrant  119 Jan  3 10:33 ..\r\n-rw-r----- 1 vagrant vagrant 3243 Jan  3 10:33 ca_key.pem\r\n-rw-r--r-- 1 vagrant vagrant  800 Jan  3 10:33 ca_pub.pem\r\ndrwxr-x--- 2 vagrant vagrant    6 Jan  3 10:33 private\r\ndrwxr-xr-x 2 vagrant vagrant    6 Jan  3 10:33 requests\r\ndrwxr-xr-x 2 vagrant vagrant    6 Jan  3 10:33 signed\r\n{code}', 'https://tickets.puppetlabs.com/browse/PUP-5644', 'https://github.com/puppetlabs/puppet/pull/4542', '2016-01-03T02:38:03.000-0800', '2016-01-26T06:55:10.000-0800', '2016-01-26T06:55:10.000-0800', 'Closed', '', 9, '0', 1, 0, 30, 1, 'd5ceb3a2f9f28dc2575f324f0d602c4ea7437b97', 'https://tickets.puppetlabs.com/browse/PUP-5644', 'https://github.com/puppetlabs/puppet/pull/4542'),
('puppet', 78014, 35986182, 3960, 'Yum package provider: ensure => latest fails when obsoleted packages are present', 'When the yum provider has packages marked as obsoleted, the yum provider fails to ensure => latest on a package.\r\n{noformat}\r\n[root@localhost provider]# puppet apply -e "package{"puppet-agent": ensure => "latest"}"\r\nNotice: Compiled catalog for centos-70-x64.ineu.us in environment production in 0.79 seconds\r\nError: Could not get latest version: undefined method `[]" for nil:NilClass\r\nError: /Stage[main]/Main/Package[puppet-agent]/ensure: change from 1.0.1-1.el7 to latest failed: Could not get latest version: undefined method `[]" for nil:NilClass\r\nNotice: Applied catalog in 0.38 seconds\r\n{noformat}\r\nTo duplicate, bring up a CentOS7.0 VM, install puppet-agent 1.0.1', 'https://tickets.puppetlabs.com/browse/PUP-4497', 'https://github.com/puppetlabs/puppet/pull/3960', '2015-04-29T15:46:49.000-0700', '2016-02-16T05:40:33.000-0800', '2016-02-16T05:40:33.000-0800', 'Closed', '', 9, '0', 1, 207, 0, 3, '1a3bd9b8ce838b204075e3b684c5075fbb5e3b96', 'https://tickets.puppetlabs.com/browse/PUP-4497', 'https://github.com/puppetlabs/puppet/pull/3960'),
('puppet', 71636, 33509086, 3836, 'puppetversion fact is missing', 'Executing puppet with cfacter and stdlib generates an error every time puppet runs:\r\n\r\n{noformat}\r\n[root@jaiuwwlivqmy8by ~]# puppet --version\r\n4.0.0-rc1\r\n[root@jaiuwwlivqmy8by ~]# facter --version\r\n2.4.2\r\n[root@jaiuwwlivqmy8by ~]# cfacter --version\r\n0.4.0 (commit f4eecdfa9ff69c801bfedba3fc0fd5285e86b3c5)\r\n[root@jaiuwwlivqmy8by ~]# facter puppetversion\r\n4.0.0-rc1\r\n[root@jaiuwwlivqmy8by ~]# cfacter puppetversion\r\n\r\n[root@jaiuwwlivqmy8by ~]# time puppet agent -t --server $(facter fqdn) --cfacter --trace\r\nInfo: Retrieving pluginfacts\r\nInfo: Retrieving plugin\r\nInfo: Loading facts\r\nError: Facter: error while resolving custom fact "pe_version": undefined method `match" for nil:NilClass\r\nbacktrace:\r\n/opt/puppetlabs/puppet/cache/lib/facter/pe_version.rb:13:in `block (2 levels) in <top (required)>"\r\n/opt/puppetlabs/puppet/cache/lib/facter/pe_version.rb:20:in `call"\r\n/opt/puppetlabs/puppet/cache/lib/facter/pe_version.rb:20:in `value"\r\n/opt/puppetlabs/puppet/cache/lib/facter/pe_version.rb:20:in `block (2 levels) in <top (required)>"\r\n/opt/puppetlabs/puppet/lib/ruby/vendor_ruby/puppet/indirector/facts/facter.rb:27:in `call"\r\n/opt/puppetlabs/puppet/lib/ruby/vendor_ruby/puppet/indirector/facts/facter.rb:27:in `to_hash"\r\n/opt/puppetlabs/puppet/lib/ruby/vendor_ruby/puppet/indirector/facts/facter.rb:27:in `find"\r\n/opt/puppetlabs/puppet/lib/ruby/vendor_ruby/puppet/indirector/indirection.rb:194:in `find"\r\n/opt/puppetlabs/puppet/lib/ruby/vendor_ruby/puppet/configurer/fact_handler.rb:15:in `find_facts"\r\n/opt/puppetlabs/puppet/lib/ruby/vendor_ruby/puppet/configurer/fact_handler.rb:31:in `facts_for_uploading"\r\n/opt/puppetlabs/puppet/lib/ruby/vendor_ruby/puppet/configurer.rb:97:in `get_facts"\r\n{noformat}\r\n\r\nThe error occurs because cfacter doesn"t define the {{puppetversion}} fact, which causes stdlib issues:\r\n\r\n{code:ruby}\r\n    pe_ver = Facter.value("puppetversion").match(/Puppet Enterprise (\d+\.\d+\.\d+)/)\r\n{code}\r\n\r\nIt makes sense for cfacter to not generate the {{puppetversion}} fact when run standalone (because we don"t want a cyclic dependency). But I would think puppet would inject its {{puppetversion}} into facter (whichever implementation is being used), so that the fact is present during fact resolution and later compilation. So arguably this is a puppet issue, but may affect the facter/cfacter interface?\r\n\r\nrisk assessment: high\r\nprobability: high (PE requires)\r\nseverity: high\r\ntest layer: unit\r\n\r\nh3. Resolution:\r\n\r\nPuppet now adds the puppetversion fact if it"s using cfacter. ', 'https://tickets.puppetlabs.com/browse/PUP-4359', 'https://github.com/puppetlabs/puppet/pull/3836', '2015-03-13T16:05:33.000-0700', '2016-02-18T02:06:20.000-0800', '2016-02-18T02:06:20.000-0800', 'Closed', '', 10, '0', 1, 22, 0, 3, '8f45d94d2bc6e7d6da8f7ac7187161a301968b13', 'https://tickets.puppetlabs.com/browse/PUP-4359', 'https://github.com/puppetlabs/puppet/pull/3836'),
('puppet', 109840, 53939758, 4512, 'When a module using lookup_options include another using lookup_options the 2nd is ignored', 'Given 2 modules both with lookup_options based hiera configuration is used like this:\r\n\r\n{code}\r\nclass profile::base(\r\n  Array[String] $packages = []\r\n) {\r\n  notice($packages)\r\n\r\n  include users\r\n}\r\n{code}\r\n\r\nand the users module is:\r\n\r\n{code}\r\nclass users($local={}) {\r\n  notice($local)\r\n}\r\n{code}\r\n\r\nWith both modules configured to use lookup_options to set the their parameters as merging keys the following happens:\r\n\r\nIncluding the users class directly works, data is merged as per the strategy:\r\n\r\n{code}\r\n$ puppet apply -e "include users" --test\r\nNotice: Scope(Class[Users]): {bob => {name => Bob, shell => /bin/zsh}}\r\n{code}\r\n\r\nBut if I include the profile - which has its own lookup_options - then the included class strategy is ignored and a first match lookup is done:\r\n\r\n{code}\r\n$ puppet apply -e "include profile::base" --test\r\nNotice: Scope(Class[Users]): {bob => {shell => /bin/zsh}}\r\n{code}\r\n\r\nI think the description here is probably not enough but it"s hard given the amount of files needed to reproduce so I am attaching a tarball with a reproducing setup, extract into ~/.puppetlabs/etc/ and fix the :datadir: path in ~/.puppetlabs/etc/code/hiera.yaml', 'https://tickets.puppetlabs.com/browse/PUP-5618', 'https://github.com/puppetlabs/puppet/pull/4512', '2015-12-16T11:08:56.000-0800', '2016-02-20T15:53:17.000-0800', '2016-02-20T15:53:17.000-0800', 'Closed', '', 5, '0', 1, 84, 1, 18, '484794baa2c66ed531bb7617a796a42ba948351f', 'https://tickets.puppetlabs.com/browse/PUP-5618', 'https://github.com/puppetlabs/puppet/pull/4512'),
('puppet', 116582, 59254613, 4667, 'Support Ubuntu 16.04 in systemd provider', 'Need to add case for Ubuntu 16.04. Github pull request exists. Making ticket to tie to it.', 'https://tickets.puppetlabs.com/browse/PUP-5897', 'https://github.com/puppetlabs/puppet/pull/4667', '2016-02-12T18:37:02.000-0800', '2016-02-26T11:07:04.000-0800', '2016-02-26T11:07:04.000-0800', 'Closed', '', 0, '0', 1, 8, 1, 2, '9000a5da8048742939e5fb010b5aae69da84e5b5', 'https://tickets.puppetlabs.com/browse/PUP-5897', 'https://github.com/puppetlabs/puppet/pull/4667'),
('puppet', 103139, 49210406, 4390, '$trusted is not available in master compile and fails when coming from PDB', 'There are two sides to this problem:\r\n* As the subject says - the information in {{$trusted}} is not available when running applications like {{puppet master compile}} and {{puppet lookup}} under most normal configurations (unless being hit by the next part of the problem)\r\n* When having a configuration that directly hits puppet db for information, puppet db stores the trusted information as a regular node parameter. When puppet db terminus returns that, an attempt is subsequently made to set the privileged scope variable {{$trusted}} and that is rejected. There are several tickets that report this problem.\r\n\r\nResurrecting $trusted\r\n-----\r\nWe absolutely do want to resurrect the {{$trusted}} information. If not done, then {{puppet master compile}} will not work if manifests include use of {{$trusted}}, or (as recommended) that the hiera hierarchy uses {{$trusted}} to get a trusted certname as part of the path to data.\r\n\r\nWe should therefore resurrect the information in a reasonable way. This means two things:\r\n* When caching a node - it should cache the trusted facts as a parameter with the name {{"trusted"}} just like it is done in puppet db.\r\n* A {{node}} given to the {{compiler}} should be "sanitized" before it is used. If there is real trusted data (from a remote request) or from a self authenticated local "apply" available, that trusted data should be used. If not available, but available in form of parameters looked up from the node indirection (cache or backing store) that trusted information should be used with one extra processing step being performed.\r\n* If the trusted information comes from the indirection, the attribute {{authenticated}} should be set to {{false}} if the process is not running as root, otherwise, this attribute retains its value (i.e. most likely the value "remote" which means that the node cert was used to authenticate).\r\n\r\nNote that the difference in {{$trusted[authenticated]}} is of importance for those that manage secrets as it can be used to take an alternative path in the logic - using anonymized/boilerplate values instead of real values. This is of value if users should be able to run {{master compile}} to debug what is going on in a catalog, but they are not authorized to see certain values. (A fairly advanced use-case). Running as root allows a user to run exactly as if a request was authenticated from a cert - the user must know that the configuration is safe - i.e. that a backing store/cache is in use that can be trusted. \r\n\r\nRelationship to other tickets/reportd problems\r\n----\r\nThis ticket was created because although there are several other reports of the error when trusted is being processed as a parameter - the conditions that cause the problem to occur are different - the reported error typically masks a different error (a configuration failure).\r\n\r\nHere are some of the causes:\r\n\r\n* routes setting points to the wrong or non existing routes.yaml file\r\n* the routes are wrong\r\n* the wrong terminus is used for PDB cache\r\n* user has experimented with termini and have bad data in the cache\r\n* there is a time skew between agent and master that causes a cache miss (cache timeout is taken from {{runinterval}} setting).\r\n* settings for termini are not done which results in defaults being used which leaves it up to the applications used to set the terminus based on if it is running in master, or agent mode. A setting of "none" is sometimes (rare) what should have been used.\r\n\r\nThe detection of which of these cases that triggrs the "trusted problem" is difficult to find as the build up of the settings typically fall back on defaults when things are missing (there are several cases above where an error or a warning should be issued to make it easier to find the problem).', 'https://tickets.puppetlabs.com/browse/PUP-5441', 'https://github.com/puppetlabs/puppet/pull/4390', '2015-10-27T18:59:24.000-0700', '2016-03-11T18:02:50.000-0800', '2016-03-11T18:02:50.000-0800', 'Closed', '', 5, '0', 2, 159, 2, 4, '7e719dbe8285b56c5a28bb1d696c92bb972565de', 'https://tickets.puppetlabs.com/browse/PUP-5441', 'https://github.com/puppetlabs/puppet/pull/4390'),
('puppet', 103829, 53933025, 4511, 'Resource Collectors cannot use resource references in search expressions', 'In Puppet 4, resource collectors cannot use resource references in the search expression. This is an ability that did work in Puppet 3 and is currently in the documentation for Puppet 4.\r\n\r\nThe following code in Puppet,\r\n\r\n{code:puppet}\r\nFile<| notify == Service["foo"] |>\r\n{code}\r\n\r\nproduces the error,\r\n\r\n{{Error: Evaluation Error: Error while evaluating a Virtual Query, Cannot transform object of class Puppet::Pops::Model::AccessExpression at /private/tmp/collection.pp:1:1 on node tom-mbp}}\r\n', 'https://tickets.puppetlabs.com/browse/PUP-5465', 'https://github.com/puppetlabs/puppet/pull/4511', '2015-11-02T08:56:28.000-0800', '2016-03-16T17:17:28.000-0700', '2016-03-16T17:17:28.000-0700', 'Closed', '', 3, '0', 1, 24, 0, 2, '36d18382bb53eafd73e7af0ce596dea0c0322e0f', 'https://tickets.puppetlabs.com/browse/PUP-5465', 'https://github.com/puppetlabs/puppet/pull/4511'),
('puppet', 111996, 57931777, 4614, 'benchmark:function_loading aborts with stack overflow', 'E.g.\r\n\r\n{code}\r\nbe rake benchmark:function_loading\r\nmkdir -p /var/folders/6v/63w2j07x5vv4fdcx449fphxw0000gp/T/function_loading20160111-22619-d335fu\r\n                 user     system      total        real\r\nRun 1      rake aborted!\r\nstack level too deep\r\n{code}\r\n', 'https://tickets.puppetlabs.com/browse/PUP-5693', 'https://github.com/puppetlabs/puppet/pull/4614', '2016-01-11T17:41:09.000-0800', '2016-03-17T10:53:17.000-0700', '2016-03-17T10:53:17.000-0700', 'Closed', '', 14, '0', 1, 27, 10, 6, '84d00b155c551af390b30daa3f9a37fc1280b016', 'https://tickets.puppetlabs.com/browse/PUP-5693', 'https://github.com/puppetlabs/puppet/pull/4614'),
('puppet', 120352, 62069326, 4760, 'Puppet types sometimes fail to compare for equality', 'The Puppet type system uses a {{==}} method in the topmost {{PAnyType}} class and then other types adds overrides for that method. The topmost class also declares {{eql?}} as an alias for {{==}}. This doesn"t work because the alias does not recognize the overrides. It still points to the method in the topmost class.\r\n\r\nAs a consequence, when comparing types for equality using the {{eql?}} method, only the topmost {{==}} method was used. The {{eql?}} method is used by {{Hash}}, {{Set}} and method like Ruby {{uniq}}.\r\n\r\nThe bug can be observed using puppet apply:\r\n{code}\r\npuppet apply -e "notice({ Variant[Enum[a,b,c]] => "first", Variant[Pattern[a,b,c]] => "second"})"\r\nNotice: Scope(Class[main]): {Variant[Enum["a", "b", "c"]] => second}\r\n{code}\r\n', 'https://tickets.puppetlabs.com/browse/PUP-6020', 'https://github.com/puppetlabs/puppet/pull/4760', '2016-03-08T05:08:44.000-0800', '2016-03-17T10:53:18.000-0700', '2016-03-17T10:53:18.000-0700', 'Closed', '', 3, '0', 1, 30, 28, 2, 'a02c6a7e8bc1ce288cfa2bc787f8ce229a6ebf0f', 'https://tickets.puppetlabs.com/browse/PUP-6020', 'https://github.com/puppetlabs/puppet/pull/4760'),
('puppet', 112491, 56182747, 4574, 'TypeParser cannot handle negative numbers', 'The {{Puppet::Pops::Types::TypeParser}} used when parsing dispatch declarations for a puppet functions written in Ruby is not capable of parsing negative numbers. It is therefore not possible to define a dispatch with a parameter type like {{Integer\[default,-1\]}}. The regular parser does not have this problem however so {{puppet apply -e "Integer\[default,-1\]"}} executes without errors.', 'https://tickets.puppetlabs.com/browse/PUP-5712', 'https://github.com/puppetlabs/puppet/pull/4574', '2016-01-14T14:08:46.000-0800', '2016-03-17T10:53:18.000-0700', '2016-03-17T10:53:18.000-0700', 'Closed', '', 14, '0', 1, 9, 0, 2, 'e2832318f64a99de5479a86622aeb11b3108ab4f', 'https://tickets.puppetlabs.com/browse/PUP-5712', 'https://github.com/puppetlabs/puppet/pull/4574'),
('puppet', 118225, 60410861, 4701, 'Restore monkey patch to Symbol', 'It pains me immensely to pen a ticket summary like this one, but c"est la vie.\r\n\r\nBackstory:\r\n* back in 2011, for http://projects.puppetlabs.com/issues/5466, we added a monkey patch to add a {{<=>}} method to {{Symbol}} to allow sorting\r\n* in 2012, as part of cleanup the monkey patch was made conditional on whether that version of Ruby already had a {{<=>}} method for {{Symbol}}. As it turns out, ruby 1.8.7 lacks that method, but ruby 1.9.3+ have that method (but a different implementation than our monkey patch).\r\n* in PUP-4330, we vendored the plist gem into puppet. This gem happens to include much the same patch (but without the conditional logic).\r\n* in PUP-1455 (not yet released), we unvendored the plist gem, thus effectively removing that monkey patch for all rubies currently supported.\r\n\r\nThis broke one spec test in the puppet-server test suite, which was how this was discovered. However, given how low-level this is, the potential for breakage in modules seems pretty high, so the prudent approach here is to restore the monkey patch.', 'https://tickets.puppetlabs.com/browse/PUP-5962', 'https://github.com/puppetlabs/puppet/pull/4701', '2016-02-23T13:01:48.000-0800', '2016-03-17T10:53:19.000-0700', '2016-03-17T10:53:19.000-0700', 'Closed', '', 8, '0', 1, 1, 1, 1, 'dc83730fc7c4ea3986ced3286ecb37f7370b21c0', 'https://tickets.puppetlabs.com/browse/PUP-5962', 'https://github.com/puppetlabs/puppet/pull/4701'),
('puppet', 115121, 58204975, 4628, 'Fix memory-leaks caused by global variables holding on to environments', 'When searching for memory leaks we found two places where an environment is referenced in such a way that might be prevented from being garbage collected for a very long time (in some cases indefinitely).', 'https://tickets.puppetlabs.com/browse/PUP-5813', 'https://github.com/puppetlabs/puppet/pull/4628', '2016-02-03T13:19:48.000-0800', '2016-03-17T10:53:19.000-0700', '2016-03-17T10:53:19.000-0700', 'Closed', '', 1, '0', 2, 46, 41, 7, 'f1a8c3ddf98d69997448583e9a8d27f6b2b71c91', 'https://tickets.puppetlabs.com/browse/PUP-5813', 'https://github.com/puppetlabs/puppet/pull/4628'),
('puppet', 116491, 59199185, 4664, 'Alias types are presented with the wrong name in type mismatches', 'Type aliases are presented the wrong way when there is a type mismatch. \r\nGiven:\r\n{code:puppet}\r\ntype MyType = Integer[42,42]\r\nfunction foo(MyType $a) {\r\n  notice $a\r\n}\r\nnotice foo(43)\r\n{code}\r\nI expect the result to be:\r\n{code}\r\nError: Evaluation Error: Error while evaluating a Function Call, "foo" parameter "a" expects a MyType value, got Integer at ...\r\n{code}\r\nBut I get this instead:\r\n{code}\r\nError: Evaluation Error: Error while evaluating a Function Call, "foo" parameter "a" expects a TypeA value, got Integer at ...\r\n{code}\r\n\r\nIt seems that it not only got the type name wrong, but it also failed to point out that the value is 43, and not the expected 42.', 'https://tickets.puppetlabs.com/browse/PUP-5892', 'https://github.com/puppetlabs/puppet/pull/4664', '2016-02-12T07:17:11.000-0800', '2016-03-17T10:53:20.000-0700', '2016-03-17T10:53:20.000-0700', 'Closed', '', 1, '0', 5, 54, 25, 7, '8ee5ad3d74dd7db26604d00440e324e6524e97ea', 'https://tickets.puppetlabs.com/browse/PUP-5892', 'https://github.com/puppetlabs/puppet/pull/4664'),
('puppet', 115521, 59040490, 4657, 'reverse_each and step functions should return undef when given a block to avoid confusion', 'In this example it is surprising that the original value is produced and chained to map:\r\n{code:puppet}\r\nnotice [1,2,3,4].step(2)|$x|{ /* irrelevant what happens here*/ }.map |$x| {$x}\r\n{code}\r\nI expect it to notice [1,3]\r\nInstead it notices [1,2,3,4]\r\n\r\n\r\n\r\n', 'https://tickets.puppetlabs.com/browse/PUP-5837', 'https://github.com/puppetlabs/puppet/pull/4657', '2016-02-07T19:10:10.000-0800', '2016-03-17T10:53:20.000-0700', '2016-03-17T10:53:20.000-0700', 'Closed', '', 6, '0', 2, 21, 7, 4, '61ce7453213afbbf63b478e8d6c107d2a4b78ebb', 'https://tickets.puppetlabs.com/browse/PUP-5837', 'https://github.com/puppetlabs/puppet/pull/4657'),
('puppet', 113192, 56774275, 4590, 'Value of the key dependencies in the metadata.json of modules isn"t checked', 'With the following metadata.json in a module:\r\n\r\n{code:java}\r\n{\r\n  "name": "",\r\n  "version": "",\r\n  "summary": "",\r\n  "author": "",\r\n  "description": "",\r\n  "source": "",\r\n  "license": "",\r\n  "dependencies": ""\r\n}\r\n{code}\r\n\r\nno catalog can be generated anymore with the following error message:\r\n\r\nundefined method `each" for "":String\r\n\r\nbecause the code (/opt/puppetlabs/puppet/lib/ruby/vendor_ruby/puppet/module.rb Line 157) expects and don"t verify that the value of dependencies is an array.', 'https://tickets.puppetlabs.com/browse/PUP-5734', 'https://github.com/puppetlabs/puppet/pull/4590', '2016-01-21T08:29:21.000-0800', '2016-03-17T10:53:20.000-0700', '2016-03-17T10:53:20.000-0700', 'Closed', '', 5, '0', 2, 17, 0, 2, '78e72733e11c63d7a9d2fceab13a262ae63e08e0', 'https://tickets.puppetlabs.com/browse/PUP-5734', 'https://github.com/puppetlabs/puppet/pull/4590'),
('puppet', 110915, 54990991, 4543, 'fqdn_rand in real world - only 336 of possible 1440 daily cron slots ever used.', 'Take the very typical code for once per day cron on 50000 hosts named\r\n1.example.org, 2.example.org , ...\r\n\r\n{code}\r\ncron{"/bin/true":\r\n   minute => fqdn_rand(60),\r\n   hour    => fqdn_rand(24)\r\n}\r\n{code}\r\n\r\n\r\nThere are 24 * 60 = 1440 cron slots in day but in reality even with 50,000 hosts\r\nonly 336 slots are ever used.\r\n\r\nThe current fqdn_rand code is something like:\r\n\r\n{code}\r\nseed = Digest::MD5.hexdigest(h).hex\r\nhour = Puppet::Util.deterministic_rand(seed,24)\r\nmin  = Puppet::Util.deterministic_rand(seed,60)\r\n{code}\r\n\r\nOur suspicion is that some where  there is a construct \r\nN % 24 and an N % 60 which forces only the minute to ever be\r\nsignificant value with the hour always predictable from the minute. This\r\ncan not be the whole picture because *336* cannot be explained.\r\n\r\nWhilst ignoring the underlying cause for now making following change  to \r\nuse the max number within the seed  helps things\r\nsignificantly. This breaks  the relationship between *fqdn_rand(60)* and\r\n *fqdn_rand(24)* and we now get a flat distribution\r\nwith all 1440  cron slots being used.\r\n\r\n{code}\r\n   seed = Digest::MD5.hexdigest("#{h}:24").hex\r\n    hour = Puppet::Util.deterministic_rand(seed,24)\r\n    seed = Digest::MD5.hexdigest("#{h}:60").hex\r\n    min  = Puppet::Util.deterministic_rand(seed,60)\r\n{code}\r\n\r\nThe above would be a trivial patch to fqdn_rand.rb.\r\n\r\nPlease find attached \r\n\r\n* test_fqdn.rb  simulates 50,000 hosts with the existing and alternate seed method.\r\n* results.dat and results.png data and gnuplot of existing puppet code.\r\n* newresults.dat and newresults.png data and gnuplot of alternate method above.\r\n\r\nThe .dat files are 24 by 60 matrix with a number of the occurrence of each cron slot used.\r\nThe plots are similarly x and y of 24 hours by 60 minutes with a scratter for each cron slot being used.\r\n\r\nThe results.png clearly show most of slots being empty (at zero).  The newresults.png\r\nis a much flatter distribution.\r\n\r\nIt would of course be nice to understand where 336 comes from.\r\n\r\nWe have tested both with ruby 1.8 and ruby 2.0 but find no difference in behavior.\r\n\r\n\r\n\r\n\r\n', 'https://tickets.puppetlabs.com/browse/PUP-5646', 'https://github.com/puppetlabs/puppet/pull/4543', '2016-01-04T07:15:34.000-0800', '2016-03-17T10:53:20.000-0700', '2016-03-17T10:53:20.000-0700', 'Closed', '', 16, '0', 1, 1, 1, 1, '4f8ea4dcf60f8ab6b202c70356e320508672c4d0', 'https://tickets.puppetlabs.com/browse/PUP-5646', 'https://github.com/puppetlabs/puppet/pull/4543'),
('puppet', 120542, 62278526, 4769, 'static catalogs do not copy source host and port to content_uri', 'If you define a file resource with a source parameter:\r\n\r\n{code:puppet}\r\nfile { "/tmp/file":\r\n  ensure => file,\r\n  source => "puppet://host:8888/modules/foo/bar",\r\n}\r\n{code}\r\n\r\nThen the {{content_uri}} omits the host and port:\r\n\r\n{code:json}\r\n  "content_uri": "puppet:///modules/foo/bar"\r\n{code}\r\n\r\nwhich can cause the agent to retrieve the file from a different host/port than was originally specified.\r\n\r\nWe should preserve the host and port. The reason we don"t is because we call {{CGI.escape}} which corrupts the URI.', 'https://tickets.puppetlabs.com/browse/PUP-6031', 'https://github.com/puppetlabs/puppet/pull/4769', '2016-03-09T10:16:58.000-0800', '2016-03-17T10:53:21.000-0700', '2016-03-17T10:53:21.000-0700', 'Closed', '', 1, '0', 1, 22, 2, 2, 'ca923e43c34db46920aac40e54f6718ecff5e2c1', 'https://tickets.puppetlabs.com/browse/PUP-6031', 'https://github.com/puppetlabs/puppet/pull/4769'),
('puppet', 112684, 57150405, 4599, 'Modify install.rb to install a puppet.bat file on windows', 'Our current way of installing puppet drops a ruby script into the bindir that doesn"t work on windows. We need install.rb to install a puppet.bat file instead (which we also either need to write or copy over from puppet_for_the_win)', 'https://tickets.puppetlabs.com/browse/PUP-5718', 'https://github.com/puppetlabs/puppet/pull/4599', '2016-01-15T15:25:37.000-0800', '2016-03-17T10:53:22.000-0700', '2016-03-17T10:53:22.000-0700', 'Closed', '', 4, '0', 2, 54, 20, 4, 'd9cd92bf5c0a0ccc0a1e803c727e1244f16cded2', 'https://tickets.puppetlabs.com/browse/PUP-5718', 'https://github.com/puppetlabs/puppet/pull/4599'),
('puppet', 120463, 62188332, 4766, 'Restrict which files are inlined within the per-environment directory', 'Currently puppet"s catalog terminus will inline metadata for anything within the per-environment code directory. However, puppetserver"s ACL will only allow static content to be retrieved if the path is of the form {{$codedir/environments/<environment>/modules/\*/files/\*\*}}.\r\n\r\nUsually that is the case. However, if a user specifies a environment.conf with a custom [{{modulepath}}|https://github.com/puppetlabs/control-repo/blob/production/environment.conf#L1], then it"s possible for the resolved file path to be of the form {{$codedir/environments/<environment>/site/role/\*\*}}, where {{role}} is interpreted as the module name. As a result, we will inline file metadata, but puppetserver will refuse to serve file content.\r\n\r\nWe need to be more restrictive and only inline metadata for files of the form:\r\n\r\n{{$codedir/environments/<environment>/\*/<module>/files/\*\*}}.', 'https://tickets.puppetlabs.com/browse/PUP-6024', 'https://github.com/puppetlabs/puppet/pull/4766', '2016-03-08T15:50:18.000-0800', '2016-03-17T10:53:22.000-0700', '2016-03-17T10:53:22.000-0700', 'Closed', 'burnside-ss', 2, '0', 1, 154, 2, 2, 'cc897d54fd5d10503e4044b9c829d6dee7d95609', 'https://tickets.puppetlabs.com/browse/PUP-6024', 'https://github.com/puppetlabs/puppet/pull/4766'),
('puppet', 116591, 59658852, 4678, 'Data types seems to be messed up on hash parameters', 'The following code:\r\n\r\n{code:java}\r\ndefine test ($b) {\r\n  $a = { key => undef }\r\n  notice("a: $a")\r\n  notice("b: $b")\r\n  $a.each |Array $values| {\r\n    notice("a values: $values")\r\n  }\r\n  $b.each |Array $values| {\r\n    notice("b values: $values")\r\n  }\r\n}\r\n\r\n$a = { key => undef }\r\ntest { "test":\r\n  b => $a,\r\n}\r\n{code}\r\n\r\ngenerates the following output if run with puppet apply:\r\n\r\n{code}\r\npuppet apply test.pp\r\nNotice: Scope(Test[test]): a: {key => }\r\nNotice: Scope(Test[test]): b: {key => }\r\nNotice: Scope(Test[test]): a values: [key, ]\r\nError: Evaluation Error: Error while evaluating a Resource Statement, Evaluation Error: Error while evaluating a Method call, block parameter "values" expects an Array value, got Tuple at /home/rvicinus/test.pp:8:5  at /home/rvicinus/test.pp:14 on node puppetmaster\r\n{code}\r\n\r\nI would expect that the second each statement would run like the first, because the supplied hash is absolutely equally created like the one provided to the first each statement. I think somehow assigning the hash to a parameter messes up the data types, because the code works as expected if the Array keyword in the second each statement is removed. This is also the workaround that I use.', 'https://tickets.puppetlabs.com/browse/PUP-5898', 'https://github.com/puppetlabs/puppet/pull/4678', '2016-02-13T03:48:57.000-0800', '2016-03-17T10:53:23.000-0700', '2016-03-17T10:53:23.000-0700', 'Closed', '', 13, '0', 1, 14, 4, 2, '46ba661c4ed66459fdb0fc95673a8ec9b39bcc69', 'https://tickets.puppetlabs.com/browse/PUP-5898', 'https://github.com/puppetlabs/puppet/pull/4678'),
('puppet', 118450, 60748144, 4718, 'Add catalog_format to the catalog', 'We do not specify the version of catalog"s schema, so readers of the catalog don"t necessarily know how to interpret the data. We should add a {{catalog_format}} property, serialized with the catalog, like we do for {{Report#report_format}}.', 'https://tickets.puppetlabs.com/browse/PUP-5970', 'https://github.com/puppetlabs/puppet/pull/4718', '2016-02-24T14:19:34.000-0800', '2016-03-17T10:53:23.000-0700', '2016-03-17T10:53:23.000-0700', 'Closed', '', 2, '0', 1, 36, 2, 5, 'a2f3bb26f89e4549ec605b2b43a88cd52958b2ce', 'https://tickets.puppetlabs.com/browse/PUP-5970', 'https://github.com/puppetlabs/puppet/pull/4718'),
('puppet', 102806, 49541769, 4400, 'Add a query string with environment when sending HTTP POST', 'Hello, \r\n\r\nWhen running a Puppet 4 run, every http call to PuppetServer includes a query string with the current  "environment".\r\n\r\n{code}\r\nGET /puppet/v3/node/test.dc01?environment=production\r\nGET /puppet/v3/file_metadata/modules/concat/concatfragments.rb?environment=production...\r\nPUT /puppet/v3/report/test.dc01?environment=production&\r\n.... \r\n{code}\r\n\r\nAll except the POST to get the catalog \r\n\r\n{code}\r\nPOST /puppet/v3/catalog/test.dc01 HTTP/1.1\r\n{code}\r\n\r\nIt makes it hard to load-balance puppet load accross several puppetservers running differents environnments.\r\n\r\nUsing Puppet3.x, the environment was in the uri, so it was easy to loadbalance :\r\n\r\n{code}\r\n  ProxyPassMatch ^/stable/ balancer://puppetserver timeout=600\r\n  <Location ~ ^/stable/ >\r\n   RequestHeader set X-Client-DN "CN=%{SSL_CLIENT_S_DN_CN}e"\r\n   ProxyPassReverse balancer://puppetserver\r\n  </Location>\r\n{code}\r\n\r\nUsing Puppet4, I am using ModRewrite : \r\n\r\n{code}\r\n  RewriteCond %{QUERY_STRING} ^(.*)environment=production(.*)$\r\n  RewriteRule ^(.*) balancer://puppetserver$1 [P]\r\n{code}\r\n\r\nIt works well, except for the POST Catalog call.\r\n\r\nIs it possible to add also add a query string to this specific call ? \r\n\r\nRegards\r\n\r\nOlivier', 'https://tickets.puppetlabs.com/browse/PUP-5428', 'https://github.com/puppetlabs/puppet/pull/4400', '2015-10-24T02:14:00.000-0700', '2016-03-17T10:53:23.000-0700', '2016-03-17T10:53:23.000-0700', 'Closed', '', 2, '0', 1, 2, 1, 1, '50e1b36ec598bdfc673ec866edb015246141fd32', 'https://tickets.puppetlabs.com/browse/PUP-5428', 'https://github.com/puppetlabs/puppet/pull/4400'),
('puppet', 87527, 59113238, 4661, 'PUP-121 (relative namespacing) was never fully resolved in 3.x future parser', 'PUP-121 was about removing relative lookup of class names, and it was marked as resolved in Puppet 3.7.0 (with future parser enabled). It was never actually resolved at all in the 3 series, although it"s fixed in 4.0. This is a significant language difference, which seems to have the potential to cause problems for upgraders. \r\n\r\nThe following two manifests prove that this was never resolved:\r\n\r\n{code}\r\nclass foo::thing {\r\n  notify {"from foo::thing":}\r\n}\r\n\r\nclass thing {\r\n  notify {"from ::thing":}\r\n}\r\n\r\nclass foo {\r\n  class {"thing":}\r\n}\r\n\r\ninclude foo\r\n{code}\r\n\r\nThe above should notify "from ::thing," but in Puppet 3.8 it will notify "from foo::thing" instead. \r\n\r\n{code}\r\nclass bar::other {\r\n  class {"other":}\r\n}\r\n\r\nclass other {\r\n  notify {"from ::other":}\r\n}\r\n\r\ninclude bar::other\r\n{code}\r\n\r\nThe above should compile cleanly and notify "from ::other," but in Puppet 3.8 it will fail with a duplicate declaration error.\r\n\r\nFurthermore, PUP-121 says that the tests in spec/integration/parser/future_compiler_spec.rb, under "when resolving class references" are supposed to prove this is fixed, but they actually seem to have nothing to do with the problem described in PUP-121 (i.e. "include "thing" can include something other than the one class named "thing""). If we don"t have any real tests that check for this misbehavior, we need some. \r\n\r\nUPDATE\r\n----\r\nWe should add the tests in this ticket to 3.x and make them work for parser=future.\r\nThen merge that to stable and make the tests standard and ensure runtime works as expected - fix the issues. Then merge to master.', 'https://tickets.puppetlabs.com/browse/PUP-4818', 'https://github.com/puppetlabs/puppet/pull/4661', '2015-07-06T10:45:52.000-0700', '2016-03-17T10:53:23.000-0700', '2016-03-17T10:53:23.000-0700', 'Closed', '', 11, '0', 2, 140, 0, 2, '72726a94c208b7d0869b86c2ebfd06e02444adf5', 'https://tickets.puppetlabs.com/browse/PUP-4818', 'https://github.com/puppetlabs/puppet/pull/4661'),
('puppet', 118288, 60451127, 4706, 'Recurse tidy resources totally fail', 'Since PUP-1963, recursive tidying has been broken', 'https://tickets.puppetlabs.com/browse/PUP-5963', 'https://github.com/puppetlabs/puppet/pull/4706', '2016-02-23T19:31:37.000-0800', '2016-03-17T10:53:24.000-0700', '2016-03-17T10:53:24.000-0700', 'Closed', '', 1, '0', 2, 27, 11, 2, '69abd169b1610579e6357e7dae71c0355f0cfc78', 'https://tickets.puppetlabs.com/browse/PUP-5963', 'https://github.com/puppetlabs/puppet/pull/4706'),
('puppet', 120175, 61960630, 4759, 'acceptance/direct_puppet/static_catalog_env_control fails on hostname', 'The {{acceptance/direct_puppet/static_catalog_env_control.rb}} beaker test uses the agent {{hostname}} to assert catalog content. If the {{nodename}} does not match the {{hostname}} then this test fails.\r\n\r\nExample of failure\r\n{code}\r\n* verify production environment\r\n\r\nsol10.delivery.puppetlabs.net (solaris-10-sparc) 13:34:01$ cat /opt/puppetlabs/puppet/cache/client_data/catalog/sol10.delivery.puppetlabs.net.json\r\n  cat: cannot open /opt/puppetlabs/puppet/cache/client_data/catalog/sol10.delivery.puppetlabs.net.json\r\n\r\nsol10.delivery.puppetlabs.net (solaris-10-sparc) executed in 0.05 seconds\r\nExited: 2\r\n\r\nh2g886gn5iowfhx.delivery.puppetlabs.net (master) 13:34:01$ puppet master --configprint config\r\n  /etc/puppetlabs/puppet/puppet.conf\r\n\r\nh2g886gn5iowfhx.delivery.puppetlabs.net (master) executed in 0.66 seconds\r\n\r\nh2g886gn5iowfhx.delivery.puppetlabs.net (master) 13:34:02$ if [ -f "/tmp/static_catalog_env_control.rb.tiJrxA/code/puppet.conf.bak" ]; then cat "/tmp/static_catalog_env_control.rb.tiJrxA/code/puppet.conf.bak" > "/etc/puppetlabs/puppet/puppet.conf"; rm -f "/tmp/static_catalog_env_control.rb.tiJrxA/code/puppet.conf.bak"; fi\r\n\r\nh2g886gn5iowfhx.delivery.puppetlabs.net (master) executed in 0.02 seconds\r\n\r\nh2g886gn5iowfhx.delivery.puppetlabs.net (master) 13:34:02$ puppet resource service puppetserver ensure=stopped\r\n  Notice: /Service[puppetserver]/ensure: ensure changed "running" to "stopped"\r\n  service { "puppetserver":\r\n    ensure => "stopped",\r\n  }\r\n\r\nh2g886gn5iowfhx.delivery.puppetlabs.net (master) executed in 1.04 seconds\r\nRuntimeError: PuppetAcceptance::DSL::Helpers.with_puppet_running_on failed (check backtrace for location) because: Host "sol10.delivery.puppetlabs.net" exited with 2 running:\r\n cat /opt/puppetlabs/puppet/cache/client_data/catalog/sol10.delivery.puppetlabs.net.json\r\nLast 10 lines of output were:\r\n	cat: cannot open /opt/puppetlabs/puppet/cache/client_data/catalog/sol10.delivery.puppetlabs.net.json\r\n{code}', 'https://tickets.puppetlabs.com/browse/PUP-6017', 'https://github.com/puppetlabs/puppet/pull/4759', '2016-03-07T09:38:44.000-0800', '2016-03-17T10:53:24.000-0700', '2016-03-17T10:53:24.000-0700', 'Closed', '', 1, '0', 1, 7, 7, 1, 'd6273fdded1867aa5d525795eb20f1cd9e9b2396', 'https://tickets.puppetlabs.com/browse/PUP-6017', 'https://github.com/puppetlabs/puppet/pull/4759'),
('puppet', 118799, 60918601, 4726, 'Make DNF package provider the default for Fedora 23', 'We"ve added support for Fedora 23 but have not updated the DNF provider to make it the default.\r\n\r\n/cc [~stahnma] [~kenn]\r\n\r\nIf this needs to be done for 4.4.0 we"ll need to know ASAP to get it in.', 'https://tickets.puppetlabs.com/browse/PUP-5981', 'https://github.com/puppetlabs/puppet/pull/4726', '2016-02-26T11:50:51.000-0800', '2016-03-17T10:53:24.000-0700', '2016-03-17T10:53:24.000-0700', 'Closed', '', 2, '0', 1, 17, 1, 2, '808e3d935161d1afeadf48aa4f01de8666b0e145', 'https://tickets.puppetlabs.com/browse/PUP-5981', 'https://github.com/puppetlabs/puppet/pull/4726'),
('puppet', 119007, 62218347, 4767, 'Bad error for unresolved type in 4.x function API', 'When making a typo in a 4.x function (or using an alias that cannot be loaded), when calling the function, an error like this is displayed:\r\n\r\n{code}\r\nError while evaluating a Function Call, "then" parameter "arg" expects a TypeReference value, got String\r\n{code}\r\n(The function"s name in this example is called "then", and it uses a type "MyAny" with the intent that there should be an alias like {{MyAny = Any}}.\r\n\r\nInstead of giving an error when calling the method, it resulted in an expectancy of a TypeReference.\r\n\r\nSeems a failed type resolution is not reported in this case.\r\n\r\nFunction reproducing the problem:\r\n{code:ruby}\r\nPuppet::Functions.create_function(:then) do\r\n  dispatch :then do\r\n    repeated_param "MyAny", :arg\r\n    block_param\r\n  end\r\n\r\n  def then(*args)\r\n    yield(*args)\r\n  end\r\nend\r\n{code}\r\nAns calling it like this:\r\n{code}\r\npuppet apply -e "then(all_you_need_is_love) |$x| { notice $x }"\r\n{code}', 'https://tickets.puppetlabs.com/browse/PUP-5986', 'https://github.com/puppetlabs/puppet/pull/4767', '2016-02-28T09:44:28.000-0800', '2016-03-17T10:53:25.000-0700', '2016-03-17T10:53:25.000-0700', 'Closed', '', 6, '0', 3, 183, 43, 7, 'bc892e115e4fdfc9279c4032d46d241db1b8a58b', 'https://tickets.puppetlabs.com/browse/PUP-5986', 'https://github.com/puppetlabs/puppet/pull/4767'),
('puppet', 115343, 58419033, 4637, 'Interpolation of an empty variable %{} or %{::} should yield an empty string', 'The Hiera data provider should behave the same way as Hiera 3.0 when interpolating an empty string or a string that contains an empty name separator "::". The interpolated expression should ignore leading and trailing whitespace.\r\n{code}\r\n%{} => ""\r\n%{  } => ""\r\n%{::} => ""\r\n%{ :: } => ""\r\n{code}\r\nLeading and trailing whitespace will always be ignored in the Hiera dataprovider. So:\r\n{code}\r\n%{ some key }\r\n{code}\r\nwill be considered exactly the same as:\r\n{code}\r\n%{some key}\r\n{code}\r\nIn case that someone really want a leading or tralining space in the key, they can use the syntax:\r\n{code}\r\n%{scope(" some key ")}\r\n{code}', 'https://tickets.puppetlabs.com/browse/PUP-5824', 'https://github.com/puppetlabs/puppet/pull/4637', '2016-02-05T03:33:46.000-0800', '2016-03-17T10:53:25.000-0700', '2016-03-17T10:53:25.000-0700', 'Closed', '', 4, '0', 1, 64, 12, 2, '99cc6dbd022ab27fad91a23fd328c2d4afcc5f2d', 'https://tickets.puppetlabs.com/browse/PUP-5824', 'https://github.com/puppetlabs/puppet/pull/4637'),
('puppet', 112995, 57931777, 4614, 'Backport PUP-5693 (benchmark function loading) to stable 4.3.3', 'in PUP-5693 the benchmark for function_loading was fixed to run on 4.x. The work done there should be cherry picked to stable to be included in a possible future PUP 4.3.3 release', 'https://tickets.puppetlabs.com/browse/PUP-5724', 'https://github.com/puppetlabs/puppet/pull/4614', '2016-01-19T15:57:36.000-0800', '2016-03-17T10:53:27.000-0700', '2016-03-17T10:53:27.000-0700', 'Closed', '', 5, '0', 1, 27, 10, 6, '76d6fe868a9a6dfe401fcab8b99eb8dde3d2df86', 'https://tickets.puppetlabs.com/browse/PUP-5724', 'https://github.com/puppetlabs/puppet/pull/4614'),
('puppet', 116547, 59256541, 4668, 'puppet parser validate fails for functions', 'The following is valid puppet code in puppet 4, and will run using a puppet apply, but fails a puppet parser validate:\r\n\r\n{code}\r\nfunction validate_this() {\r\n  notice("hello, puppet")\r\n}\r\n\r\nvalidate_this()\r\n{code}\r\n\r\nUsing puppet apply, I get:\r\n{code}\r\n$ puppet apply testcase.pp\r\nNotice: Scope(Class[main]): hello, puppet\r\nNotice: Compiled catalog for macbook.whilefork.com in environment production in 0.03 seconds\r\nNotice: Applied catalog in 0.02 seconds\r\n{code}\r\n\r\nWhen I attempt to validate it:\r\n{code}\r\npuppet parser validate testcase.pp\r\nError: Internal Error: Puppet Context ":loaders" missing - cannot define any functions\r\n{code}\r\n\r\nWe use puppet parser validate in our CI to validate that all .pp files are valid puppet code, so this makes it more difficult to validate puppet code now that we"re starting to use functions defined in the puppet language.\r\n\r\nI"ve validated that this occurs on puppet 4.3.2 on OS X and puppet 4.2.3 on CentOS 7.', 'https://tickets.puppetlabs.com/browse/PUP-5895', 'https://github.com/puppetlabs/puppet/pull/4668', '2016-02-12T13:40:28.000-0800', '2016-03-17T10:53:27.000-0700', '2016-03-17T10:53:27.000-0700', 'Closed', '', 10, '0', 2, 44, 10, 2, '11d0178b664ad4dac31cc53a4aceea03f760615d', 'https://tickets.puppetlabs.com/browse/PUP-5895', 'https://github.com/puppetlabs/puppet/pull/4668'),
('puppet', 115028, 58987639, 4656, 'Parser never sets location on RHS of "resource without title" expressions', 'An expression like:\r\n{code:puppet}\r\nnotice {a=>b}\r\n{code}\r\nresults in:\r\n{code}\r\nundefined method `-" for nil:NilClass\r\n{code}\r\nwhereas:\r\n{code:puppet}\r\nnotice({a=>b})\r\n{code}\r\noutputs the string form of the hash. The reason is that the parser treats the first expression as a "resource without title" and the method that transforms this into a call never sets the location of the right hand side hash (it can"t since it doesn"t have access to the delimiting braces).', 'https://tickets.puppetlabs.com/browse/PUP-5805', 'https://github.com/puppetlabs/puppet/pull/4656', '2016-02-03T00:37:57.000-0800', '2016-03-17T10:53:29.000-0700', '2016-03-17T10:53:29.000-0700', 'Closed', '', 2, '0', 1, 12, 6, 5, 'dc33060948061dfe96893b2d4177bbdbe26511d9', 'https://tickets.puppetlabs.com/browse/PUP-5805', 'https://github.com/puppetlabs/puppet/pull/4656'),
('puppet', 117321, 59845208, 4685, 'Administration token detection doesn"t work in legacy Windows OS (2003/XP)', 'As part of PUP-5735 it was found that the administrative token detection for legacy operating systems always evaluated as true.  This was due to a simple typo at https://github.com/puppetlabs/puppet/blob/master/lib/puppet/util/windows/user.rb#L46\r\n\r\nThe helper function returns a bool type however the check is against an integer.  Therefore is_admin is always returns because bool <> int32 is always true.\r\n\r\nChanging the line to \r\n{code}\r\nis_admin = ismember_pointer.read_win32_bool\r\n{code}\r\nfixes the problem\r\n', 'https://tickets.puppetlabs.com/browse/PUP-5923', 'https://github.com/puppetlabs/puppet/pull/4685', '2016-02-18T10:40:59.000-0800', '2016-03-17T10:53:30.000-0700', '2016-03-17T10:53:30.000-0700', 'Closed', 'windows', 1, '0', 1, 1, 1, 1, 'c94c83c53890ea0cd6d4349d20614560116c3db0', 'https://tickets.puppetlabs.com/browse/PUP-5923', 'https://github.com/puppetlabs/puppet/pull/4685'),
('puppet', 118904, 60954375, 4728, 'Environment Data Provider has different interpolation behavior than Hiera', 'I haven"t found duplicate reports of this.\r\n\r\n+YAML Sample:+\r\n{noformat}\r\n---\r\nsomevar:\r\n    - 1\r\n    - 2\r\n    - 3\r\n    \r\nfoobar: "%{alias("somevar")}"\r\n\r\nfoobar_array:\r\n    - "%{alias("somevar")}"\r\n\r\nfoobar_hash:\r\n    subkey: "%{alias("somevar")}"\r\n    \r\nfoobar_hash_hash:\r\n    subkey:\r\n        subkey: "%{alias("somevar")}"\r\n{noformat}\r\n\r\n\r\n+Result of the sample put into Global Hiera+\r\n{noformat}\r\nfor f in somevar foobar foobar_array foobar_hash foobar_hash_hash; do echo $f; puppet lookup $f --node puppet.example.com; done\r\nsomevar\r\n---\r\n- 1\r\n- 2\r\n- 3\r\nfoobar\r\n---\r\n- 1\r\n- 2\r\n- 3\r\nfoobar_array\r\n---\r\n- - 1\r\n  - 2\r\n  - 3\r\nfoobar_hash\r\n---\r\nsubkey:\r\n- 1\r\n- 2\r\n- 3\r\nfoobar_hash_hash\r\n---\r\nsubkey:\r\n  subkey:\r\n  - 1\r\n  - 2\r\n  - 3\r\n{noformat}\r\n\r\nResult put into Environment Hiera\r\n\r\n{noformat}\r\nfor f in somevar foobar foobar_array foobar_hash foobar_hash_hash; do echo $f; puppet lookup $f --node puppet.example.com; done\r\nsomevar\r\n---\r\n- 1\r\n- 2\r\n- 3\r\nfoobar\r\n---\r\n- 1\r\n- 2\r\n- 3\r\nfoobar_array\r\n---\r\n- "%{alias("somevar")}"\r\nfoobar_hash\r\n---\r\nsubkey: "%{alias("somevar")}"\r\nfoobar_hash_hash\r\n---\r\nsubkey:\r\n  subkey: "%{alias("somevar")}"\r\n{noformat}\r\n\r\nObviously, the behavior should be maintained.\r\n', 'https://tickets.puppetlabs.com/browse/PUP-5983', 'https://github.com/puppetlabs/puppet/pull/4728', '2016-02-26T20:58:16.000-0800', '2016-03-17T10:53:30.000-0700', '2016-03-17T10:53:30.000-0700', 'Closed', '', 5, '0', 2, 33, 13, 2, 'f2b397cbe54c64adb213e2aee3828930d8edf50d', 'https://tickets.puppetlabs.com/browse/PUP-5983', 'https://github.com/puppetlabs/puppet/pull/4728'),
('puppet', 113369, 56982633, 4597, 'Confusing error message for invalid types for comparison operations', 'The following code:\r\n\r\n{code}\r\nnotice(undef > foo)\r\n{code}\r\n\r\nProduces this confusing error message:\r\n\r\n{code}\r\nError: Evaluation Error: Comparison of: #<Puppet::Pops::Model::ModelLabelProvider:0x007fd5943285b8> > String, is not possible. Caused by "Only Strings and Numbers are comparable".\r\n{code}\r\n\r\nExpected the compiler"s error message to say "Comparison of Undef > String is not possible..."\r\n\r\nI"m going to guess that the other comparison operators are similarly affected.', 'https://tickets.puppetlabs.com/browse/PUP-5741', 'https://github.com/puppetlabs/puppet/pull/4597', '2016-01-21T17:38:52.000-0800', '2016-03-17T10:53:32.000-0700', '2016-03-17T10:53:32.000-0700', 'Closed', '', 6, '0', 1, 21, 7, 2, 'f343cce8c1085068881e371e00de13060baaf7c1', 'https://tickets.puppetlabs.com/browse/PUP-5741', 'https://github.com/puppetlabs/puppet/pull/4597'),
('puppet', 112533, 56489174, 4580, 'ClassInformationService.classes_per_environment errantly evaluates parameter default expression', 'In doing some testing against the {{Puppet::InfoService::ClassInformationService.classes_per_environment()}} method, I found that the value for {{:default_source}} apparently tries to evaluate the expression that it needs to return for a class parameter"s default value rather than just retaining the original expression verbatim from the Puppet manifest .pp file, passing that back as a String.\r\n\r\nFor example, I used a Puppet class with the following content...\r\n\r\n{code:puppet}\r\nclass myclass (String $string_with_expression_default = "for os in family $::osfamily")\r\n{\r\n}\r\n{code}\r\n\r\n... and used the following code to try to parse it ...\r\n\r\n{code:ruby}\r\nrequire "puppet"\r\nrequire "puppet/info_service"\r\n\r\nfiles_to_parse = { "production" => [ "./parse.pp" ] }\r\n\r\nputs Puppet::InfoService::ClassInformationService.new.classes_per_environment(files_to_parse)\r\n{code}\r\n\r\nI was expecting to get something back like this in stdout:\r\n\r\n{noformat}\r\n{"production"=>{"./parse.pp"=>[{:name=>"myclass", :params=>[{:name=>"string_with_expression_default", :type=>"String", :default_literal=>"\"for os in family $::osfamily\""}]}]}}\r\n{noformat}\r\n\r\nInstead, though, I got this:\r\n\r\n{noformat}\r\n{"production"=>{"./parse.pp"=>{:error=>"undefined method `<" for nil:NilClass"}}}\r\n{noformat}\r\n\r\nIf I omit the $ from the default value, just "for os in family ::osfamily" instead, then I get more reasonable looking output:\r\n\r\n{noformat}\r\n{"production"=>{"./parse.pp"=>[{:name=>"myclass", :params=>[{:name=>"string_with_expression_default", :type=>"String", :default_literal=>"for os in family ::osfamily"}]}]}}\r\n{noformat}\r\n\r\nAt least at doesn"t error out.  But in this case, the string doesn"t have the surrounding double-quotes escaped in the value - so there would be no difference between wrapping the value in single-quotes vs. double-quotes, for example. ', 'https://tickets.puppetlabs.com/browse/PUP-5713', 'https://github.com/puppetlabs/puppet/pull/4580', '2016-01-14T15:11:10.000-0800', '2016-03-17T13:33:35.000-0700', '2016-03-17T13:33:35.000-0700', 'Closed', '', 21, '0', 1, 41, 14, 3, '02abc1b38caa444e247c5fc3a3665d36645b150b', 'https://tickets.puppetlabs.com/browse/PUP-5713', 'https://github.com/puppetlabs/puppet/pull/4580'),
('puppet', 107259, 51985907, 4471, 'Yum package provider: ensure => latest fails in case of broken update notices', 'Similar to PUP-4497 and PUP-5309, ensure => latest fails when `yum check-update` lists broken update notices\r\n\r\n\r\n{code:}\r\n# puppet apply -e "package{"puppet-agent": ensure => "latest"}"\r\nNotice: Compiled catalog for localhost in environment production in 1.00 seconds\r\nError: Could not get latest version: undefined method `[]" for nil:NilClass\r\nError: /Stage[main]/Main/Package[puppet-agent]/ensure: change from 1.3.0-1.el7 to latest failed: Could not get latest version: undefined method `[]" for nil:NilClass\r\nNotice: Applied catalog in 7.66 seconds\r\n{code}\r\n\r\n\r\nyum check-update output:\r\n\r\n{code:}\r\n# yum check-update\r\nLoaded plugins: product-id, subscription-manager, versionlock\r\n\r\nRed_Hat_Enterprise_Linux-Release_Notes-7-en-US.noarch                                                7-2.el7                                                                          rhel-7-server-rpms         \r\nalsa-tools-firmware.x86_64                                                                           1.0.28-2.el7                                                                     rhel-7-server-rpms         \r\n[snip]\r\nUpdate notice RHBA-2014:0722 (from rhel-7-server-rpms) is broken, or a bad duplicate, skipping.\r\nYou should report this problem to the owner of the rhel-7-server-rpms repository.\r\n{code}\r\n\r\n', 'https://tickets.puppetlabs.com/browse/PUP-5555', 'https://github.com/puppetlabs/puppet/pull/4471', '2015-11-27T02:52:28.000-0800', '2016-03-18T11:10:33.000-0700', '2016-03-18T11:10:33.000-0700', 'Closed', '', 3, '0', 1, 199, 1, 3, '50f94912cfb23de4ca851063c136f8af5eac7e6a', 'https://tickets.puppetlabs.com/browse/PUP-5555', 'https://github.com/puppetlabs/puppet/pull/4471'),
('puppet', 120671, 62328643, 4775, 'static catalogs cannot inline metadata for files requiring percent encoding', 'If you try to manage a file with characters like " " which must be percent encoded in a URI:\r\n\r\n{code:puppet}\r\n  file { "/tmp/file":\r\n    ensure  => file,\r\n    source  => "puppet:///modules/ntp/ntp d.conf",\r\n  }\r\n{code}\r\n\r\nThen the compiler will fail to inline metadata:\r\n\r\n{noformat}\r\nError: Could not understand URI puppet:///modules/ntp/files/ntp d.conf: bad URI(is not URI?): puppet:///modules/ntp/files/ntp d.conf\r\n/Users/josh/work/puppet/lib/puppet/file_serving/metadata.rb:36:in `rescue in content_uri="\r\n/Users/josh/work/puppet/lib/puppet/file_serving/metadata.rb:33:in `content_uri="\r\n/Users/josh/work/puppet/lib/puppet/indirector/catalog/compiler.rb:236:in `block in inline_metadata"\r\n/Users/josh/work/puppet/lib/puppet/indirector/catalog/compiler.rb:159:in `each"\r\n...\r\n{noformat}', 'https://tickets.puppetlabs.com/browse/PUP-6036', 'https://github.com/puppetlabs/puppet/pull/4775', '2016-03-09T17:49:02.000-0800', '2016-03-23T15:10:55.000-0700', '2016-03-23T15:10:55.000-0700', 'Closed', 'burnside-ss', 4, '0', 1, 8, 2, 2, '3daa532303e67b59e56bfbad42d4e4acaaf4c249', 'https://tickets.puppetlabs.com/browse/PUP-6036', 'https://github.com/puppetlabs/puppet/pull/4775'),
('puppet', 87158, 39065881, 4061, 'Path of scheduled tasks folder is not necessarily C:\Windows\Tasks', 'This might be a rare case, but fixing it can improve the code actually. \r\n\r\nIf a Windows Server 2003 system is *upgraded* from Windows 2000 or NT, the default {{%SYSTEMROOT%}} or {{%WINDIR%}} is {{C:\WINNT}} rather than {{C:\Windows}}.  This will cause failure of {{scheduled_task}} resource, because {{[taskscheduler.rb| https://github.com/puppetlabs/puppet/blob/master/lib/puppet/util/windows/taskscheduler.rb#L812]}} hardcoded the path of scheduled tasks as {{C:\Windows\Tasks}} when testing if a job exists.\r\n\r\n{code}\r\nError: /Stage[main]/test/Scheduled_task[foo]: Could not evaluate: No such file or directory @ dir_initialize - C:/Windows/Tasks\r\n{code}\r\n\r\nI don"t think it"s a good way:\r\n- The _windows directory_ doesn"t have to be {{C:\Windows}}\r\n- The _system drive_ doesn"t have to be {{C:}} \r\n\r\nIt"s better to use {{"#\{ENV\["WINDIR"\]\}/Tasks"}} here.\r\n\r\n{code:ruby}\r\n    # Returns whether or not the scheduled task exists.\r\n    def exists?(job_name)\r\n      bool = false\r\n      Dir.foreach("C:/Windows/Tasks"){ |file|\r\n        if File.basename(file, ".job") == job_name\r\n          bool = true\r\n          break\r\n        end\r\n      }\r\n      bool\r\n    end\r\n{code}\r\n\r\n', 'https://tickets.puppetlabs.com/browse/PUP-4814', 'https://github.com/puppetlabs/puppet/pull/4061', '2015-07-02T06:53:22.000-0700', '2016-03-24T11:01:27.000-0700', '2016-03-24T11:01:27.000-0700', 'Closed', 'scheduled_task;windows', 2, '0', 1, 11, 1, 2, '4c42477a4baf804ecbec7fc6b25cb7f9462c56e1', 'https://tickets.puppetlabs.com/browse/PUP-4814', 'https://github.com/puppetlabs/puppet/pull/4061'),
('puppet', 94367, 42882837, 4181, 'Puppet service name changed from "puppet" to "com.puppetlabs.puppet" on Mac without a major release', 'A prior maint commit changed the name of the Puppet service on Mac to {{com.puppetlabs.puppet}}, which breaks anyone trying to manage that service. Notably PE. That"s a bad thing to do in a patch release, which is what puppet#stable is targeting.\r\n\r\n*NOTE* The name change was made in puppet#stable, but never released, so there won"t be a user visible change between 4.2.1 and 4.2.2.', 'https://tickets.puppetlabs.com/browse/PUP-5053', 'https://github.com/puppetlabs/puppet/pull/4181', '2015-08-19T18:43:56.000-0700', '2016-03-30T11:35:45.000-0700', '2016-03-30T11:35:45.000-0700', 'Closed', '', 1, '0', 2, 2, 2, 2, 'd40136fdd86fecc01dcca54bc77c7d96f33fbe4a', 'https://tickets.puppetlabs.com/browse/PUP-5053', 'https://github.com/puppetlabs/puppet/pull/4181'),
('puppet', 118340, 62614029, 4785, 'File type links documentation incorrectly references :ignore value', 'The File type documentation for {{links}} mentions {{follow}}, {{manage}}, and {{ignore}}. {{ignore}} is not a legal value for {{links}}; the documentation needs to be updated.', 'https://tickets.puppetlabs.com/browse/PUP-5967', 'https://github.com/puppetlabs/puppet/pull/4785', '2016-02-24T09:11:34.000-0800', '2016-04-13T16:31:13.000-0700', '2016-04-13T16:31:13.000-0700', 'Closed', '', 0, '0', 1, 3, 5, 1, '57fe5076a83aa1ac5e9443540eb27558203ea6b5', 'https://tickets.puppetlabs.com/browse/PUP-5967', 'https://github.com/puppetlabs/puppet/pull/4785'),
('puppet', 104989, 50201618, 4434, 'filebucket test fails on AIX', 'The {{tests/ticket_4622_filebucket_diff_test.rb}} fails on AIX using pre-release {{puppet-agent}} at SHA {{8be23474284a9f8e2bae551d266f5730af6681cd}}\r\n\r\n{code}\r\n * Find the filebucket diff of the first checksum and the local file and validate the output\r\n  pe-aix-53-agent 11:50:51$ puppet filebucket diff d3b07384d113edec49eaa6238ad5ff00 /tmp/testfile.12858 --remote --server npwomdcssiasjk0.delivery.puppetlabs.net\r\n    1c1,2\r\n    < foo\r\n    ---\r\n    > bar\r\n    > baz\r\n\r\n  pe-aix-53-agent executed in 2.75 seconds\r\nMinitest::Assertion: Expected /\-foo/ to match "1c1,2\n< foo\n---\n> bar\n> baz".\r\n\r\n{code}', 'https://tickets.puppetlabs.com/browse/PUP-5483', 'https://github.com/puppetlabs/puppet/pull/4434', '2015-11-09T11:58:59.000-0800', '2016-04-13T16:43:39.000-0700', '2016-04-13T16:43:39.000-0700', 'Closed', '', 6, '0', 1, 3, 3, 1, '908b9064a86d4e70d5dfbd771a60a927977115db', 'https://tickets.puppetlabs.com/browse/PUP-5483', 'https://github.com/puppetlabs/puppet/pull/4434'),
('puppet', 99295, 45902294, 4284, 'puppet lookup --explain produces unhelpful reference', 'As shown in PUP-4475 an unhelpful printout of a merge result can occur when using the --explain option to lookup.\r\n{code}\r\nMerged result: #<Object:0x0000000269eb80>\r\n{code}\r\n\r\nSee other ticket for details.', 'https://tickets.puppetlabs.com/browse/PUP-5278', 'https://github.com/puppetlabs/puppet/pull/4284', '2015-09-24T05:14:40.000-0700', '2016-04-13T16:52:28.000-0700', '2016-04-13T16:52:28.000-0700', 'Closed', '', 8, '0', 1, 51, 0, 6, '563c5573fbb65bd07eec20511eae12a83179c2dd', 'https://tickets.puppetlabs.com/browse/PUP-5278', 'https://github.com/puppetlabs/puppet/pull/4284'),
('puppet', 119926, 0, 0, 'Description of split function states wrong usage example with data type', 'The Puppet 4 style split function states within the documentation that one can use a Regexp data type:\r\n$array_var3 = split($string, Regexp("[.:]"))\r\n\r\nUsing the example within a puppet manifest:\r\n\r\n{code}\r\n$version="1.8.0_72"\r\n$array=split($version, Regexp("[._]"))\r\n$maj=$array[0]\r\n$min=$array[1]\r\n$patch = $array[2]\r\n$minpatch = $array[3]\r\nnotify { "Version: ${version}": }\r\nnotify { "Major, Min, Patch, MinPatch: ${maj} - ${min} - ${patch} - ${minpatch}": }\r\n{code}\r\n\r\nResults in the following error message:\r\n\r\n\r\n{code}\r\nError: Could not parse for environment production: Illegal expression. A Type-Name is unacceptable as function name in a Function Call at /root/split.pp:2:24 on node puppetmaster.example.net\r\n{code}\r\n\r\nPuppet Version:\r\n\r\n{code:java}\r\npuppet --version\r\n4.3.2\r\n{code}\r\n', 'https://tickets.puppetlabs.com/browse/PUP-6009', '', '2016-03-04T02:03:09.000-0800', '2016-04-13T16:56:04.000-0700', '2016-04-13T16:56:04.000-0700', 'Closed', '', 3, '0', 0, 0, 0, 0, 'e1032fa17496ff3a00f1b89404a10d61abb023f0', 'https://tickets.puppetlabs.com/browse/PUP-6009', 'https://github.com/puppetlabs/puppet/commit/e1032fa17496ff3a00f1b89404a10d61abb023f0'),
('puppet', 101073, 48898997, 4379, 'mount acceptance fails on AIX', 'Beaker acceptance tests for mount  fail on AIX due to assumptions about {{mkfs}} and {{fstab}}\r\n\r\n{code}\r\n Test Case tests/resource/mount/defined.rb reported: #<Beaker::Host::CommandFailure: Host "pe-aix-53-acceptance" exited with 2 running:\r\n               cat /etc/fstab\r\n              Last 10 lines of output were:\r\n              	cat: 0652-050 Cannot open /etc/fstab.>\r\n                Test Case tests/resource/mount/destroy.rb reported: #<Beaker::Host::CommandFailure: Host "pe-aix-53-acceptance" exited with 1 running:\r\n               yes | mkfs -t ext3 -q /tmp/pl559317\r\n              Last 10 lines of output were:\r\n              	mkfs: Not a recognized flag: t\r\n              	Usage: mkfs [-b BootProgram] [-i Inodes] [-l Label] [-o Options] [-p Prototype]\r\n              		[-s Size] [-v VolumeLabel] [-V vfs] {Device|Filesystem}>\r\n                Test Case tests/resource/mount/modify.rb reported: #<Beaker::Host::CommandFailure: Host "pe-aix-53-acceptance" exited with 1 running:\r\n               yes | mkfs -t ext3 -q /tmp/pl103746\r\n              Last 10 lines of output were:\r\n              	mkfs: Not a recognized flag: t\r\n              	Usage: mkfs [-b BootProgram] [-i Inodes] [-l Label] [-o Options] [-p Prototype]\r\n              		[-s Size] [-v VolumeLabel] [-V vfs] {Device|Filesystem}>\r\n                Test Case tests/resource/mount/mounted.rb reported: #<Beaker::Host::CommandFailure: Host "pe-aix-53-acceptance" exited with 1 running:\r\n               yes | mkfs -t ext3 -q /tmp/pl598605\r\n              Last 10 lines of output were:\r\n              	mkfs: Not a recognized flag: t\r\n              	Usage: mkfs [-b BootProgram] [-i Inodes] [-l Label] [-o Options] [-p Prototype]\r\n              		[-s Size] [-v VolumeLabel] [-V vfs] {Device|Filesystem}>\r\n{code}', 'https://tickets.puppetlabs.com/browse/PUP-5339', 'https://github.com/puppetlabs/puppet/pull/4379', '2015-10-07T13:36:13.000-0700', '2016-04-13T17:03:41.000-0700', '2016-04-13T17:03:41.000-0700', 'Closed', '', 2, '0', 2, 182, 78, 6, 'b63880dffc94d74660513ca67780f58121608c7c', 'https://tickets.puppetlabs.com/browse/PUP-5339', 'https://github.com/puppetlabs/puppet/pull/4379'),
('puppet', 102965, 49203297, 4389, 'solaris 10 sparc, acceptance/tests/resource/zone/dataset fails', 'Using {{puppet-agent}} at SHA {{41de77924}}, the {{acceptance/tests/resource/zone/dataset.rb}} acceptance test fails during teardown.\r\n\r\nThe teardown step in this test should be modified accommodate the absence of the zpool.', 'https://tickets.puppetlabs.com/browse/PUP-5433', 'https://github.com/puppetlabs/puppet/pull/4389', '2015-10-27T07:15:01.000-0700', '2016-04-13T17:05:10.000-0700', '2016-04-13T17:05:10.000-0700', 'Closed', '', 1, '0', 1, 2, 2, 1, 'e8181f42321b40b49daf6af00843d30d9fdbb414', 'https://tickets.puppetlabs.com/browse/PUP-5433', 'https://github.com/puppetlabs/puppet/pull/4389'),
('puppet', 101975, 48381439, 4368, 'nim provider fails on AIX', 'The {{tests/aix/nim_package_provider.rb}} acceptance test errors while trying to apply a package manifest with the {{nim}} provider. This behavior can be reproduced outside of the test\r\n\r\n{code}\r\nError: Could not set "present" on ensure: undefined method `execute" for Puppet::Util:Module at 1:/root/nim.pp\r\nError: Could not set "present" on ensure: undefined method `execute" for Puppet::Util:Module at 1:/root/nim.pp\r\nWrapped exception:\r\nundefined method `execute" for Puppet::Util:Module\r\n{code}\r\n\r\nh2. Steps to reproduce\r\nh3. Create package manifest\r\n{code}\r\ncat > nim.pp << EOS\r\npackage {"cdrecord":\r\n  ensure   => "present",\r\n  source   => "lpp_custom",\r\n  provider => nim,\r\n}\r\nEOS\r\n{code}\r\n\r\nh3. Apply manifest\r\n{code}\r\n/opt/puppetlabs/bin/puppet apply nim.pp\r\n{code}', 'https://tickets.puppetlabs.com/browse/PUP-5391', 'https://github.com/puppetlabs/puppet/pull/4368', '2015-10-17T07:16:02.000-0700', '2016-04-13T17:10:32.000-0700', '2016-04-13T17:10:32.000-0700', 'Closed', '', 4, '0', 1, 6, 1, 1, 'e136cf0aa46a9f4cd5281aeb78f860be457618af', 'https://tickets.puppetlabs.com/browse/PUP-5391', 'https://github.com/puppetlabs/puppet/pull/4368'),
('puppet', 87803, 0, 0, 'osx curl with client certs causes puppet acceptance test to segfault', 'The following puppet acceptance tests fail when invoking curl with client certificates:\r\n\r\n{noformat}\r\n  Test Case tests/concurrency/ticket_2659_concurrent_catalog_requests.rb \r\n  Test Case tests/environment/can_enumerate_environments.rb\r\n  Test Case tests/security/cve-2013-1652_improper_query_params.rb\r\n  Test Case tests/security/cve-2013-4761_resource_type.rb\r\n{noformat}\r\n\r\nThe actual failure looks like:\r\n\r\n{noformat}\r\n#<RuntimeError: PuppetAcceptance::DSL::Helpers.with_puppet_running_on failed (check backtrace for location) because: Host "sxmv4xxp7it66t6.delivery.puppetlabs.net" connection failure running:\r\n curl --tlsv1 -g --cert "/etc/puppetlabs/puppet/ssl/certs/sxmv4xxp7it66t6.delivery.puppetlabs.net.pem" --key "/etc/puppetlabs/puppet/ssl/private_keys/sxmv4xxp7it66t6.delivery.puppetlabs.net.pem" -k -H "Accept: pson" "https://towhwjn4bo43eyb.delivery.puppetlabs.net:8140/puppet/v3/resource_type/::..::..::..::..::..::tmp::exploit?environment=production"\r\nLast 10 lines of output were:\r\n		8   libcurl.4.dylib                     0x00007fff87749cef multi_runsingle + 799\r\n		9   libcurl.4.dylib                     0x00007fff8774993d curl_multi_perform + 170\r\n		10  libcurl.4.dylib                     0x00007fff87742d25 curl_easy_perform + 352\r\n		11  curl                                0x000000010cb76a87 curl + 47751\r\n		12  curl                                0x000000010cb731f4 curl + 33268\r\n		13  curl                                0x000000010cb72c00 curl + 31744\r\n		14  libdyld.dylib                       0x00007fff89e555c9 start + 1\r\n		15  ???                                 0x000000000000000b 0x0 + 11\r\n	)\r\n	libc++abi.dylib: terminating with uncaught exception of type NSException\r\n/Users/josh/work/puppet/acceptance/.bundle/ruby/2.1.0/gems/beaker-2.14.1/lib/beaker/host.rb:259:in `exec"\r\n/Users/josh/work/puppet/acceptance/.bundle/ruby/2.1.0/gems/beaker-2.14.1/lib/beaker/dsl/helpers/host_helpers.rb:73:in `block in on"\r\n/Users/josh/work/puppet/acceptance/.bundle/ruby/2.1.0/gems/beaker-2.14.1/lib/beaker/shared/host_manager.rb:104:in `run_block_on"\r\n/Users/josh/work/puppet/acceptance/.bundle/ruby/2.1.0/gems/beaker-2.14.1/lib/beaker/dsl/patterns.rb:32:in `block_on"\r\n/Users/josh/work/puppet/acceptance/.bundle/ruby/2.1.0/gems/beaker-2.14.1/lib/beaker/dsl/helpers/host_helpers.rb:63:in `on"\r\ntests/security/cve-2013-4761_resource_type.rb:50:in `block (5 levels) in run_test"\r\n/Users/josh/work/puppet/acceptance/.bundle/ruby/2.1.0/gems/beaker-2.14.1/lib/beaker/dsl/structure.rb:41:in `step"\r\ntests/security/cve-2013-4761_resource_type.rb:43:in `block (4 levels) in run_test"\r\ntests/security/cve-2013-4761_resource_type.rb:36:in `each"\r\ntests/security/cve-2013-4761_resource_type.rb:36:in `block (3 levels) in run_test"\r\n/Users/josh/work/puppet/acceptance/.bundle/ruby/2.1.0/gems/beaker-2.14.1/lib/beaker/dsl/helpers/puppet_helpers.rb:153:in `with_puppet_running_on"\r\ntests/security/cve-2013-4761_resource_type.rb:32:in `block (2 levels) in run_test"\r\n/Users/josh/work/puppet/acceptance/.bundle/ruby/2.1.0/gems/beaker-2.14.1/lib/beaker/dsl/structure.rb:52:in `test_name"\r\ntests/security/cve-2013-4761_resource_type.rb:10:in `block in run_test"\r\n/Users/josh/work/puppet/acceptance/.bundle/ruby/2.1.0/gems/beaker-2.14.1/lib/beaker/test_case.rb:128:in `eval"\r\n/Users/josh/work/puppet/acceptance/.bundle/ruby/2.1.0/gems/beaker-2.14.1/lib/beaker/test_case.rb:128:in `block in run_test"\r\n/Users/josh/.rbenv/versions/2.1.5/lib/ruby/2.1.0/benchmark.rb:294:in `realtime"\r\n/Users/josh/work/puppet/acceptance/.bundle/ruby/2.1.0/gems/beaker-2.14.1/lib/beaker/test_case.rb:125:in `run_test"\r\n/Users/josh/work/puppet/acceptance/.bundle/ruby/2.1.0/gems/beaker-2.14.1/lib/beaker/test_suite.rb:286:in `block in run"\r\n/Users/josh/work/puppet/acceptance/.bundle/ruby/2.1.0/gems/beaker-2.14.1/lib/beaker/test_suite.rb:283:in `each"\r\n/Users/josh/work/puppet/acceptance/.bundle/ruby/2.1.0/gems/beaker-2.14.1/lib/beaker/test_suite.rb:283:in `run"\r\n/Users/josh/work/puppet/acceptance/.bundle/ruby/2.1.0/gems/beaker-2.14.1/lib/beaker/test_suite.rb:325:in `run_and_raise_on_failure"\r\n/Users/josh/work/puppet/acceptance/.bundle/ruby/2.1.0/gems/beaker-2.14.1/lib/beaker/cli.rb:153:in `run_suite"\r\n/Users/josh/work/puppet/acceptance/.bundle/ruby/2.1.0/gems/beaker-2.14.1/lib/beaker/cli.rb:93:in `execute!"\r\n/Users/josh/work/puppet/acceptance/.bundle/ruby/2.1.0/gems/beaker-2.14.1/bin/beaker:6:in `<top (required)>"\r\n/Users/josh/work/puppet/acceptance/.bundle/ruby/2.1.0/bin/beaker:23:in `load"\r\n/Users/josh/work/puppet/acceptance/.bundle/ruby/2.1.0/bin/beaker:23:in `<main>"\r\n>\r\n{noformat}\r\n\r\nThe issue appears to be a bug in mac osx curl: http://stackoverflow.com/questions/26968715/os-x-git-with-client-certificates-rejected, with various workarounds (by adding the root ca cert to the keystore)', 'https://tickets.puppetlabs.com/browse/PUP-4820', '', '2015-07-07T09:23:45.000-0700', '2016-04-21T18:21:07.000-0700', '2016-04-21T18:21:07.000-0700', 'Closed', '', 1, '0', 0, 0, 0, 0, '98d1b14cc5557bec7572e4017b5b3fccf1760681', 'https://tickets.puppetlabs.com/browse/PUP-4820', 'https://github.com/puppetlabs/puppet/commit/98d1b14cc5557bec7572e4017b5b3fccf1760681'),
('puppet', 110532, 56348551, 4576, 'systemd unit puppet.service is missing ExecReload=', 'The systemd unit file shipped with puppet 3.8.4 (and lower 3.x versions) does not define an ExecReload command. As a result, systemd does a reload, sending the agent a SIGTERM and possibly killing off any currently running puppet run.\r\nThe agent supports to restart itself on receiving a SIGHUP. Systemd should send this signal to restart the puppet agent.\r\nThis is fixed in puppet 4.3, see https://github.com/puppetlabs/puppet/blob/4.3.0/ext/systemd/puppet.service', 'https://tickets.puppetlabs.com/browse/PUP-5637', 'https://github.com/puppetlabs/puppet/pull/4576', '2015-12-24T04:22:30.000-0800', '2016-04-26T12:23:24.000-0700', '2016-04-26T12:23:24.000-0700', 'Closed', '', 1, '0', 1, 1, 0, 1, '253c7224fa30730c97f0968af2cae1ad016851fb', 'https://tickets.puppetlabs.com/browse/PUP-5637', 'https://github.com/puppetlabs/puppet/pull/4576'),
('puppet', 101112, 52321742, 4477, 'Nagios extension check_puppet.rb error', 'The extension to check if puppet is running using Nagios (with NRPE) does not work on CentOS 7 (probably on all EL7)\r\n\r\n{noformat}\r\n[root@localhost nagios]# pwd\r\n/usr/share/puppet/ext/nagios\r\n[root@localhost nagios]# ./check_puppet.rb \r\n./check_puppet.rb:30: formal argument cannot be a constant\r\n    "Default: #{OPTIONS[:statefile]}") { |OPTIONS[:statefile]| }\r\n                                                 ^\r\n./check_puppet.rb:30: syntax error, unexpected "[", expecting "|"\r\n    "Default: #{OPTIONS[:statefile]}") { |OPTIONS[:statefile]| }\r\n                                                  ^\r\n./check_puppet.rb:35: formal argument cannot be a constant\r\n    "Default: #{OPTIONS[:process]}")   { |OPTIONS[:process]| }\r\n                                                 ^\r\n./check_puppet.rb:35: syntax error, unexpected "[", expecting "|"\r\n    "Default: #{OPTIONS[:process]}")   { |OPTIONS[:process]| }\r\n                                                  ^\r\n./check_puppet.rb:40: formal argument cannot be a constant\r\n...nterval]} minutes")  { |OPTIONS[:interval]| }\r\n...                               ^\r\n./check_puppet.rb:40: syntax error, unexpected "[", expecting "|"\r\n...terval]} minutes")  { |OPTIONS[:interval]| }\r\n...                               ^\r\n{noformat}', 'https://tickets.puppetlabs.com/browse/PUP-5356', 'https://github.com/puppetlabs/puppet/pull/4477', '2015-10-08T05:10:29.000-0700', '2016-04-26T12:23:24.000-0700', '2016-04-26T12:23:24.000-0700', 'Closed', 'check_puppet.rb;nagios', 8, '0', 1, 15, 36, 1, '3d4bbc41f41b6ad73b40d688f60be23158e2626e', 'https://tickets.puppetlabs.com/browse/PUP-5356', 'https://github.com/puppetlabs/puppet/pull/4477'),
('puppet', 125900, 65948558, 4864, 'Stack overflow when checking assignability of recursive aliases', 'The following code:\r\n\r\n{code}\r\ntype X = Variant[X, Y, Z]\r\ntype Y = Variant[X, String]\r\ntype Z = Variant[Integer]\r\n\r\nnotice(X >= X)\r\n{code}\r\n\r\nResults in a stack overflow.\r\n\r\nThe expected output should be {{true}}.\r\n\r\nIt is expected that {{X >= Y}}, {{X >= Z}}, {{X >= Variant[String]}}, {{X >= Variant[Integer]}}, {{X >= Variant[String, Integer]}}, {{X >= Integer}}, and {{X >= String}} also evaluate to true.\r\n\r\nACCEPTANCE CRITERIA\r\n----\r\nThat the above example outputs a boolean {{true}} instead of causing an Out of Stack Error.', 'https://tickets.puppetlabs.com/browse/PUP-6145', 'https://github.com/puppetlabs/puppet/pull/4864', '2016-04-09T22:44:40.000-0700', '2016-04-27T07:23:29.000-0700', '2016-04-27T07:23:29.000-0700', 'Closed', '', 3, '0', 1, 115, 35, 2, 'c8c621ae7f711eadd065273c4b435e58f728c8b0', 'https://tickets.puppetlabs.com/browse/PUP-6145', 'https://github.com/puppetlabs/puppet/pull/4864'),
('puppet', 126133, 66146875, 4871, 'Access operator is not implemented for Iterable type', 'The following code causes a compilation error:\r\n\r\n{code}\r\nfunction foo(Iterable[String] $x) {\r\n  $x.each |$e| {\r\n    notice $e\r\n  }\r\n}\r\n\r\nfoo([bar, baz, cake])\r\n{code}\r\n\r\nResulting in:\r\n{code}\r\nError: Evaluation Error: Operator "[]" is not applicable to an Iterable-Type.\r\n{code}\r\n\r\nExpected output:\r\n{code}\r\nNotice: Scope(Class[main]): bar\r\nNotice: Scope(Class[main]): baz\r\nNotice: Scope(Class[main]): cake\r\n{code}\r\n\r\nThis is because the access operator for {{Iterable}} is not implemented.  I"d expect the access operator to take a single type parameter to construct a constrained {{Iterable}} type.', 'https://tickets.puppetlabs.com/browse/PUP-6155', 'https://github.com/puppetlabs/puppet/pull/4871', '2016-04-11T16:04:35.000-0700', '2016-04-27T07:23:29.000-0700', '2016-04-27T07:23:29.000-0700', 'Closed', '', 3, '0', 1, 28, 0, 2, 'efeb9c74d8d4fddeedab44b5e6158326bf0fc2fb', 'https://tickets.puppetlabs.com/browse/PUP-6155', 'https://github.com/puppetlabs/puppet/pull/4871'),
('puppet', 121876, 65809922, 4858, 'Optional type misinterpreted by epp() and inline_epp() in puppet 4.4.0', 'Here is the code to realize the problem.\r\n\r\n{code}\r\ninline_epp( "<%- |Optional[String[1]] $var| -%>", { "var" => undef } )\r\n{code}\r\n\r\nThe value {{undef}} is given to the variable {{var}} and it should be accepted by the function {{inline_epp()}} because the type of {{var}} is:\r\n\r\n{code}\r\nOptional[String[1]]\r\n{code}\r\n\r\nwhich means {{ok to have a value undef}}. But with Puppet 4.4.0, we have an error:\r\n\r\n{code}\r\n~# puppet --version\r\n\r\n~# puppet apply /tmp/test.pp \r\nError: Evaluation Error: Error while evaluating a Function Call, lambda: expects a value for parameter "var" at /tmp/test.pp:1:1 on node puppet.athome.priv\r\n{code}\r\n\r\nWe have exactly the same error with the function {{epp()}}.\r\n\r\nNote: with Puppet 4.3.2, the same worked correctly:\r\n\r\n{code}\r\n~# puppet --version\r\n4.3.2\r\n\r\n~# puppet apply /tmp/test.pp \r\nNotice: Compiled catalog for middleware.athome.priv in environment production in 0.04 seconds\r\nNotice: Applied catalog in 0.12 seconds\r\n{code}\r\n\r\nWhen doing this (setting a default value):\r\n{code:puppet}\r\n# cat pup6064.pp\r\nnotice inline_epp( "<%- |Optional[String[1]] $var=ouch| -%> <%= $var %>", { "var" => undef } )\r\n# puppet apply pup6064.pp\r\nouch\r\n{code}\r\n\r\nClearly shows the regression - EPP now has define/class instantiation call semantics as the {undef} picks the default.', 'https://tickets.puppetlabs.com/browse/PUP-6064', 'https://github.com/puppetlabs/puppet/pull/4858', '2016-03-17T03:50:35.000-0700', '2016-04-27T07:23:29.000-0700', '2016-04-27T07:23:29.000-0700', 'Closed', '', 5, '0', 1, 29, 6, 2, '601bc92b2dde7c0f523910f637f7cb98a3209a7f', 'https://tickets.puppetlabs.com/browse/PUP-6064', 'https://github.com/puppetlabs/puppet/pull/4858'),
('puppet', 121202, 0, 0, 'lookup cli has bad documentation', 'puppet lookup --help shows various options like:\r\n\r\n{code}\r\n* --knock_out_prefix <PREFIX-STRING>\r\n  Can be used with the "deep" merge strategy. Specify string value to signify\r\n  prefix which deletes elements from existing element.\r\n{code}\r\n\r\nBut the code has:\r\n\r\n{code}\r\n  option("--knock-out-prefix PREFIX_STRING") do |arg|\r\n    options[:prefix] = arg\r\n  end\r\n{code}\r\n\r\nThus it fails:\r\n\r\n{code}\r\n% puppet lookup --hiera_config hiera.yaml --merge deep --knock_out_prefix "--" --unpack-arrays "," --sort-merge-arrays --explain-options classification\r\nError: Could not parse application options: invalid option: --knock_out_prefix\r\n{code}\r\n\r\nACCEPTANCE CRITERIA\r\n----\r\n* That the help text does not mention the faulty {{\--knock_out_prefix}} flag', 'https://tickets.puppetlabs.com/browse/PUP-6049', '', '2016-03-13T06:10:09.000-0700', '2016-04-27T07:23:30.000-0700', '2016-04-27T07:23:30.000-0700', 'Closed', '', 2, '0', 0, 0, 0, 0, '7f55b79443bacce1bdcfc465cec678a9b9318ab8', 'https://tickets.puppetlabs.com/browse/PUP-6049', 'https://github.com/puppetlabs/puppet/commit/7f55b79443bacce1bdcfc465cec678a9b9318ab8'),
('puppet', 123157, 63916614, 4807, 'Subkeys can be matched by string values that contain the subkey.', 'A subkey of a dotted key can be matched by a string that contains the key. Given the following data (yaml):\r\n{code:yaml}\r\n---\r\nfoo: bar\r\n{code}\r\na lookup of the key "foo.bar" will produce "bar". This happens because the data provider asks if the value responds to {{:\[\]}} and a ruby {{String}} will. Then {{"bar"\["bar"\]}} returns {{"bar"}}.\r\n\r\nACCEPTANCE CRITERIA\r\n----\r\n* that a lookup of {{foo.bar}} does not produce {{"bar"}} when the key {{foo}} is bound to the string {{"bar"}}', 'https://tickets.puppetlabs.com/browse/PUP-6085', 'https://github.com/puppetlabs/puppet/pull/4807', '2016-03-23T09:40:32.000-0700', '2016-04-27T07:23:30.000-0700', '2016-04-27T07:23:30.000-0700', 'Closed', '', 3, '0', 1, 14, 2, 2, '5cffc06bf05020ea5aaced53d41565e038bcf1b8', 'https://tickets.puppetlabs.com/browse/PUP-6085', 'https://github.com/puppetlabs/puppet/pull/4807'),
('puppet', 126370, 66322932, 4878, 'Default Tuple type constructed with "max" of 0 instead of "infinity".', 'The following code:\r\n\r\n{code}\r\nnotice(Tuple >= Tuple[String])\r\n{code}\r\n\r\nOutputs {{false}}.  This is because the {{Tuple}} on the LHS has a min/max value of 0, which makes the bounds check on the {{Tuple}} on the RHS, which has min/max of 1, evaluate to false.\r\n\r\nBased on the specification of {{Tuple}}, a default constructed {{Tuple}} should have a "positive infinity" default max value (i.e. max {{Integer}}).  Therefore it is expected that the above code outputs {{true}} as all instances of {{Tuple}} should be assignable to default {{Tuple}}.', 'https://tickets.puppetlabs.com/browse/PUP-6167', 'https://github.com/puppetlabs/puppet/pull/4878', '2016-04-12T15:50:14.000-0700', '2016-04-27T07:23:30.000-0700', '2016-04-27T07:23:30.000-0700', 'Closed', '', 2, '0', 1, 25, 22, 3, 'caac78b3b46f94b3bf7216dbefb8ce22b97de35b', 'https://tickets.puppetlabs.com/browse/PUP-6167', 'https://github.com/puppetlabs/puppet/pull/4878'),
('puppet', 126039, 66149962, 4873, 'Parameterized Collection type is incorrectly constructed', 'The following code:\r\n\r\n{code}\r\nnotice(Collection[5, 5] > Tuple[Integer, 0, 10])\r\n{code}\r\n\r\nOutputs {{true}} when the expected output is {{false}} because the {{Tuple}}"s range is outside of the accepted range of the {{Collection}}.\r\n\r\nIt looks like the access operator for {{Collection}} is improperly implemented:\r\n\r\n{code}\r\nTypes::PCollectionType.new(size_t)\r\n{code}\r\n\r\nIt is passing the size type as the first argument whereas the initializer for {{PCollectionType}} expects the element type for the first argument and an optional size type for the second.\r\n\r\nI believe this should be:\r\n\r\n{code}\r\nTypes::PCollectionType.new(nil, size_t)\r\n{code}\r\n\r\nACCEPTANCE CRITERIA\r\n----\r\n* {{notice(Collection\[5, 5] > Tuple\[Integer, 0, 10])}} - should result in {{false}}', 'https://tickets.puppetlabs.com/browse/PUP-6149', 'https://github.com/puppetlabs/puppet/pull/4873', '2016-04-11T11:52:14.000-0700', '2016-04-27T07:23:30.000-0700', '2016-04-27T07:23:30.000-0700', 'Closed', '', 3, '0', 1, 13, 1, 2, '19a171e65900e7b3c1a82dbae3f4a9af942f2371', 'https://tickets.puppetlabs.com/browse/PUP-6149', 'https://github.com/puppetlabs/puppet/pull/4873'),
('puppet', 123986, 65562764, 4845, 'Indirection symbol name inappropriately compared to string', 'When I startup Puppet under Puppet Server, I"ve noticed messages like this one:\r\n\r\n{noformat}\r\n2016-03-29 08:44:49,364 WARN  [clojure-agent-send-pool-7] [puppet-server] Puppet Comparing Symbols to non-Symbol values is deprecated\r\n   (file & line not available)\r\n{noformat}\r\n\r\nTracing the source of the message, it appears to be happening, at least in one case, due to this comparison:\r\n\r\nhttps://github.com/puppetlabs/puppet/blob/master/lib/puppet/indirector/terminus.rb#L73\r\n\r\nIn this case, the previous line does a {{.intern}} call to produce the {{indirection_name}}.  Since the result would produce a symbol, it seems like the comparison above should only compare for an empty symbol - maybe something like...\r\n\r\n{code:ruby}\r\nif indirection_name == :""\r\n  raise Puppet::DevError, "Could not discern indirection model from class constant"\r\nend\r\n{code}', 'https://tickets.puppetlabs.com/browse/PUP-6105', 'https://github.com/puppetlabs/puppet/pull/4845', '2016-03-29T09:20:29.000-0700', '2016-04-27T07:23:30.000-0700', '2016-04-27T07:23:30.000-0700', 'Closed', '', 2, '0', 2, 4, 4, 1, '9a3fe2304376f8f9b19c5f8ee740d579a626cbe3', 'https://tickets.puppetlabs.com/browse/PUP-6105', 'https://github.com/puppetlabs/puppet/pull/4845'),
('puppet', 125906, 65955452, 4866, 'PStructType#assignable? ignores Hash key type.', 'The following code:\r\n\r\n{code}\r\nnotice(Struct[{foo => String, bar => String}] >= Hash[Integer, String, 2, 2])\r\n{code}\r\n\r\noutputs {{true}} because it ignores the key type in the {{Hash}} entirely for required keys.\r\n\r\nIt is expected that this outputs {{false}} because the keys of the {{Hash}} are not strings.\r\n\r\nI would also expect a {{Hash}} with key type {{String[2]}} to not be assignable if all the keys in the structure are of length 1, for example, so the key strings in the structure probably need to be checked to see if they are an instance of the {{Hash}} key type.\r\n\r\nACCEPTANCE CRITERIA\r\n----\r\nThat the above example outputs {{false}}\r\n', 'https://tickets.puppetlabs.com/browse/PUP-6147', 'https://github.com/puppetlabs/puppet/pull/4866', '2016-04-10T13:51:09.000-0700', '2016-04-27T07:23:31.000-0700', '2016-04-27T07:23:31.000-0700', 'Closed', '', 4, '0', 2, 24, 2, 2, 'b03e1b1b647b80cde6a14085a22f80f6d3d41d04', 'https://tickets.puppetlabs.com/browse/PUP-6147', 'https://github.com/puppetlabs/puppet/pull/4866'),
('puppet', 125394, 65968087, 4868, 'Unexpected result when accessing a hash using a Struct type. ', 'The following:\n{code}\nnotice({Struct[{foo => String}] => hi}[Struct[{foo => String}]])\n{code}\n\nOutputs:\n{code}\nNotice: Scope(Class[main]):\n{code}\n\nExpected:\n{code}\nNotice: Scope(Class[main]): hi\n{code}\n\nI"d expect the access of the hash with the same exact type to be successful.\n\nACCEPTANCE CRITERIA\n----\nThat the example above outputs {{hi}} instead of {{undef}}', 'https://tickets.puppetlabs.com/browse/PUP-6133', 'https://github.com/puppetlabs/puppet/pull/4868', '2016-04-06T15:57:43.000-0700', '2016-04-27T07:23:31.000-0700', '2016-04-27T07:23:31.000-0700', 'Closed', '', 5, '0', 1, 15, 1, 2, 'e4fc11dbd349667936caca267afd8e59b62c4f2f', 'https://tickets.puppetlabs.com/browse/PUP-6133', 'https://github.com/puppetlabs/puppet/pull/4868'),
('puppet', 125913, 65960667, 4867, 'Callable#assignable? results in undefined method `assignable?" for nil:NilClass', 'The following code:\r\n\r\n{code}\r\nnotice(Callable > Callable[String])\r\n{code}\r\n\r\nResults in:\r\n\r\n{code}\r\nError: Evaluation Error: Error while evaluating a ">" expression, undefined method `assignable?" for nil:NilClass at foo.pp:1:17 on node peterhu-osx\r\n{code}\r\n\r\nExpected result is to output {{true}} (all callables should be assignable to {{Callable}}).\r\n\r\nACCEPTANCE CRITERIA\r\n----\r\nThat the above example does not fail, and instead outputs {{true}}', 'https://tickets.puppetlabs.com/browse/PUP-6148', 'https://github.com/puppetlabs/puppet/pull/4867', '2016-04-10T23:56:21.000-0700', '2016-04-27T07:23:31.000-0700', '2016-04-27T07:23:31.000-0700', 'Closed', '', 3, '0', 1, 11, 1, 2, '819a661bd5b5ad2d611c770050ed80161d8b77a3', 'https://tickets.puppetlabs.com/browse/PUP-6148', 'https://github.com/puppetlabs/puppet/pull/4867'),
('puppet', 123902, 65928923, 4863, 'A type alias that has an alias name of a built-in type should be illegal', 'I would expect the following to be illegal:\r\n\r\n{code}\r\ntype String = Integer\r\n{code}\r\n\r\nAs {{String}} is a built-in type and should not be "redefined".', 'https://tickets.puppetlabs.com/browse/PUP-6102', 'https://github.com/puppetlabs/puppet/pull/4863', '2016-03-28T15:37:24.000-0700', '2016-04-27T07:23:32.000-0700', '2016-04-27T07:23:32.000-0700', 'Closed', '', 7, '0', 10, 165, 100, 9, '87f8e6692f0dbd51fb7aa23d5e37567c0a363632', 'https://tickets.puppetlabs.com/browse/PUP-6102', 'https://github.com/puppetlabs/puppet/pull/4863'),
('puppet', 124636, 65050275, 4830, 'Unexpected result when using a type alias to a recursive variant.', 'I would expect this code:\r\n\r\n{code}\r\ntype MixedScalar = Variant[Integer, MixedScalar]\r\nnotice(foo =~ MixedScalar)\r\n{code}\r\n\r\nto output {{false}}.  Instead it outputs {{true}}.\r\n\r\nACCEPTANCE CRITERIA\r\n----\r\nThat the example above produces false.', 'https://tickets.puppetlabs.com/browse/PUP-6117', 'https://github.com/puppetlabs/puppet/pull/4830', '2016-04-01T12:05:47.000-0700', '2016-04-27T07:23:32.000-0700', '2016-04-27T07:23:32.000-0700', 'Closed', '', 3, '0', 3, 84, 4, 3, 'f09a64087e4adc56cdfe13d1852e8d2eef55e30d', 'https://tickets.puppetlabs.com/browse/PUP-6117', 'https://github.com/puppetlabs/puppet/pull/4830'),
('puppet', 127090, 66896547, 4893, 'Puppet CA face broken', 'The Puppet CA face appears to have been broken the entire lifetime of Puppet 4.', 'https://tickets.puppetlabs.com/browse/PUP-6179', 'https://github.com/puppetlabs/puppet/pull/4893', '2016-04-18T11:06:38.000-0700', '2016-04-27T07:23:32.000-0700', '2016-04-27T07:23:32.000-0700', 'Closed', '', 2, '0', 1, 1, 0, 1, '62a182cb6e19ad8a88a3c6733d16978d913a068c', 'https://tickets.puppetlabs.com/browse/PUP-6179', 'https://github.com/puppetlabs/puppet/pull/4893'),
('puppet', 125905, 65949790, 4865, 'PStructType#assignable? may return nil when compared against a Hash', 'The following code:\n\n{code}\nnotice(Struct[{foo => Integer, bar => String}] >= Hash[String, String, 2, 2])\n{code}\n\noutputs nothing because {{PStructType#assignable?}} returns nil rather than a boolean for this example.\n\nThe expected output should be {{false}} ({{Integer}} is not assignable from {{String}}).\n\nACCEPTANCE CRITERIA\n----\nThat example above outputs {{false}} instead of empty string (for {{undef}}).', 'https://tickets.puppetlabs.com/browse/PUP-6146', 'https://github.com/puppetlabs/puppet/pull/4865', '2016-04-10T13:21:40.000-0700', '2016-04-27T07:23:33.000-0700', '2016-04-27T07:23:33.000-0700', 'Closed', '', 4, '0', 1, 8, 0, 2, '1aeaac449c635e286f0e5af7d5ef7e2e3d0dd2b4', 'https://tickets.puppetlabs.com/browse/PUP-6146', 'https://github.com/puppetlabs/puppet/pull/4865'),
('puppet', 126135, 66147882, 4872, 'Access operator is not implemented for Iterator type', 'The following code causes a compilation error:\n\n{code}\nfunction foo(Iterator[String] $x) {\n  $x.each |$e| {\n    notice $e\n  }\n}\n\nfoo([bar, baz, cake].reverse_each)\n{code}\n\nResulting in:\n{code}\nError: Evaluation Error: Operator "[]" is not applicable to an Iterator-Type.\n{code}\n\nExpected output:\n{code}\nNotice: Scope(Class[main]): cake\nNotice: Scope(Class[main]): baz\nNotice: Scope(Class[main]): bar\n{code}\n\nThis is because the access operator for {{Iterator}} is not implemented.  I"d expect the access operator to take a single type parameter to construct a constrained {{Iterator}} type.\n\nACCEPTANCE CRITERIA\n----\n* That it is possible to narrow an {{Iterator}} using access operator i.e {{Iterator\[T]}}\n* That the above example produces the expected result.', 'https://tickets.puppetlabs.com/browse/PUP-6156', 'https://github.com/puppetlabs/puppet/pull/4872', '2016-04-11T16:07:38.000-0700', '2016-04-27T07:23:33.000-0700', '2016-04-27T07:23:33.000-0700', 'Closed', '', 3, '0', 1, 26, 0, 2, '02afb82c6498d95b88f4b88d0d06979549829113', 'https://tickets.puppetlabs.com/browse/PUP-6156', 'https://github.com/puppetlabs/puppet/pull/4872'),
('puppet', 115868, 58980990, 4655, 'Puppet Array & Hash types should present themselves as just Array/Hash when they are default', 'Both Array and Hash presents themselves in string with the default type parameters expanded e.g. {{Hash\[Scalar, Data, 0]}} when turned into a string. This is surprising and confusing for users.\r\n\r\nThe string operation should check if the type parameters are the default parameters and then suppress the type parameters and present itself as just {{Array}} or {{Hash}}.', 'https://tickets.puppetlabs.com/browse/PUP-5861', 'https://github.com/puppetlabs/puppet/pull/4655', '2016-02-09T20:58:24.000-0800', '2016-04-27T16:18:42.000-0700', '2016-04-27T16:18:42.000-0700', 'Closed', '', 4, '0', 2, 20, 4, 2, '1cc44b8f83d5673d5bfc6993ea1f65621f49d338', 'https://tickets.puppetlabs.com/browse/PUP-5861', 'https://github.com/puppetlabs/puppet/pull/4655'),
('puppet', 116002, 58960907, 4653, 'Iterators are presenting themselves as Ruby type names', 'This code:\r\n\r\n{code}\r\nnotice [].reverse_each\r\n{code}\r\n\r\nOutputs:\r\n\r\n{code}\r\nNotice: Scope(Class[main]): #<Puppet::Pops::Types::Iterator:0x007f93ec28f938>\r\n{code}\r\n\r\nI"d expect either a {{Runtime["ruby", "iterator"]}} or something like {{Iterator[<type of thing being iterated>]}}.\r\n\r\n', 'https://tickets.puppetlabs.com/browse/PUP-5875', 'https://github.com/puppetlabs/puppet/pull/4653', '2016-02-10T13:31:57.000-0800', '2016-04-27T16:19:59.000-0700', '2016-04-27T16:19:59.000-0700', 'Closed', '', 2, '0', 1, 25, 0, 3, '23264d250298e4d25943b80c7db7988d4bf2ddef', 'https://tickets.puppetlabs.com/browse/PUP-5875', 'https://github.com/puppetlabs/puppet/pull/4653'),
('puppet', 115505, 58560550, 4646, 'Symbol in scope; puppet apply -e "notify { $environment: }" raises an exception', '', 'https://tickets.puppetlabs.com/browse/PUP-5835', 'https://github.com/puppetlabs/puppet/pull/4646', '2016-02-07T12:34:13.000-0800', '2016-04-27T16:20:10.000-0700', '2016-04-27T16:20:10.000-0700', 'Closed', '', 4, '0', 1, 20, 3, 4, '0296d2dc9a58f99a13961391ced55182be45d224', 'https://tickets.puppetlabs.com/browse/PUP-5835', 'https://github.com/puppetlabs/puppet/pull/4646'),
('puppet', 113443, 57153639, 4600, 'CapabilityFinder fails when used with PuppetDB 4.0 terminus code', 'When used with the terminus code from the upcoming PuppetDB 4.0 release, the CapabilityFinder fails with an arity exception when attempting to call Puppet::Util::Puppetdb::Http.action(url). In PuppetDB 4, this method has a second required argument which is the request mode ("query" vs. "command"). In this case, the second argument should always be "query", but we also need to determine whether or not to pass that argument.', 'https://tickets.puppetlabs.com/browse/PUP-5745', 'https://github.com/puppetlabs/puppet/pull/4600', '2016-01-22T13:12:02.000-0800', '2016-04-27T16:27:18.000-0700', '2016-04-27T16:27:18.000-0700', 'Closed', '', 4, '0', 1, 48, 28, 2, '0d727db05c1af5a664ce49e973b8833a94085548', 'https://tickets.puppetlabs.com/browse/PUP-5745', 'https://github.com/puppetlabs/puppet/pull/4600'),
('puppet', 103169, 50906049, 4453, 'symbolic_modes tests occasionally fail on OSX', 'symbolic_modes tests occasionally fail on OS X like:\r\n\r\n{code}\r\nErrored Tests Cases:\r\n  Test Case tests/resource/file/symbolic_modes.rb reported: #<Beaker::Host::CommandFailure: Host "nn8elbm0jop4j4t.delivery.puppetlabs.net" exited with 1 running:\r\n env PATH="/opt/puppetlabs/puppet/bin:${PATH}" ruby -e "require "etc"; puts (Etc.getgrgid(File.stat("/var/folders/zz/zyxvpxvq6csfxvn_n0000000000000/T/symbolic-modes.XXXXXX.oAsbXzPO/file").gid).name)"\r\nLast 10 lines of output were:\r\n	-e:1:in `getgrgid": can"t find group for 719 (ArgumentError)\r\n		from -e:1:in `<main>">\r\n{code}', 'https://tickets.puppetlabs.com/browse/PUP-5444', 'https://github.com/puppetlabs/puppet/pull/4453', '2015-10-28T08:00:16.000-0700', '2016-04-27T16:39:42.000-0700', '2016-04-27T16:39:42.000-0700', 'Closed', '', 6, '0', 1, 10, 7, 1, 'bedea126769c6307bef55c4ca53bf27769c99281', 'https://tickets.puppetlabs.com/browse/PUP-5444', 'https://github.com/puppetlabs/puppet/pull/4453'),
('puppet', 115840, 58833007, 4651, 'Revert the implementation of PUP-5659 before it is released in 4.4.0', 'In PUP-5659 we improved the validation of resource references in meta parameters. This had far reaching consequences that there is no time to fix late in the 4.4.0 release cycle.\r\n\r\nWe will instead revert that change. PUP-5659 is now targeting Puppet 5.0.0.', 'https://tickets.puppetlabs.com/browse/PUP-5850', 'https://github.com/puppetlabs/puppet/pull/4651', '2016-02-09T16:25:25.000-0800', '2016-04-27T16:39:43.000-0700', '2016-04-27T16:39:43.000-0700', 'Closed', '', 0, '0', 1, 5, 37, 2, '07e1a5e0cd537a34ad785af112fe1bff73de0cc9', 'https://tickets.puppetlabs.com/browse/PUP-5850', 'https://github.com/puppetlabs/puppet/pull/4651'),
('puppet', 90658, 59715631, 4682, 'Acceptance test for packages has dependency on rubygems.org', 'The acceptance test tests/resource/package.common_package_name_in_different_providers.rb uses rubygems.org during its run to install a gem. This should be updated to use GEM_SOURCE if set so we can use internal infrastructure.', 'https://tickets.puppetlabs.com/browse/PUP-4929', 'https://github.com/puppetlabs/puppet/pull/4682', '2015-07-27T09:52:17.000-0700', '2016-04-27T16:39:43.000-0700', '2016-04-27T16:39:43.000-0700', 'Closed', '', 5, '0', 1, 1, 1, 1, '9e2b5ceac9a5486ea6421b122895e2198ab56c86', 'https://tickets.puppetlabs.com/browse/PUP-4929', 'https://github.com/puppetlabs/puppet/pull/4682'),
('puppet', 104556, 49908761, 4418, 'Puppet acceptance fails on fedora 22', '{noformat}\r\nexport SHA=4c92898c5bde18911e9cfde820c3dd6049941c1e\r\nexport SUITE_VERSION=1.2.7.389.g4c92898\r\nexport CONFIG=config/nodes/fedora-22-x86_64.yaml\r\n{noformat}\r\n\r\n{noformat}\r\nBegin tests/resource/service/service_enable_linux.rb\r\n\r\nSysV and Systemd Service Provider Validation\r\n\r\nxjg7kxzxs85t8md.delivery.puppetlabs.net (agent) 10:11:26$ facter operatingsystemmajrelease\r\n  22\r\n\r\nxjg7kxzxs85t8md.delivery.puppetlabs.net (agent) executed in 0.05 seconds\r\nWarning: \r\nProvider needs manual update to support Fedora 22\r\n{noformat}\r\n\r\n{noformat}\r\nBegin tests/resource/package/common_package_name_in_different_providers.rb\r\n\r\nticket 1073: common package name in two different providers should be allowed\r\n\r\n* Verify gem and ruby-devel on fedora-22 and above if not aio\r\n\r\nxjg7kxzxs85t8md.delivery.puppetlabs.net (agent) 10:06:21$ which dnf\r\n  /usr/bin/dnf\r\n\r\n...\r\n\r\nxjg7kxzxs85t8md.delivery.puppetlabs.net (agent) 10:07:23$ gem list --local\r\n  bash: gem: command not found\r\n{noformat}', 'https://tickets.puppetlabs.com/browse/PUP-5478', 'https://github.com/puppetlabs/puppet/pull/4418', '2015-11-05T11:18:34.000-0800', '2016-04-27T16:39:46.000-0700', '2016-04-27T16:39:46.000-0700', 'Closed', '', 6, '0', 1, 24, 16, 3, 'd93e47eaa5bd9559da36b46e8f7a51f28a189b11', 'https://tickets.puppetlabs.com/browse/PUP-5478', 'https://github.com/puppetlabs/puppet/pull/4418'),
('puppet', 98361, 45138569, 4252, 'On EL4, the AIO puppet-agent is unable to manage the puppet service', 'On EL4 builds of the AIO puppet-agent, Puppet is unable to manage the puppet service:\r\n\r\nAs seen in the puppet-agent 1.2.4 build for EL4:\r\n\r\n{code}\r\n# /opt/puppetlabs/puppet/bin/puppet resource service puppet ensure=running\r\nservice { "puppet":\r\n  ensure => "running",\r\n}\r\n# service puppet status\r\npuppet is stopped\r\n# service puppet start\r\nStarting puppet agent:                                     [  OK  ]\r\n# /opt/puppetlabs/puppet/bin/puppet resource service puppet ensure=stopped\r\nError: /Service[puppet]/ensure: change from running to stopped failed: SIGTERM\r\nError: Could not run: SIGTERM\r\n{code}\r\n', 'https://tickets.puppetlabs.com/browse/PUP-5257', 'https://github.com/puppetlabs/puppet/pull/4252', '2015-09-16T10:32:04.000-0700', '2016-04-27T16:39:46.000-0700', '2016-04-27T16:39:46.000-0700', 'Closed', '', 0, '0', 1, 53, 8, 1, '5b9835f6f599c1350704702e371d50d68d862153', 'https://tickets.puppetlabs.com/browse/PUP-5257', 'https://github.com/puppetlabs/puppet/pull/4252'),
('puppet', 68019, 29287630, 3606, 'Spec test failure on ruby 1.8.7: ProviderSystemd should not be the default provider on rhel4', 'CI spec test failure on master branch: [See CI failure|https://jenkins.puppetlabs.com/job/Puppet-Specs-stable/275/facter=master,hiera=master,installation=base,label=unit,ruby=ruby-1.8.7-p374/testReport/junit/(root)/Puppet__Type__Service__ProviderSystemd/Puppet__Type__Service__ProviderSystemd_should_not_be_the_default_provider_on_rhel4/]\r\n\r\n\r\n\r\n*Error Message*\r\n{code}\r\nfailed Puppet::Type::Service::ProviderSystemd should not be the default provider on rhel4\r\n{code}\r\n\r\n*Stacktrace*\r\n{code}\r\n        not all expectations were satisfied\r\nunsatisfied expectations:\r\n- expected exactly once, not yet invoked: Facter.value(:operatingsystem)\r\nsatisfied expectations:\r\n- allowed any number of times, not yet invoked: Signal.trap(any_parameters)\r\n- allowed any number of times, not yet invoked: Puppet::Type::Service.defaultprovider(any_parameters)\r\n- allowed any number of times, not yet invoked: Puppet::Type::Service::ProviderSystemd.which("systemctl")\r\n- expected at least once, invoked twice: Facter.value(:operatingsystemmajrelease)\r\n- expected at least once, invoked 3 times: Facter.value(:osfamily)\r\n\r\n./spec/unit/provider/service/systemd_spec.rb:36\r\n{code}', 'https://tickets.puppetlabs.com/browse/PUP-4011', 'https://github.com/puppetlabs/puppet/pull/3606', '2015-02-13T08:50:55.000-0800', '2016-04-27T16:39:46.000-0700', '2016-04-27T16:39:46.000-0700', 'Closed', '', 0, '0', 1, 6, 2, 1, 'c6fd80806134f23e44cef1b13124015b7e1ad17b', 'https://tickets.puppetlabs.com/browse/PUP-4011', 'https://github.com/puppetlabs/puppet/pull/3606'),
('puppet', 98370, 45221492, 4256, 'On SLES 10 and 11 AIO builds of puppet-agent, the puppet service fails to start', 'In pre-release builds of the AIO puppet-agent (from the master branch), the puppet service fails to start on SLES 10 and 11:\r\n\r\nAs seen with puppet-agent-1.2.3.338.gd674f45-1.sles11:\r\n\r\n{code}\r\n# service puppet start\r\nStarting puppet services.Error: Could not prepare for execution: The puppet agent command does not take parameters\r\nstartproc:  exit status of parent of /opt/puppetlabs/puppet/bin/puppet: 1\r\n{code}\r\n\r\n\r\n', 'https://tickets.puppetlabs.com/browse/PUP-5258', 'https://github.com/puppetlabs/puppet/pull/4256', '2015-09-16T11:19:55.000-0700', '2016-04-27T16:39:46.000-0700', '2016-04-27T16:39:46.000-0700', 'Closed', '', 0, '0', 1, 2, 2, 1, '0f391a5966e4cf1b5a756461b2c64bd0a949c1e5', 'https://tickets.puppetlabs.com/browse/PUP-5258', 'https://github.com/puppetlabs/puppet/pull/4256'),
('puppet', 113182, 56743740, 4589, 'Add a step(<n>) function', 'Add a step(iterable, n) function that takes two arguments and an optional block. The declared parameter types must be `Iterable` and `Integer[1]` (a positive integer).\r\n\r\nIf the function is called without a block, it must return a new iterable that will yield each nth element of the given argument\r\nWhen a block is given, it must be called with each nth element of the given argument. The argument is then returned.\r\n\r\nExample:\r\n{code:puppet}\r\n[1,2,3,4,5,6,7,8].step(3) |$x| { notice($x) }\r\n{code}\r\nwill result in the notices "1", "4", "7"\r\n{code:puppet}\r\n$c =.[1,2,3,4,5,6,7,8].step(3).map |$x| { $x * 10 }\r\n{code}\r\nWill result in:\r\n{code:puppet}\r\n$c == [10, 40, 70]\r\n{code}', 'https://tickets.puppetlabs.com/browse/PUP-5730', 'https://github.com/puppetlabs/puppet/pull/4589', '2016-01-21T03:44:59.000-0800', '2016-04-27T16:40:17.000-0700', '2016-04-27T16:40:17.000-0700', 'Closed', '', 5, '0', 10, 382, 5, 7, '13c5b1503e59ad07c46cf21c74077235650943c7', 'https://tickets.puppetlabs.com/browse/PUP-5730', 'https://github.com/puppetlabs/puppet/pull/4589'),
('puppet', 113181, 56741759, 4588, 'Add a reverse_each function', 'Add a reverse_each(iterable) function that takes one argument and an optional block. The declared parameter type must be `Iterable`.\r\n\r\nIf the function is called without a block, it must return a new iterable that will yield each element of the given argument in reverse order.\r\nWhen a block is given, it must be called with each element of the given argument in reverse order. The argument is then returned.\r\n\r\nExample:\r\n{code:puppet}\r\n[1,3,5,7].reverse_each |$x| { notice($x) }\r\n{code}\r\nwill result in the notices "7", "5", "3", "1"\r\n{code:puppet}\r\n$c = [1,3,5,7].reverse_each.map |$x| { $x * 10 }\r\n{code}\r\nWill result in:\r\n{code:puppet}\r\n$c == [70, 50, 30, 10].\r\n{code}', 'https://tickets.puppetlabs.com/browse/PUP-5729', 'https://github.com/puppetlabs/puppet/pull/4588', '2016-01-21T03:31:13.000-0800', '2016-04-27T16:40:38.000-0700', '2016-04-27T16:40:38.000-0700', 'Closed', '', 11, '0', 6, 173, 5, 5, '1721a762dc2c48587a7b9979a208c7e0b9a007d5', 'https://tickets.puppetlabs.com/browse/PUP-5729', 'https://github.com/puppetlabs/puppet/pull/4588'),
('puppet', 84332, 37612619, 4030, 'resource_types response has AST for parameters" default values', 'In Puppet 3.x, the resource_types response would contain the unevaluated code assigned to a parameter"s default value. For example, if a class were declared as follows:\r\n\r\n{code}\r\nclass foo($bar=["1", "2"]) {\r\n}\r\n{code}\r\n\r\nThen the class"s representation in the resource_types response would include:\r\n{code}\r\n"parameters": "[\"1\", \"2\"]"\r\n{code}\r\n\r\nIn Puppet 4.1.0 and above (and probably 4.0.0 as well, though I haven"t tested that), the default value is the abstract syntax tree representation rather than the code as written. For the class defined above, the default value in the resource_types response is now:\r\n\r\n{code}\r\n"parameters": "([] "1" "2")"\r\n{code}', 'https://tickets.puppetlabs.com/browse/PUP-4747', 'https://github.com/puppetlabs/puppet/pull/4030', '2015-06-11T17:03:24.000-0700', '2016-04-27T16:44:44.000-0700', '2016-04-27T16:44:44.000-0700', 'Closed', 'regression', 7, '0', 1, 9, 2, 2, '06981e586476ab28ed5f1c8551d3e206d394d47b', 'https://tickets.puppetlabs.com/browse/PUP-4747', 'https://github.com/puppetlabs/puppet/pull/4030'),
('puppet', 117422, 59925962, 4687, 'Optional data type and data binding with undef as default value', 'ORIGINAL REPORT\r\n-----\r\nAll the files are in .zip attached file. I have a (very basic) module with the function {{data.pp}} as data provider and the default value of a parameter is {{undef}}:\r\n\r\n{code:puppet}\r\nfunction test::data {\r\n  {\r\n    test::foo::param => undef,\r\n  }\r\n}\r\n{code}\r\n\r\nIn the class {{::test::foo}}, I have this code:\r\n\r\n{code:puppet}\r\nclass test::foo ( Optional[ String[1] ] $param ) { }\r\n{code}\r\n\r\nAs you can see, the type of the parameter {{$param}} is an {{Optional}} which means that a {{undef}} value is accepted. However, if I test this code:\r\n\r\n{code:puppet}\r\ninclude "::test::foo"\r\n{code}\r\n\r\nI have an error:\r\n\r\n{code}\r\n~# puppet apply /puppet/modules/test/examples/example.pp \r\nError: Evaluation Error: Error while evaluating a Function Call, Class[Test::Foo]: expects a value for parameter "param" at /puppet/modules/test/examples/example.pp:1:1 on node puppet.athome.priv\r\n{code}\r\n\r\nIt seems to me that it"s not the expected behavior.\r\nRegards.\r\n\r\nPS: currently a possible and simple workaround is to set a {{undef}} default value in the declaration of the class like this:\r\n\r\n{code:puppet}\r\nclass test::foo ( Optional[ String[1] ] $param = undef ) { }\r\n{code}\r\n\r\nbut you have to set the {{undef}} value in two different places.\r\n\r\n\r\nUPDATE\r\n----\r\nThis is fixed so that if an {{undef}} value is bound for a parameter key data binding will assign that {{undef}} to the parameter if the parameter does not have a default value expression. Earlier such a binding would have failed and required that the parameter had a default value expression of {{= undef}} in order to make a lookup of {{undef}} possible.\r\n', 'https://tickets.puppetlabs.com/browse/PUP-5925', 'https://github.com/puppetlabs/puppet/pull/4687', '2016-02-18T16:58:35.000-0800', '2016-04-27T16:46:01.000-0700', '2016-04-27T16:46:01.000-0700', 'Closed', '', 15, '0', 1, 121, 91, 3, '743deebc86c73e1114fe1f6a2a4d9677ce15a3b3', 'https://tickets.puppetlabs.com/browse/PUP-5925', 'https://github.com/puppetlabs/puppet/pull/4687'),
('puppet', 114237, 59360232, 4671, 'when puppet module-level data provider function defines an unqualified key, puppet lookup returns nothing', 'Define a module level data provider function, either puppet function or ruby function like this:\r\n{code}\r\n[root@b8pwin0w4p7demn ~]# cat /etc/puppetlabs/code/environments/production/modules/hello/lib/puppet/functions/hello/data.rb\r\nPuppet::Functions.create_function(:"hello::data") do\r\n  def data()\r\n    {\r\n      "hello::module_key" => "module-hello-ruby-function provided data",\r\n      "global_key" => "module-hello-ruby-function provided data",\r\n    }\r\n  end\r\nend\r\n[root@b8pwin0w4p7demn ~]#\r\n{code}\r\nThat is, defining two key-value pairs, one qualified with the name of the module (hello::module_key), the other unqualified (global_key).\r\n\r\nNow try to lookup hello::module_key.  We get nothing, exit code 1 indicating the key was not found.  --explain does not help.\r\n{code}\r\n[root@b8pwin0w4p7demn ~]# puppet lookup hello::module_key\r\n[root@b8pwin0w4p7demn ~]# echo $?\r\n1\r\n[root@b8pwin0w4p7demn ~]# puppet lookup hello::module_key --explain\r\n\r\n[root@b8pwin0w4p7demn ~]# echo $?\r\n0\r\n[root@b8pwin0w4p7demn ~]#\r\n{code}\r\nNow comment out the second definition in data.rb and try again.\r\n{code}\r\n[root@b8pwin0w4p7demn ~]# vi /etc/puppetlabs/code/environments/production/modules/hello/lib/puppet/functions/hello/data.rb\r\n[root@b8pwin0w4p7demn ~]# cat /etc/puppetlabs/code/environments/production/modules/hello/lib/puppet/functions/hello/data.rb\r\nPuppet::Functions.create_function(:"hello::data") do\r\n  def data()\r\n    {\r\n      "hello::module_key" => "module-hello-ruby-function provided data",\r\n#      "global_key" => "module-hello-ruby-function provided data",\r\n    }\r\n  end\r\nend\r\n[root@b8pwin0w4p7demn ~]# puppet lookup hello::module_key\r\n--- module-hello-ruby-function provided data\r\n...\r\n[root@b8pwin0w4p7demn ~]# puppet lookup hello::module_key --explain\r\nMerge strategy first\r\n  Data Binding "hiera"\r\n    No such key: "hello::module_key"\r\n  Data Provider "EnvironmentDataProvider"\r\n    No such key: "hello::module_key"\r\n  Module "hello" using Data Provider "FunctionModuleDataProvider"\r\n    Found key: "hello::module_key" value: "module-hello-ruby-function provided data"\r\n  Merged result: "module-hello-ruby-function provided data"\r\n[root@b8pwin0w4p7demn ~]#\r\n{code}\r\nNow the lookup of the same key succeeds.  Apparently, unqualified keys-value pairs in the function cause the lookup to abort.  I feel an error message is deserved if the lookup aborts due to the presence of an unqualified key in the function"s hash.', 'https://tickets.puppetlabs.com/browse/PUP-5761', 'https://github.com/puppetlabs/puppet/pull/4671', '2016-01-28T00:43:37.000-0800', '2016-04-27T16:46:25.000-0700', '2016-04-27T16:46:25.000-0700', 'Closed', '', 6, '0', 4, 127, 32, 9, 'e74548ed4505772e4316d125867590d8935d6db7', 'https://tickets.puppetlabs.com/browse/PUP-5761', 'https://github.com/puppetlabs/puppet/pull/4671'),
('puppet', 109055, 53386373, 4494, 'Yum provider raises exception if check-update returns unexpected exit code', 'Installing PE 2015.2.3 on an AWS instance without internet access fails to install the console successfully.  \r\n\r\nThe yum package provider calls `yum check-update`, and the command returns a non-zero exit code. The package provider tries to emit a warning, but calls a private method in doing so. This causes an exception to be raised and the resource to fail.\r\n\r\n{code}\r\n[2015-11-19 16:52:16.287 UTC] INFO Error: Could not get latest version: private method `warn" called for Puppet::Type::Package::ProviderYum:Class\r\n[2015-11-19 16:52:16.287 UTC] INFO Error: /Stage[main]/Pe_nginx/Package[pe-nginx]/ensure: change from 1.8.0-9.pe.el7 to latest failed: Could not get latest version: private method `warn" called for Puppet::Type::Package::ProviderYum:Class\r\n{code}\r\n\r\nSteps to workaround the issue:\r\n1. Run installer\r\n2. Modifed /opt/puppetlabs/puppet/lib/ruby/vendor_ruby/puppet/provider/package/yum.rb:83, commenting out the `warn` directive\r\n3. Proceed with installation in GUI\r\n\r\nThis is probably a trivial fix to the yum provider: update it to emit a warn correctly without raising an exception.', 'https://tickets.puppetlabs.com/browse/PUP-5594', 'https://github.com/puppetlabs/puppet/pull/4494', '2015-12-10T08:53:17.000-0800', '2016-04-27T16:47:19.000-0700', '2016-04-27T16:47:19.000-0700', 'Closed', 'puppethack', 3, '0', 1, 2, 2, 2, 'dc0464df9eb4f979f11c9cb6de7601558c94a686', 'https://tickets.puppetlabs.com/browse/PUP-5594', 'https://github.com/puppetlabs/puppet/pull/4494'),
('puppet', 123372, 65566092, 4846, 'type function: Unit type being returned for empty array and hash', 'The following manifest:\r\n\r\n{code}\r\nnotice(type([]))\r\nnotice(type({}))\r\n{code}\r\n\r\nproduces the following output:\r\n\r\n{code}\r\nNotice: Scope(Class[main]): Array[Unit, 0, 0]\r\nNotice: Scope(Class[main]): Hash[Unit, Unit, 0, 0]\r\n{code}\r\n\r\n{{Unit}} is not part of the Puppet type system and should not be displayed.\r\n\r\nExpected output:\r\n\r\n{code}\r\nNotice: Scope(Class[main]): Array[Any, 0, 0]\r\nNotice: Scope(Class[main]): Hash[Any, Any, 0, 0]\r\n{code}\r\n\r\nACCEPTANCE CRITERIA\r\n----\r\n{code:puppet}\r\nnotice(type([]), type({}))\r\n{code}\r\nShould produce:\r\n{code}\r\nNotice: Scope(Class[main]): Array[0, 0] Hash[0, 0]\r\n{code}\r\n\r\nAnd it is illegal to create an empty typed container:\r\n* Array[Integer, 0, 0]\r\n* Hash[Integer, Integer, 0, 0]\r\n', 'https://tickets.puppetlabs.com/browse/PUP-6089', 'https://github.com/puppetlabs/puppet/pull/4846', '2016-03-23T22:46:01.000-0700', '2016-05-02T05:13:51.000-0700', '2016-05-02T05:13:51.000-0700', 'Closed', '', 14, '0', 3, 61, 7, 5, '839775b4ecf2c15e344a9c85b98937717d6fa829', 'https://tickets.puppetlabs.com/browse/PUP-6089', 'https://github.com/puppetlabs/puppet/pull/4846'),
('puppet', 79275, 62540478, 4780, 'Too many restarts on interface changes for Fedora, RHEL, CentOS', 'In https://projects.puppetlabs.com/issues/2776 a workaround was introduced to restart puppet on Fedora, RHEL, CentOS which restarts puppet on each interface change. The script /etc/NetworkManager/dispatcher.d/98-puppet restarts puppet agents every time a interface goes up or down regardless of the type. \r\nNowadays with VMs and containers you can get a lot of interface up downs for virtual interfaces. Because of the workaround from #2776 this creates a lot of un-necessary agent restarts.\r\n\r\nA workaround of the workaround might be to make a regex blacklist  for interface names, e.G. [ "veht.*", "vibr.*", "docker.*"]\r\nA cleaner solution would be to actually monitor /etc/resolv.conf in an agent run, since changes in resolv.conf by agent was the original problem,  and not to use NetworkManager for restarts.\r\n', 'https://tickets.puppetlabs.com/browse/PUP-4545', 'https://github.com/puppetlabs/puppet/pull/4780', '2015-05-08T00:19:05.000-0700', '2016-05-03T14:42:46.000-0700', '2016-05-03T14:42:46.000-0700', 'Closed', 'puppet-agent', 11, '0', 1, 0, 23, 2, '96135c75d5b8286b6ca7b4cc46dbecb2a81ea0e4', 'https://tickets.puppetlabs.com/browse/PUP-4545', 'https://github.com/puppetlabs/puppet/pull/4780'),
('puppet', 128229, 67777269, 4913, 'generated modules will not work with ruby 1.8.7', '', 'https://tickets.puppetlabs.com/browse/PUP-6232', 'https://github.com/puppetlabs/puppet/pull/4913', '2016-04-25T12:47:14.000-0700', '2016-05-04T15:07:08.000-0700', '2016-05-04T15:07:08.000-0700', 'Resolved', '', 4, '0', 1, 1, 0, 1, 'efaaf70172b0f0bd2c64b00581cfc6376cb46d79', 'https://tickets.puppetlabs.com/browse/PUP-6232', 'https://github.com/puppetlabs/puppet/pull/4913'),
('puppet', 97630, 45117993, 4251, 'Centos 4 fails to list instances of ssh_authorized_keys', '{noformat}\r\n# export SHA=1.2.4\r\n# export CONFIG=config/nodes/centos-4-x86_64.yaml\r\n# bundle exec rake ci:test:aio\r\n...\r\nBegin tests/resource/ssh_authorized_key/destroy.rb\r\n\r\nshould delete an entry for an SSH authorized key\r\n\r\n  * (setup) backup ~/.ssh/authorized_keys file\r\n\r\nsb1nht6p15drgb1.delivery.puppetlabs.net (agent) 11:17:00$ cp ~/.ssh/authorized_keys /tmp/auth_keys\r\n\r\nsb1nht6p15drgb1.delivery.puppetlabs.net (agent) executed in 0.04 seconds\r\n\r\n  * (setup) create an authorized key in the ~/.ssh/authorized_keys file\r\n\r\nsb1nht6p15drgb1.delivery.puppetlabs.net (agent) 11:17:00$ echo "ssh-rsa mykey pl119002" >> ~/.ssh/authorized_keys\r\n\r\nsb1nht6p15drgb1.delivery.puppetlabs.net (agent) executed in 0.04 seconds\r\n\r\n  * delete an authorized key entry with puppet (absent)\r\n\r\nsb1nht6p15drgb1.delivery.puppetlabs.net (agent) 11:17:00$ puppet resource ssh_authorized_key pl119002 ensure=absent user="root" type="rsa" key="mykey"\r\nssh_authorized_key { "pl119002":\r\n  ensure => "absent",\r\n}\r\n\r\nsb1nht6p15drgb1.delivery.puppetlabs.net (agent) executed in 0.80 seconds\r\n\r\n  * verify entry deleted from ~/.ssh/authorized_keys\r\n\r\nsb1nht6p15drgb1.delivery.puppetlabs.net (agent) 11:17:01$ cat ~/.ssh/authorized_keys\r\nssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQC/T0ADg8YIX6C9OvDK8V3O4m2KKTaTcShuAfdhSP8/E6w2SUWwLZVGHM8bD65SnDwXnVo89+La2Yn/7QmJyqZO31LVPh2sMzGFmw57a/s06h2ujkWE3jOL5w9cUBWrrkdP7xbUXFWi6fi+PjSi9/vI1IpBi3X7EmI3mC9ftV9QZbj2wQclhpTNsGaCSJA3ye7G/+7XNWXwaMsPxmTYqD4PBZlbVXQ4dqR3oObkZ8wNWd+qmMvxeSuJ69rSGWTeIqwdGpm2vfcIqn1GM2r+lcCBIB+VXoLDN0zNia2+j5KItVHMyDU+/lQS3oYGdejM2cd6fDBcW1AiSijUbQr0d+fR ci+enterprise@puppetlabs.com\r\nssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQDIrRlZ7kz3U/uOjiXrmJpumRHo8fDWBo+AOCSdqokqNRcALUrpNr6iHRR68Ki1EzPRSvGsdqrh9riStAlJxVroLZt8t2Mt+McydxdvHwJcDSWpZ+UZ1KGXUS1vg4569JZjdi+Gl70WAzJqTxhqIogwcNuZbMMBvJe9oAMCXS1TYMXfPiEcw/hQD/kBNvkSMGTn/siMlNPtaCF+rzlarzUqkEpUnsHmGwqFVHLeVFZ94+2ZD3CzBeJ6m3Ke9IA5ytzOYyPuFP/NVNnEnSrwwe7GSjnxZWT2dzjUrqMgGphWFmeU35oz7r+HxRXsugbMUyN3HEudU268ciYeAvG4xMY3 sqa+ci@puppetlabs.com\r\nssh-rsa AAAAB3NzaC1yc2EAAAABIwAAAQEAsMvODgIqL1NoUgP65qmgf0sJjQy78QdA5rHw9tIwK5KstVSh+0w4TLHJq8Jz8E4UeXhx0NioP3kE3otjCC8kSM5y99QOs4qQh7q6cLN9hQpXMQUD9UnJMP0b5agd0PdErH0ML9hnWfsZX707v31VSIbco+X6Kg9wN8WJhlTXgbbrJTUIPnMzNXrN7Z5/jY6Vss7NTCVI7OxUbIna37l5y8s4jxViaXjoVEXP8e4QtTX8p0BYc2vgerI04ZilhbIe4KEcHiR+n/GUr6MmkY5qtLum/7IZLHbHfWha1q7VaPnz/CHmlDySxxq4sF81N4x2V7d0+x8/wNZx2d+duJmV0Q== jenkins/hudson@puppetlabs.com\r\nssh-rsa AAAAB3NzaC1yc2EAAAABIwAAAQEAxPfb1yjRU7E5cQG9+Eq55WWCsLTRmd/tjv/Ym0Sm+3bsoayfKkd7irZEKlyUlgfNx9IkW45E3o8O+LR2+91U4H+Ao6cxLqyXg/5tqLUyyThkS+KBns7HyxC24nnO3h/84mzC1BCO6p3UAwF4gDtYv1LCxshWuwd0dEUTZFTP8E7Xz6dgKnza0745QnRf4xhx3zRwbjW2iJ97bePNZaZf+EgIDPYcjxqUNr69oCfcC0K11oKuqLpu8pmP4rGC/MxqgadGINEJfP+Y14szE/nIjoEJ71IhP9TEDfEAArPMopqed65xOgo/GVFk8Olhi2+xd2JysiVb6dS5BjjFZpBjuw== jenkins/jetty@enkal.puppetlabs.com\r\nssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQDlFK/6B43EQWBR5C6Oe3yFnmjlVGgE1LXQuvpUS1SYR0jIYAGpK6X/4NwTNniwaRQrklE9dlAoDrWB3VxbczuysKNslwE64refp53A933/PV25QY3jx8vlOgi3ri7Aj/Jk+PpBIHsedLzYYOrD/s7xZ5LZ+8bsjolK8+YZnQcBy7sOpGQYUyP4EHQI91jhigjIwzf6/rhVWsKEHDF2v0RnnP+BjbRlYyG0HOGMwbGqg33Pr5QiTfJQWkYl3JCWB5OGnlRq5xiTvB1nyRMC550dgKjVyRtANk/aZVGsC7aC5EGe0qekBCUvctTqXbNR5N2ek54XHhReUqm0PiImLFXT sqa+builders@puppetlabs.com\r\nssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQCsFUzpOJRglp/6/nEzkRriTuKfc+OcAyfFhgGx2lR+CR2pzGYus5VrcHalT/lHphbc5NGMXGa6tVYNkMPXNvrThlBwHhh9FFx5/6LRXbq8/LD2tDAW1tyPU04Qk0LNvoq+GSX/QPdumgwThlSEqkdBO0EQIR2CR8XYWIytFcYolPoozrolFoaiDyymZCJE4CaPi3TFTb1DIBm4i0VrHFXvdeAsMAe9J5x4wAd14UjDjghYNN/0GnoYxzDk6JnKX00Hvs3AriPJrW5Y7UBA6eGdISsLZRtOw5NKdiTEGH3VWwupIUc049FFpa83V0ySX0YwqGLhClTjk8ltMulcqF0J sqa+shipper@puppetlabs.comssh-rsa mykey pl119002\r\n\r\nsb1nht6p15drgb1.delivery.puppetlabs.net (agent) executed in 0.02 seconds\r\nWarning: \r\nfound the ssh_authorized_key for pl119002\r\n{noformat}', 'https://tickets.puppetlabs.com/browse/PUP-5228', 'https://github.com/puppetlabs/puppet/pull/4251', '2015-09-11T12:00:27.000-0700', '2016-05-11T16:51:06.000-0700', '2016-05-11T16:51:06.000-0700', 'Closed', '', 4, '0', 1, 5, 5, 3, 'a7bf44b64ba8e56eb981c6b0044e3fc90549c437', 'https://tickets.puppetlabs.com/browse/PUP-5228', 'https://github.com/puppetlabs/puppet/pull/4251'),
('puppet', 121512, 62955729, 4790, 'File type does not fsync temp file before checksum verification during file creation', '*Summary*\r\n\r\nWe are seeing checksum verification errors when using Puppet to create files in GlusterFS volumes.\r\n\r\nThe apparent cause of this error is that checksum verification happens before the temporary file is completely synced to the file system, and the verification code uses incomplete cached data that doesn"t match what was written to disk.\r\n\r\nModifying file.rb to call fsync() on the temporary file descriptor before checksum verification allows file installation on our GlusterFS volumes to succeed.\r\n\r\nWe are submitting this as a Puppet bug because the read-before-sync order of operations seems incorrect regardless of the file system type being used.\r\n\r\n*Demonstration* {code}\r\n# cat /etc/redhat-release \r\nRed Hat Enterprise Linux Server release 6.7 (Santiago)\r\n# rpm -qa glusterfs\r\nglusterfs-3.7.1-16.el6.x86_64\r\n# rpm -qa pe-puppet\r\npe-puppet-3.6.2.14-1.pe.el6.noarch\r\n# uname -r\r\n2.6.32-573.3.1.el6.x86_64\r\n# mount -t glusterfs glusterhost:/glustervolume /mnt\r\n# cat file-test.pp\r\nfile { "/mnt/this-is-a-file":\r\n  ensure   => "file",\r\n  content  => "This is a file!\n",\r\n  group    => "root",\r\n  mode     => "644",\r\n  owner    => "root",\r\n}\r\n# puppet apply file-test.pp\r\nWarning: Setting modulepath is deprecated in puppet.conf. See http://links.puppetlabs.com/env-settings-deprecations\r\n   (at /opt/puppet/lib/ruby/site_ruby/1.9.1/puppet/settings.rb:1095:in `block in issue_deprecations")\r\nNotice: Compiled catalog for local-hostname in environment production in 0.13 seconds\r\nError: File written to disk did not match checksum; discarding changes ({md5}3e4e89714360452d113f009f37f742ed vs {md5}d41d8cd98f00b204e9800998ecf8427e)\r\nError: /Stage[main]/Main/File[/mnt/this-is-a-file]/ensure: change from absent to file failed: File written to disk did not match checksum; discarding changes ({md5}3e4e89714360452d113f009f37f742ed vs {md5}d41d8cd98f00b204e9800998ecf8427e)\r\nNotice: Finished catalog run in 0.51 seconds\r\n\r\n{code}\r\n\r\n*Discussion*\r\nSystem call traces using strace show the following sequence of events:\r\n\r\n1) Puppet opens a temp file and writes data:\r\n\r\n{code}27047 open("/mnt/this-is-a-file20151112-27047-112t46h", O_RDWR|O_CREAT|O_EXCL, 0600) = 5\r\n27047 write(5, "This is a file!\n", 16) = 16\r\n{code}\r\n\r\n2) The temp file descriptor remains open while the checksum\r\nverification code opens a *new* file descriptor on the same filename:\r\n\r\n{code}27047 open("/mnt/this-is-a-file20151112-27047-112t46h", O_RDONLY) = 6{code}\r\n\r\n3) The checksum code reads temp file data from the new FD. This\r\nincorrectly returns zero bytes, possibly because of inconsistent\r\ncaching within the clustered file system environment.\r\n\r\n{code}\r\n27047 read(6, "", 4096)                 = 0\r\n27047 close(6)                          = 0\r\n{code}\r\n\r\n4) The checksum verification fails and prints an error because the data from the second file descriptor does not match the data written to the first one.\r\n\r\nThe key point is that the file checksum is performed on a second file descriptor *before* the first file descriptor has been completely synced to disk.  That is a data consistency risk regardless of the type of file system, but in practice most file systems serve both file descriptors out of the same cache so no error is found.  Our particular GlusterFS environment exhibits the risk to a greater extent.\r\n\r\n*Potential Patch*\r\n\r\n\r\nAs a test, we added an fsync call immediately before the call to fail_if_checksum_is_wrong in type/file.rb:\r\n{code}\r\n# cat file.rb.patch\r\n--- /opt/puppet/lib/ruby/site_ruby/1.9.1/puppet/type/file.rb.dist	2015-11-11 12:05:46.103283761 -0600\r\n+++ /opt/puppet/lib/ruby/site_ruby/1.9.1/puppet/type/file.rb	2015-11-11 11:46:13.464903043 -0600\r\n@@ -759,6 +759,18 @@\r\n         file.binmode\r\n         content_checksum = write_content(file)\r\n         file.flush\r\n+        begin\r\n+          file.fsync\r\n+        rescue NotImplementedError\r\n+          # fsync may not be implemented by Ruby on all platforms, but\r\n+          # there is absolutely no recovery path if we detect that.  So, we just\r\n+          # ignore the return code.\r\n+          #\r\n+          # However, don"t be fooled: that is accepting that we are running in\r\n+          # an unsafe fashion.  If you are porting to a new platform don"t stub\r\n+          # that out.\r\n+        end\r\n+\r\n         fail_if_checksum_is_wrong(file.path, content_checksum) if validate_checksum?\r\n         if self[:validate_cmd]\r\n           output = Puppet::Util::Execution.execute(self[:validate_cmd].gsub(self[:validate_replacement], file.path), :failonfail => true, :combine => true)\r\n{code}\r\n\r\nWith this patch file installation operates as expected, even on the GlusterFS file system:\r\n{code}\r\n# strace -f -o works.trace puppet apply file-test.pp \r\nWarning: Setting modulepath is deprecated in puppet.conf. See http://links.puppetlabs.com/env-settings-deprecations\r\n   (at /opt/puppet/lib/ruby/site_ruby/1.9.1/puppet/settings.rb:1095:in `block in issue_deprecations")\r\nNotice: Compiled catalog for local-hostname in environment production in 0.16 seconds\r\nNotice: /Stage[main]/Main/File[/mnt/this-is-a-file]/ensure: defined content as "{md5}3e4e89714360452d113f009f37f742ed"\r\nNotice: Finished catalog run in 0.91 seconds\r\n{code}\r\n\r\n', 'https://tickets.puppetlabs.com/browse/PUP-6059', 'https://github.com/puppetlabs/puppet/pull/4790', '2016-03-15T11:16:55.000-0700', '2016-05-17T15:23:39.000-0700', '2016-05-17T15:23:39.000-0700', 'Closed', '', 5, '0', 1, 12, 0, 1, '24bca49300533c9d1d9aca88b1ecf6fe6884ce4d', 'https://tickets.puppetlabs.com/browse/PUP-6059', 'https://github.com/puppetlabs/puppet/pull/4790'),
('puppet', 125376, 65539768, 4843, 'Puppet::Util::Plist should emit formatted plists', '{{Puppet::Util::Plist}}"s {{dump_plist}} and {{write_plist_file}} methods both emit poorly-formatted XML plists by default:\r\n\r\n{code}\r\n$ ruby -e "require "puppet";require "puppet/util/plist"; puts Puppet::Util::Plist.dump_plist(["array","of","things"])"\r\n<?xml version="1.0" encoding="UTF-8"?>\r\n<!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd">\r\n<plist version="1.0"><array><string>array</string><string>of</string><string>things</string></array></plist>\r\n{code}\r\n\r\nWhile this is valid XML, it"s ugly. Formatted, the output should be:\r\n{code}\r\n<?xml version="1.0" encoding="UTF-8"?>\r\n<!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd">\r\n<plist version="1.0">\r\n  <array>\r\n    <string>array</string>\r\n    <string>of</string>\r\n    <string>things</string>\r\n  </array>\r\n</plist>\r\n{code}\r\n\r\nThankfully, the {{cfpropertylist}} module this depends on has a {{:formatted}} option for both {{.to_str}} and {{.save}}. Setting this to {{true}} results in properly-formatted XML.', 'https://tickets.puppetlabs.com/browse/PUP-6132', 'https://github.com/puppetlabs/puppet/pull/4843', '2016-04-06T14:25:41.000-0700', '2016-05-17T15:23:39.000-0700', '2016-05-17T15:23:39.000-0700', 'Closed', '', 3, '0', 1, 3, 3, 1, '2b02da95a7d472921d76ed2978068fd5e053b80c', 'https://tickets.puppetlabs.com/browse/PUP-6132', 'https://github.com/puppetlabs/puppet/pull/4843'),
('puppet', 118605, 60751691, 4719, 'regression - function regsubs should allow a hash as replacement parameter', 'With puppet 3.x and a ruby version newer then 1.8 it was possible to give a hash as the replacement parameter to the function _regsubst_. As puppet 4.x ships with ruby 2.1 it would work now generally, but the parameter validation only accepts a String as replacement parameter.\r\n\r\nFor example the following worked with puppet 3.x and will throw an error with puppet 4.x:\r\n\r\n{code:java}\r\npuppet apply -e "notice(regsubst("tuto", "[uo]", { "u" => "o", "o" => "u" }, "G"))"\r\n{code}\r\n', 'https://tickets.puppetlabs.com/browse/PUP-5979', 'https://github.com/puppetlabs/puppet/pull/4719', '2016-02-25T13:33:30.000-0800', '2016-05-17T15:23:40.000-0700', '2016-05-17T15:23:40.000-0700', 'Closed', '', 3, '0', 1, 19, 10, 2, '1045f67fc12aa30f8cadce17e65a76130e4a6fd0', 'https://tickets.puppetlabs.com/browse/PUP-5979', 'https://github.com/puppetlabs/puppet/pull/4719'),
('puppet', 126628, 66551974, 4886, 'Behavior of undef in relationships has changed in master since 4.4.x', 'Before (in puppet 4.4.1 and earlier), something like\r\n\r\n{code}puppet apply -e "user {"matthaus": ensure => present, notify => undef}"{code}\r\nWould work, but now it causes a compile error:\r\n\r\n{code}puppet apply -e "user {"matthaus": ensure => present, notify => undef}"\r\nError: No title provided and "" is not a valid resource reference on node wyclef-2.local{code}\r\n\r\nHere is an example of this pattern in the apt module: https://github.com/puppetlabs/puppetlabs-apt/blob/master/manifests/setting.pp#L49-L53.\r\n\r\nWe"re seeing test failures in a notify resource that is set to undef, but I presume this would apply to any resource relationship.\r\n\r\nOh, and here"s a stacktrace from the master log if that"s helpful:\r\n\r\n{code}2016-04-14 09:46:46,667 ERROR [qtp1832930698-137] [puppet-server] Puppet No title provided and "" is not a valid resource reference on node bigea6oflt8yfr6.delivery.puppetlabs.net\r\n/opt/puppetlabs/puppet/lib/ruby/vendor_ruby/puppet/resource.rb:544:in `extract_type_and_title"\r\n/opt/puppetlabs/puppet/lib/ruby/vendor_ruby/puppet/resource.rb:529:in `type_and_title"\r\n/opt/puppetlabs/puppet/lib/ruby/vendor_ruby/puppet/resource/catalog.rb:353:in `resource"\r\n/opt/puppetlabs/puppet/lib/ruby/vendor_ruby/puppet/parser/compiler/catalog_validator/relationship_validator.rb:33:in `validate_relationship"\r\norg/jruby/RubyArray.java:1613:in `each"\r\n/opt/puppetlabs/puppet/lib/ruby/vendor_ruby/puppet/parser/compiler/catalog_validator/relationship_validator.rb:32:in `validate_relationship"\r\n/opt/puppetlabs/puppet/lib/ruby/vendor_ruby/puppet/parser/compiler/catalog_validator/relationship_validator.rb:10:in `validate"\r\n/opt/puppetlabs/puppet/lib/ruby/vendor_ruby/puppet/parser/resource.rb:52:in `eachparam"\r\norg/jruby/RubyHash.java:1341:in `each"\r\n/opt/puppetlabs/puppet/lib/ruby/vendor_ruby/puppet/parser/resource.rb:50:in `eachparam"\r\n/opt/puppetlabs/puppet/lib/ruby/vendor_ruby/puppet/parser/compiler/catalog_validator/relationship_validator.rb:8:in `validate"\r\norg/jruby/RubyArray.java:1613:in `each"\r\n/opt/puppetlabs/puppet/lib/ruby/vendor_ruby/puppet/parser/compiler/catalog_validator/relationship_validator.rb:6:in `validate"\r\n/opt/puppetlabs/puppet/lib/ruby/vendor_ruby/puppet/parser/compiler.rb:217:in `validate_catalog"\r\norg/jruby/RubyArray.java:1613:in `each"\r\n/opt/puppetlabs/puppet/lib/ruby/vendor_ruby/puppet/parser/compiler.rb:217:in `validate_catalog"\r\n/opt/puppetlabs/puppet/lib/ruby/vendor_ruby/puppet/parser/compiler.rb:205:in `compile"\r\n/opt/puppetlabs/puppet/lib/ruby/vendor_ruby/puppet/util/profiler/around_profiler.rb:58:in `profile"\r\n/opt/puppetlabs/puppet/lib/ruby/vendor_ruby/puppet/util/profiler.rb:51:in `profile"\r\n/opt/puppetlabs/puppet/lib/ruby/vendor_ruby/puppet/parser/compiler.rb:204:in `compile"\r\n/opt/puppetlabs/puppet/lib/ruby/vendor_ruby/puppet/context.rb:65:in `override"\r\n/opt/puppetlabs/puppet/lib/ruby/vendor_ruby/puppet.rb:240:in `override"\r\n/opt/puppetlabs/puppet/lib/ruby/vendor_ruby/puppet/parser/compiler.rb:167:in `compile"\r\n/opt/puppetlabs/puppet/lib/ruby/vendor_ruby/puppet/parser/compiler.rb:35:in `compile"\r\n/opt/puppetlabs/puppet/lib/ruby/vendor_ruby/puppet/indirector/catalog/compiler.rb:265:in `compile"\r\n/opt/puppetlabs/puppet/lib/ruby/vendor_ruby/puppet/util/profiler/around_profiler.rb:58:in `profile"\r\n/opt/puppetlabs/puppet/lib/ruby/vendor_ruby/puppet/util/profiler.rb:51:in `profile"\r\n/opt/puppetlabs/puppet/lib/ruby/vendor_ruby/puppet/indirector/catalog/compiler.rb:263:in `compile"\r\n/opt/puppetlabs/puppet/lib/ruby/vendor_ruby/puppet/util.rb:223:in `benchmark"\r\n/opt/puppetlabs/server/apps/puppetserver/puppet-server-release.jar!/META-INF/jruby.home/lib/ruby/1.9/benchmark.rb:295:in `realtime"\r\n/opt/puppetlabs/puppet/lib/ruby/vendor_ruby/puppet/util.rb:222:in `benchmark"\r\n/opt/puppetlabs/puppet/lib/ruby/vendor_ruby/puppet/indirector/catalog/compiler.rb:261:in `compile"\r\n/opt/puppetlabs/puppet/lib/ruby/vendor_ruby/puppet/indirector/catalog/compiler.rb:53:in `find"\r\n/opt/puppetlabs/puppet/lib/ruby/vendor_ruby/puppet/indirector/indirection.rb:194:in `find"\r\n/opt/puppetlabs/puppet/lib/ruby/vendor_ruby/puppet/network/http/api/indirected_routes.rb:134:in `do_find"\r\n/opt/puppetlabs/puppet/lib/ruby/vendor_ruby/puppet/network/http/api/indirected_routes.rb:48:in `call"\r\n/opt/puppetlabs/puppet/lib/ruby/vendor_ruby/puppet/context.rb:65:in `override"\r\n/opt/puppetlabs/puppet/lib/ruby/vendor_ruby/puppet.rb:240:in `override"\r\n/opt/puppetlabs/puppet/lib/ruby/vendor_ruby/puppet/network/http/api/indirected_routes.rb:47:in `call"\r\n/opt/puppetlabs/puppet/lib/ruby/vendor_ruby/puppet/network/http/route.rb:82:in `process"\r\norg/jruby/RubyArray.java:1613:in `each"\r\n/opt/puppetlabs/puppet/lib/ruby/vendor_ruby/puppet/network/http/route.rb:81:in `process"\r\n/opt/puppetlabs/puppet/lib/ruby/vendor_ruby/puppet/network/http/route.rb:87:in `process"\r\n/opt/puppetlabs/puppet/lib/ruby/vendor_ruby/puppet/network/http/route.rb:87:in `process"\r\n/opt/puppetlabs/puppet/lib/ruby/vendor_ruby/puppet/network/http/handler.rb:60:in `process"\r\n/opt/puppetlabs/puppet/lib/ruby/vendor_ruby/puppet/util/profiler/around_profiler.rb:58:in `profile"\r\n/opt/puppetlabs/puppet/lib/ruby/vendor_ruby/puppet/util/profiler.rb:51:in `profile"\r\n/opt/puppetlabs/puppet/lib/ruby/vendor_ruby/puppet/network/http/handler.rb:58:in `process"\r\nfile:/opt/puppetlabs/server/apps/puppetserver/puppet-server-release.jar!/puppet-server-lib/puppet/server/master.rb:42:in `handleRequest"{code}', 'https://tickets.puppetlabs.com/browse/PUP-6176', 'https://github.com/puppetlabs/puppet/pull/4886', '2016-04-14T10:17:06.000-0700', '2016-05-17T15:23:40.000-0700', '2016-05-17T15:23:40.000-0700', 'Closed', '', 3, '0', 1, 8, 0, 2, '148b1868ff8b5a2e8f377490b94fdd523a5d317a', 'https://tickets.puppetlabs.com/browse/PUP-6176', 'https://github.com/puppetlabs/puppet/pull/4886'),
('puppet', 109790, 53852487, 4507, 'puppet device convergence impossibility, and improved error output', 'In testing I found that error display was (and has always been) suboptimal, so I have a PR which improves this. First, some errors were never caught and shown to the user\r\n\r\n{code}\r\nNotice: /Stage[main]/Device_hiera::Interfaces/Interface[FastEthernet0/14]/mode: mode changed "access" to "trunk"\r\nDebug: Updating interface FastEthernet0/14\r\nDebug: ssh: send conf t\r\nDebug: ssh: expected conf t\r\nEnter configuration commands, one per line.  End with CNTL/Z.\r\nswitch01(config)#\r\nDebug: ssh: send interface FastEthernet0/14\r\nDebug: ssh: expected interface FastEthernet0/14\r\nswitch01(config-if)#\r\nDebug: ssh: send switchport mode trunk\r\nDebug: ssh: expected switchport mode trunk\r\nCommand rejected: An interface whose trunk encapsulation is "Auto" can not be configured to "trunk" mode.\r\n{code}\r\n\r\nWhen an error was output, it repeated the command sent twice:\r\n\r\n{code}\r\nNotice: /Stage[main]/Device_hiera::Interfaces/Interface[FastEthernet0/14]/mode: mode changed "trunk" to "access"\r\nError: Error while executing switchport trunk encapsulation negotiate, device returned switchport trunk encapsulation negotiate\r\nCommand rejected: A port which is configured to "trunk" mode can not be configured to negotiate the encapsulation.\r\nswitch01(config-if)#\r\n{code}\r\n\r\nI also found that due to the state parser dropping some input values, one could declare a resource which would never convergence, causing it to be output every time.\r\n\r\n{code}\r\n$ puppet device --verbose\r\nInfo: starting applying configuration to switch01.example.com at ssh://switch01.example.com/\r\nInfo: Using configured environment "production"\r\nInfo: Retrieving pluginfacts\r\nInfo: Retrieving plugin\r\nInfo: Caching catalog for switch01.example.com\r\nInfo: Applying configuration version "1450262463"\r\nNotice: /Stage[main]/Device_hiera::Interfaces/Interface[FastEthernet0/12]/native_vlan: defined "native_vlan" as "200"\r\nInfo: Class[Device_hiera::Interfaces]: Unscheduling all events on Class[Device_hiera::Interfaces]\r\nNotice: Applied catalog in 74.54 seconds\r\n\r\n$ puppet device --verbose\r\nInfo: starting applying configuration to switch01.example.com at ssh://switch01.example.com/\r\nInfo: Using configured environment "production"\r\nInfo: Retrieving pluginfacts\r\nInfo: Retrieving plugin\r\nInfo: Caching catalog for switch01.example.com\r\nInfo: Applying configuration version "1450262647"\r\nNotice: /Stage[main]/Device_hiera::Interfaces/Interface[FastEthernet0/12]/native_vlan: defined "native_vlan" as "200"\r\n{code}\r\n\r\nThe PR I will link to this issue fixes all of these things.', 'https://tickets.puppetlabs.com/browse/PUP-5616', 'https://github.com/puppetlabs/puppet/pull/4507', '2015-12-16T07:02:22.000-0800', '2016-05-17T15:23:40.000-0700', '2016-05-17T15:23:40.000-0700', 'Closed', '', 2, '0', 1, 22, 13, 3, 'b120c1ce45d6af2b47cee351bd9e0b98d8079b89', 'https://tickets.puppetlabs.com/browse/PUP-5616', 'https://github.com/puppetlabs/puppet/pull/4507'),
('puppet', 100033, 0, 0, 'Puppet 4.2.x agent for RHEL 7 enables System V init scripts services on each run', 'h2. Overview\r\n\r\nPuppet 4.2.1 agent for EL7 enables System V init scripts services on each run\r\n\r\nh2. Expected behaviour\r\n\r\nSystem V service does not provide a {{UnitFileState}}. {{systemd.rb}} should include the check the service"s state with\r\n\r\n{code}\r\nsystemctl("is-enabled", @resource[:name]).\r\n{code}\r\n\r\nLike in PE versions before 2015.2\r\n\r\nAlso, SysV init scripts in EL7 should have "redhat" provider instead of "init" for it to work. \r\n\r\nh2. Actual behaviour\r\n\r\nEach agent run for EL7 enables System V init scripts services. \r\n\r\n{code}\r\n# puppet agent -t \r\nInfo: Retrieving pluginfacts \r\nInfo: Retrieving plugin \r\nInfo: Loading facts \r\nInfo: Caching catalog for df-rhel7 \r\nInfo: Applying configuration version "1442494617" \r\nNotice: /Stage[main]/Networker/Service[networker]/enable: enable changed "false" to "true" \r\nNotice: /Stage[main]/Xymon/Service[xymon]/enable: enable changed "false" to "true" \r\nNotice: Applied catalog in 6.34 seconds\r\n{code}\r\n\r\nSame with lines extracted from debug mode :\r\n\r\n{code}\r\nDebug: Executing: "/usr/bin/systemctl is-active networker" \r\nDebug: Executing: "/usr/bin/systemctl show networker --property LoadState --property UnitFileState --no-pager" \r\nDebug: Executing: "/usr/bin/systemctl unmask networker" \r\nDebug: Executing: "/usr/bin/systemctl enable networker" \r\nNotice: /Stage[main]/Networker/Service[networker]/enable: enable changed "false" to "true" \r\nDebug: /Stage[main]/Networker/Service[networker]: The container Class[Networker] will propagate my refresh event \r\n... \r\nDebug: Executing: "/usr/bin/systemctl is-active xymon" \r\nDebug: Executing: "/usr/bin/systemctl show xymon --property LoadState --property UnitFileState --no-pager" \r\nDebug: Executing: "/usr/bin/systemctl unmask xymon" \r\nDebug: Executing: "/usr/bin/systemctl enable xymon" \r\nNotice: /Stage[main]/Xymon/Service[xymon]/enable: enable changed "false" to "true" \r\nDebug: /Stage[main]/Xymon/Service[xymon]: The container Class[Xymon] will propagate my refresh event\r\n{code}\r\n\r\nh2. Workaround 1\r\n\r\nSetting {{provider => redhat}} on services that use init scripts instead of systemd units should work around the issue.\r\n\r\nh2. Workaround 2 \r\n\r\nPatched systemd.rb to be able to install the 4.2.1 agent on RHEL 7 nodes:\r\n\r\n{code}\r\n# diff -u /opt/puppetlabs/puppet/lib/ruby/vendor_ruby/puppet/provider/service/systemd.rb.dist /opt/puppetlabs/puppet/lib/ruby/vendor_ruby/puppet/provider/service/systemd.rb \r\n--- /opt/puppetlabs/puppet/lib/ruby/vendor_ruby/puppet/provider/service/systemd.rb.dist 2015-07-21 22:58:08.000000000 +0200 \r\n+++ /opt/puppetlabs/puppet/lib/ruby/vendor_ruby/puppet/provider/service/systemd.rb 2015-09-18 11:08:19.789819128 +0200 \r\n@@ -63,6 +63,10 @@ \r\nret = debian_enabled?(svc_info) \r\nreturn ret if ret \r\nend \r\n+ if Facter.value(:osfamily) == "RedHat" \r\n+ ret = redhat_enabled?(svc_info) \r\n+ return ret if ret \r\n+ end \r\nrescue Puppet::ExecutionFailure \r\n# The execution of the systemd command can fail for quite a few reasons. \r\n# In all of these cases, the failure of the query indicates that the \r\n@@ -95,6 +99,18 @@ \r\nend \r\nend\r\n\r\n+ def redhat_enabled?(svc_info) \r\n+ # If UnitFileState == UnitFileState then we query the older way. \r\n+ if svc_info[:UnitFileState] == "UnitFileState" \r\n+ begin \r\n+ systemctl("is-enabled", @resource[:name]) \r\n+ rescue Puppet::ExecutionFailure \r\n+ return :false \r\n+ end \r\n+ return :true \r\n+ end \r\n+ end \r\n+ \r\ndef status \r\nbegin \r\nsystemctl("is-active", @resource[:name])\r\n{code}', 'https://tickets.puppetlabs.com/browse/PUP-5296', '', '2015-09-30T03:08:41.000-0700', '2016-05-17T15:23:40.000-0700', '2016-05-17T15:23:40.000-0700', 'Closed', '', 14, '0', 0, 0, 0, 0, '242356f74fa329c4367259129c271dc88813e0ea', 'https://tickets.puppetlabs.com/browse/PUP-5296', 'https://github.com/puppetlabs/puppet/commit/242356f74fa329c4367259129c271dc88813e0ea'),
('puppet', 126433, 66286927, 4877, 'Runtime3Loader initiates load that updates loader, then tries to update again', 'The {{Runtime3TypeLoader#find}} method will delegate to the {{known_resource_types}} of the current environment. This might lead to new code being brought in, parsed, and evaluated. and that evaluation might instantiate the very resource type that was first queried. The instantiation updates the {{Runtime3TypeLoader}}. Consequently, when the {{known_resource_types}} returns the entry, it"s already stored in the loader and the loaders attempt to now store it again, results in a "Attempt to redefine entity" exception.\r\n\r\nThis regression was introduced in PUP-6028 which has not yet been released.', 'https://tickets.puppetlabs.com/browse/PUP-6168', 'https://github.com/puppetlabs/puppet/pull/4877', '2016-04-13T01:37:48.000-0700', '2016-05-17T15:23:41.000-0700', '2016-05-17T15:23:41.000-0700', 'Closed', '', 1, '0', 1, 18, 20, 1, 'fd516f36cbb22da82dd06758f479936ba62dd9dd', 'https://tickets.puppetlabs.com/browse/PUP-6168', 'https://github.com/puppetlabs/puppet/pull/4877'),
('puppet', 118341, 63302066, 4796, 'Deprecate Symbol#<=> monkey patch', 'We restored the {{Symbol#<=>}} monkey patch in PUP-5962 because our version behaves differently from ruby 1.9.3 and up:\r\n\r\nPuppet:\r\n{code}\r\nirb(main):005:0> :a <=> "a"\r\n=> 0\r\n{code}\r\n\r\nRuby:\r\n{code}\r\nirb(main):003:0> :a <=> "a"\r\n=> nil\r\n{code}\r\n\r\nThis ticket is to deprecate puppet"s behavior when comparing against non-Symbols. Ideally this could be done when strict mode is enabled and {{Symbol#<=>(other)}} is called, but {{other}} is not a Symbol.\r\n\r\nThere could be performance implications of adding that check, and it may uncover other parts of puppet that rely on the deprecated behavior, like http://projects.puppetlabs.com/issues/5466. Those will need to be fixed also.', 'https://tickets.puppetlabs.com/browse/PUP-5968', 'https://github.com/puppetlabs/puppet/pull/4796', '2016-02-24T09:14:14.000-0800', '2016-05-17T15:23:41.000-0700', '2016-05-17T15:23:41.000-0700', 'Closed', '', 7, '0', 1, 72, 0, 2, '90ed6514d410cca8eaf802e5bfe869911e14c66c', 'https://tickets.puppetlabs.com/browse/PUP-5968', 'https://github.com/puppetlabs/puppet/pull/4796'),
('puppet', 124862, 65188790, 4833, 'Autoloading of native types declared in modules is broken', 'The more stringent check for existing resource types that was introduced in PUP-6028 does not work for Ruby types that are auto loaded from modules.', 'https://tickets.puppetlabs.com/browse/PUP-6121', 'https://github.com/puppetlabs/puppet/pull/4833', '2016-04-04T09:57:23.000-0700', '2016-05-17T15:23:41.000-0700', '2016-05-17T15:23:41.000-0700', 'Closed', '', 1, '0', 1, 32, 2, 4, 'e011bd1d8d29fc2c7bb30d19b4e3dd59ba664647', 'https://tickets.puppetlabs.com/browse/PUP-6121', 'https://github.com/puppetlabs/puppet/pull/4833'),
('puppet', 128049, 69474558, 4951, 'Non-Type expression within the RHS Type expression of a type alias gives unclear error', 'It"s easiest to give some examples to show what I"m referring to.\r\n\r\n{code:puppet}\r\ntype Foo = Enum[$facts["os"]["family"]]\r\n{code}\r\n\r\n{code:puppet}\r\ntype Bar = Enum[with() || { "${facts["os"]["family"]}: ${facts["os"]["name"]}" }]\r\n{code}\r\n\r\n{code:puppet}\r\ntype Baz = Pattern[Integer[1,9].map |$x| {\r\n  $a = $x - 1\r\n  $c = $x + 1\r\n  "\\Aa{${a}}b{${x}}c{${c}}\\z"\r\n}]\r\n{code}\r\n\r\nAll of these produce the same error (although, somewhat confusingly, only if they are used somewhere).\r\n\r\n{code}\r\nError: Evaluation Error: Error while evaluating a Type-Name, The expression <> is not a valid type specification.\r\n{code}\r\n\r\nCompare that to the following:\r\n\r\n{code:puppet}\r\ntype Baz = with() || { Pattern[$facts["os"]["family"]] }\r\n{code}\r\n\r\nwhich produces the much clearer error message\r\n\r\n{code}\r\nError: Could not parse for environment production: Illegal expression. A Function Call is unacceptable as a type reference in a Type Alias\r\n{code}\r\n\r\nNote that all of these RHS expressions are valid everywhere else that types can be used, which can add to the confusion.', 'https://tickets.puppetlabs.com/browse/PUP-6229', 'https://github.com/puppetlabs/puppet/pull/4951', '2016-04-22T16:32:09.000-0700', '2016-05-17T15:23:42.000-0700', '2016-05-17T15:23:42.000-0700', 'Closed', '', 6, '0', 1, 53, 54, 2, '770f74e9114352c32a2c257cc23895a31cccdc3a', 'https://tickets.puppetlabs.com/browse/PUP-6229', 'https://github.com/puppetlabs/puppet/pull/4951'),
('puppet', 66395, 67464927, 4903, 'Puppet agent will accept yaml content', 'Many of puppet"s models have a yaml terminus:\r\n\r\n{noformat}\r\n$ find lib/puppet/indirector -type f -name "yaml.rb"\r\nlib/puppet/indirector/catalog/yaml.rb\r\nlib/puppet/indirector/facts/yaml.rb\r\nlib/puppet/indirector/node/yaml.rb\r\nlib/puppet/indirector/report/yaml.rb\r\nlib/puppet/indirector/yaml.rb\r\n{noformat}\r\n\r\nbecause we need to be able to serialize the model to disk, e.g. {{last_run_report.yaml}} However, the puppet agent does not filter out yaml when making network requests as can be seen by the "Accept" mime header. This means the agent will accept and process yaml if it the server happens to send it in that format. Given the security concerns around yaml, the agent should never accept yaml over the network.\r\n\r\n{noformat}\r\n# puppet agent -td --http_debug 2>&1 >/dev/null | grep "Accept: "\r\n<- "GET /puppet/v3/node/agent42?environment=production&transaction_uuid=5ed51dca-d4cf-45e0-ab48-28975ce1a41e&fail_on_404=true HTTP/1.1\r\nAccept: pson, msgpack, yaml, raw\r\nAccept-Encoding: gzip;q=1.0,deflate;q=0.6,identity;q=0.3\r\nUser-Agent: Ruby\r\nHost: arcturus.local:8140\r\n\r\n"\r\n<- "GET /puppet/v3/file_metadatas/pluginfacts?environment=production&links=manage&recurse=true&ignore=.svn&ignore=CVS&ignore=.git&checksum_type=md5 HTTP/1.1\r\nAccept: pson, msgpack, yaml, raw\r\nAccept-Encoding: gzip;q=1.0,deflate;q=0.6,identity;q=0.3\r\nUser-Agent: Ruby\r\nHost: arcturus.local:8140\r\n\r\n"\r\n<- "GET /puppet/v3/file_metadata/pluginfacts?environment=production&links=manage&checksum_type=md5&source_permissions=use HTTP/1.1\r\nAccept: pson, msgpack, yaml, raw\r\nAccept-Encoding: gzip;q=1.0,deflate;q=0.6,identity;q=0.3\r\nUser-Agent: Ruby\r\nHost: arcturus.local:8140\r\n\r\n"\r\n<- "GET /puppet/v3/file_metadatas/plugins?environment=production&links=manage&recurse=true&ignore=.svn&ignore=CVS&ignore=.git&checksum_type=md5 HTTP/1.1\r\nAccept: pson, msgpack, yaml, raw\r\nAccept-Encoding: gzip;q=1.0,deflate;q=0.6,identity;q=0.3\r\nUser-Agent: Ruby\r\nHost: arcturus.local:8140\r\n\r\n"\r\n<- "GET /puppet/v3/file_metadata/plugins?environment=production&links=manage&checksum_type=md5&source_permissions=ignore HTTP/1.1\r\nAccept: pson, msgpack, yaml, raw\r\nAccept-Encoding: gzip;q=1.0,deflate;q=0.6,identity;q=0.3\r\nUser-Agent: Ruby\r\nHost: arcturus.local:8140\r\n\r\n"\r\n<- "POST /puppet/v3/catalog/agent42 HTTP/1.1\r\nAccept: pson, msgpack, yaml, dot, raw\r\nAccept-Encoding: gzip;q=1.0,deflate;q=0.6,identity;q=0.3\r\nUser-Agent: Ruby\r\nHost: arcturus.local:8140\r\nContent-Length: 7921\r\nContent-Type: application/x-www-form-urlencoded\r\n\r\n"\r\n<- "PUT /puppet/v3/report/agent42?environment=production& HTTP/1.1\r\nAccept: pson, yaml\r\nAccept-Encoding: gzip;q=1.0,deflate;q=0.6,identity;q=0.3\r\nContent-Type: text/pson\r\nUser-Agent: Ruby\r\nHost: arcturus.local:8140\r\nContent-Length: 31751\r\n\r\n"\r\n{noformat}\r\n\r\nWhile I don"t believe this is a security issue, I"m filing it as internal for now.', 'https://tickets.puppetlabs.com/browse/PUP-3941', 'https://github.com/puppetlabs/puppet/pull/4903', '2015-02-02T11:42:32.000-0800', '2016-05-17T15:23:43.000-0700', '2016-05-17T15:23:43.000-0700', 'Closed', '', 5, '0', 1, 17, 1, 2, 'b7c72a7f00dffb2c914ff81f5f32183a3cad6562', 'https://tickets.puppetlabs.com/browse/PUP-3941', 'https://github.com/puppetlabs/puppet/pull/4903'),
('puppet', 123435, 64358580, 4819, 'Service provider shouldn"t die if an smf service is in state "degraded"', 'Service provider fails if a smf service is in state "degraded"\r\n\r\npuppet resource service\r\n<... resources ...>\r\n\r\nsvcadm mark degraded svc:/network/dns/client:default\r\nError: Could not run: Unmanageable state "degraded" on service \r\nsvc:/network/dns/client:default\r\n\r\n\r\n\r\n\r\n', 'https://tickets.puppetlabs.com/browse/PUP-6095', 'https://github.com/puppetlabs/puppet/pull/4819', '2016-03-24T11:11:33.000-0700', '2016-05-17T15:23:43.000-0700', '2016-05-17T15:23:43.000-0700', 'Closed', '', 5, '0', 1, 24, 8, 3, '4f5af07d8d3ec53a1205d6e9550986a13c7b94d4', 'https://tickets.puppetlabs.com/browse/PUP-6095', 'https://github.com/puppetlabs/puppet/pull/4819'),
('puppet', 129309, 68731753, 4933, 'Empty Array type broken, neither Array[0,0] nor Array[T,0,0] works', 'Since 4.4.2 it is impossible to do the following:\r\n\r\n{code:puppet}\r\nif $nodes =~ Array[Data,0,0]\r\n{code}\r\n\r\nI get the following error:\r\n\r\n\r\n{quote}Error while evaluating a "[]" expression, An empty collection may not specify an element type{quote}\r\n\r\n\r\n\r\n\r\nh2. Non technical problems\r\n\r\n\r\n# I would not expect such a change in a _minor (.z) release_\r\n# This change does not make sense because it is a valid usecase (e.g when the upper limit is a variable) to have a type.\r\n\r\n\r\nh2. Technical problems\r\n\r\nh3. To me, the following statements are true\r\n\r\n{code:puppet}\r\n[] =~ Array[String, 0, 0]\r\n[] =~ Array[Integer, 0, 0]\r\n{code}\r\n\r\n\r\nh3. Alternative writing does not work\r\n\r\n{code}\r\ncat test.pp\r\n$test = assert_type(Array[0,0],[])\r\n\r\n\r\npuppet apply test.pp\r\nError: Evaluation Error: Array-Type[] arguments must be types. Got Fixnum at /home/roidelapluie/test.pp:1:27 on node nitrogen\r\n{code}\r\n\r\nSo there is NO workaround to get the feature working again.\r\n\r\n\r\nh3. Impossible to have a variable as length\r\n\r\n{code}\r\n$test = assert_type(Array[Integer, $min,$max],[])\r\n{code}\r\n\r\nwill noly work with max > 0. Hence an extra {{if}} in the code etc etc', 'https://tickets.puppetlabs.com/browse/PUP-6251', 'https://github.com/puppetlabs/puppet/pull/4933', '2016-05-02T04:44:15.000-0700', '2016-05-17T15:23:44.000-0700', '2016-05-17T15:23:44.000-0700', 'Closed', '', 20, '0', 1, 90, 46, 6, '001500a4d67e949b8a146fb5556eeff4b36f5056', 'https://tickets.puppetlabs.com/browse/PUP-6251', 'https://github.com/puppetlabs/puppet/pull/4933'),
('puppet', 122602, 63498665, 4802, 'Solution to optimize resolution of TypeReference for known Resource types is broken', 'The solution for optimizing resolution of type references for known resource types does not work as intended. This is because the static loader registers these types using a {{TypedName}} where the name is capitalized. The {{TypeParser}} will always attempt to load using a downcased name so it never finds anything even if it uses a loader.\r\n', 'https://tickets.puppetlabs.com/browse/PUP-6075', 'https://github.com/puppetlabs/puppet/pull/4802', '2016-03-20T08:33:44.000-0700', '2016-05-17T15:23:44.000-0700', '2016-05-17T15:23:44.000-0700', 'Closed', '', 2, '0', 1, 15, 3, 3, '9614979e6b4418e5f93a0ad51c29caf57cdb1be2', 'https://tickets.puppetlabs.com/browse/PUP-6075', 'https://github.com/puppetlabs/puppet/pull/4802'),
('puppet', 125341, 65560884, 4844, 'NotUndef(1) results in error that "new_function" is not available', 'NotUndef(1) results in error that "new_function" is not available\r\n\r\nACCEPTANCE CRITERIA\r\n----\r\n* It should be possible to "convert" to NotUndef using one of:\r\n{code:puppet}\r\nNotUndef(1)\r\nNotUndef[Numeric](1)\r\nNotUndef[Integer](1)\r\n{code}', 'https://tickets.puppetlabs.com/browse/PUP-6131', 'https://github.com/puppetlabs/puppet/pull/4844', '2016-04-06T12:27:55.000-0700', '2016-05-17T15:23:45.000-0700', '2016-05-17T15:23:45.000-0700', 'Closed', '', 2, '0', 1, 27, 1, 2, '6496926541181db4d029219632b6ead7a1236e62', 'https://tickets.puppetlabs.com/browse/PUP-6131', 'https://github.com/puppetlabs/puppet/pull/4844'),
('puppet', 126047, 69480616, 4952, 'Output of iterator type emits "value" text after type', 'UPDATED\r\n----\r\nWith the resolution of PUP-6090, output of an iterator type no longer results in an error. However, it emits the type of result and the string "value" and the "value" part is confusing as an indicator that it is an instance of Iterator that is noticed.\r\n\r\nGiven the following manifest\r\n{code}\r\nnotice([1,2,3].reverse_each)\r\n{code}\r\n\r\nThe result is:\r\n{code}\r\nNotice: Scope(Class[main]): Iterator[Variant[Integer]] value\r\n{code}\r\n\r\n', 'https://tickets.puppetlabs.com/browse/PUP-6151', 'https://github.com/puppetlabs/puppet/pull/4952', '2016-04-11T12:18:31.000-0700', '2016-05-17T15:23:46.000-0700', '2016-05-17T15:23:46.000-0700', 'Closed', '', 28, '0', 1, 3, 3, 2, 'a280a67821c80fa88340c45b77a47aa83540b777', 'https://tickets.puppetlabs.com/browse/PUP-6151', 'https://github.com/puppetlabs/puppet/pull/4952'),
('puppet', 129105, 0, 0, 'Semantic::Version should implement operator eql? and operator "=="', 'The {{Semantic::Version}} class does not implement eql? or "==" which, when using Ruby versions >= 2.3.0 means that when compared using "==", it ends up in "<=>". That method simply assumes that it"s argument is a {{Semantic::Version}} which of then fails when a version is compared to something else. Example:\r\n{code}\r\n:undef == someVersion\r\n{code}\r\nresults in the following error:\r\n{code}\r\nundefined method `major" for :undef:Symbol\r\n     # ./lib/puppet/vendor/semantic/lib/semantic/version.rb:109:in `<=>"\r\n{code}', 'https://tickets.puppetlabs.com/browse/PUP-6249', '', '2016-04-29T08:25:44.000-0700', '2016-05-18T06:14:00.000-0700', '2016-05-18T06:14:00.000-0700', 'Closed', '', 6, '0', 0, 0, 0, 0, 'f0da6128836bd4b24da01d6e3e836d70512e5e9b', 'https://tickets.puppetlabs.com/browse/PUP-6249', 'https://github.com/puppetlabs/puppet/commit/f0da6128836bd4b24da01d6e3e836d70512e5e9b'),
('puppet', 128363, 67938942, 4919, 'build_should_not_allow_symlinks acceptance test failing on posix platforms', 'http://jenkins.puppetlabs.com:8080/job/platform_puppet-agent_intn-van-sys_suite-daily-puppet-master/100/#showFailuresLink\r\n\r\ntests/modules/build.build_should_not_allow_symlinks.rb\r\nfailing on posix platforms.', 'https://tickets.puppetlabs.com/browse/PUP-6235', 'https://github.com/puppetlabs/puppet/pull/4919', '2016-04-26T11:14:18.000-0700', '2016-05-21T11:06:49.000-0700', '2016-05-21T11:06:49.000-0700', 'Closed', 'regression', 5, '0', 1, 1, 1, 1, '1b025eb2982157d63576b2805007bbf68d179d2a', 'https://tickets.puppetlabs.com/browse/PUP-6235', 'https://github.com/puppetlabs/puppet/pull/4919'),
('puppet', 92022, 41632922, 4127, 'Fix pip provider for EL6', 'the recent python-pip package "python-pip-7.1.0-1.el6.noarch" doesn"t have /usr/bin/pip-python anymore "symbolic link to /usr/bin/pip" and pip provider for EL6 uses pip-python binary ', 'https://tickets.puppetlabs.com/browse/PUP-4997', 'https://github.com/puppetlabs/puppet/pull/4127', '2015-08-04T17:30:53.000-0700', '2016-05-23T01:33:54.000-0700', '2016-05-23T01:33:54.000-0700', 'Closed', 'puppethack', 3, '0', 2, 113, 85, 4, '7874aaecafff828c6aa7eb9fac3bd8beb13401a7', 'https://tickets.puppetlabs.com/browse/PUP-4997', 'https://github.com/puppetlabs/puppet/pull/4127'),
('puppet', 132890, 0, 0, 'Hiera interpolations are interpreted in the data() function', 'Now (since 4.5.0), hiera interpolations are interpreted in the value of the data() function of a module. It wasn"t the case before Puppet 4.5.0.\r\n\r\nIs it an expected behavior?\r\n\r\nPersonally, it seems to me curious. Imho, hiera interpolations should be reserved to hiera data (in yaml files). In puppet code, I can use variables.\r\n\r\nHere is an example. I have a module {{test}} with {{function}} as data provider. Here is my {{test/functions/data.pp}}:\r\n\r\n{code:puppet}\r\nfunction test::data {\r\n\r\n  {\r\n    test::var1 => "---%{::fqdn}---",\r\n    test::var2 => "---%{::foo}---",\r\n    test::var3 => "---%{foo}---",\r\n    test::var4 => "---%{literal("%")}{foo}---"\r\n  }\r\n\r\n}\r\n{code}\r\n\r\nHere is my {{test/manifests/init.pp}}\r\n\r\n{code:puppet}\r\nclass test (\r\n  String[1] $var1,\r\n  String[1] $var2,\r\n  String[1] $var3,\r\n  String[1] $var4,\r\n) {\r\n  notice("the value of var1 is => ${var1}")\r\n  notice("the value of var2 is => ${var2}")\r\n  notice("the value of var3 is => ${var3}")\r\n  notice("the value of var4 is => ${var4}")\r\n}\r\n{code}\r\n\r\nAnd the result:\r\n\r\n{code:bash}\r\n# puppet apply -e "include test"\r\nNotice: Scope(Class[Test]): the value of var1 is => ---puppet.athome.priv---\r\nNotice: Scope(Class[Test]): the value of var2 is => ------\r\nNotice: Scope(Class[Test]): the value of var3 is => ------\r\nNotice: Scope(Class[Test]): the value of var4 is => ---%{foo}---\r\nNotice: Compiled catalog for puppet.athome.priv in environment production in 0.47 seconds\r\nNotice: Applied catalog in 0.18 seconds\r\n{code}', 'https://tickets.puppetlabs.com/browse/PUP-6331', '', '2016-05-20T09:11:38.000-0700', '2016-05-24T07:13:56.000-0700', '2016-05-24T07:13:56.000-0700', 'Closed', '', 8, '0', 0, 0, 0, 0, '4bf1dd82fc029fc4a67b3baa2920f016a04d2bb6', 'https://tickets.puppetlabs.com/browse/PUP-6331', 'https://github.com/puppetlabs/puppet/commit/4bf1dd82fc029fc4a67b3baa2920f016a04d2bb6'),
('puppet', 113002, 56790929, 4592, 'Non-English values for USERNAME and USERPROFILE causes multiple home directories to be created', 'As part of the investigation into PUP-4339 it was discovered Puppet creates multiple home directories for a user if their home path contains non-english characters (e.g. Umlaut).', 'https://tickets.puppetlabs.com/browse/PUP-5726', 'https://github.com/puppetlabs/puppet/pull/4592', '2016-01-19T16:39:12.000-0800', '2016-05-24T14:49:09.000-0700', '2016-05-24T14:49:09.000-0700', 'Closed', 'i18n;utf-8;windows', 10, '0', 1, 226, 20, 6, '8d02eb133cb2783d976d270b7f2869140a48f0fc', 'https://tickets.puppetlabs.com/browse/PUP-5726', 'https://github.com/puppetlabs/puppet/pull/4592'),
('puppet', 116088, 59199764, 4665, 'Ensure Puppet uses FileSystem.read where applicable to read JSON, settings and other files as UTF-8', 'There are a number of places in Puppet where the internal file abstraction {{Puppet::FileSystem}} is not used, but should be, to enforce files are read properly as UTF-8.  This primarily affects Windows, where the local codepage frequently causes unnecessary conversions if UTF-8 is not explicitly specified.\r\n\r\nAn initial spike is in the branch - https://github.com/Iristyle/puppet/commits/ticket/stable/PUP-5728-convert-remaining-File-read-calls-to-Puppet-FileSystem that built on the work in PUP-5728\r\n\r\nTwo other items of note:\r\n\r\n* PE-13721 exposed a similar issue in the {{puppet_enterprise}} module in a Japanese Windows - this module should be spot checked and additional tickets filed if similar problems are discovered\r\n* Mcollective should also be analyzed, given it"s Ruby code... for areas where it touches the FileSystem, etc (this should result in additional tickets if necessary)', 'https://tickets.puppetlabs.com/browse/PUP-5879', 'https://github.com/puppetlabs/puppet/pull/4665', '2016-02-10T18:46:56.000-0800', '2016-05-24T15:00:26.000-0700', '2016-05-24T15:00:26.000-0700', 'Closed', 'i18n;utf-8;windows', 19, '0', 6, 138, 32, 18, '0a87770c9cd426abc136de791dad06efc7dbaf89', 'https://tickets.puppetlabs.com/browse/PUP-5879', 'https://github.com/puppetlabs/puppet/pull/4665'),
('puppet', 98938, 46539994, 4311, 'master node catalog must be compiled before environment graph is compiled (stack level too deep)', 'Certain order of operations results in a broken puppet-server that is unable to compile node *and* environment graphs until services are restarted. \r\n\r\nTo reproduce, install a build of PE 2015.3. I followed [these instructions|https://gist.github.com/ryanycoleman/ce1e492699f8abcaae31] for my build. \r\n\r\nThen:\r\n- r10k puppetfile install [<this Puppetfile>|https://gist.github.com/ryanycoleman/ce1e492699f8abcaae31#file-05_puppetfile]\r\n- clear environment cache (if applicable)\r\n- /opt/puppetlabs/bin/puppet-app --url https://`hostname -f`:8143 show --verbose\r\n\r\nYou should receive the following response.\r\n\r\n{noformat}\r\njava.lang.Exception: Received HTTP 500: Internal Server Error: org.jruby.exceptions.RaiseException: (SystemStackError) stack level too deep\r\n{noformat}\r\n\r\nThis can be avoided by running puppet agent -t on the server node *before* running puppet-app.\r\n\r\n{noformat}\r\n[root@appmgmt-services ~]# systemctl restart pe-puppetdb.service; systemctl restart pe-puppetserver.service; systemctl restart pe-xnode-service.service\r\n[root@appmgmt-services ~]# /opt/puppetlabs/bin/puppet agent -t\r\nInfo: Using configured environment "production"\r\nInfo: Retrieving pluginfacts\r\nInfo: Retrieving plugin\r\nInfo: Loading facts\r\nInfo: Caching catalog for appmgmt-services.vm\r\nInfo: Applying configuration version "1442867568"\r\nNotice: Applied catalog in 9.32 seconds\r\n[root@appmgmt-services ~]# /opt/puppetlabs/bin/puppet-app --url https://appmgmt-services.vm:8143 show --verbose\r\njava.lang.Exception: Received HTTP 500: Server Error: Evaluation Error: Error while evaluating a Resource Statement, Only applications are allowed at topscope, not Filebucket[main] at /etc/puppetlabs/code/environments/production/manifests/site.pp:20:1 in environment production\r\n{noformat}\r\n\r\nNote the last line is a known bug, choking on the built-in site manifest but having successfully requested an environment graph. ', 'https://tickets.puppetlabs.com/browse/PUP-5299', 'https://github.com/puppetlabs/puppet/pull/4311', '2015-09-21T13:44:15.000-0700', '2016-05-25T16:41:42.000-0700', '2016-05-25T16:41:42.000-0700', 'Closed', '', 11, '0', 1, 14, 2, 2, 'af560639d082d2c2eed610c487d91625c54aa6e4', 'https://tickets.puppetlabs.com/browse/PUP-5299', 'https://github.com/puppetlabs/puppet/pull/4311'),
('puppet', 99698, 46245969, 4301, 'puppet device can"t handle mode=auto or encapsulation=negotiate', 'Widely reported that you must manually change all switchports to access mode before you can configure them with Puppet:\r\n\r\n* http://serverfault.com/questions/512398/puppet-device-not-working-with-catalyst-2950\r\n* http://www.scottyob.com/2012/12/08/my-experiences-of-managing-a-cisco-switch-with-puppet/\r\n* https://groups.google.com/forum/#!topic/puppet-users/dkADnakeQlo\r\n\r\n{code}\r\n$ puppet device switch01.example.com --verbose\r\nInfo: starting applying configuration to switch01.example.com at telnet://switch01.example.com/\r\nInfo: Retrieving pluginfacts\r\nInfo: Retrieving plugin\r\nInfo: Caching catalog for switch01.example.com\r\nInfo: Applying configuration version "1443506109"\r\nError: Could not perform network device prefetch: Unknown switchport mode: dynamic auto for FastEthernet0/2\r\nNotice: /Stage[main]/Device::Interfaces/Interface[FastEthernet0/2]/description: defined "description" as "Adjusted by Puppet"\r\nError: /Stage[main]/Device::Interfaces/Interface[FastEthernet0/2]: Could not evaluate: undefined method `command" for #<Puppet::Type::Interface:0x00000004dcb7f8>\r\nInfo: Creating state file /home/jrhett/.puppetlabs/opt/puppet/cache/devices/switch01.example.com/state/state.yaml\r\nNotice: Applied catalog in 0.56 seconds\r\n{code}\r\n\r\n...and...\r\n\r\n{code}\r\n$ puppet device switch01.example.com --verbose\r\nInfo: starting applying configuration to switch01.example.com at telnet://switch01.example.com/\r\nInfo: Retrieving pluginfacts\r\nInfo: Retrieving plugin\r\nInfo: Caching catalog for switch01.example.com\r\nInfo: Applying configuration version "1443506824"\r\nError: Could not perform network device prefetch: Unknown switchport encapsulation: negotiate for FastEthernet0/2\r\nNotice: /Stage[main]/Device::Interfaces/Interface[FastEthernet0/2]/description: defined "description" as "Adjusted by Puppet"\r\nNotice: /Stage[main]/Device::Interfaces/Interface[FastEthernet0/2]/native_vlan: defined "native_vlan" as "1"\r\nNotice: /Stage[main]/Device::Interfaces/Interface[FastEthernet0/2]/mode: defined "mode" as "access"\r\nError: /Stage[main]/Device::Interfaces/Interface[FastEthernet0/2]: Could not evaluate: undefined method `command" for #<Puppet::Type::Interface:0x00000003efe630>\r\nNotice: Applied catalog in 0.60 seconds\r\n{code}', 'https://tickets.puppetlabs.com/browse/PUP-5289', 'https://github.com/puppetlabs/puppet/pull/4301', '2015-09-29T00:12:28.000-0700', '2016-05-25T16:51:48.000-0700', '2016-05-25T16:51:48.000-0700', 'Closed', '', 4, '0', 1, 113, 19, 5, '01647b708d8b18dfdbbb6ab0fbb2f8ea12ead657', 'https://tickets.puppetlabs.com/browse/PUP-5289', 'https://github.com/puppetlabs/puppet/pull/4301'),
('puppet', 101089, 47686587, 4341, 'Empty arrays does not match type of typed arrays', 'Puppet thinks that the type of an empty array doesn"t match the type of Array[String]. It thinks that the type is Array[Undef].', 'https://tickets.puppetlabs.com/browse/PUP-5342', 'https://github.com/puppetlabs/puppet/pull/4341', '2015-10-07T15:09:47.000-0700', '2016-05-25T17:04:30.000-0700', '2016-05-25T17:04:30.000-0700', 'Closed', '', 4, '0', 3, 35, 9, 3, 'd1fbe4c66f0f9ae93ff765691d4461c9fcfd5d3b', 'https://tickets.puppetlabs.com/browse/PUP-5342', 'https://github.com/puppetlabs/puppet/pull/4341'),
('puppet', 101252, 66566623, 4887, 'Statically-enabled systemd service is treated like SysV init scripts - enabled each run.', 'h2. Overview\r\n\r\nStatically-enabled systemd service is treated like SysV init scripts - enabled each run. One of the example is "dbus" / "messagebus" service which is not using SysV init script.\r\n\r\n{code}\r\n# systemctl is-enabled dbus.service\r\nstatic\r\n{code}\r\n\r\n{code}\r\n# ls /usr/lib/systemd/system/multi-user.target.wants/|grep dbus \r\ndbus.service\r\n{code}\r\n\r\nThis is the manifest that is used in the test:\r\n\r\n{code}\r\npackage { "dbus": ensure => installed, } \r\n$dbus_service = $::operatingsystemmajrelease ? { \r\n"5" => "messagebus", \r\n"6" => "messagebus", \r\n"7" => "dbus", \r\n} \r\nservice { "messagebus": \r\nensure => running, \r\nname => $dbus_service, \r\nenable => true, \r\nrequire => Package["dbus"], \r\n}\r\n{code}\r\n\r\nEvery puppet run changes enabled from "false" to "true":\r\n\r\n{code}\r\n[root@pe-centos7-master ~]# puppet apply /tmp/test.pp \r\nNotice: Compiled catalog for pe-centos7-master in environment production in 0.93 seconds\r\nNotice: /Stage[main]/Main/Service[messagebus]/enable: enable changed "false" to "true"\r\nNotice: Applied catalog in 0.30 seconds\r\n{code}\r\n\r\nh2. Workaround\r\n\r\nSetting {{provider => redhat}} on services that use init scripts instead of systemd units should work around the issue.', 'https://tickets.puppetlabs.com/browse/PUP-5353', 'https://github.com/puppetlabs/puppet/pull/4887', '2015-10-12T02:32:31.000-0700', '2016-05-27T13:32:04.000-0700', '2016-05-27T13:32:04.000-0700', 'Closed', '', 6, '0', 2, 63, 24, 4, '3ed5be638e31317b6e7faae1969588e97061e4d0', 'https://tickets.puppetlabs.com/browse/PUP-5353', 'https://github.com/puppetlabs/puppet/pull/4887'),
('puppet', 119279, 61321432, 4740, 'Puppet module install fails when modules have long path names', 'Running {code}puppet module install puppetlabs-dsc{code} silently fails to install some of the files in the module tarball\r\n\r\n{code}\r\nPS C:\ProgramData\PuppetLabs\code\environments\production\modules\dsc> ls *.psm1 -rec |measure\r\n\r\n\r\nCount    : 28\r\n{code}\r\nThere should be over 240 PSM1 files', 'https://tickets.puppetlabs.com/browse/PUP-5994', 'https://github.com/puppetlabs/puppet/pull/4740', '2016-03-01T10:27:19.000-0800', '2016-05-31T16:25:10.000-0700', '2016-05-31T16:25:10.000-0700', 'Closed', '', 12, '0', 1, 29, 1, 3, '94292ea86ff3a5a3392cf7ea31ea4ee95668ead7', 'https://tickets.puppetlabs.com/browse/PUP-5994', 'https://github.com/puppetlabs/puppet/pull/4740'),
('puppet', 22671, 35280010, 3921, 'Yum provider "purge" target runs irrespective of package installation status', 'It seems the yum provider will try to purge an absent package:\r\n{noformat}\r\n[root@test ~]# cat test.pp \r\npackage { logwatch: ensure => purged; }\r\n\r\n[root@test ~]# /bin/rpm -q logwatch --nosignature --nodigest --qf "%{NAME} %|EPOCH?{%{EPOCH}}:{0}| %{VERSION} %{RELEASE} %{ARCH}"\r\npackage logwatch is not installed\r\n\r\n[root@test ~]# puppet -d -v test.pp \r\ndebug: Puppet::Type::Package::ProviderRpm: Executing "/bin/rpm --version"\r\ndebug: Puppet::Type::Package::ProviderUrpmi: Executing "/bin/rpm -ql rpm"\r\ndebug: Puppet::Type::Package::ProviderYum: Executing "/bin/rpm --version"\r\ndebug: Puppet::Type::Package::ProviderAptrpm: Executing "/bin/rpm -ql rpm"\r\ndebug: Puppet::Type::Package::ProviderPorts: file /usr/local/sbin/portupgrade does not exist\r\ndebug: Puppet::Type::Package::ProviderAptitude: file /usr/bin/aptitude does not exist\r\ndebug: Puppet::Type::Package::ProviderSunfreeware: file pkg-get does not exist\r\ndebug: Puppet::Type::Package::ProviderUp2date: file /usr/sbin/up2date-nox does not exist\r\ndebug: Puppet::Type::Package::ProviderApt: file /usr/bin/apt-get does not exist\r\ndebug: Puppet::Type::Package::ProviderPortage: file /usr/bin/emerge does not exist\r\ndebug: Puppet::Type::Package::ProviderRug: file /usr/bin/rug does not exist\r\ndebug: Puppet::Type::Package::ProviderDpkg: file /usr/bin/dpkg does not exist\r\ndebug: Puppet::Type::Package::ProviderSun: file /usr/sbin/pkgrm does not exist\r\ndebug: Puppet::Type::Package::ProviderAptrpm: file apt-get does not exist\r\ndebug: Puppet::Type::Package::ProviderFink: file /sw/bin/fink does not exist\r\ndebug: Puppet::Type::Package::ProviderHpux: file /usr/sbin/swremove does not exist\r\ndebug: Puppet::Type::Package::ProviderUrpmi: file urpmi does not exist\r\ndebug: Puppet::Type::Package::ProviderFreebsd: file /usr/sbin/pkg_info does not exist\r\ndebug: Puppet::Type::Package::ProviderOpenbsd: file pkg_info does not exist\r\ndebug: Creating default schedules\r\ndebug: Failed to load library "selinux" for feature "selinux"\r\ndebug: Puppet::Type::User::ProviderLdap: true value when expecting false\r\ndebug: Puppet::Type::User::ProviderUser_role_add: file roleadd does not exist\r\ndebug: Puppet::Type::User::ProviderDirectoryservice: file /usr/bin/dscl does not exist\r\ndebug: Puppet::Type::User::ProviderPw: file pw does not exist\r\ndebug: Failed to load library "ldap" for feature "ldap"\r\ndebug: /File[/var/lib/puppet/ssl/private]: Autorequiring File[/var/lib/puppet/ssl]\r\ndebug: /File[/var/lib/puppet/client_yaml]: Autorequiring File[/var/lib/puppet]\r\ndebug: /File[/var/lib/puppet/facts]: Autorequiring File[/var/lib/puppet]\r\ndebug: /File[/var/lib/puppet/ssl/public_keys]: Autorequiring File[/var/lib/puppet/ssl]\r\ndebug: /File[/var/lib/puppet/ssl]: Autorequiring File[/var/lib/puppet]\r\ndebug: /File[/var/lib/puppet/ssl/certs/ca.pem]: Autorequiring File[/var/lib/puppet/ssl/certs]\r\ndebug: /File[/var/lib/puppet/lib]: Autorequiring File[/var/lib/puppet]\r\ndebug: /File[/var/lib/puppet/ssl/certificate_requests]: Autorequiring File[/var/lib/puppet/ssl]\r\ndebug: /File[/var/lib/puppet/ssl/certs]: Autorequiring File[/var/lib/puppet/ssl]\r\ndebug: /File[/var/lib/puppet/clientbucket]: Autorequiring File[/var/lib/puppet]\r\ndebug: /File[/var/lib/puppet/ssl/crl.pem]: Autorequiring File[/var/lib/puppet/ssl]\r\ndebug: /File[/var/lib/puppet/state/graphs]: Autorequiring File[/var/lib/puppet/state]\r\ndebug: /File[/var/lib/puppet/ssl/certs/test.pem]: Autorequiring File[/var/lib/puppet/ssl/certs]\r\ndebug: /File[/var/lib/puppet/state/state.yaml]: Autorequiring File[/var/lib/puppet/state]\r\ndebug: /File[/var/lib/puppet/ssl/public_keys/test.pem]: Autorequiring File[/var/lib/puppet/ssl/public_keys]\r\ndebug: /File[/var/lib/puppet/ssl/private_keys]: Autorequiring File[/var/lib/puppet/ssl]\r\ndebug: /File[/var/lib/puppet/ssl/private_keys/test.pem]: Autorequiring File[/var/lib/puppet/ssl/private_keys]\r\ndebug: /File[/var/lib/puppet/state]: Autorequiring File[/var/lib/puppet]\r\ndebug: Finishing transaction 23973287885200 with 0 changes\r\ndebug: Prefetching yum resources for package\r\ndebug: Puppet::Type::Package::ProviderYum: Executing "/bin/rpm --version"\r\ndebug: Puppet::Type::Package::ProviderYum: Executing "/bin/rpm -qa --nosignature --nodigest --qf "%{NAME} %|EPOCH?{%{EPOCH}}:{0}| %{VERSION} %{RELEASE} %{ARCH}\r\n""\r\ninfo: Applying configuration version "1272893121"\r\ndebug: Puppet::Type::Package::ProviderYum: Executing "/bin/rpm -q logwatch --nosignature --nodigest --qf %{NAME} %|EPOCH?{%{EPOCH}}:{0}| %{VERSION} %{RELEASE} %{ARCH}\r\n"\r\ndebug: //Package[logwatch]: Changing ensure\r\ndebug: //Package[logwatch]: 1 change(s)\r\ndebug: Puppet::Type::Package::ProviderYum: Executing "/usr/bin/yum -y erase logwatch"\r\nnotice: //Package[logwatch]/ensure: created\r\ndebug: Finishing transaction 23456258088960 with 1 changes\r\n{noformat}\r\n', 'https://tickets.puppetlabs.com/browse/PUP-1295', 'https://github.com/puppetlabs/puppet/pull/3921', '2013-12-30T11:00:10.000-0800', '2016-06-01T08:25:12.000-0700', '2016-06-01T08:25:12.000-0700', 'Closed', 'Community', 15, '0', 1, 124, 32, 9, 'f6dd02851aaa26cfbabf7cf41b3f5afe8e2cdfa2', 'https://tickets.puppetlabs.com/browse/PUP-1295', 'https://github.com/puppetlabs/puppet/pull/3921'),
('puppet', 121203, 62670797, 4789, 'lookup cli --unpack-arrays broken', 'unpack-arrays should take an argument, but the code has:\r\n\r\n{code}\r\n  option("--unpack-arrays") do |arg|\r\n    options[:unpack_arrays] = arg\r\n  end\r\n{code}\r\n\r\nso it doesn"t actually take it, should be:\r\n\r\n{code}\r\n  option("--unpack-arrays DELIMITER") do |arg|\r\n    options[:unpack_arrays] = arg\r\n  end\r\n{code}\r\n\r\nAdditionally even with that fixed the options are not correctly merged into the options hash it constructs.\r\n\r\nhttps://github.com/puppetlabs/puppet/blob/9849572b805a1cf3cada6b9b0c94f7699c780888/lib/puppet/application/lookup.rb#L275 and https://github.com/puppetlabs/puppet/blob/9849572b805a1cf3cada6b9b0c94f7699c780888/lib/puppet/application/lookup.rb#L279 should use merge! and not merge.  Additionally the key for knockout prefix is "knockout_prefix" not "prefix"', 'https://tickets.puppetlabs.com/browse/PUP-6050', 'https://github.com/puppetlabs/puppet/pull/4789', '2016-03-13T06:11:42.000-0700', '2016-06-02T07:41:55.000-0700', '2016-06-02T07:41:55.000-0700', 'Closed', '', 24, '0', 1, 7, 7, 1, 'df2796f53e0ceff5e1b44fd00c5bca1be54a121e', 'https://tickets.puppetlabs.com/browse/PUP-6050', 'https://github.com/puppetlabs/puppet/pull/4789'),
('puppet', 133930, 71578333, 4994, 'Enum entries are not unique.', 'The following code:\r\n\r\n{code}\r\nnotice Enum[foo, bar, foo, bar]\r\n{code}\r\n\r\nproduces output:\r\n\r\n{code}\r\nNotice: Scope(Class[main]): Enum["bar", "bar", "foo", "foo"]\r\n{code}\r\n\r\nExpected output:\r\n\r\n{code}\r\nNotice: Scope(Class[main]): Enum["bar", "foo"]\r\n{code}\r\n\r\nAs the values should be in lexicographic ordering and unique.', 'https://tickets.puppetlabs.com/browse/PUP-6354', 'https://github.com/puppetlabs/puppet/pull/4994', '2016-05-25T13:19:18.000-0700', '2016-06-02T10:54:53.000-0700', '2016-06-02T10:54:53.000-0700', 'Closed', '', 3, '0', 1, 17, 1, 2, '5e49b100ae311a9f41176f0519226dabd2d99b4d', 'https://tickets.puppetlabs.com/browse/PUP-6354', 'https://github.com/puppetlabs/puppet/pull/4994'),
('puppet', 132317, 70486802, 4969, 'Bad message when passing zero sized hash where non empty hash is required', 'Passing an empty hash where a non-empty hash is required currently reports an element type mismatch such as:\r\n{code}\r\nexpected a Hash[String, String] value, got Hash[0, 0]\r\n{code}\r\nThis is wrong. It should report the size mismatch.', 'https://tickets.puppetlabs.com/browse/PUP-6319', 'https://github.com/puppetlabs/puppet/pull/4969', '2016-05-18T01:16:59.000-0700', '2016-06-02T10:54:54.000-0700', '2016-06-02T10:54:54.000-0700', 'Closed', 'typesystem', 2, '0', 1, 18, 0, 2, 'be6214686e767a79a9176bec1d4403bdbbc24fcd', 'https://tickets.puppetlabs.com/browse/PUP-6319', 'https://github.com/puppetlabs/puppet/pull/4969'),
('puppet', 132339, 70521826, 4970, 'Bad message when passing zero sized array where non empty array is required', 'Passing an empty array where a non-empty array is required currently reports an element type mismatch such as:\r\n{code}\r\nexpected an Array[String,1,default] value, got Array[0, 0]\r\n{code}\r\nThis is wrong. It should report the size mismatch.', 'https://tickets.puppetlabs.com/browse/PUP-6320', 'https://github.com/puppetlabs/puppet/pull/4970', '2016-05-18T04:33:59.000-0700', '2016-06-02T10:54:54.000-0700', '2016-06-02T10:54:54.000-0700', 'Closed', 'typesystem', 3, '0', 2, 66, 37, 4, 'b7d958015332e73e73dbf2a2ee24f1aadb98d776', 'https://tickets.puppetlabs.com/browse/PUP-6320', 'https://github.com/puppetlabs/puppet/pull/4970'),
('puppet', 132881, 70934755, 4981, 'Quoted string "undef" treated as value undef', 'Puppet is treating the quoted string "undef" as value undef, which breaks (at least) the logrotate module: https://forge.puppet.com/yo61/logrotate\r\n\r\nSample code: \r\n{code:java}\r\n  $var1 = undef\r\n  $var2 = "undef"\r\n  $var3 = "undef"\r\n  $var4 = ""undef""\r\n  $var5 = ""undef""\r\n  notify { "VAR1: ${var1} VAR2: ${var2} VAR3: ${var3} VAR4: ${var4} VAR5: ${var5}": }\r\n{code}\r\n\r\nOutputs:\r\n{code:java}\r\nNotice: VAR1:  VAR2:  VAR3:  VAR4: "undef" VAR5: "undef"\r\n{code}\r\n\r\nDiscussion:\r\nhttps://groups.google.com/forum/#!topic/puppet-users/X-XrjM9oJYE\r\nhttps://github.com/yo61/puppet-logrotate/issues/26\r\n\r\n', 'https://tickets.puppetlabs.com/browse/PUP-6336', 'https://github.com/puppetlabs/puppet/pull/4981', '2016-05-20T08:19:08.000-0700', '2016-06-03T14:09:25.000-0700', '2016-06-03T14:09:25.000-0700', 'Closed', 'couch-ss', 19, '0', 2, 17, 1, 2, '1be272fa33de7601d93776dd7fc2b025c1fba3e2', 'https://tickets.puppetlabs.com/browse/PUP-6336', 'https://github.com/puppetlabs/puppet/pull/4981'),
('puppet', 124312, 65669856, 4848, '`puppet resource user` on Solaris fails when LDAP users are present', 'On EL (and probably elsewhere), self.instances for users filters out directory service users. On Solaris, it does not, which causes the `puppet resource` command to crash.\r\n\r\nSolaris should behave like other platforms and filter out directory service users from the user instance list.', 'https://tickets.puppetlabs.com/browse/PUP-6113', 'https://github.com/puppetlabs/puppet/pull/4848', '2016-03-30T15:29:02.000-0700', '2016-06-13T07:39:29.000-0700', '2016-06-13T07:39:29.000-0700', 'Closed', '', 2, '0', 1, 3, 1, 1, '5ed1091c14e4659fc57a9643508432f4ad677f8e', 'https://tickets.puppetlabs.com/browse/PUP-6113', 'https://github.com/puppetlabs/puppet/pull/4848'),
('puppet', 134175, 71762860, 4998, 'trusted facts not available when running "puppet master" webrick server', 'I evaluated using trusted facts, and for testing purposes, I just ran puppetmaster webrick server like:\r\n\r\npuppet master --verbose --no-daemonize\r\n\r\nHowever, I found that certificate extensions are not available in $trusted variable in site.pp\r\n\r\nI added a \r\n\r\nnotify { "$trusted": } \r\nbut the info about the certificate extension was empty.\r\n\r\nWith attached patch, the output of $trusted is filled, and I can base decisions on it.\r\n\r\n\r\n\r\n', 'https://tickets.puppetlabs.com/browse/PUP-6365', 'https://github.com/puppetlabs/puppet/pull/4998', '2016-05-27T02:56:12.000-0700', '2016-06-14T23:54:10.000-0700', '2016-06-14T23:54:10.000-0700', 'Closed', 'facts;trusted', 3, '0', 1, 3, 1, 1, '', 'https://tickets.puppetlabs.com/browse/PUP-6365', 'https://github.com/puppetlabs/puppet/pull/4998'),
('puppet', 48216, 57326040, 4606, 'When puppet agent fails to retrieve catalog from master, cached catalog is used without regard for the puppet.conf-declared environment', 'Steps to reproduce:\r\n\r\n- do not disable {{pe-puppet}} service\r\n- successfully compile catalog from non-Production environment using {{puppet agent -t --noop --environment manage_meta}}, catalog is cached locally\r\n- puppet master fails to compile catalog in agent"s assigned environment (e.g. because a new class is assigned for testing non-Production code)\r\n- on next scheduled run, agent enforces non-Production state contained in cached catalog in violation of {{environment = production}} explicitly declared in puppet.conf\r\n    - This is accompanied by the warning message indicating that the ENC is overriding the agent as authoritative source for environment\r\n\r\nObviously, this could have very bad side effects and, while consistent and predictable, falls squarely under the category of undesirable (and unexpected) behavior, in my opinion.', 'https://tickets.puppetlabs.com/browse/PUP-3077', 'https://github.com/puppetlabs/puppet/pull/4606', '2014-08-18T09:50:47.000-0700', '2016-06-15T09:07:09.000-0700', '2016-06-15T09:07:09.000-0700', 'Closed', 'TSE', 15, '0', 6, 152, 65, 6, '251a483c51839be72dbf662b2529e04d892b125b', 'https://tickets.puppetlabs.com/browse/PUP-3077', 'https://github.com/puppetlabs/puppet/pull/4606'),
('puppet', 107138, 51809434, 4465, 'Environment is evicted many times during compile', 'The environment might be evicted a large number of times during a compile. The reason for this is that the call to the data binding indirection passes the environment in string form rather than the instance which forces a lookup in {{Environments}} which in turn evicts an existing environment if {{environment_timeout = 0}}. That setting happens to be the default.\r\n\r\n', 'https://tickets.puppetlabs.com/browse/PUP-5547', 'https://github.com/puppetlabs/puppet/pull/4465', '2015-11-25T07:31:41.000-0800', '2016-06-20T13:59:38.000-0700', '2016-06-20T13:59:38.000-0700', 'Closed', '', 11, '0', 1, 1, 1, 1, '4529384893d261206ead23b197e7a58492e48693', 'https://tickets.puppetlabs.com/browse/PUP-5547', 'https://github.com/puppetlabs/puppet/pull/4465'),
('puppet', 105034, 0, 0, 'Update docs URLs in puppet source', 'When a pull request for PUP-5123 was opened, there was quite a bit of discussion on whether the links we referenced in inline comment documentation were correct. Rob left several comments on the PR pointing out which links seemed like they needed an update:\r\n\r\nhttps://github.com/puppetlabs/puppet/pull/4203\r\n\r\nIn order to prevent the work for PUP-5123 from getting lost, we went ahead and merged that in, but many of the links still need to be updated.', 'https://tickets.puppetlabs.com/browse/PUP-5485', '', '2015-11-09T16:36:10.000-0800', '2016-06-22T16:20:19.000-0700', '2016-06-22T16:20:19.000-0700', 'Closed', '', 7, '0', 0, 0, 0, 0, '3ae2eb16a0c3679da68260d13fed0ad03f9db3db', 'https://tickets.puppetlabs.com/browse/PUP-5485', 'https://github.com/puppetlabs/puppet/commit/3ae2eb16a0c3679da68260d13fed0ad03f9db3db'),
('puppet', 101084, 47114466, 4326, 'puppet apply doesn"t honor --catalog_cache_terminus', 'I expected that "puppet apply" would honor the catalog_cache_terminus setting. But it doesn"t.', 'https://tickets.puppetlabs.com/browse/PUP-5340', 'https://github.com/puppetlabs/puppet/pull/4326', '2015-10-07T14:51:03.000-0700', '2016-06-22T16:25:00.000-0700', '2016-06-22T16:25:00.000-0700', 'Closed', '', 1, '0', 1, 12, 0, 2, '85bfe5f8d5e4b0c694c70157be42acb51367d12d', 'https://tickets.puppetlabs.com/browse/PUP-5340', 'https://github.com/puppetlabs/puppet/pull/4326'),
('puppet', 101673, 47721882, 4343, 'Compiler raises a cryptic error when no node mappings are defined on an application declaration', 'According to the application spec, providing node mappings on the declaration of an application is optional. Currently, the following error will be raised during node catalog compilation if no value for `nodes` is given. Compilation of the environment is not affected.\r\n\r\n{code}\r\nundefined method `value" for nil:NilClass on node master.vm\r\n{code}\r\n\r\nh3. Reproducing\r\n{code}\r\npuppet apply --app_management <<MANIFEST\r\napplication app {\r\n}\r\n\r\nsite {\r\n  app { anapp:\r\n  }\r\n}\r\nMANIFEST\r\n{code}', 'https://tickets.puppetlabs.com/browse/PUP-5382', 'https://github.com/puppetlabs/puppet/pull/4343', '2015-10-14T14:46:59.000-0700', '2016-06-22T16:49:47.000-0700', '2016-06-22T16:49:47.000-0700', 'Closed', '', 5, '0', 2, 62, 1, 2, 'd9c3dac72a0b43711e6f4d8a3c6f9c425778d5f0', 'https://tickets.puppetlabs.com/browse/PUP-5382', 'https://github.com/puppetlabs/puppet/pull/4343'),
('puppet', 115048, 58228189, 4630, 'ClassInformationService.classes_per_environment call for non-existent file does not return errors', 'If I pass a path to a manifest file that does not exist to the list of files to be parsed in a call to {{Puppet::InfoService::ClassInformationService.new.classes_per_environment}}, the return value just returns an empty array, as opposed to a hash with an {{:error}} key/value pair in it.\r\n\r\nFor example, running the following code...\r\n\r\n{code:ruby}\r\nrequire "puppet"\r\nrequire "puppet/info_service"\r\n\r\nfiles_to_parse = { "production" => [ "./parse.pp" ] }\r\n\r\nputs Puppet::InfoService::ClassInformationService.new.classes_per_environment(files_to_parse)\r\n{code}\r\n\r\n... where "./parse.pp" does not exist produces the following output:\r\n\r\n{noformat}\r\n{"production"=>{"./parse.pp"=>[]}}\r\n{noformat}\r\n\r\nIf instead I have a file that exists at "./parse.pp" which has bad content in it...\r\n\r\n{noformat}\r\nbogus manifest\r\n{noformat}\r\n\r\n... an {{:error}} is returned in a hash associated with the file name:\r\n\r\n{noformat}\r\n{"production"=>{"./parse.pp"=>{:error=>"This Name has no effect. A value was produced and then forgotten (one or more preceding expressions may have the wrong form) at ./parse.pp:1:1"}}}\r\n{noformat}\r\n\r\nIt seems like both cases should result in an {{:error}} key being returned.', 'https://tickets.puppetlabs.com/browse/PUP-5807', 'https://github.com/puppetlabs/puppet/pull/4630', '2016-02-03T07:31:42.000-0800', '2016-06-22T16:59:00.000-0700', '2016-06-22T16:59:00.000-0700', 'Closed', '', 10, '0', 1, 13, 0, 2, '4afa752b99ccfc684acaa68010ce2c9eda0d56bd', 'https://tickets.puppetlabs.com/browse/PUP-5807', 'https://github.com/puppetlabs/puppet/pull/4630'),
('puppet', 115067, 58229862, 4631, 'ClassInformationService.classes_per_environment returns classes as array rather than nested in hash', 'In the original description of the {{classes_per_environment}} method in PUP-4819, the sample aggregrated result looked like this:\r\n\r\n{noformat}\r\n{\r\n"environment" => {\r\n  "filename" => {\r\n    :error     => "errormessage",\r\n    :classes => [\r\n      { :name => "classname",\r\n        :params => [\r\n          { :name => "paramname",\r\n            :type => "puppettype",\r\n            :default_source => "....",\r\n            :default_literal => <OBJECT>\r\n          },\r\n         # next param\r\n        ],\r\n      # next class\r\n      ],\r\n  # next file\r\n  },\r\n# next env\r\n}\r\n{noformat}\r\n\r\nWhen I use the {{classes_per_environment}} method, a successful parse includes the classes as an array rather than as the value of a key named {{:classes}} in the hash.\r\n\r\nFor example, I used the following code...\r\n\r\n{code:ruby}\r\nrequire "puppet"\r\nrequire "puppet/info_service"\r\n\r\nfiles_to_parse = { "production" => [ "./parse.pp" ] }\r\n\r\nputs Puppet::InfoService::ClassInformationService.new.classes_per_environment(files_to_parse)\r\n{code}\r\n\r\n... to parse the following "./parse.pp" file:\r\n\r\n{code:puppet}\r\nclass myclass (String $string_with_single_quotes = "$::osfamily",\r\n               String $string_with_double_quotes = "string with double quotes",\r\n               Fubar $foo = "bar"\r\n               )\r\n{\r\n}\r\n{code}\r\n\r\nThe output from the Ruby code is...\r\n\r\n{noformat}\r\n{"production"=>{"./parse.pp"=>[{:name=>"myclass", :params=>[{:name=>"string_with_single_quotes", :type=>"String", :default_source=>"\"$::osfamily\""}, {:name=>"string_with_double_quotes", :type=>"String", :default_literal=>"string with double quotes", :default_source=>"\"string with double quotes\""}, {:name=>"foo", :type=>"Fubar", :default_literal=>"bar", :default_source=>"\"bar\""}]}]}}\r\n{noformat}\r\n\r\n... whereas I was thinking that the "classes" array would be wrapped in a hash like this ...\r\n\r\n{noformat}\r\n{"production"=>{"./parse.pp"=>{:classes=>[{:name=>"myclass", :params=>[{:name=>"string_with_single_quotes", :type=>"String", :default_source=>"\"$::osfamily\""}, {:name=>"string_with_double_quotes", :type=>"String", :default_literal=>"string with double quotes", :default_source=>"\"string with double quotes\""}, {:name=>"foo", :type=>"Fubar", :default_literal=>"bar", :default_source=>"\"bar\""}]}]}}}\r\n{noformat}\r\n\r\nWhen an {{:error}} is returned instead of the "classes" array, it is wrapped in a subordinate hash, like this:\r\n\r\n{noformat}\r\n{"production"=>{"./parse.pp"=>{:error=>"This Name has no effect. A value was produced and then forgotten (one or more preceding expressions may have the wrong form) at ./parse.pp:1:1"}}}\r\n{noformat}\r\n\r\nI think for consistency and for future expansion of the data structure - e.g., if we ever want to add more per-file metadata in the response than just "classes" - that it would be good to wrap the "classes" array in a Hash under the {{:classes}} key, as the description in PUP-5807 originally called for.', 'https://tickets.puppetlabs.com/browse/PUP-5809', 'https://github.com/puppetlabs/puppet/pull/4631', '2016-02-03T09:42:35.000-0800', '2016-06-22T16:59:35.000-0700', '2016-06-22T16:59:35.000-0700', 'Closed', '', 6, '0', 1, 33, 31, 2, 'ececc52b9d0c695b371bfa8ebf43b6e310c6f82f', 'https://tickets.puppetlabs.com/browse/PUP-5809', 'https://github.com/puppetlabs/puppet/pull/4631'),
('puppet', 93232, 49602540, 4402, 'undefined method `keys" for nil:NilClass in static_compiler', '*get_child_resources()* can return nil if the source attribute of the file resource points to a file instead of a directory.\r\n\r\nThis results in a raised *NoMethodError* with the static compiler set as the catalog terminus and a file resource declared that has the *recurse* parameter set to true, e.g.:\r\n\r\n{code}\r\nfile { "/etc/puppet.conf":\r\n  recurse => true,\r\n  source   => "puppet:///modules/puppet/puppet.conf",\r\n}\r\n{code}\r\n\r\n*stacktrace:*\r\n2015-08-12 09:51:29 +0200 Puppet (err): undefined method `keys" for nil:NilClass\r\n/opt/ruby2.0/lib/vendor_ruby/2.0.0/puppet/indirector/catalog/static_compiler.rb:192:in `remove_existing_resources"\r\n/opt/ruby2.0/lib/vendor_ruby/2.0.0/puppet/indirector/catalog/static_compiler.rb:122:in `add_children"\r\n/opt/ruby2.0/lib/vendor_ruby/2.0.0/puppet/indirector/catalog/static_compiler.rb:52:in `block in find"\r\n/opt/ruby2.0/lib/vendor_ruby/2.0.0/puppet/indirector/catalog/static_compiler.rb:43:in `each"\r\n/opt/ruby2.0/lib/vendor_ruby/2.0.0/puppet/indirector/catalog/static_compiler.rb:43:in `find"\r\n/opt/ruby2.0/lib/vendor_ruby/2.0.0/puppet/indirector/indirection.rb:201:in `find" \r\n...\r\n', 'https://tickets.puppetlabs.com/browse/PUP-5035', 'https://github.com/puppetlabs/puppet/pull/4402', '2015-08-13T00:55:08.000-0700', '2016-06-22T17:19:45.000-0700', '2016-06-22T17:19:45.000-0700', 'Closed', '', 1, '0', 3, 45, 20, 2, '564064dcc7224d1a8d9205e36bbcfc9496c33876', 'https://tickets.puppetlabs.com/browse/PUP-5035', 'https://github.com/puppetlabs/puppet/pull/4402'),
('puppet', 124814, 65144925, 4832, 'Pip package provider doesn"t honor config for custom PyPI repositories', 'The pip package provider currently polls PyPI directly, instead of relying on pip from CLI to look up latest version.\r\n\r\nThis makes it impossible to configure pip to use a custom PyPI repository', 'https://tickets.puppetlabs.com/browse/PUP-6120', 'https://github.com/puppetlabs/puppet/pull/4832', '2016-04-04T04:10:40.000-0700', '2016-06-25T18:55:46.000-0700', '2016-06-25T18:55:46.000-0700', 'Closed', '', 1, '0', 2, 158, 320, 3, '152299cc859fc74343c697841848086d4e41b6f8', 'https://tickets.puppetlabs.com/browse/PUP-6120', 'https://github.com/puppetlabs/puppet/pull/4832'),
('puppet', 119802, 75728817, 5074, 'should_modify_gid acceptance tests should generate an unused unique id', 'puppet acceptance failed because the {{should_modify_gid}} acceptance test tried to create a group with a random gid, but it picked gid 33, which is already in use:\r\n\r\n{noformat}\r\n12:12:43 Begin tests/resource/group/should_modify_gid.rb\r\n12:12:43 \r\n12:12:43 should modify gid of existing group\r\n12:12:43 \r\n12:12:43 * ensure that the group exists with gid 33\r\n12:12:43 \r\n12:12:43 oa9vv5ad5m9rv20.delivery.puppetlabs.net (ubuntu1510-32-1) 12:12:43$ puppet resource group pl785040 ensure=present gid=33\r\n12:12:44   Error: Could not create group pl785040: Execution of "/usr/sbin/groupadd -g 33 pl785040" returned 4: groupadd: GID "33" already exists\r\n12:12:44   Error: /Group[pl785040]/ensure: change from absent to present failed: Could not create group pl785040: Execution of "/usr/sbin/groupadd -g 33 pl785040" returned 4: groupadd: GID "33" already exists\r\n12:12:44   group { "pl785040":\r\n12:12:44     ensure => "absent",\r\n12:12:44   }\r\n{noformat}', 'https://tickets.puppetlabs.com/browse/PUP-6004', 'https://github.com/puppetlabs/puppet/pull/5074', '2016-03-03T13:19:47.000-0800', '2016-07-06T11:12:19.000-0700', '2016-07-06T11:12:19.000-0700', 'Resolved', 'client-onboarding', 1, '0', 1, 2, 2, 1, '57421d1ae33b3bac0c020356a73567977f4e5f82', 'https://tickets.puppetlabs.com/browse/PUP-6004', 'https://github.com/puppetlabs/puppet/pull/5074'),
('puppet', 124645, 0, 0, 'puppet agent --configprint cacert on Windows points to a non-existant directory', 'When trying to find out where the CA cert is on Windows, the usual command of {{puppet agent --configprint cacert}} points to a directory that doesn"t exist.\r\n\r\n!windows cacert.png|thumbnail!\r\n\r\nThe correct location is: {{C:\ProgramData\PuppetLabs\puppet\etc\ssl\certs\ca.pem}}', 'https://tickets.puppetlabs.com/browse/PUP-6118', '', '2016-04-01T12:56:02.000-0700', '2016-07-07T13:39:44.000-0700', '2016-07-07T13:39:44.000-0700', 'Closed', '', 3, '0', 0, 0, 0, 0, '7e5a828dd41e18874f944e2d9e6b190fd6e47060', 'https://tickets.puppetlabs.com/browse/PUP-6118', 'https://github.com/puppetlabs/puppet/commit/7e5a828dd41e18874f944e2d9e6b190fd6e47060'),
('puppet', 102062, 48636386, 4376, 'incorrect path being defined in puppet-agent"s init script is causing gems to be installed into puppet"s gem env.', 'OS: CentOS 6.x\r\nPuppet 4.2.2: puppet-agent-1.2.4-1.el6.x86_64 AND puppet-agent-1.2.6-1.el6.x86_64\r\n\r\nPuppet is installing gems into the puppet provided ruby and not into the system ruby.\r\n\r\nSteps to reproduce:\r\n\r\nAdd this to your node manifest:\r\n  package {"redis":\r\n    ensure   => "present",\r\n    provider => "gem",\r\n  }\r\n\r\nrun "sudo service puppet restart" on your node.\r\nrun "gem list"  - You will find no redis gem.\r\nrun "/opt/puppetlabs/puppet/bin/gem list" - Redis gem will be installed here!\r\n\r\nWith some help from the folks on IRC, I found that the init script shipped by puppetlabs has a path which causes the puppet daemon/service to use the puppet provided gem binary vs the system"s gem binary.\r\n\r\n$ cat /etc/init.d/puppet |grep PATH\r\nPATH=/opt/puppetlabs/puppet/bin:/usr/bin:/sbin:/bin:/usr/sbin\r\n\r\nIf I remove "/opt/puppetlabs/puppet/bin" from the path line and restart the service, the puppet deamon does the right thing and installs the gem into the system ruby.\r\n\r\n\r\n', 'https://tickets.puppetlabs.com/browse/PUP-5427', 'https://github.com/puppetlabs/puppet/pull/4376', '2015-10-19T12:21:46.000-0700', '2016-07-11T14:21:20.000-0700', '2016-07-11T14:21:20.000-0700', 'Resolved', '', 6, '0', 1, 0, 6, 3, '332f26f06c8495a5de23eb482f8f628cd7768630', 'https://tickets.puppetlabs.com/browse/PUP-5427', 'https://github.com/puppetlabs/puppet/pull/4376'),
('puppet', 21564, 758247277, 8794, 'Puppet raises error when trying to set owner to non-existant user', 'When I ran 0.25.5, I relied on the puppet client to create the puppet user.  Since I"ve upgraded to 2.6.1, the puppet user must already exist before the puppet client will run, otherwise the puppet client bails with an error:\r\nerr: Could not run Puppet configuration client: Could not find user puppet\r\n\r\nThis seems to be a fairly major regression.', 'https://tickets.puppetlabs.com/browse/PUP-1131', 'https://github.com/puppetlabs/puppet/pull/8794', '2013-12-17T05:20:40.000-0800', '2016-07-11T22:33:34.000-0700', '2016-07-11T22:33:34.000-0700', 'Closed', 'redmine', 4, '0', 1, 3, 5, 2, 'bda1e273234d2952a15f68c4d1e4afea22521f7d', 'https://tickets.puppetlabs.com/browse/PUP-1131', 'https://github.com/puppetlabs/puppet/pull/8794'),
('puppet', 22944, 16073599, 2670, 'Rubyize yumhelper.py to remove dependency on python', 'There are several bugs (bug 11380 being one that triggered this patch) that highlight the fact that the version of python used as the default on a system running puppet can break yumhelper.py.\r\n\r\nThis refactor removes yumhelper.py and moves the functionality into the Yum provider in puppet.', 'https://tickets.puppetlabs.com/browse/PUP-1362', 'https://github.com/puppetlabs/puppet/pull/2670', '2014-01-03T14:31:29.000-0800', '2016-07-11T22:37:01.000-0700', '2016-07-11T22:37:01.000-0700', 'Resolved', 'customer;redmine', 26, '0', 1, 155, 249, 3, '101d1deb1168bd7955cf701262f5e44f37eb66c4', 'https://tickets.puppetlabs.com/browse/PUP-1362', 'https://github.com/puppetlabs/puppet/pull/2670'),
('puppet', 139850, 76682227, 5098, 'Fix Parallel Spec grouping for RSpec 3.5.0', 'It was discovered in PUP-6466 that the Parallel Spec code is not compatible with RSpec 3.5.0.  \r\n\r\nThis ticket will cover fixing Puppet parallel spec tests to work with both RSPec 3.5.0 and prior to (3.4.x and below)', 'https://tickets.puppetlabs.com/browse/PUP-6467', 'https://github.com/puppetlabs/puppet/pull/5098', '2016-07-01T10:23:44.000-0700', '2016-07-12T13:42:19.000-0700', '2016-07-12T13:42:19.000-0700', 'Resolved', '', 8, '0', 2, 17, 3, 3, 'a3d39f4f2c181bf7b38031bd55fba1875c97c68d', 'https://tickets.puppetlabs.com/browse/PUP-6467', 'https://github.com/puppetlabs/puppet/pull/5098'),
('puppet', 83513, 37265238, 4018, 'Square braces in title confuse puppet 4 parser', 'If we have two resources where the titles begin with an identical string enclosed in square braces, the puppet 4 parser throws an error that duplicate resources have been declared:\r\n{code}\r\nextern% PUPPET_GEM_VERSION="~> 4.0" be puppet apply -e "notify { "[foo] bar": } ; notify { "[foo] baz": }"\r\nError: Evaluation Error: Error while evaluating a Resource Statement, Duplicate declaration: Notify[[foo] baz] is already declared in file :1; cannot redeclare at line 1  at line 1:27 on node extern.local\r\n{code}\r\n\r\nIt works fine without the square braces however:\r\n{code}\r\nextern% PUPPET_GEM_VERSION="~> 4.0" be puppet apply -e "notify { "foo bar": } ; notify { "foo baz": }"\r\nNotice: Compiled catalog for extern.local in environment production in 0.48 seconds\r\nNotice: foo bar\r\nNotice: /Stage[main]/Main/Notify[foo bar]/message: defined "message" as "foo bar"\r\nNotice: foo baz\r\nNotice: /Stage[main]/Main/Notify[foo baz]/message: defined "message" as "foo baz"\r\nNotice: Applied catalog in 0.02 seconds\r\n{code}\r\n\r\nAn example of a unit test failure is in puppetlabs-inifile when run against Puppet 4: https://travis-ci.org/puppetlabs/puppetlabs-inifile/jobs/65406398\r\n\r\nUPDATE & WORKAROUND\r\n---\r\nThe problem can manifest itself in different ways - even if not getting the error "duplicate resource", the catalog will record the name wrong and it may not be able to later find it, if something else depends on that resource. The underlying problem is a bug in the parsing of a combined type/title as the first right bracket is believed to be the end of the string - e.g. {{Notify\[\[foo]bar]}} ends up as {{\["Notify", "[foo"\]}} instead of the expected {{\["Notify", "\[foo\]bar"\]}}. (In the reported case, both resource end up with the same title as the part after the first right bracket is lost. Other cases may be that the notify is just not found).\r\n\r\nAs a workaround until the fix is released, for notify instances it is possible to use a different title and instead set the message e.g.\r\n{code:puppet}\r\nnotify {"_foo_bar": message = "[foo]bar" }; notify {"_foo_baz": message => "[foo]baz" }\r\n{code}', 'https://tickets.puppetlabs.com/browse/PUP-4709', 'https://github.com/puppetlabs/puppet/pull/4018', '2015-06-08T07:28:49.000-0700', '2016-07-13T09:35:42.000-0700', '2016-07-13T09:35:42.000-0700', 'Closed', '', 8, '0', 2, 6, 1, 2, '151e5f5e1468bc519716c0e410d4370046540785', 'https://tickets.puppetlabs.com/browse/PUP-4709', 'https://github.com/puppetlabs/puppet/pull/4018'),
('puppet', 140098, 76625707, 5096, 'FFI 1.9.11 has a bug when running on Windows', 'FFI 1.9.11 was released on July 5th 2016 however it seems to have a bug when running on Windows and specifying a library via a symbol (as opposed to a string).\r\n\r\nThere is an issue raised on Github for it. https://github.com/ffi/ffi/issues/506', 'https://tickets.puppetlabs.com/browse/PUP-6473', 'https://github.com/puppetlabs/puppet/pull/5096', '2016-07-05T11:22:14.000-0700', '2016-07-13T11:05:31.000-0700', '2016-07-13T11:05:31.000-0700', 'Resolved', '', 7, '0', 1, 3, 6, 1, '258d53597b2f6a460184b8c93cd083e7e3f28ffb', 'https://tickets.puppetlabs.com/browse/PUP-6473', 'https://github.com/puppetlabs/puppet/pull/5096'),
('puppet', 131831, 77366609, 5118, 'Acceptance: AIX_service_provider test failing during setup', 'The [acceptance/tests/resource/service/AIX_service_provider.rb|https://github.com/puppetlabs/puppet/blob/master/acceptance/tests/resource/service/AIX_service_provider.rb] test is failing in current CI run.\r\n\r\nThe AIX system is no longer automatically starting the service under test when it is created as seen in the example below.\r\n{code}\r\n[0] [AIX] root@pe-aix-61-acceptance:~ # mkssys -s sloth_daemon -p /tmp/sloth_daemon.sh.8996 -u 0 -S -n 15 -f 9\r\n0513-071 The sloth_daemon Subsystem has been added.\r\n[0] [AIX] root@pe-aix-61-acceptance:~ # /opt/puppetlabs/bin/puppet resource service sloth_daemon\r\nservice { "sloth_daemon":\r\n  ensure => "stopped",\r\n  enable => "false",\r\n}\r\n{code}\r\n\r\nThe test fails during setup while trying to assert that is was able to stop the service in preparation for the test. Since the the service was not started upon creation, the assertion fails.\r\n\r\nThe test should be modified to make the initial stopping of the service idempotent so that it does not fail if the service was already stopped prior to this setup step.', 'https://tickets.puppetlabs.com/browse/PUP-6301', 'https://github.com/puppetlabs/puppet/pull/5118', '2016-05-16T07:30:19.000-0700', '2016-07-13T14:41:30.000-0700', '2016-07-13T14:41:30.000-0700', 'Resolved', '', 2, '0', 1, 2, 2, 1, '1b59557938126ae6c3b7b1fad5c2f1494b9d7526', 'https://tickets.puppetlabs.com/browse/PUP-6301', 'https://github.com/puppetlabs/puppet/pull/5118'),
('puppet', 138245, 77353516, 5115, 'Intermittent Appveyor PR CI failure due to password complexity', 'Sometimes an Appveyor PR CI will fail, with errors such as \r\n\r\n{code}\r\n[00:08:02]           WIN32OLERuntimeError:\r\n[00:08:02]             (in OLE method `SetInfo": )\r\n[00:08:02]                 OLE error code:800708C5 in Active Directory\r\n[00:08:02]                   The password does not meet the password policy requirements. Check the minimum password length, password complexity and password history requirements.\r\n[00:08:02]\r\n{code}\r\n\r\nTypically password complexity is disabled so our tests don"t need to worry about it, but for some reason it may become enabled again.  This then causes the tests to fail.\r\n\r\nIt is proposed to modify the failing tests to use complex passwords when creating test user accounts instead of easy or blank passwords.', 'https://tickets.puppetlabs.com/browse/PUP-6427', 'https://github.com/puppetlabs/puppet/pull/5115', '2016-06-22T10:19:58.000-0700', '2016-07-14T10:41:17.000-0700', '2016-07-14T10:41:17.000-0700', 'Resolved', '', 8, '0', 1, 2, 0, 2, '8e2e1e5faa9fc0be1976c8a2c987eb194f6a94fb', 'https://tickets.puppetlabs.com/browse/PUP-6427', 'https://github.com/puppetlabs/puppet/pull/5115'),
('puppet', 106448, 52584981, 4480, 'Exclude unsafe Yocto scripts from service init provider', 'Gathering the status of service resources on Yocto Linux causes unintended consequences such as sending shutdown signals to daemons.\r\n\r\nThis is due to a series of unsafe init scripts shipped by Yocto.  Need to exclude these scripts from the service init provider so that Puppet does not try to execute them.', 'https://tickets.puppetlabs.com/browse/PUP-5520', 'https://github.com/puppetlabs/puppet/pull/4480', '2015-11-19T10:09:12.000-0800', '2016-07-20T16:29:39.000-0700', '2016-07-20T16:29:39.000-0700', 'Closed', '', 5, '0', 1, 18, 1, 2, '0707f5ea26d211bd6facc5404c5ea45c96a40661', 'https://tickets.puppetlabs.com/browse/PUP-5520', 'https://github.com/puppetlabs/puppet/pull/4480'),
('puppet', 102754, 49768915, 4411, 'Daemonized agent"s pidfile never removed if stopped while waiting for a certificate', 'In Solaris, starting the puppet service with {{puppet resource service puppet ensure=running}} creates {{/var/run/puppetlabs/agent.pid}} with the PID of the daemonized process. However, stopping the service correctly kills the service but leaves the pidfile in place with the old PID.\r\n\r\n{noformat}\r\n-bash-3.2# puppet resource service puppet ensure=running\r\nNotice: /Service[puppet]/ensure: ensure changed "stopped" to "running"\r\nservice { "puppet":\r\n  ensure => "running",\r\n}\r\n\r\n-bash-3.2# puppet resource service puppet\r\nservice { "puppet":\r\n  ensure => "running",\r\n  enable => "true",\r\n}\r\n\r\n-bash-3.2# cat /var/run/puppetlabs/agent.pid\r\n1343\r\n\r\n-bash-3.2# ps -elf | grep 1343\r\n 0 S     root  1343     1   0  40 20        ?   9011        ? 11:07:40 ?           0:00 /opt/puppetlabs/puppet/bin/ruby /op\r\n\r\n# Stopping the service\r\n-bash-3.2# puppet resource service puppet ensure=stopped\r\nNotice: /Service[puppet]/ensure: ensure changed "running" to "stopped"\r\nservice { "puppet":\r\n  ensure => "stopped",\r\n}\r\n\r\n-bash-3.2# puppet resource service puppet\r\nservice { "puppet":\r\n  ensure => "stopped",\r\n  enable => "false",\r\n}\r\n\r\n-bash-3.2# cat /var/run/puppetlabs/agent.pid\r\n1343\r\n\r\n-bash-3.2# ps -elf | grep puppet\r\n\r\n-bash-3.2# svcs puppet\r\nSTATE          STIME    FMRI\r\ndisabled       11:08:31 svc:/network/puppet:default\r\n{noformat}\r\n\r\nNote: this *only* affects agents which don"t have a signed certificate, and it only affects Solaris. This is due to the fact that our puppet service start script in Solaris ({{/lib/svc/method/puppet}}) only runs {{exec /opt/puppetlabs/bin/puppet agent}}, unlike other platforms which use the {{--no-daemonize}} option. This means that other platforms don"t even have a pidfile to begin with, since the daemon itself is not running.\r\n\r\nThe certificate aspect is due to the fact that when we can"t find a cert, we cycle and wait for it in {{Puppet::SSL::Host.wait_for_cert}} and eventually get hit with the stop signal. Something is preventing {{Puppet::Daemon.stop}} from ever being called, and thus the pidfile remains behind.\r\n\r\nThis fix will affect all daemonization code paths (master [--daemonize], master --no-daemonize, agent --onetime, agent --no-daemonize, agent [--daemonize]); we should verify all those modes still work, and when running as a service that shutdown cleans up correctly. See reproduction steps by [~whopper] below.', 'https://tickets.puppetlabs.com/browse/PUP-5422', 'https://github.com/puppetlabs/puppet/pull/4411', '2015-10-23T11:10:29.000-0700', '2016-07-20T17:08:05.000-0700', '2016-07-20T17:08:05.000-0700', 'Closed', '', 10, '0', 1, 6, 3, 3, '379c9fd5ca1a6ed5070a34b28b78f1ec49a5830e', 'https://tickets.puppetlabs.com/browse/PUP-5422', 'https://github.com/puppetlabs/puppet/pull/4411'),
('puppet', 98472, 49897565, 4416, 'Solaris (10) service provider returns before service refresh is complete', 'In Solaris 10 x86, refreshing a service causes it to be restarted, as expected. However, Puppet finishes the run and returns before the service has finished restarting, meaning that for a few seconds, {{puppet resource service <name>}} indicates that the service is stopped.\r\n\r\nQuerying again in a few seconds results in the status being "running" as expected:\r\ntest.pp:\r\n{noformat}\r\nservice { "puppet":}\r\n\r\nnotify {"Refreshing puppet":\r\n  notify => Service["puppet"]\r\n}\r\n{noformat}\r\n\r\n{noformat}\r\n-bash-3.2# puppet resource service puppet\r\nservice { "puppet":\r\n  ensure => "running",\r\n  enable => "true",\r\n}\r\n\r\n-bash-3.2# puppet apply test.pp\r\nNotice: Compiled catalog for koaxfaftdv5jllu.delivery.puppetlabs.net in environment production in 0.63 seconds\r\nNotice: Refreshing puppet\r\nNotice: /Stage[main]/Main/Notify[Refreshing puppet]/message: defined "message" as "Refreshing puppet"\r\nNotice: /Stage[main]/Main/Service[puppet]: Triggered "refresh" from 1 events\r\nNotice: Applied catalog in 0.09 seconds\r\n\r\n-bash-3.2# puppet resource service puppet\r\nservice { "puppet":\r\n  ensure => "stopped",\r\n  enable => "false",\r\n}\r\n\r\n(5 seconds later)\r\n-bash-3.2# puppet resource service puppet\r\nservice { "puppet":\r\n  ensure => "running",\r\n  enable => "true",\r\n}\r\n{noformat}', 'https://tickets.puppetlabs.com/browse/PUP-5262', 'https://github.com/puppetlabs/puppet/pull/4416', '2015-09-16T16:46:51.000-0700', '2016-07-20T17:12:52.000-0700', '2016-07-20T17:12:52.000-0700', 'Closed', '', 2, '0', 1, 71, 6, 3, '5e5a7c8a357b2cffa684ae67e98b7dfd252a55a9', 'https://tickets.puppetlabs.com/browse/PUP-5262', 'https://github.com/puppetlabs/puppet/pull/4416'),
('puppet', 101764, 49630323, 4403, 'AIX service provider returns before service operations are complete', 'In AIX, when we stop the puppet service with {{puppet resource service puppet ensure=stopped}},\r\npuppet returns before the service has actually finished stopping. AIX"s service manager takes a while to stop the service, and for a brief period puppet doesn"t understand what state the service is in:\r\n\r\n{noformat}\r\n-bash-3.2# /opt/puppetlabs/puppet/bin/puppet resource service puppet\r\nservice { "puppet":\r\n  enable => "false",\r\n}\r\n{noformat}', 'https://tickets.puppetlabs.com/browse/PUP-5387', 'https://github.com/puppetlabs/puppet/pull/4403', '2015-10-15T11:01:43.000-0700', '2016-07-20T17:15:31.000-0700', '2016-07-20T17:15:31.000-0700', 'Closed', '', 5, '0', 1, 46, 4, 2, '57733502713f9616c3b38001083524b96cd1585b', 'https://tickets.puppetlabs.com/browse/PUP-5387', 'https://github.com/puppetlabs/puppet/pull/4403'),
('puppet', 96273, 47931681, 4352, 'Don"t allow remote filebuckets to be listed', 'PUP-1388 made it possible to list remote filebuckets (and has not yet been released). When combined with the default auth.conf granting all authenticated nodes read/write access to the filebucket, then any authenticated node can trivially download all files that have ever been filebucketed from all nodes.\r\n\r\nThis is technically possible today, but much harder, because the node can only ask for files by checksum, and doesn"t know what other files have been backed up by other nodes.\r\n\r\nWe should only allow the {{list}} command to work with local filebuckets.', 'https://tickets.puppetlabs.com/browse/PUP-5151', 'https://github.com/puppetlabs/puppet/pull/4352', '2015-09-01T22:43:58.000-0700', '2016-07-20T17:18:13.000-0700', '2016-07-20T17:18:13.000-0700', 'Closed', '', 8, '0', 1, 27, 44, 5, '7563fa085691cecd07e3ab796b79b3c3c0ebc7d7', 'https://tickets.puppetlabs.com/browse/PUP-5151', 'https://github.com/puppetlabs/puppet/pull/4352'),
('puppet', 99093, 48194858, 4360, '"produces" statements seem not to work from a puppet agent run', 'Trying to {{export}} a capability when running {{puppet agent}} results in the following error:\r\n\r\n{code}\r\nError: Could not retrieve catalog from remote server: Error 400 on SERVER: Resource type Site::Pql does not produce Sql on node centos7-1.vm\r\n{code}\r\n\r\nThere is a {{Site::Pql produces Sql}} statement in the correct spot (next to the definition), but it seems not to have actually been evaluated.\r\n\r\nIf {{environment_timeout = unlimited}} is enabled and an environment catalog is retrieved first, subsequent agent runs succeed. This seems to indicate that the {{produces}} statements _are_ evaluated when compiling the environment catalog and then cached for the agent run. ', 'https://tickets.puppetlabs.com/browse/PUP-5275', 'https://github.com/puppetlabs/puppet/pull/4360', '2015-09-22T17:16:43.000-0700', '2016-07-21T10:23:26.000-0700', '2016-07-21T10:23:26.000-0700', 'Closed', '', 17, '0', 1, 4, 1, 1, '0fc6f0bd72b708c70f2a1d315cf9a8fc63dab45b', 'https://tickets.puppetlabs.com/browse/PUP-5275', 'https://github.com/puppetlabs/puppet/pull/4360'),
('puppet', 139002, 75421956, 5064, 'Group resource members order can break idempotence in Windows', 'Given the following hiera array:\r\n\r\n{code:java}\r\nlocal_admins:\r\n  - "root"\r\n  - "bob"\r\n  - "harry"\r\n  - "moe"\r\n  - "vagrant"\r\n{code}\r\n\r\nand the following manifest:\r\n\r\n{code:java}\r\nclass windows_users {\r\n  group { "Administrators":\r\n    ensure => present,\r\n    name => "Administrators",\r\n    auth_membership => true,\r\n    members => hiera("local_admins"),\r\n  }\r\n}\r\n{code}\r\n\r\nI am seeing a change every time the manifest runs:\r\n\r\n{code:java}\r\nC:\Users\Administrator>puppet agent -t\r\nInfo: Using configured environment "production"\r\nInfo: Retrieving pluginfacts\r\nInfo: Retrieving plugin\r\nInfo: Loading facts\r\nInfo: Caching catalog for pe-201611-agent-win2012\r\nInfo: Applying configuration version "1464303479"\r\nNotice: /Stage[main]/Windows_users/Group[Administrators]/members: members change\r\nd "PE-201611-AGENT\vagrant,PE-201611-AGENT\root,PE-201611-AGENT\bob,PE-201611-AG\r\nENT\harry,PE-201611-AGENT\moe" to "PE-201611-AGENT\root,PE-201611-AGENT\bob,PE-2\r\n01611-AGENT\harry,PE-201611-AGENT\moe,PE-201611-AGENT\vagrant"\r\nNotice: Applied catalog in 0.74 seconds\r\n{code}\r\n\r\nIf I change the order of the array elements:\r\n\r\n{code:java}\r\nlocal_admins:\r\n  - "vagrant"\r\n  - "root"\r\n  - "bob"\r\n  - "harry"\r\n  - "moe"\r\n{code}\r\n\r\nThere is no change when the manifest runs.\r\n', 'https://tickets.puppetlabs.com/browse/PUP-6450', 'https://github.com/puppetlabs/puppet/pull/5064', '2016-06-27T21:01:10.000-0700', '2016-07-25T09:46:56.000-0700', '2016-07-25T09:46:56.000-0700', 'Closed', 'windows', 8, '0', 2, 20, 6, 4, '998eabf95203d9205771f80f70f9605f28ba7ce9', 'https://tickets.puppetlabs.com/browse/PUP-6450', 'https://github.com/puppetlabs/puppet/pull/5064'),
('puppet', 98835, 74534902, 5038, 'Puppet scheduled_task provider on windows fails if non-ASCII characters are in Task Name', 'If there is a scheduled task with a Non-ASCII name  in the task library({{%SYSTEMROOT%/Tasks}}), {{scheduled_task}} provider will fail. \r\n\r\nOf course I don"t name scheduled task like that, but sometimes third-party program or the end users might do so.\r\n\r\nI tried set the {{codepage}} to {{1252}}, but the error occurs anyway. So I guess it"s a issue of Ruby again like [PUP-4333|https://tickets.puppetlabs.com/browse/PUP-4333]?\r\n\r\n\r\n{code}\r\nC:\Users\Administrator\Desktop>puppet apply sch.pp --debug --trace\r\n......\r\nInfo: Applying configuration version "1443053017"\r\nError: Could not set "present" on ensure: U+00AE to IBM437 in conversion from UTF-16LE to UTF-8 to IBM437 at 10:C:/Users/Admi\r\nC:/Program Files/Puppet Labs/Puppet/puppet/lib/puppet/util/windows/api_types.rb:58:in `encode"\r\nC:/Program Files/Puppet Labs/Puppet/puppet/lib/puppet/util/windows/api_types.rb:58:in `read_wide_string"\r\nC:/Program Files/Puppet Labs/Puppet/puppet/lib/puppet/util/windows/api_types.rb:69:in `block in read_arbitrary_wide_string_up\r\nC:/Program Files/Puppet Labs/Puppet/puppet/lib/puppet/util/windows/api_types.rb:67:in `upto"\r\nC:/Program Files/Puppet Labs/Puppet/puppet/lib/puppet/util/windows/api_types.rb:67:in `read_arbitrary_wide_string_up_to"\r\nC:/Program Files/Puppet Labs/Puppet/puppet/lib/puppet/util/windows/taskscheduler.rb:215:in `block (6 levels) in enum"\r\nC:/Program Files/Puppet Labs/Puppet/puppet/lib/puppet/util/windows/api_types.rb:97:in `read_com_memory_pointer"\r\nC:/Program Files/Puppet Labs/Puppet/puppet/lib/puppet/util/windows/taskscheduler.rb:214:in `block (5 levels) in enum"\r\nC:/Program Files/Puppet Labs/Puppet/puppet/lib/puppet/util/windows/taskscheduler.rb:213:in `each"\r\nC:/Program Files/Puppet Labs/Puppet/puppet/lib/puppet/util/windows/taskscheduler.rb:213:in `block (4 levels) in enum"\r\nC:/Program Files/Puppet Labs/Puppet/puppet/lib/puppet/util/windows/api_types.rb:97:in `read_com_memory_pointer"\r\nC:/Program Files/Puppet Labs/Puppet/puppet/lib/puppet/util/windows/taskscheduler.rb:210:in `block (3 levels) in enum"\r\nC:/Program Files/Puppet Labs/Puppet/puppet/lib/puppet/util/windows/taskscheduler.rb:204:in `initialize"\r\nC:/Program Files/Puppet Labs/Puppet/puppet/lib/puppet/util/windows/taskscheduler.rb:204:in `new"\r\nC:/Program Files/Puppet Labs/Puppet/puppet/lib/puppet/util/windows/taskscheduler.rb:204:in `block (2 levels) in enum"\r\nC:/Program Files/Puppet Labs/Puppet/puppet/lib/puppet/util/windows/taskscheduler.rb:203:in `initialize"\r\nC:/Program Files/Puppet Labs/Puppet/puppet/lib/puppet/util/windows/taskscheduler.rb:203:in `new"\r\nC:/Program Files/Puppet Labs/Puppet/puppet/lib/puppet/util/windows/taskscheduler.rb:203:in `block in enum"\r\nC:/Program Files/Puppet Labs/Puppet/puppet/lib/puppet/util/windows/com.rb:117:in `block in UseInstance"\r\nC:/Program Files/Puppet Labs/Puppet/puppet/lib/puppet/util/windows/com.rb:114:in `initialize"\r\nC:/Program Files/Puppet Labs/Puppet/puppet/lib/puppet/util/windows/com.rb:114:in `new"\r\nC:/Program Files/Puppet Labs/Puppet/puppet/lib/puppet/util/windows/com.rb:114:in `UseInstance"\r\nC:/Program Files/Puppet Labs/Puppet/puppet/lib/puppet/util/windows/taskscheduler.rb:202:in `enum"\r\nC:/Program Files/Puppet Labs/Puppet/puppet/lib/puppet/util/windows/taskscheduler.rb:514:in `new_work_item"\r\nC:/Program Files/Puppet Labs/Puppet/puppet/lib/puppet/util/windows/taskscheduler.rb:191:in `initialize"\r\nC:/Program Files/Puppet Labs/Puppet/puppet/lib/puppet/provider/scheduled_task/win32_taskscheduler.rb:214:in `new"\r\nC:/Program Files/Puppet Labs/Puppet/puppet/lib/puppet/provider/scheduled_task/win32_taskscheduler.rb:214:in `create"\r\nC:/Program Files/Puppet Labs/Puppet/puppet/lib/puppet/property/ensure.rb:16:in `block in defaultvalues"\r\nC:/Program Files/Puppet Labs/Puppet/puppet/lib/puppet/property.rb:197:in `call_valuemethod"\r\nC:/Program Files/Puppet Labs/Puppet/puppet/lib/puppet/property.rb:498:in `set"\r\nC:/Program Files/Puppet Labs/Puppet/puppet/lib/puppet/property.rb:581:in `sync"\r\nC:/Program Files/Puppet Labs/Puppet/puppet/lib/puppet/transaction/resource_harness.rb:204:in `sync"\r\nC:/Program Files/Puppet Labs/Puppet/puppet/lib/puppet/transaction/resource_harness.rb:128:in `sync_if_needed"\r\nC:/Program Files/Puppet Labs/Puppet/puppet/lib/puppet/transaction/resource_harness.rb:81:in `perform_changes"\r\nC:/Program Files/Puppet Labs/Puppet/puppet/lib/puppet/transaction/resource_harness.rb:20:in `evaluate"\r\nC:/Program Files/Puppet Labs/Puppet/puppet/lib/puppet/transaction.rb:204:in `apply"\r\nC:/Program Files/Puppet Labs/Puppet/puppet/lib/puppet/transaction.rb:217:in `eval_resource"\r\nC:/Program Files/Puppet Labs/Puppet/puppet/lib/puppet/transaction.rb:147:in `call"\r\nC:/Program Files/Puppet Labs/Puppet/puppet/lib/puppet/transaction.rb:147:in `block (2 levels) in evaluate"\r\nC:/Program Files/Puppet Labs/Puppet/puppet/lib/puppet/util.rb:335:in `block in thinmark"\r\nC:/Program Files/Puppet Labs/Puppet/sys/ruby/lib/ruby/1.9.1/benchmark.rb:295:in `realtime"\r\nC:/Program Files/Puppet Labs/Puppet/puppet/lib/puppet/util.rb:334:in `thinmark"\r\nC:/Program Files/Puppet Labs/Puppet/puppet/lib/puppet/transaction.rb:147:in `block in evaluate"\r\nC:/Program Files/Puppet Labs/Puppet/puppet/lib/puppet/graph/relationship_graph.rb:118:in `traverse"\r\nC:/Program Files/Puppet Labs/Puppet/puppet/lib/puppet/transaction.rb:138:in `evaluate"\r\nC:/Program Files/Puppet Labs/Puppet/puppet/lib/puppet/resource/catalog.rb:169:in `block in apply"\r\nC:/Program Files/Puppet Labs/Puppet/puppet/lib/puppet/util/log.rb:149:in `with_destination"\r\nC:/Program Files/Puppet Labs/Puppet/puppet/lib/puppet/transaction/report.rb:112:in `as_logging_destination"\r\nC:/Program Files/Puppet Labs/Puppet/puppet/lib/puppet/resource/catalog.rb:168:in `apply"\r\nC:/Program Files/Puppet Labs/Puppet/puppet/lib/puppet/configurer.rb:120:in `block in apply_catalog"\r\nC:/Program Files/Puppet Labs/Puppet/puppet/lib/puppet/util.rb:161:in `block in benchmark"\r\nC:/Program Files/Puppet Labs/Puppet/sys/ruby/lib/ruby/1.9.1/benchmark.rb:295:in `realtime"\r\nC:/Program Files/Puppet Labs/Puppet/puppet/lib/puppet/util.rb:160:in `benchmark"\r\nC:/Program Files/Puppet Labs/Puppet/puppet/lib/puppet/configurer.rb:119:in `apply_catalog"\r\nC:/Program Files/Puppet Labs/Puppet/puppet/lib/puppet/configurer.rb:227:in `run_internal"\r\nC:/Program Files/Puppet Labs/Puppet/puppet/lib/puppet/configurer.rb:134:in `block in run"\r\nC:/Program Files/Puppet Labs/Puppet/puppet/lib/puppet/context.rb:64:in `override"\r\nC:/Program Files/Puppet Labs/Puppet/puppet/lib/puppet.rb:244:in `override"\r\nC:/Program Files/Puppet Labs/Puppet/puppet/lib/puppet/configurer.rb:133:in `run"\r\nC:/Program Files/Puppet Labs/Puppet/puppet/lib/puppet/application/apply.rb:302:in `apply_catalog"\r\nC:/Program Files/Puppet Labs/Puppet/puppet/lib/puppet/application/apply.rb:236:in `block in main"\r\nC:/Program Files/Puppet Labs/Puppet/puppet/lib/puppet/context.rb:64:in `override"\r\nC:/Program Files/Puppet Labs/Puppet/puppet/lib/puppet.rb:244:in `override"\r\nC:/Program Files/Puppet Labs/Puppet/puppet/lib/puppet/application/apply.rb:198:in `main"\r\nC:/Program Files/Puppet Labs/Puppet/puppet/lib/puppet/application/apply.rb:159:in `run_command"\r\nC:/Program Files/Puppet Labs/Puppet/puppet/lib/puppet/application.rb:381:in `block (2 levels) in run"\r\nC:/Program Files/Puppet Labs/Puppet/puppet/lib/puppet/application.rb:507:in `plugin_hook"\r\nC:/Program Files/Puppet Labs/Puppet/puppet/lib/puppet/application.rb:381:in `block in run"\r\nC:/Program Files/Puppet Labs/Puppet/puppet/lib/puppet/util.rb:496:in `exit_on_fail"\r\nC:/Program Files/Puppet Labs/Puppet/puppet/lib/puppet/application.rb:381:in `run"\r\nC:/Program Files/Puppet Labs/Puppet/puppet/lib/puppet/util/command_line.rb:146:in `run"\r\nC:/Program Files/Puppet Labs/Puppet/puppet/lib/puppet/util/command_line.rb:92:in `execute"\r\nC:/Program Files/Puppet Labs/Puppet/puppet/bin/puppet:8:in `<main>"\r\nError: Could not set "present" on ensure: U+00AE to IBM437 in conversion from UTF-16LE to UTF-8 to IBM437 at 10:C:/Users/Admi\r\nC:/Program Files/Puppet Labs/Puppet/puppet/lib/puppet/util/windows/api_types.rb:58:in `encode"\r\nC:/Program Files/Puppet Labs/Puppet/puppet/lib/puppet/util/windows/api_types.rb:58:in `read_wide_string"\r\nC:/Program Files/Puppet Labs/Puppet/puppet/lib/puppet/util/windows/api_types.rb:69:in `block in read_arbitrary_wide_string_up\r\nC:/Program Files/Puppet Labs/Puppet/puppet/lib/puppet/util/windows/api_types.rb:67:in `upto"\r\nC:/Program Files/Puppet Labs/Puppet/puppet/lib/puppet/util/windows/api_types.rb:67:in `read_arbitrary_wide_string_up_to"\r\nC:/Program Files/Puppet Labs/Puppet/puppet/lib/puppet/util/windows/taskscheduler.rb:215:in `block (6 levels) in enum"\r\nC:/Program Files/Puppet Labs/Puppet/puppet/lib/puppet/util/windows/api_types.rb:97:in `read_com_memory_pointer"\r\nC:/Program Files/Puppet Labs/Puppet/puppet/lib/puppet/util/windows/taskscheduler.rb:214:in `block (5 levels) in enum"\r\nC:/Program Files/Puppet Labs/Puppet/puppet/lib/puppet/util/windows/taskscheduler.rb:213:in `each"\r\nC:/Program Files/Puppet Labs/Puppet/puppet/lib/puppet/util/windows/taskscheduler.rb:213:in `block (4 levels) in enum"\r\nC:/Program Files/Puppet Labs/Puppet/puppet/lib/puppet/util/windows/api_types.rb:97:in `read_com_memory_pointer"\r\nC:/Program Files/Puppet Labs/Puppet/puppet/lib/puppet/util/windows/taskscheduler.rb:210:in `block (3 levels) in enum"\r\nC:/Program Files/Puppet Labs/Puppet/puppet/lib/puppet/util/windows/taskscheduler.rb:204:in `initialize"\r\nC:/Program Files/Puppet Labs/Puppet/puppet/lib/puppet/util/windows/taskscheduler.rb:204:in `new"\r\nC:/Program Files/Puppet Labs/Puppet/puppet/lib/puppet/util/windows/taskscheduler.rb:204:in `block (2 levels) in enum"\r\nC:/Program Files/Puppet Labs/Puppet/puppet/lib/puppet/util/windows/taskscheduler.rb:203:in `initialize"\r\nC:/Program Files/Puppet Labs/Puppet/puppet/lib/puppet/util/windows/taskscheduler.rb:203:in `new"\r\nC:/Program Files/Puppet Labs/Puppet/puppet/lib/puppet/util/windows/taskscheduler.rb:203:in `block in enum"\r\nC:/Program Files/Puppet Labs/Puppet/puppet/lib/puppet/util/windows/com.rb:117:in `block in UseInstance"\r\nC:/Program Files/Puppet Labs/Puppet/puppet/lib/puppet/util/windows/com.rb:114:in `initialize"\r\nC:/Program Files/Puppet Labs/Puppet/puppet/lib/puppet/util/windows/com.rb:114:in `new"\r\nC:/Program Files/Puppet Labs/Puppet/puppet/lib/puppet/util/windows/com.rb:114:in `UseInstance"\r\nC:/Program Files/Puppet Labs/Puppet/puppet/lib/puppet/util/windows/taskscheduler.rb:202:in `enum"\r\nC:/Program Files/Puppet Labs/Puppet/puppet/lib/puppet/util/windows/taskscheduler.rb:514:in `new_work_item"\r\nC:/Program Files/Puppet Labs/Puppet/puppet/lib/puppet/util/windows/taskscheduler.rb:191:in `initialize"\r\nC:/Program Files/Puppet Labs/Puppet/puppet/lib/puppet/provider/scheduled_task/win32_taskscheduler.rb:214:in `new"\r\nC:/Program Files/Puppet Labs/Puppet/puppet/lib/puppet/provider/scheduled_task/win32_taskscheduler.rb:214:in `create"\r\nC:/Program Files/Puppet Labs/Puppet/puppet/lib/puppet/property/ensure.rb:16:in `block in defaultvalues"\r\nC:/Program Files/Puppet Labs/Puppet/puppet/lib/puppet/property.rb:197:in `call_valuemethod"\r\nC:/Program Files/Puppet Labs/Puppet/puppet/lib/puppet/property.rb:498:in `set"\r\nC:/Program Files/Puppet Labs/Puppet/puppet/lib/puppet/property.rb:581:in `sync"\r\nC:/Program Files/Puppet Labs/Puppet/puppet/lib/puppet/transaction/resource_harness.rb:204:in `sync"\r\nC:/Program Files/Puppet Labs/Puppet/puppet/lib/puppet/transaction/resource_harness.rb:128:in `sync_if_needed"\r\nC:/Program Files/Puppet Labs/Puppet/puppet/lib/puppet/transaction/resource_harness.rb:81:in `perform_changes"\r\nC:/Program Files/Puppet Labs/Puppet/puppet/lib/puppet/transaction/resource_harness.rb:20:in `evaluate"\r\nC:/Program Files/Puppet Labs/Puppet/puppet/lib/puppet/transaction.rb:204:in `apply"\r\nC:/Program Files/Puppet Labs/Puppet/puppet/lib/puppet/transaction.rb:217:in `eval_resource"\r\nC:/Program Files/Puppet Labs/Puppet/puppet/lib/puppet/transaction.rb:147:in `call"\r\nC:/Program Files/Puppet Labs/Puppet/puppet/lib/puppet/transaction.rb:147:in `block (2 levels) in evaluate"\r\nC:/Program Files/Puppet Labs/Puppet/puppet/lib/puppet/util.rb:335:in `block in thinmark"\r\nC:/Program Files/Puppet Labs/Puppet/sys/ruby/lib/ruby/1.9.1/benchmark.rb:295:in `realtime"\r\nC:/Program Files/Puppet Labs/Puppet/puppet/lib/puppet/util.rb:334:in `thinmark"\r\nC:/Program Files/Puppet Labs/Puppet/puppet/lib/puppet/transaction.rb:147:in `block in evaluate"\r\nC:/Program Files/Puppet Labs/Puppet/puppet/lib/puppet/graph/relationship_graph.rb:118:in `traverse"\r\nC:/Program Files/Puppet Labs/Puppet/puppet/lib/puppet/transaction.rb:138:in `evaluate"\r\nC:/Program Files/Puppet Labs/Puppet/puppet/lib/puppet/resource/catalog.rb:169:in `block in apply"\r\nC:/Program Files/Puppet Labs/Puppet/puppet/lib/puppet/util/log.rb:149:in `with_destination"\r\nC:/Program Files/Puppet Labs/Puppet/puppet/lib/puppet/transaction/report.rb:112:in `as_logging_destination"\r\nC:/Program Files/Puppet Labs/Puppet/puppet/lib/puppet/resource/catalog.rb:168:in `apply"\r\nC:/Program Files/Puppet Labs/Puppet/puppet/lib/puppet/configurer.rb:120:in `block in apply_catalog"\r\nC:/Program Files/Puppet Labs/Puppet/puppet/lib/puppet/util.rb:161:in `block in benchmark"\r\nC:/Program Files/Puppet Labs/Puppet/sys/ruby/lib/ruby/1.9.1/benchmark.rb:295:in `realtime"\r\nC:/Program Files/Puppet Labs/Puppet/puppet/lib/puppet/util.rb:160:in `benchmark"\r\nC:/Program Files/Puppet Labs/Puppet/puppet/lib/puppet/configurer.rb:119:in `apply_catalog"\r\nC:/Program Files/Puppet Labs/Puppet/puppet/lib/puppet/configurer.rb:227:in `run_internal"\r\nC:/Program Files/Puppet Labs/Puppet/puppet/lib/puppet/configurer.rb:134:in `block in run"\r\nC:/Program Files/Puppet Labs/Puppet/puppet/lib/puppet/context.rb:64:in `override"\r\nC:/Program Files/Puppet Labs/Puppet/puppet/lib/puppet.rb:244:in `override"\r\nC:/Program Files/Puppet Labs/Puppet/puppet/lib/puppet/configurer.rb:133:in `run"\r\nC:/Program Files/Puppet Labs/Puppet/puppet/lib/puppet/application/apply.rb:302:in `apply_catalog"\r\nC:/Program Files/Puppet Labs/Puppet/puppet/lib/puppet/application/apply.rb:236:in `block in main"\r\nC:/Program Files/Puppet Labs/Puppet/puppet/lib/puppet/context.rb:64:in `override"\r\nC:/Program Files/Puppet Labs/Puppet/puppet/lib/puppet.rb:244:in `override"\r\nC:/Program Files/Puppet Labs/Puppet/puppet/lib/puppet/application/apply.rb:198:in `main"\r\nC:/Program Files/Puppet Labs/Puppet/puppet/lib/puppet/application/apply.rb:159:in `run_command"\r\nC:/Program Files/Puppet Labs/Puppet/puppet/lib/puppet/application.rb:381:in `block (2 levels) in run"\r\nC:/Program Files/Puppet Labs/Puppet/puppet/lib/puppet/application.rb:507:in `plugin_hook"\r\nC:/Program Files/Puppet Labs/Puppet/puppet/lib/puppet/application.rb:381:in `block in run"\r\nC:/Program Files/Puppet Labs/Puppet/puppet/lib/puppet/util.rb:496:in `exit_on_fail"\r\nC:/Program Files/Puppet Labs/Puppet/puppet/lib/puppet/application.rb:381:in `run"\r\nC:/Program Files/Puppet Labs/Puppet/puppet/lib/puppet/util/command_line.rb:146:in `run"\r\nC:/Program Files/Puppet Labs/Puppet/puppet/lib/puppet/util/command_line.rb:92:in `execute"\r\nC:/Program Files/Puppet Labs/Puppet/puppet/bin/puppet:8:in `<main>"\r\nWrapped exception:\r\nU+00AE to IBM437 in conversion from UTF-16LE to UTF-8 to IBM437\r\nC:/Program Files/Puppet Labs/Puppet/puppet/lib/puppet/util/windows/api_types.rb:58:in `encode"\r\nC:/Program Files/Puppet Labs/Puppet/puppet/lib/puppet/util/windows/api_types.rb:58:in `read_wide_string"\r\nC:/Program Files/Puppet Labs/Puppet/puppet/lib/puppet/util/windows/api_types.rb:69:in `block in read_arbitrary_wide_string_up\r\nC:/Program Files/Puppet Labs/Puppet/puppet/lib/puppet/util/windows/api_types.rb:67:in `upto"\r\nC:/Program Files/Puppet Labs/Puppet/puppet/lib/puppet/util/windows/api_types.rb:67:in `read_arbitrary_wide_string_up_to"\r\nC:/Program Files/Puppet Labs/Puppet/puppet/lib/puppet/util/windows/taskscheduler.rb:215:in `block (6 levels) in enum"\r\nC:/Program Files/Puppet Labs/Puppet/puppet/lib/puppet/util/windows/api_types.rb:97:in `read_com_memory_pointer"\r\nC:/Program Files/Puppet Labs/Puppet/puppet/lib/puppet/util/windows/taskscheduler.rb:214:in `block (5 levels) in enum"\r\nC:/Program Files/Puppet Labs/Puppet/puppet/lib/puppet/util/windows/taskscheduler.rb:213:in `each"\r\nC:/Program Files/Puppet Labs/Puppet/puppet/lib/puppet/util/windows/taskscheduler.rb:213:in `block (4 levels) in enum"\r\nC:/Program Files/Puppet Labs/Puppet/puppet/lib/puppet/util/windows/api_types.rb:97:in `read_com_memory_pointer"\r\nC:/Program Files/Puppet Labs/Puppet/puppet/lib/puppet/util/windows/taskscheduler.rb:210:in `block (3 levels) in enum"\r\nC:/Program Files/Puppet Labs/Puppet/puppet/lib/puppet/util/windows/taskscheduler.rb:204:in `initialize"\r\nC:/Program Files/Puppet Labs/Puppet/puppet/lib/puppet/util/windows/taskscheduler.rb:204:in `new"\r\nC:/Program Files/Puppet Labs/Puppet/puppet/lib/puppet/util/windows/taskscheduler.rb:204:in `block (2 levels) in enum"\r\nC:/Program Files/Puppet Labs/Puppet/puppet/lib/puppet/util/windows/taskscheduler.rb:203:in `initialize"\r\nC:/Program Files/Puppet Labs/Puppet/puppet/lib/puppet/util/windows/taskscheduler.rb:203:in `new"\r\nC:/Program Files/Puppet Labs/Puppet/puppet/lib/puppet/util/windows/taskscheduler.rb:203:in `block in enum"\r\nC:/Program Files/Puppet Labs/Puppet/puppet/lib/puppet/util/windows/com.rb:117:in `block in UseInstance"\r\nC:/Program Files/Puppet Labs/Puppet/puppet/lib/puppet/util/windows/com.rb:114:in `initialize"\r\nC:/Program Files/Puppet Labs/Puppet/puppet/lib/puppet/util/windows/com.rb:114:in `new"\r\nC:/Program Files/Puppet Labs/Puppet/puppet/lib/puppet/util/windows/com.rb:114:in `UseInstance"\r\nC:/Program Files/Puppet Labs/Puppet/puppet/lib/puppet/util/windows/taskscheduler.rb:202:in `enum"\r\nC:/Program Files/Puppet Labs/Puppet/puppet/lib/puppet/util/windows/taskscheduler.rb:514:in `new_work_item"\r\nC:/Program Files/Puppet Labs/Puppet/puppet/lib/puppet/util/windows/taskscheduler.rb:191:in `initialize"\r\nC:/Program Files/Puppet Labs/Puppet/puppet/lib/puppet/provider/scheduled_task/win32_taskscheduler.rb:214:in `new"\r\nC:/Program Files/Puppet Labs/Puppet/puppet/lib/puppet/provider/scheduled_task/win32_taskscheduler.rb:214:in `create"\r\nC:/Program Files/Puppet Labs/Puppet/puppet/lib/puppet/property/ensure.rb:16:in `block in defaultvalues"\r\nC:/Program Files/Puppet Labs/Puppet/puppet/lib/puppet/property.rb:197:in `call_valuemethod"\r\nC:/Program Files/Puppet Labs/Puppet/puppet/lib/puppet/property.rb:498:in `set"\r\nC:/Program Files/Puppet Labs/Puppet/puppet/lib/puppet/property.rb:581:in `sync"\r\nC:/Program Files/Puppet Labs/Puppet/puppet/lib/puppet/transaction/resource_harness.rb:204:in `sync"\r\nC:/Program Files/Puppet Labs/Puppet/puppet/lib/puppet/transaction/resource_harness.rb:128:in `sync_if_needed"\r\nC:/Program Files/Puppet Labs/Puppet/puppet/lib/puppet/transaction/resource_harness.rb:81:in `perform_changes"\r\nC:/Program Files/Puppet Labs/Puppet/puppet/lib/puppet/transaction/resource_harness.rb:20:in `evaluate"\r\nC:/Program Files/Puppet Labs/Puppet/puppet/lib/puppet/transaction.rb:204:in `apply"\r\nC:/Program Files/Puppet Labs/Puppet/puppet/lib/puppet/transaction.rb:217:in `eval_resource"\r\nC:/Program Files/Puppet Labs/Puppet/puppet/lib/puppet/transaction.rb:147:in `call"\r\nC:/Program Files/Puppet Labs/Puppet/puppet/lib/puppet/transaction.rb:147:in `block (2 levels) in evaluate"\r\nC:/Program Files/Puppet Labs/Puppet/puppet/lib/puppet/util.rb:335:in `block in thinmark"\r\nC:/Program Files/Puppet Labs/Puppet/sys/ruby/lib/ruby/1.9.1/benchmark.rb:295:in `realtime"\r\nC:/Program Files/Puppet Labs/Puppet/puppet/lib/puppet/util.rb:334:in `thinmark"\r\nC:/Program Files/Puppet Labs/Puppet/puppet/lib/puppet/transaction.rb:147:in `block in evaluate"\r\nC:/Program Files/Puppet Labs/Puppet/puppet/lib/puppet/graph/relationship_graph.rb:118:in `traverse"\r\nC:/Program Files/Puppet Labs/Puppet/puppet/lib/puppet/transaction.rb:138:in `evaluate"\r\nC:/Program Files/Puppet Labs/Puppet/puppet/lib/puppet/resource/catalog.rb:169:in `block in apply"\r\nC:/Program Files/Puppet Labs/Puppet/puppet/lib/puppet/util/log.rb:149:in `with_destination"\r\nC:/Program Files/Puppet Labs/Puppet/puppet/lib/puppet/transaction/report.rb:112:in `as_logging_destination"\r\nC:/Program Files/Puppet Labs/Puppet/puppet/lib/puppet/resource/catalog.rb:168:in `apply"\r\nC:/Program Files/Puppet Labs/Puppet/puppet/lib/puppet/configurer.rb:120:in `block in apply_catalog"\r\nC:/Program Files/Puppet Labs/Puppet/puppet/lib/puppet/util.rb:161:in `block in benchmark"\r\nC:/Program Files/Puppet Labs/Puppet/sys/ruby/lib/ruby/1.9.1/benchmark.rb:295:in `realtime"\r\nC:/Program Files/Puppet Labs/Puppet/puppet/lib/puppet/util.rb:160:in `benchmark"\r\nC:/Program Files/Puppet Labs/Puppet/puppet/lib/puppet/configurer.rb:119:in `apply_catalog"\r\nC:/Program Files/Puppet Labs/Puppet/puppet/lib/puppet/configurer.rb:227:in `run_internal"\r\nC:/Program Files/Puppet Labs/Puppet/puppet/lib/puppet/configurer.rb:134:in `block in run"\r\nC:/Program Files/Puppet Labs/Puppet/puppet/lib/puppet/context.rb:64:in `override"\r\nC:/Program Files/Puppet Labs/Puppet/puppet/lib/puppet.rb:244:in `override"\r\nC:/Program Files/Puppet Labs/Puppet/puppet/lib/puppet/configurer.rb:133:in `run"\r\nC:/Program Files/Puppet Labs/Puppet/puppet/lib/puppet/application/apply.rb:302:in `apply_catalog"\r\nC:/Program Files/Puppet Labs/Puppet/puppet/lib/puppet/application/apply.rb:236:in `block in main"\r\nC:/Program Files/Puppet Labs/Puppet/puppet/lib/puppet/context.rb:64:in `override"\r\nC:/Program Files/Puppet Labs/Puppet/puppet/lib/puppet.rb:244:in `override"\r\nC:/Program Files/Puppet Labs/Puppet/puppet/lib/puppet/application/apply.rb:198:in `main"\r\nC:/Program Files/Puppet Labs/Puppet/puppet/lib/puppet/application/apply.rb:159:in `run_command"\r\nC:/Program Files/Puppet Labs/Puppet/puppet/lib/puppet/application.rb:381:in `block (2 levels) in run"\r\nC:/Program Files/Puppet Labs/Puppet/puppet/lib/puppet/application.rb:507:in `plugin_hook"\r\nC:/Program Files/Puppet Labs/Puppet/puppet/lib/puppet/application.rb:381:in `block in run"\r\nC:/Program Files/Puppet Labs/Puppet/puppet/lib/puppet/util.rb:496:in `exit_on_fail"\r\nC:/Program Files/Puppet Labs/Puppet/puppet/lib/puppet/application.rb:381:in `run"\r\nC:/Program Files/Puppet Labs/Puppet/puppet/lib/puppet/util/command_line.rb:146:in `run"\r\nC:/Program Files/Puppet Labs/Puppet/puppet/lib/puppet/util/command_line.rb:92:in `execute"\r\nC:/Program Files/Puppet Labs/Puppet/puppet/bin/puppet:8:in `<main>"\r\nError: /Stage[main]/Main/Scheduled_task[test]/ensure: change from absent to present failed: Could not set "present" on ensure\r\nversion from UTF-16LE to UTF-8 to IBM437 at 10:C:/Users/Administrator/Desktop/sch.pp\r\nDebug: Finishing transaction 34518192\r\nDebug: Storing state\r\nDebug: Stored state in 0.06 seconds\r\nNotice: Finished catalog run in 0.23 seconds\r\nDebug: Using settings: adding file resource "rrddir": "File[C:/ProgramData/PuppetLabs/puppet/var/rrd]{:path=>"C:/ProgramData/\r\n", :mode=>"750", :ensure=>:directory, :loglevel=>:debug, :links=>:follow, :backup=>false}"\r\nDebug: Finishing transaction 33852696\r\nDebug: Received report to process from win2k8sp2x86\r\nDebug: Evicting cache entry for environment "devel"\r\nDebug: Caching environment "devel" (ttl = 0 sec)\r\nDebug: Processing report from win2k8sp2x86 with processor Puppet::Reports::Store\r\n\r\nC:\Users\Administrator\Desktop>\r\n\r\n{code}\r\n', 'https://tickets.puppetlabs.com/browse/PUP-5269', 'https://github.com/puppetlabs/puppet/pull/5038', '2015-09-21T08:30:48.000-0700', '2016-07-25T09:46:56.000-0700', '2016-07-25T09:46:56.000-0700', 'Closed', 'puppet-agent;scheduled_task;windows', 5, '0', 3, 94, 21, 4, '8cd0c5c020945e61ff540086a3b83a6a1e647af0', 'https://tickets.puppetlabs.com/browse/PUP-5269', 'https://github.com/puppetlabs/puppet/pull/5038');
