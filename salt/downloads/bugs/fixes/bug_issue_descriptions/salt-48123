With 2018.3.0 (but not with 2017.7.2), if file.directory with recurse encounters a broken symbolic link, it aborts.  I think ideally it would at worst log about it and continue.