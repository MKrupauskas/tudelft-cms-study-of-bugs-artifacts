Creating new issue because I don't have the ability to reopen one.
#11660 is _not_ fixed.  The change that was made (#11674) returns 'localhost' when FQDN lookup fails, whereas the stock python socket.getfqdn() returns the short hostname.  I don't think returning 'localhost' should ever be a fallback here: the custom code in salt should fall back to the standard implementation provided by the language in order to give us a consistent result.
